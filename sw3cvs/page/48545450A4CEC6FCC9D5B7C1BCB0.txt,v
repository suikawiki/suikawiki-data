head	1.6;
access;
symbols
	suikawiki3-final:1.6
	before-db-leaffile:1.5
	after-upgrade-to-suikawiki-3:1.5
	before-fork-suikawiki3:1.5
	after-restore-20040122:1.5;
locks; strict;
comment	@# @;


1.6
date	2004.05.23.02.02.59;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2003.12.23.02.03.24;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2003.11.23.02.02.32;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2003.07.29.07.17.12;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2003.01.26.04.49.32;	author w;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.29.12.01.57;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.6
log
@auto-committed
@
text
@#?SuikaWiki/0.9 page-icon="HTTP"
[3] [[HTTP]] は、二種類の日付・時刻表現形式を定義しています。
一つは、絶対時刻表現 ([CODE(ABNF)[HTTP-Date]]) で、
更に細かく3つの形式に分けることができます。
もう一つは相対時刻表現 ([RUBY[Δ][デルタ]]秒) です。

[[#comment]]

* 絶対時刻表現

[13] HTTP に限らず、様々なプロトコルや応用で、
日付と時刻を表現するために色々な方法が考えられてきました。
そのような状況下で HTTP 
は仕様が策定されたり実装されたりしてきたために、
それぞれが自分の好きな書式 (あるいは実装が楽な書式)
を採用していました。

HTTP RFC では、もっとも良く使われていた3つの書式
([Q[RFC 822 (RFC 1123 で改訂) 形式]],
[Q[RFC 850 形式]], [Q[asctime 形式]])
が公式に認められ、特に 822 の形式を推奨しています。
しかし、それ以外の書式にもできるだけ対応することもすすめています。

[4] HTTP が日付に認めている形式のうち、 
[Q[[[RFC 822]]  ([[RFC 1123]] で改訂) 形式]]は、
RFC 822 + 1123 で定義されている形式の部分集合で、 
RFC 822 が認めていた要素間の [CODE(ABNF)[[[linear-white-space]]]]
を必要な部分のみ [CODE(ABNF)[[[SP]]]] と厳格にし、
数字の桁数を揃え、[[時間帯]]については 
[CODE(822)[[[GMT]]]] のみ認めるとしています。

[12] [Q[[[RFC 850]] 形式]]とされているものは、 RFC 850 
によると [[ARPANET]] の日付形式であり、
[WEAK[(RFC 850 の他の部分から推察すると)]]
[[RFC 822の日付形式]]ではないかと思えますが、よく見ると RFC 822 
の形式とはやや異なり、その前の版である
[[RFC 733の日付形式]]に一致することが分かります。
ただし、 [[RFC 733]] は年号を4桁でも良いとしていますが、
HTTP の [Q[RFC 850 形式]]は2桁しか認めておらず、
この点で矛盾しています。

[5]
[[RFC 2069]] 『An Extension to HTTP : Digest Access Authentication』
は、 2069 の定義する認証関係のプロトコル要素内では [[RFC 1123]] 
形式のみを認めています。 <urn:ietf:rfc:2069>

[6]
Netscape の原 [CODE(HTTP)[[[Cookie]]]] 提案では 
[CODE(HTTP)[[[expires]]]] 属性で使われる日付形式を
[Q[RFC 850 形式]]としています。 ([[RFC 2109]] <urn:ietf:rfc:2109> 
参照。) 現実にはいろいろ問題があります。
詳しくは [CODE(WikiPage)[[[Cookieの日付形式]]]]を参照してください。

[7]
[[RFC 2518]] ([[WebDAV]]) では上記の [CODE(ABNF)[HTTP-Date]] と 
[[ISO 8601の日付形式]]を使い分けています。

[1] 古い HTTP/1.0 サーバーの形式(の1つ): 
[SAMP[Tue Nov 23 16:00:43 1993 GMT]]

[2] >>1 [[C]] の関数で返される形式ですかな。

[[#comment]]

*仕様書から
**RFC 1945 (HTTP/1.0); RFC 2068・2616 (HTTP/1.1) 3.3 Date/Time Formats
[INS[
***RFC 2068・2616 3.3.1 Full Date
]INS]
>HTTP[DEL[/1.0 [INS[{1945}]]]] applications have historically allowed three different
formats for the representation of date/time stamps:

HTTP 応用は歴史的に日時を表す3つの書式を認めています。

>
-       [SAMP(HTTP)[Sun, 06 Nov 1994 08:49:37 GMT]]    ; RFC 822, updated by RFC 1123
-       Sunday, 06-Nov-94 08:49:37 GMT]]   ; RFC 850, obsoleted by RFC 1036
-       [SAMP(HTTP)[Sun Nov  6 08:49:37 1994]]         ; ANSI C's asctime() format

> The first format is preferred as an Internet standard and represents
a fixed-length subset of that defined by RFC 1123  (an update to
RFC 822). The second format is in common use, but is based on the
obsolete RFC 850  date format and lacks a four-digit year.
[DEL[[INS[{1945}]] HTTP/1.0]] [INS[[INS[{2068,2616}]] HTTP/1.1]] clients and servers that parse the date value
[DEL[[INS[{1945}]] should]] [INS[[INS[{2068,2616}]] MUST]] accept all three formats [INS[[INS[{2068,2616}]] (for compatibility with HTTP/1.0)]], though they [DEL[[INS[{1945}]] must never generate the third (asctime) format]] [INS[[INS[{2068,2616}]] MUST only generate the RFC 1123 format for representing HTTP-date values in header fields]].

最初の書式は Internet 標準で好ましいものであり、
RFC 1123 (RFC 822 の更新) で定義されるものの固定長部分集合です。
2番目の書式は広く使われていますが、廃止されている RFC 850 日付形式
で4桁の年号を表せません。
日付値を解析する HTTP クライアント及び鯖は、 [INS[(HTTP/1.0 との互換性のため、)]]
これら3つ全ての日付形式を受け付け[DEL[るべきです]][INS['''なければなりません''']]が、[DEL[3つ目の asctime 形式は生成してはなりません]][INS[頭欄内の [CODE(ABNF)[HTTP-date]] の値表現としては RFC 1123 形式のみを生成し'''なければなりません''']]。

> Note: Recipients of date values are encouraged to be robust in
accepting date values that may have been generated by non-HTTP
applications, as is sometimes the case when retrieving or posting
messages via proxies/gateways to SMTP or NNTP.

註: 日付値の受信者は非 HTTP 応用が生成したであろう日付値も
受け入れられるように柔軟であることを推奨します。記事を
SMTP や NNTP のプロキシや関門から記事を受け取ったり
投稿したりすることもあるからです。

> All HTTP[DEL[/1.0 [INS[{1945}]]]] date/time stamps [DEL[[INS[{1945}]] must]] [INS[[INS[{2068,2616}]] MUST]] be represented 
in [DEL[[INS[{1945}]] Universal Time (UT), also known as]] Greenwich Mean Time (GMT), 
without exception. [INS[[INS[{2616}]] For the purposes of HTTP, GMT is exactly equal to UTC (Coordinated Universal Time).]]
This is indicated in the first two formats by the inclusion of "GMT"
as the three-letter abbreviation for time zone, and [DEL[[INS[{1945}]] should]] [INS[[INS[{2068,2616}]] MUST]] be assumed when reading the asctime format. [INS[[INS[{2616}]] HTTP-date is case sensitive and MUST NOT include additional LWS beyond that specifically included as SP in the grammar.]]

全ての HTTP 日時印は例外無くグリニッジ標準時 (GMT)
で表されてい[DEL[る必要があります]][INS['''なければなりません''']]。 [INS[HTTP の範囲では、 GMT は UTC (協定世界時) と同じ物です。]]
これは「GMT」を時間帯の3文字略称として含めている最初の2つの書式
についてであり、 asctime 形式を読む時はそう仮定[DEL[すべきです]][INS['''しなければなりません''']]。[INS[[CODE(ABNF)[HTTP-date]] では大文字・小文字の区別は無く、文法で [CODE(ABNF)[SP]] が入ると示した場所以外で [CODE(ABNF)[LWS]] を含めては'''なりません'''。]]

>
       HTTP-date      = rfc1123-date | rfc850-date | asctime-date
>
       rfc1123-date   = wkday "," SP date1 SP time SP "GMT"
       rfc850-date    = weekday "," SP date2 SP time SP "GMT"
       asctime-date   = wkday SP date3 SP time SP 4DIGIT
>
       date1          = 2DIGIT SP month SP 4DIGIT
                        ; day month year (e.g., 02 Jun 1982)
       date2          = 2DIGIT "-" month "-" 2DIGIT
                        ; day-month-year (e.g., 02-Jun-82)
       date3          = month SP ( 2DIGIT | ( SP 1DIGIT ))
                        ; month day (e.g., Jun  2)
>
       time           = 2DIGIT ":" 2DIGIT ":" 2DIGIT
                        ; 00:00:00 - 23:59:59
>
       wkday          = "Mon" | "Tue" | "Wed"
                      | "Thu" | "Fri" | "Sat" | "Sun"
>
       weekday        = "Monday" | "Tuesday" | "Wednesday"
                      | "Thursday" | "Friday" | "Saturday" | "Sunday"
>
       month          = "Jan" | "Feb" | "Mar" | "Apr"
                      | "May" | "Jun" | "Jul" | "Aug"
                      | "Sep" | "Oct" | "Nov" | "Dec"

> Note: HTTP requirements for the date/time stamp format apply
only to their usage within the protocol stream. Clients and
servers are not required to use these formats for user
presentation, request logging, etc.

註: HTTP は日時印形式をプロトコル列中での使用についてのみ
要求しています。クライアント及びサーバーは利用者への上演や
要求の記録などでこれらの形式を使う必要はありません。

[INS[
***RFC 2068・2616 (HTTP/1.1)  3.3.2 Delta Seconds
> Some HTTP header fields allow a time value to be specified as an
integer number of seconds, represented in decimal, after the time
that the message was received.

幾つかの HTTP 頭欄では、時刻値を、
メッセージを受信した時刻からの十進数で表現した整数値として指定することを認めています。

>
- delta-seconds  = 1*DIGIT
]INS]
**RFC 1945 (HTTP/1.0) C.2; RFC 2068 (HTTP/1.1) 19.4.2; RFC 2616 (HTTP/1.1) 19.4.3 Conversion of Date Formats
> [DEL[HTTP/1.0]] [INS[HTTP/1.1]] uses a restricted set of date formats (Section 3.3[INS[.1]]) to
simplify the process of date comparison. Proxies and gateways from
other protocols [DEL[should]] [INS[SHOULD]] ensure that any Date header field present in a
message conforms to one of the [DEL[HTTP/1.0]] [INS[HTTP/1.1]] formats and rewrite the date if necessary.

[11] HTTP/1.1
は[[日付形式]]の制限された集合を日付比較処理の簡素化のために使っています。
他のプロトコルからの串や関門はメッセージ中の Date
頭欄を HTTP/1.1 
形式のどれかに適合することを確認し、必要があれば日付を書き換える'''のが良い'''。

[INS[
注意: 修正点は RFC 1945 → RFC 2068 もの。
]INS]

** RFC の部分の License
See [[RFCのライセンス]]
* メモ
@


1.5
log
@auto-committed
@
text
@d2 4
a5 3
[3] [[HTTP]] は、二つの日付・時刻表現形式を定義しています。
一つは、絶対時刻表現 ([CODE(ABNF)[HTTP-Date]]) で、更に細かく3つの形式があります。
もう一つは相対時刻表現 (Δ秒) です。
d11 30
a40 10
[4] HTTP が日付に認めている形式の内、 RFC 822 (RFC 1123 で改訂) 形式
はその部分集合で、 RFC 822 が認めていた要素間の linear-white-space を
必要な部分のみ SP と厳格にし、数字の桁数を揃え、
時間帯については GMT のみ認めるとしています。

RFC 850 形式とされているものは、 RFC 850 によると ARPANET の日付形式であり、
(RFC 850 の他の部分から推察すると) [[RFC822の日付形式]]と
したいところですが、 RFC 822 の形式とはやや異なり、その前の版である
[[RFC733の日付形式]]に一致することが分かります。
しかし、 RFC 733 は年号を4桁でも良いとしていますから、その点で矛盾します。
d43 3
a45 2
RFC 2069 『An Extension to HTTP : Digest Access Authentication』
は RFC 1123 形式のみを認めています。 <urn:ietf:rfc:2069>
d48 5
a52 3
Netscape の原 cookie 提案では expires 属性で使われる日付形式を
RFC 850 形式としています。 (RFC 2109 <urn:ietf:rfc:2109> 参照)
詳しくは [CODE(WikiPage)[[[Cookieの日付形式]]]]を参照。
d55 7
a61 2
RFC 2518 WebDAV では上記の HTTP-Date と [[ISO8601の日付形式]]
を使い分けています。
a62 2
- [1] 古い HTTP/1.0 サーバーの形式(の1つ): [SAMP[Tue Nov 23 16:00:43 1993 GMT]]
- [2] >>1 [[C]] の関数で返される形式ですかな。
d70 1
a70 1
>HTTP[/*1945*1.0] applications have historically allowed three different
d73 1
a73 1
HTTP[/*1945*1.0] 応用は歴史的に日時を表す3つの書式を認めています。
d75 4
a78 3
       Sun, 06 Nov 1994 08:49:37 GMT    ; RFC 822, updated by RFC 1123
       Sunday, 06-Nov-94 08:49:37 GMT   ; RFC 850, obsoleted by RFC 1036
       Sun Nov  6 08:49:37 1994         ; ANSI C's asctime() format
d80 1
a80 1
The first format is preferred as an Internet standard and represents
d84 2
a85 6
HTTP/[*1945*1.0|1.1] clients and servers that parse the date value
[*1945*should|MUST] accept all three formats 
[*2068*(for compatibility with HTTP/1.0)], 
[*1945*though they must never generate the third
(asctime) format.|though they MUST only generate the RFC 1123 format for
representing HTTP-date values in header fields.]
d90 3
a92 5
で4桁の年号を表せません。日付値を解析する HTTP/[*1945*1.0|1.1] クライアント
及びサーバーは[*2068*(HTTP/1.0 との互換性のため)]これら3つ全ての日付形式を
受け付け[*1945*るべきです|''なければなりません'']が、
[*1945*3つ目の asctime 形式は生成してはなりません。|頭領域内の
HTTP-date の値表現としては RFC 1123 形式のみを生成し''なければなりません''。]
d94 1
a94 1
Note: Recipients of date values are encouraged to be robust in
d104 3
a106 4
All HTTP[*1945*/1.0] date/time stamps [*1945*must|MUST] be represented 
in [Universal Time (UT), also known as] Greenwich Mean Time (GMT), 
without exception. [*2616*For the purposes of HTTP, GMT is exactly
equal to UTC (Coordinated Universal Time). ]
d108 4
a111 10
as the three-letter abbreviation for time zone, and 
[*1945*should|MUST] be assumed when reading the asctime format.
[*2616*HTTP-date is case sensitive and MUST NOT include
additional LWS beyond that specifically included as SP in the
grammar.]

全ての HTTP[*1945*/1.0] 日時印は例外無く
[国際協定時 (UT) (]グリニッジ標準時 (GMT) [としても知られています。)] 
で表されてい[*1945*る必要があります|''なければなりません'']。
[*2616*HTTP用途では、 GMT は UTC (協定国際時) と同じ物です。]
d113 1
a113 3
についてであり、 asctime 形式を読む時はそう仮定[*1945*すべきです|
''しなければなりません'']。[*2616*HTTP-date では大文字・小文字の区別は
無く、文法で SP が入ると示した場所以外で LWS を含めては''なりません''。]
d115 1
d117 1
a117 1

d121 1
a121 1

d128 1
a128 1

d131 1
a131 1

d134 1
a134 1

d137 1
a137 1

d142 1
a142 1
Note: HTTP requirements for the date/time stamp format apply
@


1.4
log
@auto-committed
@
text
@d149 15
@


1.3
log
@auto-commited
@
text
@d1 4
a4 1
*HTTP 仕様での定義
d6 1
a6 2
**RFC 1945 (HTTP/1.0) 第3.3節 Date/Time Formats / 日時形式
**RFC 2068, 2616 (HTTP/1.1) 第3.3.1節 Full Date / 完全な日付
d8 36
a43 1
HTTP[/*1945*1.0] applications have historically allowed three different
d137 12
a148 34
*説明

HTTP が日付に認めている形式の内、 RFC 822 (RFC 1123 で改訂) 形式
はその部分集合で、 RFC 822 が認めていた要素間の linear-white-space を
必要な部分のみ SP と厳格にし、数字の桁数を揃え、
時間帯については GMT のみ認めるとしています。

RFC 850 形式とされているものは、 RFC 850 によると ARPANET の日付形式であり、
(RFC 850 の他の部分から推察すると) [[RFC822の日付形式]]と
したいところですが、 RFC 822 の形式とはやや異なり、その前の版である
[[RFC733の日付形式]]に一致することが分かります。
しかし、 RFC 733 は年号を4桁でも良いとしていますから、その点で矛盾します。

RFC 2069 『An Extension to HTTP : Digest Access Authentication』
は RFC 1123 形式のみを認めています。 <urn:ietf:rfc:2069>

Netscape の原 cookie 提案では expires 属性で使われる日付形式を
RFC 850 形式としています。 (RFC 2109 <urn:ietf:rfc:2109> 参照)

RFC 2518 WebDAV では上記の HTTP-Date と [[ISO8601の日付形式]]
を使い分けています。

*SEE ALSO

-RFC 1945 HTTP/1.0 <urn:ietf:rfc:1945>
-RFC 2068 HTTP/1.1 <urn:ietf:rfc:2068>
-[[日付形式]]
-[[RFC822の日付形式]] (RFC 1123 で改訂)
-[[RFC850の日付形式]]
-[[RFC1036の日付形式]]
-[[asctime形式]]
-[[ISO8601の日付形式]]

*LICENSE
d150 1
d152 1
a152 2
- [1] 古い HTTP/1.0 サーバーの形式(の1つ): [SAMP[Tue Nov 23 16:00:43 1993 GMT]]
- [2] >>1 [[C]] の関数で返される形式ですかな。
@


1.2
log
@auto-commited
@
text
@d137 1
@


1.1
log
@Updated.
@
text
@d136 1
@

