head	1.24;
access;
symbols
	suikawiki3-final:1.24
	before-db-leaffile:1.7
	after-upgrade-to-suikawiki-3:1.7
	before-fork-suikawiki3:1.7
	after-restore-20040122:1.6;
locks; strict;
comment	@# @;


1.24
date	2008.08.13.02.56.14;	author wakaba;	state Exp;
branches;
next	1.23;

1.23
date	2007.12.27.02.40.55;	author wakaba;	state Exp;
branches;
next	1.22;

1.22
date	2007.10.03.02.55.02;	author wakaba;	state Exp;
branches;
next	1.21;

1.21
date	2007.06.23.03.16.45;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2007.06.13.02.50.34;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2007.05.27.02.40.42;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2007.02.08.02.21.05;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2006.10.13.02.16.07;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2006.09.27.02.14.45;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2006.08.27.02.12.37;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2006.02.18.02.14.36;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2005.10.31.02.14.37;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2005.07.31.02.06.54;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2005.07.13.02.09.46;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.23.02.05.08;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2005.03.08.02.06.16;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.08.02.05.23;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2004.01.31.02.03.44;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.18.02.03.30;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2003.11.18.02.03.52;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2003.08.16.09.18.55;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2003.07.31.08.29.22;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.18.00.11.11;	author w;	state Exp;
branches;
next	1.1;

1.1
date	2003.06.06.12.26.30;	author make;	state Exp;
branches;
next	;


desc
@@


1.24
log
@auto-committed
@
text
@
* [CODE(HTMLe)@@en[form]] 要素 (HTML)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.3. Changes to existing controls]]
<IW:WF2:"#changes">
-- [CSECTION@@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[25]
:状態:[[W3C]] [[勧告]]
:[[名前空間URI]]:[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[form]]]]
([Q@@en[[RUBYB[[[フォーム]]] [[[form]]]]より)]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容モデル]]:零個以上の[[ブロック水準要素]]
(例外規定あり: >>39)
:出現できる文脈:
[[ブロック水準要素]]が認められる場所、または
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]として
:[[属性]]:
,[[属性名]]	,[[属性値]]	,[[既定値]]	,説明	,状態	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)@@en[[[autocomplete]]]]	,	,	,[[自動補完]]	,非標準	,[[WinIE]]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[lcs]]]]	,	,	,	,非標準	,[[iモード]]
,[CODE(HTMLa)@@en[[[measure]]]],,,,非標準,[[EMOBILE]]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)@@en[[[runat]]]]	,[CODE(HTML example)@@en[[[server]]]]	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[utn]]]]	,([[ブール型属性]])	,([[偽]])	,製造番号送信	,非標準	,[[iモード]]
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[59] [[とほほ]]では [CODE(HTMLa)@@en[[[urn]]]]
[[属性]]が紹介されていますが、
[CODE(HTMLa)@@en[[[utn]]]] の誤りと見られます。

;; [CITE[<form> - フォーム]] ([CODE[2006-10-01 23:42:22 +09:00]] 版) 
<http://www.tohoho-web.com/html/form.htm>


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[31]
[CITE[HTML Working Group Voyager Issue Tracking System - Modularization-abstractions/591]] <http://hades.mn.aptest.com/cgi-bin/voyager-issues/Modularization-abstractions?id=591>

> Should we intentionally attempt to support the legacy content models in the
legacy redecl module?
> No - it _could_ break compatibility, and we don't want to do that in a second
edition.

([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])

[[#comment]]


*** HTML 5 内容モデル

[39] [[Web Forms 2.0]] では、次の[[内容]]が認められています
[SRC@@en[WF2 2.3]]:
- [[空要素]]にする。
-- [CODE(HTMLe)@@en[[[form]]]] は[[空]]に[['''して構いません''']]。
-- [CODE(HTMLe)@@en[[[head]]]] 内の [CODE(HTMLe)@@en[[[form]]]]
は[[空]]にしなければなりません。
- [[ブロック水準要素]]だけを[[子供]]とする。
-- 原則として、 [CODE(HTMLe)@@en[[[form]]]]
の[[子供]]は[[ブロック水準要素]]と[['''しなければなりません''']]。
- [[行内水準内容]]だけを[[子供]]とする。
-- [CODE(HTMLe)@@en[[[form]]]] [[要素]]の[[祖先]]の1つが
[[ブロック水準要素]]と[[行内水準内容]]の両方を認めていて、
-- しかもそれが [CODE(HTMLe)@@en[[[div]]]] [[要素]]では''ない''場合。

[[#comment]]


*** 空要素

[32]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は[[空]]に[['''して構いません''']]。
また、[[空]]のとき、 [CODE(HTMLe)@@en[[[head]]]]
内に入れることができます (>>33)。
[SRC@@en[WF2 2.3]]

[[#comment]]


*** [CODE(HTMLe)@@en[form]] の入れ子

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[36]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
を [CODE(HTMLe)@@en[[[form]]]]
の[[子孫]]にすることが認められています。
[SRC@@en[WF2 2.3]]

[37] '''HTML 直列化'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]内の
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]は虫されるのが普通なので、
[CODE(HTMLe)@@en[[[form]]]] の[[入れ子]]は認められていません。
[SRC@@en[WF2 2.3]]

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
[[DOM]] を通じて [CODE(HTMLe)@@en[[[form]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[38] '''フォーム間の関係'''

[[入れ子]]にしても、[[フォーム]]間に意味的な関係はありません。
[[フォーム制御子]]は通常直近の[[祖先]]である[[フォーム]]だけに関連付けられます。
[[フォーム]]関連の[[属性]]や[[事象]]も、
[WEAK[([[DOM]] で規定された通常通りの[[事象]]の[[泡立ち]]はありますが)]]
どちらかの[[フォーム]]だけに関係します。

[[#comment]]


*** メモ

[[#comment]]


** 文脈


*** [CODE(HTMLe)@@en[head]] の子供

[33]
[CODE(HTMLe)@@en[[[form]]]] は、[[内容]]が[[空]]の場合に限り、
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]とすることができます。
[SRC@@en[WF2 2.3]]

[34]
[[Web Forms 2.0]] で導入された [CODE(HTMLa)@@en[[[form]]]]
[[属性]]により、[[フォーム制御子]]は [CODE(HTMLe)@@en[[[form]]]]
外であっても特定の [CODE(HTMLe)@@en[[[form]]]]
と関連付けることができるようになりました。
従いまして、[[フォーム制御子]]は直接 [CODE(HTMLe)@@en[[[body]]]]
の子孫とし、それに対応する [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は [CODE(HTMLe)@@en[[[head]]]] [[要素]]に入れるという使い方ができます。

;; これは、 [[XForms]] の[[フォーム]]の定義方法とも似ています。

[35] '''HTML 直列化との関係'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]が出現すると [CODE(HTMLe)@@en[[[body]]]]
[[要素]]が[[開いている]]と[[構文解析]]されてしまいます。

例えば、
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

は
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
'''</head><body>'''<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

と解釈されてしまいます。

;; そう解釈されても[[フォーム]]としての機能は変わりありませんが、
[[DOM]] による操作や [[CSS]] による[[レンダリング]]などでの扱いが変わります。
また、他の[[要素]]の[[タグ]]の位置によっては[[文書]]が[[不適合]]となります。

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
後から [[DOM]] により [CODE(HTMLe)@@en[[[head]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[[#comment]]


*** メモ

[[#comment]]


** レンダリング

[57] '''[CODE(HTMLe)@@en[head]] 内の非空 [CODE(HTMLe)@@en[form]]'''

通常[[利用者エージェント]]は [CODE(HTMLe)@@en[[[head]]]]
[[要素]]の[[内容]]を[[レンダリング]]しませんから、
[[空]]でない [CODE(HTMLe)@@en[[[form]]]]
が [CODE(HTMLe)@@en[[[head]]]] 内に含まれていても、
特別な処理は必要ありません。
[[CSS]] 等により [CODE(HTMLe)@@en[[[head]]]]
[[要素]]内の [CODE(HTMLe)@@en[[[form]]]]
を[[レンダリング]]することにした場合、
[CODE(HTMLe)@@en[[[form]]]] は通常通り
([CODE(HTMLe)@@en[[[body]]]] 内と同じように)
動作[['''しなければなりません''']]。
[SRC@@en[WF2 2.18]]

[[#comment]]


** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[60]
[CITE[IE6 Form Tag Orphans by jpsykes]] ([CODE[2007-09-29 12:45:21 +09:00]] 版) <http://jpsykes.com/92/ie6-form-tag-orphans>
([[名無しさん]])

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


* [CODE(HTMLa)@@en[form]] 属性 (HTML)

[40]
[[HTML]] の[[フォーム制御子]]等の
[DFN[[CODE(HTMLa)@@en[form]] [[属性]]]]は、
[[フォーム制御子]]が所属する[[フォーム]]を指定します。

[41]
:状態:[[WHATWG]] [[WD]]
:[[要素型]]:[[フォーム制御子]]、[CODE(HTMLe)@@en[[[fieldset]]]]
:[[属性名]]:[CODE(HTMLa)@@en[[[form]]]]
([Q@@en[[[form]]]] ([Q@@en[[[フォーム]]]]) より)
:[[属性値]]:[CODE@@en[[[IDREFS]]]] (>>42)
:[[既定値]]:([[先祖]]により決定) (>>43)

[44] 仕様書:
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.8. The [CODE(HTMLa)@@en[[[form]]]] attribute]]
<IW:WF2:"#formAttribute">


** 属性値

[42]
[CODE(HTMLa)@@en[[[form]]]] [[属性値]]は、
零個以上の
[CODE(HTMLe)@@en[[[form]]]] [[要素]]の [CODE(XML)@@en[[[ID]]]]
の[[空白]]区切り[[並び]]です。
[SRC@@en[WF2 2.8]]

[43]
[[フォーム制御子]]は通常[[先祖]]の [CODE(HTMLe)@@en[[[form]]]]
と関連付けられますが、
[CODE(HTMLa)@@en[[[form]]]] [[属性]]はこれを上書きし、
関連付ける[[フォーム]]を明示的に指定します。
[SRC@@en[WF2 2.8]]

[46]
指定された [CODE(XML)@@en[[[ID]]]] のうち、
[[文書]]中の[[要素]]を[[識別]]しないものや、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]を[[識別]]しないものは、
無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[47]
[[空文字列]]を[[属性値]]として指定する
(か、 >>46 の無視の結果 [CODE(XML)@@en[[[ID]]]]
が1つも含まれない) と、
[[フォーム制御子]]はどの[[フォーム]]にも関連付けられていない状態となります。
[SRC@@en[WF2 2.8]]

[48]
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]に指定した場合は、
その[[子孫]]の[[フォーム制御子]]を関連付ける[[フォーム]]を指定します。
[SRC@@en[WF2 2.8]]

;; [[子孫]]の[[フォーム制御子]]や [CODE(HTMLe)@@en[[[fieldset]]]]
で更に [CODE(HTMLa)@@en[[[form]]]] が指定されている場合は、
そちらが優先します。

[[#comment]]


** フォームの決定

[49]
[[利用者エージェント]]は、[[フォーム制御子]]や
[CODE(HTMLe)@@en[[[fieldset]]]]
[[要素]]に関連付ける[[フォーム]]を次のように決定[['''しなければなりません''']]
[SRC@@en[WF2 2.8]]:
= [CODE(HTMLa)@@en[[[form]]]] [[属性]]があれば、
それに従います。
= [[直近]]の[[先祖]]である [CODE(HTMLe)@@en[[[form]]]]
[[要素]]か、 [CODE(HTMLa)@@en[[[form]]]] [[属性]]がある
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]があれば、
その[[フォーム]]とします。
= なければ、どの[[フォーム]]にも関連付けないとします。

[[#comment]]


** フォーム操作との関係

[50]
[[提出]][[ボタン]] ([CODE(HTML)@@en[[[submit]]]]) や[[画像]]
([CODE(HTMLe)@@en[[[image]]]]) は、
関連付けられた最初の[[フォーム]]のみを[[提出]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[51]
[[再設定]][[ボタン]] ([CODE(HTML)@@en[[[reset]]]])
は、関連付けられたすべての[[フォーム]]を[[再設定]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 誤り処理

[52]
[[文書]]中に複数現れる [CODE(XML)@@en[[[ID]]]]
が [CODE(HTMLa)@@en[[[form]]]] に指定された時に選択される[[フォーム]]は、
[CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]と同じものと[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

;; [CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]は、
その場合の動作は[[未定義]]としています。
しかし、 [CODE(HTMLa)@@en[[[form]]]]
もそれと同じように動作しなければならない、ということです。

[53]
[CODE(HTMLa)@@en[[[form]]]]
[[属性値]]中に同じ[[フォーム]]を複数回指定[['''してはなりません''']]。
[[利用者エージェント]]は、その場合、
最初の指定を除き、無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 歴史

[56]
この[[属性]]は [[Web Forms 2.0]] で導入されました。


[61]
[CITE[Cougar: ideas for <A>,<INPUT>]] ([TIME[2004-08-06 01:45:46 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/1996Jul/0537.html>

[CODE(HTMLa)@@en[[[form]]]] [[属性]]に相当する [CODE(HTMLa)@@en[[[for]]]]
[[属性]]が提案されていました。
([[名無しさん]])


[[#comment]]


** 例

[54]
[PRE(HTML example code)[
<table>
 <thead>
  <tr>
   <th>Name</th>
   <th>Value</th>
   <th>Action</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <form id="edit1" action="/edit" method="post">
     <input type="hidden" name="id" value="1"/>
     <input type="text" name="name" value="First Row"/>
    </form>
   </td>
   <td>
    <input form="edit1" type="text" name="value"/>
   </td>
   <td>
    <input form="edit1" type="submit" name="Edit"/>
   </td>
  </tr>
  <tr>
   <td>
    <form id="edit2" action="/edit" method="post">
     <input type="hidden" name="id" value="2"/>
     <input type="text" name="name" value="Second Row"/>
    </form>
   </td>
   <td>
    <input form="edit2" type="text" name="value"/>
   </td>
   <td>
    <input form="edit2" type="submit" name="Edit"/>
   </td>
  </tr>
 </tbody>
</table>
]PRE]

[[列]]ごとに別の[[フォーム]]になっています。
[SRC@@en[WF2 2.8]]
[CODE(HTMLe)@@en[[tbody]]]] の[[内容モデル]]の定義から、
[[Web Forms 1.0]] ではこのように[[表]]と[[フォーム]]を組合せることができませんでした。

[55]
[PRE(HTML example code)[
<form action="test.cgi">
 <input type="text" name="q" form="fg fy">
 <input type="submit" name="t" value="Test">
</form>
<form id="fg" action="google.cgi"><input type="submit" value="Google"></form>
<form id="fy" action="yahoo.cgi"><input type="submit" value="Yahoo"></form>
]PRE]

テキスト欄は2つの[[フォーム]]に関連付けられています。
また、[[フォーム]]が3つあり、それぞれが[[提出]][[ボタン]]を持っています。
[SRC@@en[WF2 2.8]]

[Q@@en[Google]] と [Q@@en[Yahoo]] の2つのボタンは、
それぞれ別の[[フォーム処理エージェント]]に、
同じテキスト欄の内容を[[提出]]します。

最初の [Q@@en[Test]] は、 [[Web Forms 2.0]]
に適合した[[利用者エージェント]]では、
テキスト欄の内容を[[提出]]しません。
未対応の[[利用者エージェント]]はテキスト欄の内容を[[提出]]します。
これは古い[[利用者エージェント]]のための fallback
として使うことができます。

[58]
<a href=' http://wwwmakingyourichercom.tlcik.dtdns.net '> wwwmakingyourichercom </a> <br /> 
<a href=' http://www-makingyouricher-com.tlcik.dtdns.net '> www makingyouricher com </a> <br /> 
<a href=' http://wwwmakingyouricher.tlcik.dtdns.net '> wwwmakingyouricher </a> <br /> 
<a href=' http://www-makingyouricher.tlcik.dtdns.net '> www makingyouricher </a> <br /> 

([[www makingyouricher com]] [uoptimer@@yahoo.com] [WEAK[2007-05-26 17:50:56 +00:00]])

[[#comment]]


** メモ

[[#comment]]


* メモ@


1.23
log
@auto-committed
@
text
@d1 469
a469 469


* [CODE(HTMLe)@@en[form]] 要素 (HTML)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.3. Changes to existing controls]]
<IW:WF2:"#changes">
-- [CSECTION@@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[25]
:状態:[[W3C]] [[勧告]]
:[[名前空間URI]]:[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[form]]]]
([Q@@en[[RUBYB[[[フォーム]]] [[[form]]]]より)]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容モデル]]:零個以上の[[ブロック水準要素]]
(例外規定あり: >>39)
:出現できる文脈:
[[ブロック水準要素]]が認められる場所、または
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]として
:[[属性]]:
,[[属性名]]	,[[属性値]]	,[[既定値]]	,説明	,状態	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)@@en[[[autocomplete]]]]	,	,	,[[自動補完]]	,非標準	,[[WinIE]]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[lcs]]]]	,	,	,	,非標準	,[[iモード]]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)@@en[[[runat]]]]	,[CODE(HTML example)@@en[[[server]]]]	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[utn]]]]	,([[ブール型属性]])	,([[偽]])	,製造番号送信	,非標準	,[[iモード]]
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[59] [[とほほ]]では [CODE(HTMLa)@@en[[[urn]]]]
[[属性]]が紹介されていますが、
[CODE(HTMLa)@@en[[[utn]]]] の誤りと見られます。

;; [CITE[<form> - フォーム]] ([CODE[2006-10-01 23:42:22 +09:00]] 版) 
<http://www.tohoho-web.com/html/form.htm>


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[31]
[CITE[HTML Working Group Voyager Issue Tracking System - Modularization-abstractions/591]] <http://hades.mn.aptest.com/cgi-bin/voyager-issues/Modularization-abstractions?id=591>

> Should we intentionally attempt to support the legacy content models in the
legacy redecl module?
> No - it _could_ break compatibility, and we don't want to do that in a second
edition.

([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])

[[#comment]]


*** HTML 5 内容モデル

[39] [[Web Forms 2.0]] では、次の[[内容]]が認められています
[SRC@@en[WF2 2.3]]:
- [[空要素]]にする。
-- [CODE(HTMLe)@@en[[[form]]]] は[[空]]に[['''して構いません''']]。
-- [CODE(HTMLe)@@en[[[head]]]] 内の [CODE(HTMLe)@@en[[[form]]]]
は[[空]]にしなければなりません。
- [[ブロック水準要素]]だけを[[子供]]とする。
-- 原則として、 [CODE(HTMLe)@@en[[[form]]]]
の[[子供]]は[[ブロック水準要素]]と[['''しなければなりません''']]。
- [[行内水準内容]]だけを[[子供]]とする。
-- [CODE(HTMLe)@@en[[[form]]]] [[要素]]の[[祖先]]の1つが
[[ブロック水準要素]]と[[行内水準内容]]の両方を認めていて、
-- しかもそれが [CODE(HTMLe)@@en[[[div]]]] [[要素]]では''ない''場合。

[[#comment]]


*** 空要素

[32]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は[[空]]に[['''して構いません''']]。
また、[[空]]のとき、 [CODE(HTMLe)@@en[[[head]]]]
内に入れることができます (>>33)。
[SRC@@en[WF2 2.3]]

[[#comment]]


*** [CODE(HTMLe)@@en[form]] の入れ子

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[36]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
を [CODE(HTMLe)@@en[[[form]]]]
の[[子孫]]にすることが認められています。
[SRC@@en[WF2 2.3]]

[37] '''HTML 直列化'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]内の
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]は虫されるのが普通なので、
[CODE(HTMLe)@@en[[[form]]]] の[[入れ子]]は認められていません。
[SRC@@en[WF2 2.3]]

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
[[DOM]] を通じて [CODE(HTMLe)@@en[[[form]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[38] '''フォーム間の関係'''

[[入れ子]]にしても、[[フォーム]]間に意味的な関係はありません。
[[フォーム制御子]]は通常直近の[[祖先]]である[[フォーム]]だけに関連付けられます。
[[フォーム]]関連の[[属性]]や[[事象]]も、
[WEAK[([[DOM]] で規定された通常通りの[[事象]]の[[泡立ち]]はありますが)]]
どちらかの[[フォーム]]だけに関係します。

[[#comment]]


*** メモ

[[#comment]]


** 文脈


*** [CODE(HTMLe)@@en[head]] の子供

[33]
[CODE(HTMLe)@@en[[[form]]]] は、[[内容]]が[[空]]の場合に限り、
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]とすることができます。
[SRC@@en[WF2 2.3]]

[34]
[[Web Forms 2.0]] で導入された [CODE(HTMLa)@@en[[[form]]]]
[[属性]]により、[[フォーム制御子]]は [CODE(HTMLe)@@en[[[form]]]]
外であっても特定の [CODE(HTMLe)@@en[[[form]]]]
と関連付けることができるようになりました。
従いまして、[[フォーム制御子]]は直接 [CODE(HTMLe)@@en[[[body]]]]
の子孫とし、それに対応する [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は [CODE(HTMLe)@@en[[[head]]]] [[要素]]に入れるという使い方ができます。

;; これは、 [[XForms]] の[[フォーム]]の定義方法とも似ています。

[35] '''HTML 直列化との関係'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]が出現すると [CODE(HTMLe)@@en[[[body]]]]
[[要素]]が[[開いている]]と[[構文解析]]されてしまいます。

例えば、
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

は
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
'''</head><body>'''<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

と解釈されてしまいます。

;; そう解釈されても[[フォーム]]としての機能は変わりありませんが、
[[DOM]] による操作や [[CSS]] による[[レンダリング]]などでの扱いが変わります。
また、他の[[要素]]の[[タグ]]の位置によっては[[文書]]が[[不適合]]となります。

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
後から [[DOM]] により [CODE(HTMLe)@@en[[[head]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[[#comment]]


*** メモ

[[#comment]]


** レンダリング

[57] '''[CODE(HTMLe)@@en[head]] 内の非空 [CODE(HTMLe)@@en[form]]'''

通常[[利用者エージェント]]は [CODE(HTMLe)@@en[[[head]]]]
[[要素]]の[[内容]]を[[レンダリング]]しませんから、
[[空]]でない [CODE(HTMLe)@@en[[[form]]]]
が [CODE(HTMLe)@@en[[[head]]]] 内に含まれていても、
特別な処理は必要ありません。
[[CSS]] 等により [CODE(HTMLe)@@en[[[head]]]]
[[要素]]内の [CODE(HTMLe)@@en[[[form]]]]
を[[レンダリング]]することにした場合、
[CODE(HTMLe)@@en[[[form]]]] は通常通り
([CODE(HTMLe)@@en[[[body]]]] 内と同じように)
動作[['''しなければなりません''']]。
[SRC@@en[WF2 2.18]]

[[#comment]]


** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[60]
[CITE[IE6 Form Tag Orphans by jpsykes]] ([CODE[2007-09-29 12:45:21 +09:00]] 版) <http://jpsykes.com/92/ie6-form-tag-orphans>
([[名無しさん]])

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


* [CODE(HTMLa)@@en[form]] 属性 (HTML)

[40]
[[HTML]] の[[フォーム制御子]]等の
[DFN[[CODE(HTMLa)@@en[form]] [[属性]]]]は、
[[フォーム制御子]]が所属する[[フォーム]]を指定します。

[41]
:状態:[[WHATWG]] [[WD]]
:[[要素型]]:[[フォーム制御子]]、[CODE(HTMLe)@@en[[[fieldset]]]]
:[[属性名]]:[CODE(HTMLa)@@en[[[form]]]]
([Q@@en[[[form]]]] ([Q@@en[[[フォーム]]]]) より)
:[[属性値]]:[CODE@@en[[[IDREFS]]]] (>>42)
:[[既定値]]:([[先祖]]により決定) (>>43)

[44] 仕様書:
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.8. The [CODE(HTMLa)@@en[[[form]]]] attribute]]
<IW:WF2:"#formAttribute">


** 属性値

[42]
[CODE(HTMLa)@@en[[[form]]]] [[属性値]]は、
零個以上の
[CODE(HTMLe)@@en[[[form]]]] [[要素]]の [CODE(XML)@@en[[[ID]]]]
の[[空白]]区切り[[並び]]です。
[SRC@@en[WF2 2.8]]

[43]
[[フォーム制御子]]は通常[[先祖]]の [CODE(HTMLe)@@en[[[form]]]]
と関連付けられますが、
[CODE(HTMLa)@@en[[[form]]]] [[属性]]はこれを上書きし、
関連付ける[[フォーム]]を明示的に指定します。
[SRC@@en[WF2 2.8]]

[46]
指定された [CODE(XML)@@en[[[ID]]]] のうち、
[[文書]]中の[[要素]]を[[識別]]しないものや、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]を[[識別]]しないものは、
無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[47]
[[空文字列]]を[[属性値]]として指定する
(か、 >>46 の無視の結果 [CODE(XML)@@en[[[ID]]]]
が1つも含まれない) と、
[[フォーム制御子]]はどの[[フォーム]]にも関連付けられていない状態となります。
[SRC@@en[WF2 2.8]]

[48]
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]に指定した場合は、
その[[子孫]]の[[フォーム制御子]]を関連付ける[[フォーム]]を指定します。
[SRC@@en[WF2 2.8]]

;; [[子孫]]の[[フォーム制御子]]や [CODE(HTMLe)@@en[[[fieldset]]]]
で更に [CODE(HTMLa)@@en[[[form]]]] が指定されている場合は、
そちらが優先します。

[[#comment]]


** フォームの決定

[49]
[[利用者エージェント]]は、[[フォーム制御子]]や
[CODE(HTMLe)@@en[[[fieldset]]]]
[[要素]]に関連付ける[[フォーム]]を次のように決定[['''しなければなりません''']]
[SRC@@en[WF2 2.8]]:
= [CODE(HTMLa)@@en[[[form]]]] [[属性]]があれば、
それに従います。
= [[直近]]の[[先祖]]である [CODE(HTMLe)@@en[[[form]]]]
[[要素]]か、 [CODE(HTMLa)@@en[[[form]]]] [[属性]]がある
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]があれば、
その[[フォーム]]とします。
= なければ、どの[[フォーム]]にも関連付けないとします。

[[#comment]]


** フォーム操作との関係

[50]
[[提出]][[ボタン]] ([CODE(HTML)@@en[[[submit]]]]) や[[画像]]
([CODE(HTMLe)@@en[[[image]]]]) は、
関連付けられた最初の[[フォーム]]のみを[[提出]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[51]
[[再設定]][[ボタン]] ([CODE(HTML)@@en[[[reset]]]])
は、関連付けられたすべての[[フォーム]]を[[再設定]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 誤り処理

[52]
[[文書]]中に複数現れる [CODE(XML)@@en[[[ID]]]]
が [CODE(HTMLa)@@en[[[form]]]] に指定された時に選択される[[フォーム]]は、
[CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]と同じものと[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

;; [CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]は、
その場合の動作は[[未定義]]としています。
しかし、 [CODE(HTMLa)@@en[[[form]]]]
もそれと同じように動作しなければならない、ということです。

[53]
[CODE(HTMLa)@@en[[[form]]]]
[[属性値]]中に同じ[[フォーム]]を複数回指定[['''してはなりません''']]。
[[利用者エージェント]]は、その場合、
最初の指定を除き、無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 歴史

[56]
この[[属性]]は [[Web Forms 2.0]] で導入されました。


[61]
d473 98
a570 98
[[属性]]が提案されていました。
([[名無しさん]])


[[#comment]]


** 例

[54]
[PRE(HTML example code)[
<table>
 <thead>
  <tr>
   <th>Name</th>
   <th>Value</th>
   <th>Action</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <form id="edit1" action="/edit" method="post">
     <input type="hidden" name="id" value="1"/>
     <input type="text" name="name" value="First Row"/>
    </form>
   </td>
   <td>
    <input form="edit1" type="text" name="value"/>
   </td>
   <td>
    <input form="edit1" type="submit" name="Edit"/>
   </td>
  </tr>
  <tr>
   <td>
    <form id="edit2" action="/edit" method="post">
     <input type="hidden" name="id" value="2"/>
     <input type="text" name="name" value="Second Row"/>
    </form>
   </td>
   <td>
    <input form="edit2" type="text" name="value"/>
   </td>
   <td>
    <input form="edit2" type="submit" name="Edit"/>
   </td>
  </tr>
 </tbody>
</table>
]PRE]

[[列]]ごとに別の[[フォーム]]になっています。
[SRC@@en[WF2 2.8]]
[CODE(HTMLe)@@en[[tbody]]]] の[[内容モデル]]の定義から、
[[Web Forms 1.0]] ではこのように[[表]]と[[フォーム]]を組合せることができませんでした。

[55]
[PRE(HTML example code)[
<form action="test.cgi">
 <input type="text" name="q" form="fg fy">
 <input type="submit" name="t" value="Test">
</form>
<form id="fg" action="google.cgi"><input type="submit" value="Google"></form>
<form id="fy" action="yahoo.cgi"><input type="submit" value="Yahoo"></form>
]PRE]

テキスト欄は2つの[[フォーム]]に関連付けられています。
また、[[フォーム]]が3つあり、それぞれが[[提出]][[ボタン]]を持っています。
[SRC@@en[WF2 2.8]]

[Q@@en[Google]] と [Q@@en[Yahoo]] の2つのボタンは、
それぞれ別の[[フォーム処理エージェント]]に、
同じテキスト欄の内容を[[提出]]します。

最初の [Q@@en[Test]] は、 [[Web Forms 2.0]]
に適合した[[利用者エージェント]]では、
テキスト欄の内容を[[提出]]しません。
未対応の[[利用者エージェント]]はテキスト欄の内容を[[提出]]します。
これは古い[[利用者エージェント]]のための fallback
として使うことができます。

[58]
<a href=' http://wwwmakingyourichercom.tlcik.dtdns.net '> wwwmakingyourichercom </a> <br /> 
<a href=' http://www-makingyouricher-com.tlcik.dtdns.net '> www makingyouricher com </a> <br /> 
<a href=' http://wwwmakingyouricher.tlcik.dtdns.net '> wwwmakingyouricher </a> <br /> 
<a href=' http://www-makingyouricher.tlcik.dtdns.net '> www makingyouricher </a> <br /> 

([[www makingyouricher com]] [uoptimer@@yahoo.com] [WEAK[2007-05-26 17:50:56 +00:00]])

[[#comment]]


** メモ

[[#comment]]


@


1.22
log
@auto-committed
@
text
@a306 1

d308 1
a308 1
[CITE[IE6 Form Tag Orphans by jpsykes]] ([TIME[2007-09-29 12:45:21 +09:00]] 版) <http://jpsykes.com/92/ie6-form-tag-orphans>
a310 1

d467 9
@


1.21
log
@auto-committed
@
text
@d1 563
a563 558
* [CODE(HTMLe)@@en[form]] 要素 (HTML)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.3. Changes to existing controls]]
<IW:WF2:"#changes">
-- [CSECTION@@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[25]
:状態:[[W3C]] [[勧告]]
:[[名前空間URI]]:[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[form]]]]
([Q@@en[[RUBYB[[[フォーム]]] [[[form]]]]より)]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容モデル]]:零個以上の[[ブロック水準要素]]
(例外規定あり: >>39)
:出現できる文脈:
[[ブロック水準要素]]が認められる場所、または
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]として
:[[属性]]:
,[[属性名]]	,[[属性値]]	,[[既定値]]	,説明	,状態	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)@@en[[[autocomplete]]]],,,[[自動補完]],非標準,[[WinIE]]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[lcs]]]]	,	,	,	,非標準	,[[iモード]]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)@@en[[[runat]]]],[CODE(HTML example)@@en[[[server]]]],,,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[utn]]]],([[ブール型属性]]),([[偽]]),製造番号送信,非標準,[[iモード]]
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[59] [[とほほ]]では [CODE(HTMLa)@@en[[[urn]]]]
[[属性]]が紹介されていますが、
[CODE(HTMLa)@@en[[[utn]]]] の誤りと見られます。

;; [CITE[<form> - フォーム]] ([TIME[2006-10-01 23:42:22 +09:00]] 版) 
<http://www.tohoho-web.com/html/form.htm>


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[31]
[CITE[HTML Working Group Voyager Issue Tracking System - Modularization-abstractions/591]] <http://hades.mn.aptest.com/cgi-bin/voyager-issues/Modularization-abstractions?id=591>

> Should we intentionally attempt to support the legacy content models in the
legacy redecl module?
> No - it _could_ break compatibility, and we don't want to do that in a second
edition.

([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])

[[#comment]]


*** HTML 5 内容モデル

[39] [[Web Forms 2.0]] では、次の[[内容]]が認められています
[SRC@@en[WF2 2.3]]:
- [[空要素]]にする。
-- [CODE(HTMLe)@@en[[[form]]]] は[[空]]に[['''して構いません''']]。
-- [CODE(HTMLe)@@en[[[head]]]] 内の [CODE(HTMLe)@@en[[[form]]]]
は[[空]]にしなければなりません。
- [[ブロック水準要素]]だけを[[子供]]とする。
-- 原則として、 [CODE(HTMLe)@@en[[[form]]]]
の[[子供]]は[[ブロック水準要素]]と[['''しなければなりません''']]。
- [[行内水準内容]]だけを[[子供]]とする。
-- [CODE(HTMLe)@@en[[[form]]]] [[要素]]の[[祖先]]の1つが
[[ブロック水準要素]]と[[行内水準内容]]の両方を認めていて、
-- しかもそれが [CODE(HTMLe)@@en[[[div]]]] [[要素]]では''ない''場合。

[[#comment]]


*** 空要素

[32]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は[[空]]に[['''して構いません''']]。
また、[[空]]のとき、 [CODE(HTMLe)@@en[[[head]]]]
内に入れることができます (>>33)。
[SRC@@en[WF2 2.3]]

[[#comment]]


*** [CODE(HTMLe)@@en[form]] の入れ子

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[36]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
を [CODE(HTMLe)@@en[[[form]]]]
の[[子孫]]にすることが認められています。
[SRC@@en[WF2 2.3]]

[37] '''HTML 直列化'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]内の
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]は虫されるのが普通なので、
[CODE(HTMLe)@@en[[[form]]]] の[[入れ子]]は認められていません。
[SRC@@en[WF2 2.3]]

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
[[DOM]] を通じて [CODE(HTMLe)@@en[[[form]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[38] '''フォーム間の関係'''

[[入れ子]]にしても、[[フォーム]]間に意味的な関係はありません。
[[フォーム制御子]]は通常直近の[[祖先]]である[[フォーム]]だけに関連付けられます。
[[フォーム]]関連の[[属性]]や[[事象]]も、
[WEAK[([[DOM]] で規定された通常通りの[[事象]]の[[泡立ち]]はありますが)]]
どちらかの[[フォーム]]だけに関係します。

[[#comment]]


*** メモ

[[#comment]]


** 文脈


*** [CODE(HTMLe)@@en[head]] の子供

[33]
[CODE(HTMLe)@@en[[[form]]]] は、[[内容]]が[[空]]の場合に限り、
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]とすることができます。
[SRC@@en[WF2 2.3]]

[34]
[[Web Forms 2.0]] で導入された [CODE(HTMLa)@@en[[[form]]]]
[[属性]]により、[[フォーム制御子]]は [CODE(HTMLe)@@en[[[form]]]]
外であっても特定の [CODE(HTMLe)@@en[[[form]]]]
と関連付けることができるようになりました。
従いまして、[[フォーム制御子]]は直接 [CODE(HTMLe)@@en[[[body]]]]
の子孫とし、それに対応する [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は [CODE(HTMLe)@@en[[[head]]]] [[要素]]に入れるという使い方ができます。

;; これは、 [[XForms]] の[[フォーム]]の定義方法とも似ています。

[35] '''HTML 直列化との関係'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]が出現すると [CODE(HTMLe)@@en[[[body]]]]
[[要素]]が[[開いている]]と[[構文解析]]されてしまいます。

例えば、
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

は
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
'''</head><body>'''<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

と解釈されてしまいます。

;; そう解釈されても[[フォーム]]としての機能は変わりありませんが、
[[DOM]] による操作や [[CSS]] による[[レンダリング]]などでの扱いが変わります。
また、他の[[要素]]の[[タグ]]の位置によっては[[文書]]が[[不適合]]となります。

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
後から [[DOM]] により [CODE(HTMLe)@@en[[[head]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[[#comment]]


*** メモ

[[#comment]]


** レンダリング

[57] '''[CODE(HTMLe)@@en[head]] 内の非空 [CODE(HTMLe)@@en[form]]'''

通常[[利用者エージェント]]は [CODE(HTMLe)@@en[[[head]]]]
[[要素]]の[[内容]]を[[レンダリング]]しませんから、
[[空]]でない [CODE(HTMLe)@@en[[[form]]]]
が [CODE(HTMLe)@@en[[[head]]]] 内に含まれていても、
特別な処理は必要ありません。
[[CSS]] 等により [CODE(HTMLe)@@en[[[head]]]]
[[要素]]内の [CODE(HTMLe)@@en[[[form]]]]
を[[レンダリング]]することにした場合、
[CODE(HTMLe)@@en[[[form]]]] は通常通り
([CODE(HTMLe)@@en[[[body]]]] 内と同じように)
動作[['''しなければなりません''']]。
[SRC@@en[WF2 2.18]]

[[#comment]]


** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


* [CODE(HTMLa)@@en[form]] 属性 (HTML)

[40]
[[HTML]] の[[フォーム制御子]]等の
[DFN[[CODE(HTMLa)@@en[form]] [[属性]]]]は、
[[フォーム制御子]]が所属する[[フォーム]]を指定します。

[41]
:状態:[[WHATWG]] [[WD]]
:[[要素型]]:[[フォーム制御子]]、[CODE(HTMLe)@@en[[[fieldset]]]]
:[[属性名]]:[CODE(HTMLa)@@en[[[form]]]]
([Q@@en[[[form]]]] ([Q@@en[[[フォーム]]]]) より)
:[[属性値]]:[CODE@@en[[[IDREFS]]]] (>>42)
:[[既定値]]:([[先祖]]により決定) (>>43)

[44] 仕様書:
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.8. The [CODE(HTMLa)@@en[[[form]]]] attribute]]
<IW:WF2:"#formAttribute">


** 属性値

[42]
[CODE(HTMLa)@@en[[[form]]]] [[属性値]]は、
零個以上の
[CODE(HTMLe)@@en[[[form]]]] [[要素]]の [CODE(XML)@@en[[[ID]]]]
の[[空白]]区切り[[並び]]です。
[SRC@@en[WF2 2.8]]

[43]
[[フォーム制御子]]は通常[[先祖]]の [CODE(HTMLe)@@en[[[form]]]]
と関連付けられますが、
[CODE(HTMLa)@@en[[[form]]]] [[属性]]はこれを上書きし、
関連付ける[[フォーム]]を明示的に指定します。
[SRC@@en[WF2 2.8]]

[46]
指定された [CODE(XML)@@en[[[ID]]]] のうち、
[[文書]]中の[[要素]]を[[識別]]しないものや、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]を[[識別]]しないものは、
無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[47]
[[空文字列]]を[[属性値]]として指定する
(か、 >>46 の無視の結果 [CODE(XML)@@en[[[ID]]]]
が1つも含まれない) と、
[[フォーム制御子]]はどの[[フォーム]]にも関連付けられていない状態となります。
[SRC@@en[WF2 2.8]]

[48]
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]に指定した場合は、
その[[子孫]]の[[フォーム制御子]]を関連付ける[[フォーム]]を指定します。
[SRC@@en[WF2 2.8]]

;; [[子孫]]の[[フォーム制御子]]や [CODE(HTMLe)@@en[[[fieldset]]]]
で更に [CODE(HTMLa)@@en[[[form]]]] が指定されている場合は、
そちらが優先します。

[[#comment]]


** フォームの決定

[49]
[[利用者エージェント]]は、[[フォーム制御子]]や
[CODE(HTMLe)@@en[[[fieldset]]]]
[[要素]]に関連付ける[[フォーム]]を次のように決定[['''しなければなりません''']]
[SRC@@en[WF2 2.8]]:
= [CODE(HTMLa)@@en[[[form]]]] [[属性]]があれば、
それに従います。
= [[直近]]の[[先祖]]である [CODE(HTMLe)@@en[[[form]]]]
[[要素]]か、 [CODE(HTMLa)@@en[[[form]]]] [[属性]]がある
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]があれば、
その[[フォーム]]とします。
= なければ、どの[[フォーム]]にも関連付けないとします。

[[#comment]]


** フォーム操作との関係

[50]
[[提出]][[ボタン]] ([CODE(HTML)@@en[[[submit]]]]) や[[画像]]
([CODE(HTMLe)@@en[[[image]]]]) は、
関連付けられた最初の[[フォーム]]のみを[[提出]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[51]
[[再設定]][[ボタン]] ([CODE(HTML)@@en[[[reset]]]])
は、関連付けられたすべての[[フォーム]]を[[再設定]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 誤り処理

[52]
[[文書]]中に複数現れる [CODE(XML)@@en[[[ID]]]]
が [CODE(HTMLa)@@en[[[form]]]] に指定された時に選択される[[フォーム]]は、
[CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]と同じものと[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

;; [CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]は、
その場合の動作は[[未定義]]としています。
しかし、 [CODE(HTMLa)@@en[[[form]]]]
もそれと同じように動作しなければならない、ということです。

[53]
[CODE(HTMLa)@@en[[[form]]]]
[[属性値]]中に同じ[[フォーム]]を複数回指定[['''してはなりません''']]。
[[利用者エージェント]]は、その場合、
最初の指定を除き、無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 歴史

[56]
この[[属性]]は [[Web Forms 2.0]] で導入されました。

[[#comment]]


** 例

[54]
[PRE(HTML example code)[
<table>
 <thead>
  <tr>
   <th>Name</th>
   <th>Value</th>
   <th>Action</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <form id="edit1" action="/edit" method="post">
     <input type="hidden" name="id" value="1"/>
     <input type="text" name="name" value="First Row"/>
    </form>
   </td>
   <td>
    <input form="edit1" type="text" name="value"/>
   </td>
   <td>
    <input form="edit1" type="submit" name="Edit"/>
   </td>
  </tr>
  <tr>
   <td>
    <form id="edit2" action="/edit" method="post">
     <input type="hidden" name="id" value="2"/>
     <input type="text" name="name" value="Second Row"/>
    </form>
   </td>
   <td>
    <input form="edit2" type="text" name="value"/>
   </td>
   <td>
    <input form="edit2" type="submit" name="Edit"/>
   </td>
  </tr>
 </tbody>
</table>
]PRE]

[[列]]ごとに別の[[フォーム]]になっています。
[SRC@@en[WF2 2.8]]
[CODE(HTMLe)@@en[[tbody]]]] の[[内容モデル]]の定義から、
[[Web Forms 1.0]] ではこのように[[表]]と[[フォーム]]を組合せることができませんでした。

[55]
[PRE(HTML example code)[
<form action="test.cgi">
 <input type="text" name="q" form="fg fy">
 <input type="submit" name="t" value="Test">
</form>
<form id="fg" action="google.cgi"><input type="submit" value="Google"></form>
<form id="fy" action="yahoo.cgi"><input type="submit" value="Yahoo"></form>
]PRE]

テキスト欄は2つの[[フォーム]]に関連付けられています。
また、[[フォーム]]が3つあり、それぞれが[[提出]][[ボタン]]を持っています。
[SRC@@en[WF2 2.8]]

[Q@@en[Google]] と [Q@@en[Yahoo]] の2つのボタンは、
それぞれ別の[[フォーム処理エージェント]]に、
同じテキスト欄の内容を[[提出]]します。

最初の [Q@@en[Test]] は、 [[Web Forms 2.0]]
に適合した[[利用者エージェント]]では、
テキスト欄の内容を[[提出]]しません。
未対応の[[利用者エージェント]]はテキスト欄の内容を[[提出]]します。
これは古い[[利用者エージェント]]のための fallback
として使うことができます。


[58]
<a href=' http://wwwmakingyourichercom.tlcik.dtdns.net '> wwwmakingyourichercom </a> <br /> 
<a href=' http://www-makingyouricher-com.tlcik.dtdns.net '> www makingyouricher com </a> <br /> 
<a href=' http://wwwmakingyouricher.tlcik.dtdns.net '> wwwmakingyouricher </a> <br /> 
<a href=' http://www-makingyouricher.tlcik.dtdns.net '> www makingyouricher </a> <br /> 


([[www makingyouricher com]] [uoptimer@@yahoo.com] [WEAK[2007-05-26 17:50:56 +00:00]])


[[#comment]]


** メモ

[[#comment]]


@


1.20
log
@auto-committed
@
text
@d58 1
@


1.19
log
@auto-committed
@
text
@d1 557
a557 552


* [CODE(HTMLe)@@en[form]] 要素 (HTML)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.3. Changes to existing controls]]
<IW:WF2:"#changes">
-- [CSECTION@@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[25]
:状態:[[W3C]] [[勧告]]
:[[名前空間URI]]:[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[form]]]]
([Q@@en[[RUBYB[[[フォーム]]] [[[form]]]]より)]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容モデル]]:零個以上の[[ブロック水準要素]]
(例外規定あり: >>39)
:出現できる文脈:
[[ブロック水準要素]]が認められる場所、または
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]として
:[[属性]]:
,[[属性名]]	,[[属性値]]	,[[既定値]]	,説明	,状態	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[lcs]]]]	,	,	,	,非標準	,[[iモード]]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[[#comment]]


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[31]
[CITE[HTML Working Group Voyager Issue Tracking System - Modularization-abstractions/591]] <http://hades.mn.aptest.com/cgi-bin/voyager-issues/Modularization-abstractions?id=591>

> Should we intentionally attempt to support the legacy content models in the
legacy redecl module?
> No - it _could_ break compatibility, and we don't want to do that in a second
edition.

([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])

[[#comment]]


*** HTML 5 内容モデル

[39] [[Web Forms 2.0]] では、次の[[内容]]が認められています
[SRC@@en[WF2 2.3]]:
- [[空要素]]にする。
-- [CODE(HTMLe)@@en[[[form]]]] は[[空]]に[['''して構いません''']]。
-- [CODE(HTMLe)@@en[[[head]]]] 内の [CODE(HTMLe)@@en[[[form]]]]
は[[空]]にしなければなりません。
- [[ブロック水準要素]]だけを[[子供]]とする。
-- 原則として、 [CODE(HTMLe)@@en[[[form]]]]
の[[子供]]は[[ブロック水準要素]]と[['''しなければなりません''']]。
- [[行内水準内容]]だけを[[子供]]とする。
-- [CODE(HTMLe)@@en[[[form]]]] [[要素]]の[[祖先]]の1つが
[[ブロック水準要素]]と[[行内水準内容]]の両方を認めていて、
-- しかもそれが [CODE(HTMLe)@@en[[[div]]]] [[要素]]では''ない''場合。

[[#comment]]


*** 空要素

[32]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は[[空]]に[['''して構いません''']]。
また、[[空]]のとき、 [CODE(HTMLe)@@en[[[head]]]]
内に入れることができます (>>33)。
[SRC@@en[WF2 2.3]]

[[#comment]]


*** [CODE(HTMLe)@@en[form]] の入れ子

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[36]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
を [CODE(HTMLe)@@en[[[form]]]]
の[[子孫]]にすることが認められています。
[SRC@@en[WF2 2.3]]

[37] '''HTML 直列化'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]内の
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]は虫されるのが普通なので、
[CODE(HTMLe)@@en[[[form]]]] の[[入れ子]]は認められていません。
[SRC@@en[WF2 2.3]]

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
[[DOM]] を通じて [CODE(HTMLe)@@en[[[form]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[38] '''フォーム間の関係'''

[[入れ子]]にしても、[[フォーム]]間に意味的な関係はありません。
[[フォーム制御子]]は通常直近の[[祖先]]である[[フォーム]]だけに関連付けられます。
[[フォーム]]関連の[[属性]]や[[事象]]も、
[WEAK[([[DOM]] で規定された通常通りの[[事象]]の[[泡立ち]]はありますが)]]
どちらかの[[フォーム]]だけに関係します。

[[#comment]]


*** メモ

[[#comment]]


** 文脈


*** [CODE(HTMLe)@@en[head]] の子供

[33]
[CODE(HTMLe)@@en[[[form]]]] は、[[内容]]が[[空]]の場合に限り、
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]とすることができます。
[SRC@@en[WF2 2.3]]

[34]
[[Web Forms 2.0]] で導入された [CODE(HTMLa)@@en[[[form]]]]
[[属性]]により、[[フォーム制御子]]は [CODE(HTMLe)@@en[[[form]]]]
外であっても特定の [CODE(HTMLe)@@en[[[form]]]]
と関連付けることができるようになりました。
従いまして、[[フォーム制御子]]は直接 [CODE(HTMLe)@@en[[[body]]]]
の子孫とし、それに対応する [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は [CODE(HTMLe)@@en[[[head]]]] [[要素]]に入れるという使い方ができます。

;; これは、 [[XForms]] の[[フォーム]]の定義方法とも似ています。

[35] '''HTML 直列化との関係'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]が出現すると [CODE(HTMLe)@@en[[[body]]]]
[[要素]]が[[開いている]]と[[構文解析]]されてしまいます。

例えば、
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

は
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
'''</head><body>'''<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]

と解釈されてしまいます。

;; そう解釈されても[[フォーム]]としての機能は変わりありませんが、
[[DOM]] による操作や [[CSS]] による[[レンダリング]]などでの扱いが変わります。
また、他の[[要素]]の[[タグ]]の位置によっては[[文書]]が[[不適合]]となります。

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
後から [[DOM]] により [CODE(HTMLe)@@en[[[head]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[[#comment]]


*** メモ

[[#comment]]


** レンダリング

[57] '''[CODE(HTMLe)@@en[head]] 内の非空 [CODE(HTMLe)@@en[form]]'''

通常[[利用者エージェント]]は [CODE(HTMLe)@@en[[[head]]]]
[[要素]]の[[内容]]を[[レンダリング]]しませんから、
[[空]]でない [CODE(HTMLe)@@en[[[form]]]]
が [CODE(HTMLe)@@en[[[head]]]] 内に含まれていても、
特別な処理は必要ありません。
[[CSS]] 等により [CODE(HTMLe)@@en[[[head]]]]
[[要素]]内の [CODE(HTMLe)@@en[[[form]]]]
を[[レンダリング]]することにした場合、
[CODE(HTMLe)@@en[[[form]]]] は通常通り
([CODE(HTMLe)@@en[[[body]]]] 内と同じように)
動作[['''しなければなりません''']]。
[SRC@@en[WF2 2.18]]

[[#comment]]


** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


* [CODE(HTMLa)@@en[form]] 属性 (HTML)

[40]
[[HTML]] の[[フォーム制御子]]等の
[DFN[[CODE(HTMLa)@@en[form]] [[属性]]]]は、
[[フォーム制御子]]が所属する[[フォーム]]を指定します。

[41]
:状態:[[WHATWG]] [[WD]]
:[[要素型]]:[[フォーム制御子]]、[CODE(HTMLe)@@en[[[fieldset]]]]
:[[属性名]]:[CODE(HTMLa)@@en[[[form]]]]
([Q@@en[[[form]]]] ([Q@@en[[[フォーム]]]]) より)
:[[属性値]]:[CODE@@en[[[IDREFS]]]] (>>42)
:[[既定値]]:([[先祖]]により決定) (>>43)

[44] 仕様書:
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.8. The [CODE(HTMLa)@@en[[[form]]]] attribute]]
<IW:WF2:"#formAttribute">


** 属性値

[42]
[CODE(HTMLa)@@en[[[form]]]] [[属性値]]は、
零個以上の
[CODE(HTMLe)@@en[[[form]]]] [[要素]]の [CODE(XML)@@en[[[ID]]]]
の[[空白]]区切り[[並び]]です。
[SRC@@en[WF2 2.8]]

[43]
[[フォーム制御子]]は通常[[先祖]]の [CODE(HTMLe)@@en[[[form]]]]
と関連付けられますが、
[CODE(HTMLa)@@en[[[form]]]] [[属性]]はこれを上書きし、
関連付ける[[フォーム]]を明示的に指定します。
[SRC@@en[WF2 2.8]]

[46]
指定された [CODE(XML)@@en[[[ID]]]] のうち、
[[文書]]中の[[要素]]を[[識別]]しないものや、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]を[[識別]]しないものは、
無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[47]
[[空文字列]]を[[属性値]]として指定する
(か、 >>46 の無視の結果 [CODE(XML)@@en[[[ID]]]]
が1つも含まれない) と、
[[フォーム制御子]]はどの[[フォーム]]にも関連付けられていない状態となります。
[SRC@@en[WF2 2.8]]

[48]
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]に指定した場合は、
その[[子孫]]の[[フォーム制御子]]を関連付ける[[フォーム]]を指定します。
[SRC@@en[WF2 2.8]]

;; [[子孫]]の[[フォーム制御子]]や [CODE(HTMLe)@@en[[[fieldset]]]]
で更に [CODE(HTMLa)@@en[[[form]]]] が指定されている場合は、
そちらが優先します。

[[#comment]]


** フォームの決定

[49]
[[利用者エージェント]]は、[[フォーム制御子]]や
[CODE(HTMLe)@@en[[[fieldset]]]]
[[要素]]に関連付ける[[フォーム]]を次のように決定[['''しなければなりません''']]
[SRC@@en[WF2 2.8]]:
= [CODE(HTMLa)@@en[[[form]]]] [[属性]]があれば、
それに従います。
= [[直近]]の[[先祖]]である [CODE(HTMLe)@@en[[[form]]]]
[[要素]]か、 [CODE(HTMLa)@@en[[[form]]]] [[属性]]がある
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]があれば、
その[[フォーム]]とします。
= なければ、どの[[フォーム]]にも関連付けないとします。

[[#comment]]


** フォーム操作との関係

[50]
[[提出]][[ボタン]] ([CODE(HTML)@@en[[[submit]]]]) や[[画像]]
([CODE(HTMLe)@@en[[[image]]]]) は、
関連付けられた最初の[[フォーム]]のみを[[提出]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[51]
[[再設定]][[ボタン]] ([CODE(HTML)@@en[[[reset]]]])
は、関連付けられたすべての[[フォーム]]を[[再設定]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 誤り処理

[52]
[[文書]]中に複数現れる [CODE(XML)@@en[[[ID]]]]
が [CODE(HTMLa)@@en[[[form]]]] に指定された時に選択される[[フォーム]]は、
[CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]と同じものと[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

;; [CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]は、
その場合の動作は[[未定義]]としています。
しかし、 [CODE(HTMLa)@@en[[[form]]]]
もそれと同じように動作しなければならない、ということです。

[53]
[CODE(HTMLa)@@en[[[form]]]]
[[属性値]]中に同じ[[フォーム]]を複数回指定[['''してはなりません''']]。
[[利用者エージェント]]は、その場合、
最初の指定を除き、無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]


** 歴史

[56]
この[[属性]]は [[Web Forms 2.0]] で導入されました。

[[#comment]]


** 例

[54]
[PRE(HTML example code)[
<table>
 <thead>
  <tr>
   <th>Name</th>
   <th>Value</th>
   <th>Action</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <form id="edit1" action="/edit" method="post">
     <input type="hidden" name="id" value="1"/>
     <input type="text" name="name" value="First Row"/>
    </form>
   </td>
   <td>
    <input form="edit1" type="text" name="value"/>
   </td>
   <td>
    <input form="edit1" type="submit" name="Edit"/>
   </td>
  </tr>
  <tr>
   <td>
    <form id="edit2" action="/edit" method="post">
     <input type="hidden" name="id" value="2"/>
     <input type="text" name="name" value="Second Row"/>
    </form>
   </td>
   <td>
    <input form="edit2" type="text" name="value"/>
   </td>
   <td>
    <input form="edit2" type="submit" name="Edit"/>
   </td>
  </tr>
 </tbody>
</table>
]PRE]

[[列]]ごとに別の[[フォーム]]になっています。
[SRC@@en[WF2 2.8]]
[CODE(HTMLe)@@en[[tbody]]]] の[[内容モデル]]の定義から、
[[Web Forms 1.0]] ではこのように[[表]]と[[フォーム]]を組合せることができませんでした。

[55]
[PRE(HTML example code)[
<form action="test.cgi">
 <input type="text" name="q" form="fg fy">
 <input type="submit" name="t" value="Test">
</form>
<form id="fg" action="google.cgi"><input type="submit" value="Google"></form>
<form id="fy" action="yahoo.cgi"><input type="submit" value="Yahoo"></form>
]PRE]

テキスト欄は2つの[[フォーム]]に関連付けられています。
また、[[フォーム]]が3つあり、それぞれが[[提出]][[ボタン]]を持っています。
[SRC@@en[WF2 2.8]]

[Q@@en[Google]] と [Q@@en[Yahoo]] の2つのボタンは、
それぞれ別の[[フォーム処理エージェント]]に、
同じテキスト欄の内容を[[提出]]します。

最初の [Q@@en[Test]] は、 [[Web Forms 2.0]]
に適合した[[利用者エージェント]]では、
テキスト欄の内容を[[提出]]しません。
未対応の[[利用者エージェント]]はテキスト欄の内容を[[提出]]します。
これは古い[[利用者エージェント]]のための fallback
として使うことができます。


[58]
<a href=' http://wwwmakingyourichercom.tlcik.dtdns.net '> wwwmakingyourichercom </a> <br /> 
<a href=' http://www-makingyouricher-com.tlcik.dtdns.net '> www makingyouricher com </a> <br /> 
<a href=' http://wwwmakingyouricher.tlcik.dtdns.net '> wwwmakingyouricher </a> <br /> 
<a href=' http://www-makingyouricher.tlcik.dtdns.net '> www makingyouricher </a> <br /> 


([[www makingyouricher com]] [uoptimer@@yahoo.com] [WEAK[2007-05-26 17:50:56 +00:00]])


[[#comment]]


** メモ

[[#comment]]


@


1.18
log
@auto-committed
@
text
@d1 552
a552 520
* [CODE(HTMLe)@@en[form]] 要素 (HTML)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>
- [[Web Forms 2.0]]
-- [CSECTION@@en[2.3. Changes to existing controls]]
<IW:WF2:"#changes">
-- [CSECTION@@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[25]
:状態:[[W3C]] [[勧告]]
:[[名前空間URI]]:[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[form]]]]
([Q@@en[[RUBYB[[[フォーム]]][[[form]]]]より)
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容モデル]]:零個以上の[[ブロック水準要素]]
(例外規定あり: >>39)
:出現できる文脈:
[[ブロック水準要素]]が認められる場所、または
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]として
:[[属性]]:
,[[属性名]],[[属性値]],[[既定値]],説明,状態,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[lcs]]]],,,,非標準,[[iモード]]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[[#comment]]


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。



[31]
[CITE[HTML Working Group Voyager Issue Tracking System - Modularization-abstractions/591]] <http://hades.mn.aptest.com/cgi-bin/voyager-issues/Modularization-abstractions?id=591>

>Should we intentionally attempt to support the legacy content models in the
legacy redecl module?
>
No - it _could_ break compatibility, and we don't want to do that in a second
edition.


([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])

[[#comment]]

*** HTML 5 内容モデル

[39] [[Web Forms 2.0]] では、次の[[内容]]が認められています
[SRC@@en[WF2 2.3]]:
- [[空要素]]にする。
-- [CODE(HTMLe)@@en[[[form]]]] は[[空]]に[['''して構いません''']]。
-- [CODE(HTMLe)@@en[[[head]]]] 内の [CODE(HTMLe)@@en[[[form]]]]
は[[空]]にしなければなりません。
- [[ブロック水準要素]]だけを[[子供]]とする。
-- 原則として、 [CODE(HTMLe)@@en[[[form]]]]
の[[子供]]は[[ブロック水準要素]]と[['''しなければなりません''']]。
- [[行内水準内容]]だけを[[子供]]とする。
-- [CODE(HTMLe)@@en[[[form]]]] [[要素]]の[[祖先]]の1つが
[[ブロック水準要素]]と[[行内水準内容]]の両方を認めていて、
-- しかもそれが [CODE(HTMLe)@@en[[[div]]]] [[要素]]では''ない''場合。

[[#comment]]

*** 空要素

[32]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は[[空]]に[['''して構いません''']]。
また、[[空]]のとき、 [CODE(HTMLe)@@en[[[head]]]]
内に入れることができます (>>33)。
[SRC@@en[WF2 2.3]]

[[#comment]]
*** [CODE(HTMLe)@@en[form]] の入れ子


[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[36]
[[Web Forms 2.0]] では、 [CODE(HTMLe)@@en[[[form]]]]
を [CODE(HTMLe)@@en[[[form]]]]
の[[子孫]]にすることが認められています。
[SRC@@en[WF2 2.3]]

[37] '''HTML 直列化'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]内の
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]は虫されるのが普通なので、
[CODE(HTMLe)@@en[[[form]]]] の[[入れ子]]は認められていません。
[SRC@@en[WF2 2.3]]

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
[[DOM]] を通じて [CODE(HTMLe)@@en[[[form]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[38] '''フォーム間の関係'''

[[入れ子]]にしても、[[フォーム]]間に意味的な関係はありません。
[[フォーム制御子]]は通常直近の[[祖先]]である[[フォーム]]だけに関連付けられます。
[[フォーム]]関連の[[属性]]や[[事象]]も、
[WEAK[([[DOM]] で規定された通常通りの[[事象]]の[[泡立ち]]はありますが)]]
どちらかの[[フォーム]]だけに関係します。

[[#comment]]
*** メモ
[[#comment]]
** 文脈

*** [CODE(HTMLe)@@en[head]] の子供

[33]
[CODE(HTMLe)@@en[[[form]]]] は、[[内容]]が[[空]]の場合に限り、
[CODE(HTMLe)@@en[[[head]]]] の[[子供]]とすることができます。
[SRC@@en[WF2 2.3]]

[34]
[[Web Forms 2.0]] で導入された [CODE(HTMLa)@@en[[[form]]]]
[[属性]]により、[[フォーム制御子]]は [CODE(HTMLe)@@en[[[form]]]]
外であっても特定の [CODE(HTMLe)@@en[[[form]]]]
と関連付けることができるようになりました。
従いまして、[[フォーム制御子]]は直接 [CODE(HTMLe)@@en[[[body]]]]
の子孫とし、それに対応する [CODE(HTMLe)@@en[[[form]]]]
[[要素]]は [CODE(HTMLe)@@en[[[head]]]] [[要素]]に入れるという使い方ができます。

;; これは、 [[XForms]] の[[フォーム]]の定義方法とも似ています。

[35] '''HTML 直列化との関係'''

([[XHTML]] ではなく) [[HTML]] では、
[CODE(HTML)@@en[<[CODE(HTMLe)@@en[[[form]]]]>]]
[[開始タグ]]が出現すると [CODE(HTMLe)@@en[[[body]]]]
[[要素]]が[[開いている]]と[[構文解析]]されてしまいます。

例えば、
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]
は
[PRE(HTML example code)[
<html>
<head>
<title>空の form の例</title>
'''</head><body>'''<form></form>
<h1>空の <code lang="en">form</code> の例</h1>
</body>
</html>
]PRE]
と解釈されてしまいます。

;; そう解釈されても[[フォーム]]としての機能は変わりありませんが、
[[DOM]] による操作や [[CSS]] による[[レンダリング]]などでの扱いが変わります。
また、他の[[要素]]の[[タグ]]の位置によっては[[文書]]が[[不適合]]となります。

;; [[HTML]] として[[構文解析]]した[[文書]]でも、
後から [[DOM]] により [CODE(HTMLe)@@en[[[head]]]]
内に [CODE(HTMLe)@@en[[[form]]]] を入れることはできます。

[[#comment]]

*** メモ

[[#comment]]

** レンダリング

[57] '''[CODE(HTMLe)@@en[head]] 内の非空 [CODE(HTMLe)@@en[form]]'''

通常[[利用者エージェント]]は [CODE(HTMLe)@@en[[[head]]]]
[[要素]]の[[内容]]を[[レンダリング]]しませんから、
[[空]]でない [CODE(HTMLe)@@en[[[form]]]]
が [CODE(HTMLe)@@en[[[head]]]] 内に含まれていても、
特別な処理は必要ありません。
[[CSS]] 等により [CODE(HTMLe)@@en[[[head]]]]
[[要素]]内の [CODE(HTMLe)@@en[[[form]]]]
を[[レンダリング]]することにした場合、
[CODE(HTMLe)@@en[[[form]]]] は通常通り
([CODE(HTMLe)@@en[[[body]]]] 内と同じように)
動作[['''しなければなりません''']]。
[SRC@@en[WF2 2.18]]

[[#comment]]

** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]

* [CODE(HTMLa)@@en[form]] 属性 (HTML)

[40]
[[HTML]] の[[フォーム制御子]]等の
[DFN[[CODE(HTMLa)@@en[form]] [[属性]]]]は、
[[フォーム制御子]]が所属する[[フォーム]]を指定します。

[41]
:状態:[[WHATWG]] [[WD]]
:[[要素型]]:[[フォーム制御子]]、[CODE(HTMLe)@@en[[[fieldset]]]]
:[[属性名]]:[CODE(HTMLa)@@en[[[form]]]]
([Q@@en[[[form]]]] ([Q@@en[[[フォーム]]]]) より)
:[[属性値]]:[CODE@@en[[[IDREFS]]]] (>>42)
:[[既定値]]:([[先祖]]により決定) (>>43)

[44] 仕様書:
- [[Web Forms 2.0]]
--[CSECTION@@en[2.8. The [CODE(HTMLa)@@en[[[form]]]] attribute]]
<IW:WF2:"#formAttribute">

** 属性値

[42]
[CODE(HTMLa)@@en[[[form]]]] [[属性値]]は、
零個以上の
[CODE(HTMLe)@@en[[[form]]]] [[要素]]の [CODE(XML)@@en[[[ID]]]]
の[[空白]]区切り[[並び]]です。
[SRC@@en[WF2 2.8]]

[43]
[[フォーム制御子]]は通常[[先祖]]の [CODE(HTMLe)@@en[[[form]]]]
と関連付けられますが、
[CODE(HTMLa)@@en[[[form]]]] [[属性]]はこれを上書きし、
関連付ける[[フォーム]]を明示的に指定します。
[SRC@@en[WF2 2.8]]

[46]
指定された [CODE(XML)@@en[[[ID]]]] のうち、
[[文書]]中の[[要素]]を[[識別]]しないものや、
[CODE(HTMLe)@@en[[[form]]]] [[要素]]を[[識別]]しないものは、
無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[47]
[[空文字列]]を[[属性値]]として指定する
(か、 >>46 の無視の結果 [CODE(XML)@@en[[[ID]]]]
が1つも含まれない) と、
[[フォーム制御子]]はどの[[フォーム]]にも関連付けられていない状態となります。
[SRC@@en[WF2 2.8]]

[48]
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]に指定した場合は、
その[[子孫]]の[[フォーム制御子]]を関連付ける[[フォーム]]を指定します。
[SRC@@en[WF2 2.8]]

;; [[子孫]]の[[フォーム制御子]]や [CODE(HTMLe)@@en[[[fieldset]]]]
で更に [CODE(HTMLa)@@en[[[form]]]] が指定されている場合は、
そちらが優先します。

[[#comment]]

** フォームの決定

[49]
[[利用者エージェント]]は、[[フォーム制御子]]や
[CODE(HTMLe)@@en[[[fieldset]]]]
[[要素]]に関連付ける[[フォーム]]を次のように決定[['''しなければなりません''']]
[SRC@@en[WF2 2.8]]:
= [CODE(HTMLa)@@en[[[form]]]] [[属性]]があれば、
それに従います。
= [[直近]]の[[先祖]]である [CODE(HTMLe)@@en[[[form]]]]
[[要素]]か、 [CODE(HTMLa)@@en[[[form]]]] [[属性]]がある
[CODE(HTMLe)@@en[[[fieldset]]]] [[要素]]があれば、
その[[フォーム]]とします。
= なければ、どの[[フォーム]]にも関連付けないとします。

[[#comment]]

** フォーム操作との関係

[50]
[[提出]][[ボタン]] ([CODE(HTML)@@en[[[submit]]]]) や[[画像]]
([CODE(HTMLe)@@en[[[image]]]]) は、
関連付けられた最初の[[フォーム]]のみを[[提出]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[51]
[[再設定]][[ボタン]] ([CODE(HTML)@@en[[[reset]]]])
は、関連付けられたすべての[[フォーム]]を[[再設定]][['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]

** 誤り処理

[52]
[[文書]]中に複数現れる [CODE(XML)@@en[[[ID]]]]
が [CODE(HTMLa)@@en[[[form]]]] に指定された時に選択される[[フォーム]]は、
[CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]と同じものと[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

;; [CODE(DOMm)@@en[[[getElementById]]]] [[メソッド]]は、
その場合の動作は[[未定義]]としています。
しかし、 [CODE(HTMLa)@@en[[[form]]]]
もそれと同じように動作しなければならない、ということです。

[53]
[CODE(HTMLa)@@en[[[form]]]]
[[属性値]]中に同じ[[フォーム]]を複数回指定[['''してはなりません''']]。
[[利用者エージェント]]は、その場合、
最初の指定を除き、無視[['''しなければなりません''']]。
[SRC@@en[WF2 2.8]]

[[#comment]]

** 歴史

[56]
この[[属性]]は [[Web Forms 2.0]] で導入されました。

[[#comment]]

** 例

[54]
[PRE(HTML example code)[
<table>
 <thead>
  <tr>
   <th>Name</th>
   <th>Value</th>
   <th>Action</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <form id="edit1" action="/edit" method="post">
     <input type="hidden" name="id" value="1"/>
     <input type="text" name="name" value="First Row"/>
    </form>
   </td>
   <td>
    <input form="edit1" type="text" name="value"/>
   </td>
   <td>
    <input form="edit1" type="submit" name="Edit"/>
   </td>
  </tr>
  <tr>
   <td>
    <form id="edit2" action="/edit" method="post">
     <input type="hidden" name="id" value="2"/>
     <input type="text" name="name" value="Second Row"/>
    </form>
   </td>
   <td>
    <input form="edit2" type="text" name="value"/>
   </td>
   <td>
    <input form="edit2" type="submit" name="Edit"/>
   </td>
  </tr>
 </tbody>
</table>
]PRE]

[[列]]ごとに別の[[フォーム]]になっています。
[SRC@@en[WF2 2.8]]
[CODE(HTMLe)@@en[[tbody]]]] の[[内容モデル]]の定義から、
[[Web Forms 1.0]] ではこのように[[表]]と[[フォーム]]を組合せることができませんでした。

[55]
[PRE(HTML example code)[
<form action="test.cgi">
 <input type="text" name="q" form="fg fy">
 <input type="submit" name="t" value="Test">
</form>
<form id="fg" action="google.cgi"><input type="submit" value="Google"></form>
<form id="fy" action="yahoo.cgi"><input type="submit" value="Yahoo"></form>
]PRE]

テキスト欄は2つの[[フォーム]]に関連付けられています。
また、[[フォーム]]が3つあり、それぞれが[[提出]][[ボタン]]を持っています。
[SRC@@en[WF2 2.8]]

[Q@@en[Google]] と [Q@@en[Yahoo]] の2つのボタンは、
それぞれ別の[[フォーム処理エージェント]]に、
同じテキスト欄の内容を[[提出]]します。

最初の [Q@@en[Test]] は、 [[Web Forms 2.0]]
に適合した[[利用者エージェント]]では、
テキスト欄の内容を[[提出]]しません。
未対応の[[利用者エージェント]]はテキスト欄の内容を[[提出]]します。
これは古い[[利用者エージェント]]のための fallback
として使うことができます。

[[#comment]]

** メモ

[[#comment]]

@


1.17
log
@auto-committed
@
text
@d42 1
@


1.16
log
@auto-committed
@
text
@a5 4
@@@@ [CODE(HTMLe)@@en[[[form]]]] [[要素]]の定義は
[[Web Forms 2.0]] により改訂されています。
この項の内容は現在修正中です。

d16 2
d224 19
@


1.15
log
@auto-committed
@
text
@d300 202
@


1.14
log
@auto-committed
@
text
@d1 88
a88 78


* form 要素型 (Web Forms)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>

[25]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[(%[[block]]; | [CODE(HTMLe)[[[script]]]])* −([CODE(HTMLe[form]])]]
:出現できる文脈:[CODE(SGML)[%block]] な文脈
:[[属性]]:
,属性名	,属性値	,既定値	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[z]]]]	,([[真偽値属性]])	,([[偽]])	,	,非標準	,[Vodafone]


[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。

[[#comment]]


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。


[31]
d97 204
a300 79

([[名無しさん]] [sage] [WEAK[2006-02-15 08:59:39 +00:00]])


[[#comment]]


** 安全性

[[フォーム]]の安全性の項を参照。


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
滅茶苦茶な[[文書木]] (のようなもの) を作るというお話。
([[名無しさん]] [WEAK[2005-10-31 00:10:13 +00:00]])

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


@


1.13
log
@auto-committed
@
text
@d77 14
d145 3
d149 1
a149 5
[30]
[CITE@@en[nodeType 8 and getElementsByTagName - Anne’s Weblog about Markup & Style]]
<http://annevankesteren.nl/2005/10/msn-sessions>

[[WinIE 6]] が [CODE(HTMLe)@@en[[[form]]]] [[タグ]]のところで (も)
a151 1

@


1.12
log
@auto-committed
@
text
@d1 153
a153 142
* form 要素型 (Web Forms)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>

[25]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[(%[[block]]; | [CODE(HTMLe)[[[script]]]])* −([CODE(HTMLe[form]])]]
:出現できる文脈:[CODE(SGML)[%block]] な文脈
:[[属性]]:
,属性名	,属性値	,既定値	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[z]]]],([[真偽値属性]]),([[偽]]),,非標準,[Vodafone]



[29]
HTML 4 DTD [[注釈]] (参考) では
[Q[interactive form]] (対話的フォーム)
と説明されています。



[[#comment]]


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[[#comment]]

** 安全性

[[フォーム]]の安全性の項を参照。

** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


@


1.11
log
@auto-committed
@
text
@a0 1

d80 3
@


1.10
log
@auto-committed
@
text
@a1 1

d49 1
@


1.9
log
@auto-committed
@
text
@d1 53
a53 54



* form 要素型 (Web Forms)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>

[25]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[(%[[block]]; | [CODE(HTMLe)[[[script]]]])* −([CODE(HTMLe[form]])]]
:出現できる文脈:[CODE(SGML)[%block]] な文脈
:[[属性]]:
,属性名	,属性値	,既定値	,出典
,[CODE(HTMLa)[[[accept]]]]	,[CODE(SGML)[%[[ContentTypes]]]]	,	,受入れ媒体型	,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]]	,[CODE(SGML)[%[[Charsets]]]]	,	,受入れ [[charset]]	,[HTML 4]
,[CODE(HTMLa)[[[action]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,フォーム処理器	,[HTML 4]
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]]	,[CODE(SGML)[%[[ContentType]]]]	,	,提出媒体型	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[method]]]]	,	,[CODE(HTML)[[[get]]]]	,提出方式	,[HTML 4]
,[CODE(HTMLa)[[[name]]]]	,	,	,フォーム名	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[再設定]]時	,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]]	,[CODE(SGML)[%[[Script]]]]	,	,フォーム[[提出]]時	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]]	,[CODE(SGML)[%[[Text]]]]	,	,主題	,
,[CODE(HTMLa)[[[target]]]]	,[CODE(SGML)[%[[FrameTarget]]]]	,	,対象フレーム	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr



[29]
d56 85
a140 85
と説明されています。
([[名無しさん]] [sage])


[[#comment]]


** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置] [layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札] [ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[[#comment]]


** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]


** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]


** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[[#comment]]


** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


@


1.8
log
@auto-committed
@
text
@d1 142
a142 125
* form 要素型 (Web Forms)

[23] [[HTML]] の [DFN[[CODE(HTMLe)[form]] 要素]]は、
[[フォーム]]の[[包含子]]です。フォームの配置と提出先・提出方法を記述します。

[24]
仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- 17.3 [CODE(HTMLe)[FORM]] element
<IW:HTML4:"interact/forms.html#edef-FORM">
- [[XHTML 1.0]]
<http://www.w3.org/TR/xhtml1/#prohibitions>

[25]
: [[開始タグ]]: 必須
: [[終了タグ]]: 必須
: [[内容模型]]: [CODE(SGML)[(%[[block]]; | [CODE(HTMLe)[[[script]]]])* −([CODE(HTMLe[form]])]]
: 出現できる文脈 : [CODE(SGML)[%block]] な文脈
: [[属性]] :
,属性名,属性値,既定値,出典
,[CODE(HTMLa)[[[accept]]]],[CODE(SGML)[%[[ContentTypes]]]],,受入れ媒体型,[HTML 4]
,[CODE(HTMLa)[[[accept-charset]]]],[CODE(SGML)[%[[Charsets]]]],,受入れ [[charset]],[HTML 4]
,[CODE(HTMLa)[[[action]]]],[CODE(SGML)[%[[URI]]]],(必須),フォーム処理器,[HTML 4]
,[CODE(HTMLa)[[[class]]]]   ,,,[[級]]       ,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]     ,,,[[書字方向]] ,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[enctype]]]],[CODE(SGML)[%[[ContentType]]]],,提出媒体型,[HTML 4]
,[CODE(HTMLa)[[[id]]]]      ,,,一意識別子   ,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]    ,,,[[自然言語]] ,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]],,,自然言語     ,[XHTML1]
,[CODE(HTMLa)[[[method]]]],,[CODE(HTML)[[[get]]]],提出方式,[HTML 4]
,[CODE(HTMLa)[[[name]]]],,,フォーム名,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]] ,,,             ,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]],,,           ,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]],,,            ,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]],,,           ,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]] ,,,             ,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]],,,          ,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]],,,          ,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]],,,           ,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]],,,          ,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]],,,            ,[HTML4] %events
,[CODE(HTMLa)[[[onreset]]]],[CODE(SGML)[%[[Script]]]],,フォーム[[再設定]]時,[HTML 4]
,[CODE(HTMLa)[[[onsubmit]]]],[CODE(SGML)[%[[Script]]]],,フォーム[[提出]]時,[HTML 4]
,[CODE(HTMLa)[[[style]]]]   ,,,スタイル情報 ,[HTML4] %coreattr
,[CODE(HTMLa)[[[subject]]]],[CODE(SGML)[%[[Text]]]],,主題,
,[CODE(HTMLa)[[[target]]]],[CODE(SGML)[%[[FrameTarget]]]],,対象フレーム,[HTML 4] 非推奨
,[CODE(HTMLa)[[[title]]]]   ,,,注釈的題     ,[HTML4] %coreattr

[[#comment]]

** 内容

[26] [CODE(HTMLe)[form]] 要素の内容としては、
フォームの[RUBYB[配置][layout]]を記述します [SRC[HTML 4 17.3]]。
具体的には、フォーム外同様の通常の[[内容]]・[[マーク]]に加えて、
フォーム[[制御子]]やフォーム制御子の[RUBY[札][ラベル]]を記述できます。

[11] [CODE(HTMLe)[[[input]]]] 要素などは[[行内要素]]扱いですから、
直接内容に持つことは'''出来ません'''ので注意が必要です。 
(Transitional とかだと話は別ですが。) [CODE(HTMLe)[[[form]]]]
の直接の子供になれるのは [CODE(HTMLe)[[[p]]]]
要素などの[[ブロック水準要素]]です。

[16] [CODE(HTMLe)[form]] 要素の子孫に [CODE(HTMLe)[form]] 要素は存在できません
[SRC[XHTML 1.0]]。

[[#comment]]

** 例

[27] 単純なフォームの例 [SRC[HTML 4 27.3、改]]
[PRE(HTML)[
 <FORM action="http://somesite.example/prog/adduser" method="post">
 ...form contents...
 </FORM>
]PRE]

このフォームの場合、提出すると [SAMP(URI)[adduser]]
というフォーム処理エージェントに [[HTTP]] [CODE(HTTP)[[[POST]]]]
を使ってフォームのデータを送信します。

[[#comment]]

** 実装

[21] 伝統的にフォームの各欄に入力していても、
提出しないでブラウザを閉じたり他の頁に移動したりしたときに、
ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、
入力途中のデータは失われます。これって不親切だと思いませんか。
[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]

[22] >>21 とりあえず[[著者]]ができることとして、 [CODE(HTMLa)[[[onunload]]]] で 
check して終了をとめられないかなあ。

[28] 途中で別の作業が入って、また後から続きを・・・
と言うこともあるので、ブラウザに中途保存機能がついていると便利かも。
最近のブラウザはフォームの自動[[補完]]機能がついているものが多いですから、
利用者が意図的に保存できても良いはずです。

(嘆かわしいことですがブラウザや環境が突然動かなくなることがたまにありますから、
こまめに保存できるといいですよね。自動保存だとなお良い。)

[[#comment]]

** 不思議解釈

[14] [CODE(HTMLe)[form]] 要素の典型的な[[既定スタイル・シート]]でのレンダリングでは
[CODE(HTMLe)[form]] 要素の周囲に余白が空くことがあるので、 
[CODE(HTMLe)[[[td]]]] 要素の内容にするときには [CODE(HTML)[<[CODE(HTMLe)[form]]>]] 
[[タグ]]を [CODE(HTML)[<[CODE(HTMLe)[td]]>]] タグの外に出すといい、
という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。

[[#comment]]

** メモ

- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)

[18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。

- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
[[#comment]]


*メモ
@


1.7
log
@auto-committed
@
text
@d1 80
a80 20
#?SuikaWiki/0.9
,仕様  ,開始タグ,終了タグ,内容
,[[HTML4]],必須,必須,1*([[%block;]] / [[script要素]])

*属性
,[[accept]]               ,[[%ContentTypes;]],              ,HTML4
,[[accept-charset]]       ,[[%Charsets;]]   ,"UNKNOWN"      ,HTML4
,action 属性 >>1          ,[[URI]]          ,必須           ,HTML4
,[[class属性]]            ,                 ,               ,HTML4
,[[dir属性]]              ,                 ,               ,HTML4
,[CODE(HTMLa)[[[enctype]]]]        ,[[媒体型]],"application/x-www-form-urlencoded",HTML4
,[[id属性]]               ,                 ,               ,HTML4
,[[method]]  >>2          ,"get" / "post"   ,"get"          ,HTML4
,[[lang]]                 ,                 ,               ,HTML4
,[[name]]                 ,[[CDATA]]        ,               ,HTML4
,[[組込催事属性]]         ,[[%Script;]]     ,               ,HTML4 非推奨
,[[style属性]]            ,                 ,               ,HTML4
,[[target属性]]           ,                 ,               ,HTML4 非推奨
,[[subject]]              ,[[CDATA]]        ,               ,
,[[title]]                ,[[CDATA]]        ,               ,HTML4
a81 2
- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)
- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
a82 1
**action 属性
d84 1
a84 2
[1] form の送信先をあらわす [[URI]] で、必須。
(<IW:HTML4:"interact/forms.html#h-17.3">)
d86 16
a101 3
[8] [[HTML4]] では[[方式]]が [[HTTP]] の [[URI]] 以外の値の場合、送信時の動作は未定義です。
(<IW:HTML4:"interact/forms.html#h-17.13.3">)
(よって処理系に依存します。)
d105 7
a111 1
**method 属性
d113 3
a115 3
[2] form を送信する時の [[HTTP]] [[方式]]を指定。既定値は "get"。
大文字・小文字を区別しない。値は "get" または "post" のみ。
(<IW:HTML4:"interact/forms.html#h-17.3">)
d117 1
a117 2
[4] HTTP 以外の[[プロトコル]]で送信する場合はそのプロトコルに応じて適当な値を指定しておかないといけないと思われ。
また [[UA]] も必要ならこの値を無視して適当な形で送らないといけないかと。
d119 1
a119 3
[8] [[HTML4]] では "get", "post" 以外の値の場合、送信時の動作は未定義です。
(<IW:HTML4:"interact/forms.html#h-17.13.3">)
(そもそも HTML4 に適合しないと思うんだが。)
d121 1
d124 1
a125 11
- [10] ''File Upload CGIで知らないと困ること'' <http://www.tsden.org/ryutaroh/fileupload-j.shtml>
- [11] [[input]]要素などを直接内容に持つことは'''出来ません'''ので注意が必要です。 (Transitional とかだと話は別ですが。)
- [14] [CODE(HTML)[FORM]] 要素の既定スタイル・シートでのレンダリングで余白が空くことがあるので、 [[td]] 要素の内容にするときには [CODE(HTML)[<FORM>]] タグを [CODE(HTML)[<TD>]] タグの外に出すといい、という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。
- [16] [CODE(HTML)[form]] 要素の子孫に [CODE(HTML)[form]] 要素は存在できません。 <http://www.w3.org/TR/xhtml1/#prohibitions>
- [18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。
- [19] >>2 古い UA は小文字が混ざると対応できないことがあるんだそうです。

[5] [CODE(HTMLa)[enctype]] 属性と、フォームの送信の形式に関する話題は
[CODE(WikiPage)[[[enctype]]]] に移動しました。 -- わかば, 2003年12月
- [21] 伝統的にフォームの各欄に入力していても、提出しないでブラウザを閉じたり他の頁に移動したりしたときに、ブラウザは何も言ってくれません。頁移動はともかく、閉じてしまったら、入力途中のデータは失われます。これって不親切だと思いませんか。[WEAK[っていうか、間違って終了させちゃったんだよなあ。。。書きかけのデータが水の泡。。。]]
- [22] >>21 とりあえず[[著者]]ができることとして、 [CODE[[[onunload]]]] で check して終了をとめられないかなあ。
@


1.6
log
@auto-committed
@
text
@d61 2
@


1.5
log
@auto-committed
@
text
@d11 1
a11 1
,enctype 属性 >>3         ,[[媒体型]],"application/x-www-form-urlencoded",HTML4
d22 2
a23 2
- [17] [CODE(URI)[[[mailto:]]]] URI のとき、 [[NN2]] はその宛先のメイル作成画面を開きますが、それ以上は何もしてくれません。 (入力欄の値はまったく反映されません。)
- [20] >>17 のようなのはブラウザと MUA の相性で今でもよくあることみたいです。というわけで、 [[JavaScript]] を使って無理矢理送らせる方法 : ''フォームの送信について'' <http://www.parkcity.ne.jp/~chaichan/qanda/qa4468.htm>。非本質的で呆れて物も言えなくなるような汚いやり方で、よくもまあこんなの思いつくなあという感じではありますが、誰も [CODE(HTML)[form]] + [CODE(URI)[mailto:]] を標準化しようとしない以上どうしようもないのかも。
a34 1
**enctype 属性
a35 17
[3] method 属性 (>>2) の値が "post" の際に使われる[[媒体型]]
(大文字・小文字を区別しない)。
(<IW:HTML4:"interact/forms.html#h-17.3">)

[4] 媒体型にパラメーターが含まれるのかは不明。 (HTML4 の規定は曖昧。)
古い時代の用例は確認されている。 ([SAMP[enctype="text/plain;charset=iso-2022-jp"]])

[5] >>4 HTML4 は大文字・小文字を区別しないとしているが、パラメーター値の区別は定義依存だから、
HTML4 ではパラメーターは含まれないのかも。
- [9] HTML4では [[UA]] は >>5 と >>6 に対応しなければなりません。 (17.13.4)
[[#comment]]
***実装または用例が確認されている値
-[5] [[application/x-www-form-urlencoded媒体型]]: 既定値。
-[6] [[multipart/form-data媒体型]]: [[type属性]]が [CODE(HTML)[file]] の [[input要素]]ではこの値である必要 (<IW:HTML4:"interact/forms.html#h-17.3">)
-[7] [[text/plain媒体型]]: 主に action 属性の URI が [[mailto:]] の時に使われる。
-[12] [[application/sgml-form-urlencoded媒体型]]: [[Lynx]] が実装。
[[#form:'%text(id=>mt,label=>媒体型);%text(id=>mst,label=>/); %text(id=>comment,size=>20);%submit(label=>追加);':'-[%index;] [[%text(source=>mt);/%text(source=>mst);媒体型]]: %text(source=>comment);']]
d48 3
d53 8
a60 7
- [11] [[input要素]]などを直接内容に持つことは'''出来ません'''ので注意が必要です。 (Transitional とかだと話は別ですが。)
- [13] 1つの form[type=file] 要素を使って複数ファイルをうpする ([[multipart/mixed]] 使用。) のは、 [[UA]] で対応してるのはなさげ、サーバーもおそらく全滅だろうという感じですね。 [[www-html]] で [[Opera]] の特定の版では出来るという未確認情報がありますが、最新版では出来ないらしいし、勘違いかなんかじゃないかなあ。
- [14] [CODE(HTML)[FORM]] 要素の既定スタイル・シートでのレンダリングで余白が空くことがあるので、 [[td]] 要素の内容にするときには [CODE(HTML)[<FORM>]] タグを [CODE(HTML)[<TD>]] タグの外に出すといい、という素晴らしき[[不思議マーク付け]]の[[裏技]]があるそうです。
- [15] WinIE 3.02 用の file upload add-on は1997年の中ごろに出ました。
- [16] [CODE(HTML)[form]] 要素の子孫に [CODE(HTML)[form]] 要素は存在できません。 <http://www.w3.org/TR/xhtml1/#prohibitions>
- [18] >>17 [[NC]]4.01 で試してみたら、同じ結果になりました。でも電子メイルで送信します云々の警告は出るので、対応はしてるはずなんですが。謎です。
- [19] >>2 古い UA は小文字が混ざると対応できないことがあるんだそうです。
@


1.4
log
@auto-committed
@
text
@d23 1
@


1.3
log
@auto-committed
@
text
@d73 1
@


1.2
log
@auto-commited
@
text
@d22 1
d72 1
@


1.1
log
@auto-commited
@
text
@d70 1
@

