head	1.5;
access;
symbols
	before-db-leaffile:1.4
	after-upgrade-to-suikawiki-3:1.4
	before-fork-suikawiki3:1.4
	after-restore-20040122:1.3;
locks; strict;
comment	@# @;


1.5
date	2004.04.23.03.45.26;	author wakaba;	state dead;
branches;
next	1.4;

1.4
date	2004.01.27.02.07.23;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2003.08.16.09.19.01;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.28.10.14.59;	author make;	state Exp;
branches;
next	1.1;

1.1
date	2003.06.06.12.26.44;	author make;	state Exp;
branches;
next	;


desc
@@


1.5
log
@auto-committed
@
text
@#?SuikaWiki/0.9
[1] [[NN]] の [[bookmark]] (栞) のデータ形式としては、
大昔から [[HTML]] に似た[[マーク付け言語]]が使われています。
巷の [[WWWブラウザ]]で表示させるとそれなりに整形して表示され、
栞を挟んだ先へのリンクも機能するようになっています。

Netscape 0.9 で既にこの形式が使われていますが、
もしかすると [[Mosaic]] でも使われてたんでしょうか?

[6] >>1 でも一般的な mosaic は [[mosaic.ini]] とかに書いてたと思われ。

[[#comment]]

*文書構造

[4] W3C HTML にないもの、非互換な物は「*」をつけてます。

-[CODE(HTML)[<HTML>]]  [MacIE4]
-- 文書型宣言の前に根要素開始タグ。阿呆としか言い様がない。しかも文書型と根要素型が一致してないし。
-[CODE(SGML)[[[DOCTYPE]]]]* ([[文書型宣言]]) [M0.9] [NN4] [Moz] [iCab] [N::B]
-- [WEAK[(純粋な HTML と区別するために必要なだけだけど)]] 当初からずっと文書型宣言をちゃんとしてるのは、とても偉い。[WEAK[[[DTD]] をちゃんと公開していればもっと偉かった。]]
- [CODE(SGML)[<!Created by Microsoft Internet Explorer 4.0 >]] [MacIE4]
-- [[SGML]] 的にも [[W3C]] HTML 的にも問題のない[[処理指令]]。
- [[注釈宣言]] [NN4] [Moz] [N::B]
--例:
[PRE[
<!-- This is an automatically generated file.
It will be read and overwritten.
Do Not Edit! -->
]PRE]
--[[ClassicMozilla]] では、その版の言語。 [NN4]
--[[Gecko]] Mozilla や [CODE(perl)[Netscape::Bookmark]] では英語。 [Moz] [N::B]
-[[根要素]]*
--文書型宣言で暗示されるのみで、[[タグ]]は使用されていない。
--根要素型名 (= [[文書型名]]) は
---[CODE(HTMLe)[Mosaic-Communications-Bookmark-file-1]] [M0.9]
---[CODE(HTMLe)[NETSCAPE-Bookmark-file-1]] [NN4] [MacIE4] [MOZ]
-- [CODE(HTMLe)[[[head]]]] 要素や [CODE(HTML)[[[body]]]]
要素は存在するのか不明 (少なくてもタグは存在しない)。
--[CODE(HTMLe)[[[meta]]]] [MacIE4] [MOZ] [iCab]
---@@[CODE(HTML)[[CODE(HTMLa)[[[http-equiv]]]]="Content-Type"]]
---@@[CODE(HTML)[[CODE(HTMLa)[[[content]]]]="text/html; [[charset]]=[VAR[charset]]"]]
---[SAMP(HTML)[<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=x-mac-roman">]] [MacIE4]
---[SAMP(HTML)[<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">]] [MOZ]
---[SAMP(HTML)[<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=X-MAC-SYSTEM">]] [iCab]
---See >>5
--- ここで [CODE(MIME)[[[text/html]]]] と名乗っているし、 MacIE 4.0 は最初に [CODE(HTML)[<HTML>]] と書くことからも、この栞形式は HTML の一種 (と主張されている) と言える。
--注釈宣言 [CODE(HTML)[<!-- Do not edit this file. -->]] [iCab]
--[CODE(HTMLe)[[[title]]]] [NN 4] [MacIE4] [N::B]
---内容は、
----Classic Mozilla では
----- 英語版: [CODE(HTML)[Bookmarks for [VAR[利用者名]]]] [NN4]
----- 日本語版: [CODE(HTML)[[VAR[利用者名]]のフ゛ックマーク]]
(もしかしたら [[Un|x]] 版では[CODE[フ゛]]ではなく[CODE[ブ]]かもしれない。未確認。 [[Windows]] 版では [[JISX0201]] の片仮名。) [NN 2〜4]
----- [VAR[利用者名]]は、設定で指定したもの。つまり、メイル送信時に使われるもの。[WEAK[(設定を変更してもそのまま使われるのか、適当なタイミングで書き換えられるのか。 Classic Mozilla 持ってる人がいたら確かめてみてください。)]]
----Gecko Mozilla では単に [CODE(HTML)[Bookmarks]] [Moz]
--- [CODE(HTML)[Favorites]] [MacIE4]
--- [CODE(HTML)[iCab Hotlist]] [iCab]
--[CODE(HTMLe)[[[h1]]]] [NN4] [MacIE4] [Moz] [iCab] [N::B]
---内容は [CODE(HTMLe)[title]] 要素と同じ。
---@@[CODE(HTMLa)[substatus_pos]] = [SAMP(HTML)["626,230"]] [MacIE4]
---@@[CODE(HTMLa)[window_position]] = [SAMP(HTML)["300,48"]] [MacIE4]
---@@[CODE(HTMLa)[window_open]] = [SAMP(HTML)["TRUE"]] [MacIE4]
---@@[CODE(HTMLa)[window_size]] = [SAMP(HTML)["580,710"]] [MacIE4]
--[CODE(HTML)[<DD>]]* [N::B]
([CODE(perl)[Netscape::Bookmark]] の不具合?)
--[[dl]] [NN4] [MacIE4] [Moz] [iCab] [N::B]
---[[p]]* [NN4] [MacIE4] [Moz] [N::B]
----常に空要素と思われる。
---[CODE(HTMLe)[[[dt]]]] (「フォルダ」) [NN4] [MacIE4] [Moz] [iCab] [N::B]
----[CODE(HTMLe)[[[h3]]]] [NN4] [MacIE4] [Moz] [iCab] [N::B]
-----階層の深さに関係なく、常に [CODE(HTMLe)[h3]] が使われる。
-----@@[[add_date]]* (追加日時 ([[Un*x時間]])) [NN4] [MOZ] [N::B]
-----@@[CODE(HTMLa)[object_type]] = [SAMP(HTML)["LINK"]] [MacIE4]
-----@@[CODE(HTML)[[[folded]]]] (論理値) [NN4] [MacIE4] [iCab] [N::B]
-----@@[CODE(HTML)[sort_order]] = [CODE(ABNF)[1*DIGIT]] (零以上) [MacIE4]
-----@@[[id]]* [MOZ]
------例: [SAMP(HTML)[NC:BookmarksRoot#$b742f5b]]
-----@@[[last_modified]]* [MOZ] (最終修正日 (Un*x 時間))
-----@@[CODE(HTML)[[[menuheader]]=menuheader]]
-----@@[[personal_toolbar_folder]][CODE(HTML)[="true"]] 
------個人用工具棒につかうフォルダである時指定。
-----内容は「フォルダ」名。
-----終了タグは省略可能。
----[CODE(HTMLe)[[[dd]]]] [N::B]
----- フォルダの説明。
開始タグのみ明示する。説明なしのときはタグも含めて省略。
----[CODE(HTMLe)[dl]] (入れ子構造) [NN4] [Moz] [MacIE4] [iCab] [N::B]
----[CODE(HTMLe)[p]]* [NN4] [MacIE4] [Moz] [N::B]
-----常に空要素と思われる。 [CODE(HTML)[DL]] 要素の後に必ず来る要素。(あわせて [CODE(HTML)[</DL><p>]])
---- [SAMP(HTML)[<DT>〜<DD>〜<DL>(下位)〜]] または [SAMP(HTML)[<DT>〜<DL>(下位)〜]] となり、終了タグがないので、下位構造のための [CODE(HTMLe)[dl]] が何の子要素なのかはっきりしません。 HTML の歴史を鑑みれば [CODE(SGML)[<![[ELEMENT]] [CODE(HTMLe)[dl]] - - ([CODE(HTMLe)[p]] -- = [[EMPTY]] --, [CODE(HTMLe)[dt]] -- = EMPTY --, #[[PCDATA]], ([CODE(HTMLe)[dd]] -- = EMPTY --, #PCDATA)?, [CODE(HTMLe)[dl]], [CODE(HTMLe)[p]])>]] という気持ちなのかもしれませんが、現代的には
[CODE(SGML)[<!ELEMENT [CODE(HTMLe)[dl]] - - ([CODE(HTMLe)[p]] -- (- o) --, [CODE(HTMLe)[dt]] -- (- o) --, [CODE(HTMLe)[dd]]? -- (- o) --, [CODE(HTMLe)[dl]] -- (- -) --, [CODE(HTMLe)[p]])>]] くらいに考えておくのが適当でしょう。
---[CODE(HTMLe)[dt]] (項目) [NN4] [MacIE4] [Moz] [iCab] [N::B]
----[CODE(HTMLe)[[[a]]]] [NN4] [MacIE4] [Moz] [iCab] [N::B]
-----@@[CODE(HTMLa)[add_date]]* [NN4] [MacIE4] [Moz] [N::B]
-----@@[CODE(HTMLa)[[[custom_address]]]] *= [SAMP(HTML)[""]] [MacIE4]
-----@@[CODE(HTMLa)[[[domain]]]]* = [SAMP(HTML)[""]] [MacIE4]
-----@@[CODE(HTMLa)[object_type]]* = [CODE(HTMLa)["LINK"]] [MacIE4]
-----@@[CODE(HTMLa)[sort_order]]*
-----@@[CODE(HTMLa)[subscribe]]* (論理値) [MacIE4] [iCab]
-----@@[CODE(HTMLa)[message]]* = [CODE(HTML)["The site has changed."]] / [CODE(HTML)["There were no changes."]] [MacIE4]
-----@@[CODE(HTML)[checksum]] = [CODE(ABNF)[ ["-"] 1*[[DIGIT]]]] [MacIE4]
-----@@[CODE(HTML)[[[aliasid]]=[CODE(ABNF)[1*DIGIT]]]]* [Moz] [N::B]
-----@@[[href]] ([[URI参照]]) [NN0.9] [NN4] [MacIE4] [Moz] [iCab] [N::B]
-----@@[[icon]] [MOZ] ([[favicon.ico]] URI)
-----@@[CODE(HTMLa)[[[intervalunit]]]] = [SAMP(HTML)["3"]] [MacIE4]
-----@@[CODE(HTMLa)[[[intervaltime]]]] = [CODE(ABNF)[1*DIGIT]] [MacIE4]
-----@@[[last_charset]] [MOZ] (最終閲覧時の charset)
-----@@[CODE(HTML)[[[last_modified]]]]* [NN4] [MacIE4] [iCab]
-----@@[CODE(HTML)[[[last_modified_changed]]]] (論理値) [MacIE4] [iCab]
-----@@[CODE(HTMLa)[lastupdate]]* = Un|x 時刻 [MacIE4] [iCab]
-----@@[CODE(HTMLa)[nextupdate]]* = Un|x 時刻 [MacIE4]
-----@@[[last_visit]]* (最終閲覧日 (Un*x 時間)) [NN4] [MacIE4] [Moz]
-----@@[CODE(HTMLa)[[[sound_name]]]]* = [SAMP(HTML)["ChuToy"]] [MacIE4]
-----@@[CODE(HTMLa)[[[subscribe_failed]]]]* (論理値) [MacIE4]
-----@@[CODE(HTMLa)[[[update]]]]* = Un|x 時刻 [iCab]
-----@@[CODE(HTMLa)[[[use_custom_address]]]]* = [CODE(HTML)["TRUE"]] / [CODE(HTML)["FALSE"]] [MacIE4]
-----@@[CODE(HTMLa)[[[user]]]]* = [SAMP(HTML)[""]] [MacIE4]
-----@@[CODE(HTMLa)[[[visitation_count]]]] = [CODE(ABNF)[1*DIGIT]] [MacIE4]
-----内容は項目名。
---[CODE(HTML)[[[dd]]]]: たまに開始タグ (と内容) だけがある。
---- 内容は説明。 [CODE(HTML)[[[br]]]] 要素型が使用可能。
---[[hr]] (仕切り線) [NN4]
----[[強制空要素]]。
---[CODE(HTML)[P]] [NN4] [N::B]
----常に空要素と思われる。 [CODE(HTML)[DL]] 要素 (の終了タグ)
の後に必ず来る要素。
- 最後のお尻 [CODE(HTMLe)[p]] (とその後の[[空白]]) で、
文書全体が終了。他の要素はタグなし。
-注釈宣言 [CODE(HTML)[<!-- iCab, 1999 -->]] [iCab]
- [[属性値]]は、[[属性値表記]]になっている。 [NN4] [MacIE4] [Moz] [iCab]
- [CODE(char)[&]] は [CODE(char)[&]] のまま出力される [MacIE4] [iCab] [N::B]。

[8] W3C HTML から推測して「フォルダ」の内容を表す [CODE(HTML)[DL]]
要素は直前の「フォルダ」の名前を表す [CODE(HTML)[DT]]
要素の内容の一部としましたが、出力されている字下げを考慮すると、
[CODE(HTML)[DL]] は [CODE(HTML)[DT]] の弟要素と考えた方が正しいのかもしれません。

要素型・属性名は、出力されるものでは一般に全て大文字で、
[CODE(HTMLe)[p]] 要素だけなぜか小文字になっています。

[5] 文書の [[charset]] は、 Classic Mozilla 
ではその環境の標準の[[文字コード]], Mozilla では [[UTF-8]]
を使うようです。

[9] [[iCab]] は意味のない [CODE(HTMLe)[p]] タグを全然吐きません。それに比較的綺麗なソースです。
(それでも [CODE(char)[&]] を escape してないのは同じ。もっとも、 SGML 的に必ずしも間違いではないが。。。)

[[#comment]]

*文書型宣言
-[2] [CODE(HTML)[<!DOCTYPE Mosaic-Communications-Bookmark-file-1>]]
-[3] [CODE(HTML)[<!DOCTYPE NETSCAPE-Bookmark-file-1>]] [MOZ]
[[#comment]]

*メモ
[10]
:[NN0.9]:[[MosaicCommunications]] 社の [[MosaicNetscape]] 0.9
:[NN1]  :[[NN]] 1 系
:[NN2]  :NN 2 系
:[NN3]  :NN 3 系
:[NN4]  :NN (単体または [[NC]] の一部) 4 系
:[Moz]  :[[mozilla.org]] の [[Mozilla]] や Netscape 6 以降
:[MacIE4] :[[MacIE]] 4.0
:[iCab]   :[[iCab]]
:[N::B]   :[CODE(perl)[Netscape::Bookmark]]

[12] [NN4], [MacIE4], [iCab] についての情報は [N::B]
付属の例文を元にしました。

Classic/Gecko Mozilla についてはちゃんと調べてないので完全な情報ではありません。

[7] <IW:CPAN:"Netscape::Bookmark">
という [[Perl]] モジュールがあります。
Netscape bookmark 形式の栞文書を取扱うことができます。
@


1.4
log
@auto-committed
@
text
@@


1.3
log
@auto-committed
@
text
@d10 2
a11 1
- [6] >>1 でも一般的な mosaic は [[mosaic.ini]] とかに書いてたと思われ。
d17 16
a32 1
-[[DOCTYPE]]* (文書型宣言)
d34 10
a43 12
--文書型宣言で暗示されるのみで、タグは使用されていない。
--要素型名は
---[CODE(HTML)[Mosaic-Communications-Bookmark-file-1]] [M0.9]
---[CODE(HTML)[NETSCAPE-Bookmark-file-1]] [MOZ]
--[[注釈宣言]]: 自動生成だから手動編集するなとの旨。
---[[ClassicMozilla]] では、その版の言語。
---Mozilla では英語。
-- [CODE(HTML)[[[head]]]] 要素型や [CODE(HTML)[[[body]]]]
要素型は存在するのか不明 (少なくてもタグは存在しない)。
--[[meta]] [MOZ]
---@@[[http-equiv]]
---@@[[content]]
d45 1
d47 3
a49 1
--[[title]]
d51 18
a68 6
----Classic Mozilla では「(利用者名)のブックマーク」 (各言語)
----Mozilla では「Bookmarks」
--[[h1]]
---内容は [CODE(HTML)[TITLE]] 要素と同じ。
--[[dl]]
---[[p]]*
d70 7
a76 5
---[[dt]] (「フォルダ」)
----[[h3]]
-----階層の深さに関係なく、常に [CODE(HTML)[H3]] が使われる。
-----@@[[add_date]]* [MOZ] (追加日時 ([[Un*x時間]]))
-----@@[CODE(HTML)[[[folded]]=folded]]
d81 1
a81 1
-----@@[[personal_toolbar_folder]][CODE(HTML)[="true"]]
d85 20
a104 8
----[CODE(HTML)[DL]]
----[CODE(HTML)[P]]*
-----常に空要素と思われる。 [CODE(HTML)[DL]] 要素の後に必ず来る要素。
---[CODE(HTML)[DT]] (項目)
----[[a]]
-----@@[CODE(HTML)[ADD_DATE]] [MOZ]
-----@@[CODE(HTML)[[[aliasid]]=[CODE(ABNF)[1*DIGIT]]]]
-----@@[[href]] [M0.9] [MOZ] (リンク先 URI)
d106 2
d109 11
a119 2
-----@@[CODE(HTML)[LAST_MODIFIED]]
-----@@[[last_visit]] [MOZ] (最終閲覧日 (Un*x 時間))
d123 1
a123 1
---[[hr]] (仕切り線)
d125 1
a125 1
---[CODE(HTML)[P]]
d128 5
d134 1
a134 1
W3C HTML から推測して「フォルダ」の内容を表す [CODE(HTML)[DL]]
d140 1
a140 1
[CODE(HTML)[p]] 要素だけなぜか小文字になっています。
d146 3
d157 19
a175 3
:[M0.9] :[[MosaicCommunications]] 社の Mosaic Navigator 0.9
:[NN2]  :[[NN] 2.0
:[MOZ]  :[[mozilla.org]] の [[Mozilla]] や Netscape 6 以降
@


1.2
log
@auto-commited
@
text
@d10 1
@


1.1
log
@auto-commited
@
text
@d24 2
d44 1
d48 1
d58 2
d61 3
a63 1
-----@@[CODE(HTML)[ADD_DATE]] [MOZ]
a64 2
-----@@[[last_charset]] [MOZ] (最終閲覧時の charset)
-----@@[[icon]] [MOZ] ([[favicon.ico]] URI)
d66 2
@

