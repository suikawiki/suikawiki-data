head	1.25;
access;
symbols
	suikawiki3-final:1.25
	before-db-leaffile:1.25
	after-upgrade-to-suikawiki-3:1.25
	before-fork-suikawiki3:1.25
	after-restore-20040122:1.25;
locks; strict;
comment	@# @;


1.25
date	2003.08.16.09.18.53;	author wakaba;	state Exp;
branches;
next	1.24;

1.24
date	2003.06.06.12.26.25;	author make;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.27.07.24.57;	author make;	state Exp;
branches;
next	1.22;

1.22
date	2003.01.26.04.49.34;	author w;	state Exp;
branches;
next	1.21;

1.21
date	2002.12.13.06.26.12;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2002.12.07.06.25.54;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2002.12.06.06.25.47;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2002.12.03.06.26.43;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2002.12.01.13.25.52;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2002.11.15.13.25.20;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2002.11.06.13.25.12;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2002.10.25.13.24.49;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2002.10.17.09.24.28;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2002.10.17.06.24.32;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2002.10.15.13.24.28;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.14.09.24.41;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2002.10.09.06.24.31;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2002.10.06.13.24.29;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2002.10.06.09.24.31;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2002.09.29.09.24.19;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2002.09.28.13.24.22;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2002.09.22.06.24.14;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.08.13.24.05;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2002.08.30.08.24.00;	author wakaba;	state Exp;
branches;
next	1.1;

1.1
date	2002.08.30.03.24.03;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.25
log
@auto-committed
@
text
@#?SuikaWiki/0.9
-[[試験運用中です]]
-[[使い方]]
--[[このwikiの独自拡張]]
--[[古い、すいかゐきのおしらせ]]
-[[寄稿文のライセンス]]
-[[解決済みのSuikaWikiについての意見]]
-のれんわけ
--[[SuikaWiki:WikiPage保管形式の検討]]
--[[SuikaWiki:URIの形式]]
--[[SuikaWiki:内容折衝]]
--[[SuikaWiki//名前とリンク]]
---[[SuikaWikiの名前空間実装]]

[1] この WikiPage の内容は、
[[SuikaWiki//BugTrack]] (不具合に関して),
[[SuikaWiki//欲しい機能]] (新機能に関して),
[[SuikaWiki//Plugin//要望受付]]
([[WikiPlugin]] について),
[[SuikaWiki//Linking]] (リンクについて)
に移動しました。
新しいご要望もそれぞれの新しい 
WikiPage に書いて下さい。

(どこに書けば良いのか分からない場合は、
[[SuikaWiki//欲しい機能]]に書いて下さい。)@


1.24
log
@auto-commited
@
text
@d15 9
a23 3
- 2002-10-15 (Tue) 19:30:29 ''[[名無しさん]]'' : "[" "[" '#DateTime' "]]" みたいなの。編集毎に書き加えてく。 (編集毎に書き換えられるのっているかな? 一番お尻に Last modified 出るからねえ)
- 2002-10-15 (Tue) 19:31:04 ''[[名無しさん]]'' : ていうかやっぱり #DT っているかな? 要らない気がしてきた。要る場面ってどんなのでしょう?
- [25] 目次は態々出力しなくても h[VAR[n]] 要素をスクリプトで列挙すれば良いだけだよなあ。
d25 2
a26 230
[35]  [[WikiPlugin]] のディレクトリを複数指定できるようにしたいです。
([[わかば]] [WEAK[2003-03-27 13:21]])

[36]  [[Sidebar]] 追加 [[Wiki//Plugin]]。
特定の WikiPage を Mozilla sidebar として追加するボタンを提供。
([[わかば]] [WEAK[2003-04-17 17:29]])

[37]  名前空間ごと凍結機能。例えば [SAMP[Wiki//Admin//]] に管理情報を集中させて、それを編集不能にする時に一々凍結するのは面倒だし、管理者以外が管理者が書いたかのようなことを書く虞もある。
(この例で実際にそう運用するかは管理者次第だけどね。)

その場合、個々の WikiPage の凍結指定による上書きを認めるか否かとか、
他の Wiki で実装例がある、凍結するけど
comment は OK、というのも実装してみようかとか検討中。

後者は、基本的に凍結だけどこの WikiForm
は OK, という指定も出来たらいいけど、
実装が複雑に(以下略)。

更には、 SuikaWiki では WikiPlugin が mode を追加するのもありだから、他の
Wiki にある表編集モードの plugin もあり。
そういう mode 単位の編集制御も必要。

そういうのを考えていくと、結局、幾つかの
Wiki で実装されていて、実装されてない
Wiki に対しての要望も高い、編集権管理機能に行き着く。
([[わかば]] [WEAK[2003-04-20 14:14]])

[38]  >>37 の続き。こんな処理モデルはどうだろう。
-処理対象 (Wiki, WikiNS, WikiPage, block*)
--* block は、現時点では WikiForm block。
将来的には [[H2H]] で任意の block。
--属性「制御権」 := 継承 (既定値) / 制御権名-制御権設定データベース
--WikiPlugin 及び wikiconfig から構成
(今の ViewDefinition のように。)
--ハッシュ「モード制御権{モード名}」 := 既定モードから継承 (既定値) / *利用者制御権設定
--既定モード = *利用者制御権設定
--利用者制御権設定 := 利用者名 ":" ('R' / 'W' / 'RW')
以上が権限情報データ構造。複雑に見えるのは Wiki-WikiNS-WikiPage-block という構造と mode が直交しているため。一番重みのある情報が当該 block の当該 mode の指定で、一番重みのない情報が Wiki 全体の全 mode 対象の指定。

これを処理する手順。
=クライアントが要求。利用者名 [CODE[anonymous]] を仮定。
=SuikaWiki は処理対象, mode と利用者名からアクセス権情報を取り出す。
=アクセス権に基づき処理又はエラーを返す。

さて、擬似「ログイン」という概念を導入する。認証は [[Apache]]/[[HTTP]] に任せる。
[WEAK[CGI からは名前しか取れないから、自前でやろうとするのは無茶だ。]]
=クライアントは認証情報つきで要求する。
=サーバーは認証できれば SuikaWiki に要求を CGI で渡す。
=SuikaWiki は処理対象, mode と利用者名からアクセス権情報を取り出す。
=アクセス権に基づき処理又はエラーを返す。

どう? モデル的には単純でしょ?
あとは上手く実装できるかどうかだけど・・・
([[わかば]])

[39] <IW:Tiki:VisualTour>。これはいい。
SuikaWiki の map と同じことだけど、図の方が断然いい。

[40]  map mode で [[text/*]] とか [[JavaScript関連の媒体型]]で perl が落ちます。
Map plugin の map_make_list の再帰の部分が原因であることは分かりましたが、本質的な原因は分かりません。。。
([[名無しさん]][iif: undef])

[[#form:'%submit(label=>書込む); %text(label=>"名前:",id=>name,size=>6); %text(label=>"メイル:",id=>mail,size=>5); [WEAK[%check(default,id=>record-date,label=>日付を記録);]]%n;%textarea(id=>msg,size=>20,lines=>3);':'[%index;]  %text(source=>msg);%n;(%name;%text(source=>mail,prefix=>" [",suffix=>"]");%iif(source=>record-date,true=>" [WEAK[%date;]]");)%n;':'%require(msg);']]

*実装しますが時間がかかるので待って下さい。な項目
- 2002-08-30 (Fri) 12:39:18 ''[[名無しさん]]'' : [[WalWiki]] のアンテナは取り込まないの?
--面白いけど現時点で移植して使い物になるか不明。
--実装するとしたら [[Wiki//Plugin]] で。
- 2002-08-30 (Fri) 13:17:25 ''[[名無しさん]]'' : [[一般実体参照]]とか[[数値文字参照]]みたいのを実装きぼんぬ
-- 2002-08-30 (Fri) 13:22:48 ''[[わかば]]'' : これも UTF-8 の後ね
- 2002-10-09 (Wed) 11:59:20 ''[[わかば]]'' : "「「" ... "」」" を "[[" ...
"]]" と同義にしようかと思ってます。 ([[UTF-8]] 化のあとね。)
- 2002-10-09 (Wed) 12:01:11 ''[[わかば]]'' : なお、 [[UTF-8]] 化が進まない(というか実行されない)理由は、 (1) ついでに[[名前空間]]導入とかしたいんで、かなり大改造になりそう。
--ていうか[[文字コード]]処理がまだ不十分。 [[perl]] 5.8 も入れなきゃ。
--(2.1) [[Unicode]] にすると似た符号位置問題で危険。 (見て見ぬふり案が有力)
--などが挙げられます。
--もちろん、 (999) めんどくさい。 ってのもあります。
- [5] [WEAK[2002-12-01 (日) 20:31]] ''[[わかば]]'': 簡易グラフ機能
[21] : [[わかば]] [sage] : 2003-01-15 20:45

やっぱり技術的内容を扱う Wiki ならそれ相応の語彙が欲しいし。翻訳なら対訳に良い語彙が要るし。
ということで要素の名前空間 (XML の名前空間みたいなもの) は必須だろうな。
だけど今の調子ではきついから、 [[H2H]] を待ちたいところ。


[27] : [[わかば]] : 2003-02-10 19:21

それから、 #form... の省略形を #comment:FormType として、 [VAR[FormType]]
の実体 ([CODE[#form]] での形式。) をどっか適当な WikiFormConst 形式の頁に入れておくという実装で、 [[WikiForm]] の aliasing みたいなのをやりたいと思ってますが、これも (ちょっと手間がかかるんで) そのうち。

[28] : [[わかば]] : 2003-02-10 19:23

色んな文書形式への対応は (形式的には) plugin に追い出したけど、 (もちろん完全な追い出しもする必要があるけど、更に) 文書/データベースから情報を取り出す界面, 例えば要約を得るとか、 obsoleted みたいな属性を調べるとか、そういうのもうまく object にして隠匿したいところ。

[29] : [[わ]] : 2003-02-10 19:25

>>28 とも絡んで、今の plugin は便宜上 [CODE(perl)[main::]] package から色んなものを使ってるけど、ちゃんと [CODE(perl)[SuikaWiki::Plugin]] の界面にコーディネートしなおすなどしないといけない。

;; いずれ [[mod_perl]] 化することも考えて。

[30] : [[わかば]] : 2003-02-23 12:04

CSS 出力は適当でいいから parse して、 Wiki 外部への [[@@import]]
を削除, [[expression]]() があれば削除, の処理が必要。
[[binding]], [[-moz-binding]] も考えた方がいいなぁ。

代わりに以前から検討中の [CODE(CSS)[-sik-]] 拡張を実装する、ということで。

[33] : [[わかば]] : 2003-02-26 11:02

参考: [[tDiary]] のスタイル機能 (元データの文法を、設定ファイルで1つ選べる。)
''tDiary.org - スタイル機能サポート開始'' <http://www.tdiary.org/20030128.html>


[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]
**前回の続きから機能

[6] 前に来た時からの変更点がはっきりわかればいいですけど、わからないこともあるんで、わかればいいなあと。
[[YukiWiki]] の差分表示は直前の版からの変更点であって一般にはそれは前に自分が見た時からの変更点ではない、と。

この機能を使いたい利用者はまず名前を送ります。 Wiki 側はそれ以降は (一時) [[cookie]]
を使ってこの段階を省略します。 (機能を使わない人は今までどおりなにもしなくていいです。)
Wiki page ごとの最終閲覧日時を記録しておいて、次の閲覧時には追加箇所を 
[[ins要素]]でマーク付けして渡します。 ([[del要素]]で削除点も復活させれば尚良い。)
(最終閲覧日時は cookie で保管しておいても良いんですが、通信量が多すぎると思います。)

問題点:
-プライバシー。特に、最初の名前認証部分を工夫しないと、他人の閲覧履歴を入手できてしまう。
-履歴保存は [[SuikaWiki]] では未実装。
-ins/del 要素を適切に挿入するには、今の YukiWiki 由来の parser では大改造が必要。 (ほぼ不可能と思われ。)
-サーバーが持ってないといけないデータがかなり (利用者数と Wiki page 数にほぼ比例して) 増える。

[7] そういうわけで、実装したらいいと思うけど、無期限棚上げ。
[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]

**正しい HTML の出力
[14] : [[名無しさん]] : 2002-12-06 (金) 14:43

今の SuikaWiki では高い確率で正しい HTML を出力しません。
しかも、 [[ruby要素]]を追加した時点で[[文書型宣言]]も[[注釈]]化しました。
-将来的目標として、 [[XHTML]] 適合を目指す。
-短期的目標として、 [[HTML4]].01 Transitional 適合を目指す。ただし ruby 使用時を除く。
-特定 [[UA]] 向け [[downgrade]] (See [[SuikaWiki:内容折衝]]) 時には対象
UA が正しく扱えることだけを目指し、必ずしも [[W3C]] 仕様に適合しなくても良い。

だけど、 [[YukiWiki]] 由来の今の parser のままで HTML 4.01 Strict
は無理だろうなー。

[22] >>14 SuikaWiki/0.9 の HTML 出力が関係しない編集とかの一部モードでは、相手が
[[Mozilla]] なら [[XHTML]] を吐くようにしました。 ([[Accept:]] 欄は今はまだ見てません。
[[User-Agent:]] で判別中。)

[41] : [[わかば]] : 2003-05-31 11:51

[[SuikaWiki::Markup::XML]] が思いのほか使える(謎)ので、
>>14 の roadmap は変更ね。
=とりあえず[[整形式]]な HTML を出力できるようにする
=- 既に8割方は完了済み。
=- プラグインの整理と並行してるからちょっと時間がかかるかも。=まともな XHTML になるようになんとかする
=- [CODE(HTML)[[[p]] 要素の中に [CODE(HTML)[[[form]]]] 要素が入る問題とかを何とかする。
= [[conneg]] をなんとかして、 [[XHTML2]] 出力 mode をつくる
=- XHTML 2 mode では独自の語彙をばしばし使う方向で。
=--まだ出来てない wikipage へのリンクの「?」とかも CSS で出す。
=--[[RDF]] の埋め込みとかも出来るようにする。
=--CODE(HTML) を somewhat:html みたいに要素型にしてみるとか。
=- navigation bar や toc は client 側 script で生成させる。

[42] : [[わかば]] : 2003-05-31 11:52

もっとも、予定はあくまで予定だからね:)

[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]
**file: 問題

[15] [[WikiForm]] (#form) の第1欄 (入力欄雛形) に , を使って表を書いたり、 *
を使って見出しにしたり、 - を使って一覧の項目にしたり出来ない。
これは #form の評価が inline 記法の評価時 (つまり block
記法の評価後) に行われるためである。
この問題は [[file:]] で発見されたので file: 問題と呼ばれる(謎)。

解決法としては #form の評価を block 
評価より先に行う方法があるが、そうすると構文の一貫性が失われる。

(しかしそもそも #comment はじめ # 命令類を inline
で実装したのが間違いだったとも考えられる。
現在 # 命令として存在するものは実際のところすべて block
として評価されるのが適当だし、 [[HTML]] 出力も block 要素だ。)

[16] ともかく一貫性のある構文とするためには '[' ']' 
を使った構文の体系的な見直しが必要と考えられる。
('[' ']' block の入れ子未実装問題もある。)

よってこの問題の修正は先送りし、更に検討する必要がある。

[17] なお、 [[file:]] で発見された問題だけの解決のためであれば
</td><td> を出力する WikiForm plugin 
を作れば良いが、要素のタグの入れ子関係が異常な[[不思議マーク付け]]となってしまう。

[31] : [[わかば]] : 2003-02-26 11:01

ていうか''file:問題''って名前が分かりにくいので、ちゃんと問題点を反映したもん題名にしませう、

[43] : [[わかば]] : 2003-05-31 12:01

というかそもそも、 WikiForm の埋め込み書式が問題ですよね。
中で改行も出来ないし。見通し悪すぎ。こんな書き方が使えるべきだよね。
[PRE[
<?
  %wikiform(
    input=>{ %text(label=>{Your Name}, id => name); },
    template=>{ [%index;] %text(source => name); },
    option => { page => AnotherPage },
  );
?>
]PRE]

だけど面倒だなあ・・・

[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]

[20] また、 WikiPage database も ([[YukiWiki]] でもやや実現されていますが)
固定とせず (hard-coding せず) に外部に完全に追い出して、従来の
plain-text database on file-system や外部 database
以外に、 [[CVS]] database や [[HTTP]] などからの入(出)力も実装出来れば良いでしょう。

[23] >>20 これって今話題の [[WikiFarm]] の小さい版みたいなものかなあ?

[24] >>23 そうともいえるし違うともいえる。

[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]
@


1.23
log
@pre-namespace
@
text
@a8 1
--[[SuikaWikiの名前空間実装]]
d12 2
d15 1
a15 2
- 2002-08-30 (Fri) 11:27:11 ''[[名無しさん]]'' : WikiName に [[SPACE]] 入れられるようにして
- 2002-10-15 (Tue) 19:30:29 ''[[名無しさん]]'' : "[[" '#DateTime' "]]" みたいなの。編集毎に書き加えてく。 (編集毎に書き換えられるのっているかな? 一番お尻に Last modified 出るからねえ)
d19 61
a79 2
[35]  [[WikiPlugin]] のディレクトリを複数指定できるようにしたいです。
([[わかば]] [WEAK[2003-03-27 13:21]])
d84 3
a86 1
- 2002-08-30 (Fri) 12:43:24 ''[[わかば]]'' : 面白いけど現時点で移植して使い物になるか不明。
d88 1
a88 6
- 2002-08-30 (Fri) 13:22:48 ''[[わかば]]'' : これも UTF-8 の後ね
- 2002-08-30 (Fri) 13:27:17 ''[[わかば]]'' : かねてからの懸案 [[H2H]] 化は遥かかなたのいつか。
- 2002-08-30 (Fri) 13:27:55 ''[[わかば]]'' : H2H への完全移行は無くて、またーり共存していくことになるんでは。
- 2002-08-30 (Fri) 13:28:13 ''[[わかば]]'' : H2H 自体立ち消えの可能性もあるが:)
- 2002-08-30 (Fri) 13:29:21 ''[[わかば]]'' : H2H 以外にも色んな形式を plug-in 的に使えるようにして、 Wiki system と format の分離を図りたいなーと
- 2002-09-29 (Sun) 17:20:42 ''[[名無しさん]]'' : [[SGML]] でいうところの [[!ENTITY]] と[[実体参照]]
d92 4
a95 9
- 2002-10-09 (Wed) 12:02:03 ''[[わかば]]'' : ていうか[[文字コード]]処理がまだ不十分。 [[perl]] 5.8 も入れなきゃ。
- 2002-10-09 (Wed) 12:02:51 ''[[わかば]]'' : (2.1) [[Unicode]] にすると似た符号位置問題で危険。 (見て見ぬふり案が有力)
- 2002-10-09 (Wed) 12:03:06 ''[[わかば]]'' : などが挙げられます。
- 2002-10-09 (Wed) 12:03:24 ''[[わかば]]'' : もちろん、 (999) めんどくさい。 ってのもあります。
- 2002-08-30 (Fri) 11:36:24 ''[[名無しさん]]'' : 小さな画像埋め込み用にうpできるといいかも。
- 2002-08-30 (Fri) 11:36:42 ''[[名無しさん]]'' : Wiki file には [[Base64]] で貼っとけばいい。
- 2002-08-30 (Fri) 11:37:11 ''[[名無しさん]]'' : だけど[[トロイの木馬]]化の危険はある。
- 2002-08-30 (Fri) 11:37:43 ''[[名無しさん]]'' : [[img要素]]使えば、可能性があるとしたら WinIE くらいじゃない?
- 2002-08-30 (Fri) 12:39:18 ''[[名無しさん]]'' : [[WalWiki]] のアンテナは取り込まないの?
a102 5
[26] : [[わかば]] : 2003-02-10 19:19

''AutomaticLink - ページとページが魔法のようにリンクする仕組み'' <http://coffeepo.hp.infoseek.co.jp/cgi-bin/cafewiki/cafewiki.cgi?mycmd=read&mypage=AutomaticLink&mynavi=folder>

のような自動リンクをなんとか実装したいと前々から思ってますが、どういう風に実装するのがいいのかわからなくて棚上げ中。
a131 22
[34] : [[わかば]] [sage] : 2003-03-17 19:26

[[Referer]] による双方向リンク機能は URI しか示しませんけど、リンク先の題とか概要とかを示せたらよさげ。
=誰かがリンクを辿ってきた結果、 Referer が残り、それを記録。
=誰かが Referer 記録のある WikiPage を要求。 (この時は URI しか提示できない。)
=その時に URI を情報取得候補リストに入れる。
=[[cron]] かなにかで、情報取得候補リストの URI を順に検査。
=検査結果を期限2〜6ヶ月くらい (要検討) の時限データベースに記録。
=以上の作業を経た Referer URI 提示時には、リンク先情報も共に示す。

Referer だけじゃなく、普通の文中のリンクにも同様の作業をしたらよさそう。

実際の検査内容は、 (とりあえず [[http:]] と [[https:]] 位を想定し、)
=URI を [[HTTP]] [[GET]] する。
==[[Accept:]] は [CODE(HTTP)[application/xhtml+xml, text/html, application/xml, text/xml, */*+xml]] 辺りか。 (でも [CODE(HTTP)[*/*+xml]] って書けなかったっけ?)
==[[Accept-Language:]] は、無指定にするのが無難。利用者の情報に応じて・・・だと情報が無限に膨らむ。
=入手した情報が [[HTML]] なら、次の情報を取得。
==題: [CODE(XPath)[/html/head/title]]
==要約: [CODE(XPath)[/html/head/meta[@@name=description]/@@content]]
==著者: /html/head/meta[@@name=author]/@@content or /html/head/link[@@rev=made]/@@title or /html/head/link[@@rev=made]/@@href or //address

こんなような具合。
a152 22
**スタイル・シート選択機能

[8] 現在[[スタイル・シート]]は [[WikiHTMLStyle]] 1つに固定ですが、これを複数使えるようにして、しかも閲覧者の好みを
[[Cookie]] ででも保持できるようにしたいと思ってます。
[9] : [[名無しさん]] : 2002-12-06 (金) 11:49

スタイル・シート自体も [[UA]] 
情報による条件分岐を埋め込めるようにしたらどうかという案があります。

[13] : [[名無しさん]] : 2002-12-06 (金) 14:02

一方で、 WikiPage に category 情報をつけて、特にこれを
stylesheet とも結び付けたらどうかとも思ってます。
(Category と[[名前空間]]は直交する概念として。)

こういうのを相互に矛盾なく実装するにはどうしたらいいでしょうか?

[32] : [[わかば]] : 2003-02-26 11:01

>>9,>>13 はまだだけど >>8 は実装してしまってますね。

[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]
d171 19
d221 16
@


1.22
log
@auto-commited
@
text
@d17 7
a23 2
- [25] 目次は態々出力しなくても h[VAR[n]] 要素をスクリプトで列挙すれば良いだけだよなあ。
[[#comment]]
d52 57
d146 4
d195 4
@


1.21
log
@Updated.
@
text
@d17 1
a17 1
- [1] 2002-10-25 (金) 18:56 ''[[わかば]]'': WikiName 中に & などがあるときに HTML の[[一般実体参照]]にあたる文字列そのものがみえるように出力されてしまうのは不具合ですが、いずれなおします。
d28 2
a29 1
- 2002-10-09 (Wed) 11:59:20 ''[[わかば]]'' : "「「" ... "」」" を "[[" ... "]]" と同義にしようかと思ってます。 ([[UTF-8]] 化のあとね。)
a39 1
- [4] [WEAK[2002-12-01 (日) 20:25]] ''[[わかば]]'': 実装は先になりそうだけどメモ。埋込み文字列を分離 ([[YukiWiki]] では既に分離されてる。ただし管理者のみ編集可能。) と world editable 化, 更に [[Accept-Language:欄]]を見て言語選択も実装したい。 (言語は日本語だけじゃなくて日本語2ch方言とかも入れたいなあ。)
d41 6
a85 7
**特殊頁の一般化

[10] 組込み定義されている特殊頁を、一般の Wiki page の記述としてかけるようにし、特殊頁としての扱いを廃止する。
-[11] [[SearchPage]] ―検索結果は既に特別扱いを廃止 (#searched 命令使用), 検索欄は [[WikiForm]] に置き換え。
-[12] [[CreatePage]] ―[[WikiForm]] に置き換え。

[[#form:'%submit(label=>書き込む); %text(label=>"名前 : ",id=>name,size=>"9.5"); %text(label=>"メイル: ",id=>mail,size=>9.5);%n;%textarea(id=>msg,size=>35,lines=>5);':'[%index;] : %name;%text(source=>mail,prefix=>" [",suffix=>"]"); : %date;%n;%n;%text(source=>msg);%n;':'%require(msg);']]
d99 4
a130 23
**入出力データ処理の分離

[18] 今の SuikaWiki では入力: SuikaWiki/0.9, 出力: 不思議 HTML
で固定されていて、おまけで CSS などいくつかの形式の入出力にも対応している。
この入出力の形式変換処理部分をプラグイン的モジュールとして分離することで、
Wiki CGI 界面をデータ形式に対して中立とする。

[19]
                  ↓Wiki converter
                     - HTML
                     - XHTML
 - SuikaWiki/0.9  → - XHTML + [[MathML]] + ...
 - H2H/2.0           - plain-text
                     - SuikaWiki/0.9 (無変換)
                     - [[H2H]]/2.0 (無変換)
                     :
                     - CSS2
 - CSS            → - CSS3
                     - [[CSS]] for [[WinIE]]
                     - HTML (人間向け)
 - RSS            → - [[RSS]]
                     - [[LIRS]]
                     - HTML (人間向け)
d136 4
@


1.20
log
@Updated.
@
text
@d128 30
@


1.19
log
@Updated.
@
text
@d88 2
a89 2
[14] : [[名無しさん]] : 2002-12-06 (金) 14:43

d98 29
a126 2
は無理だろうなー。

@


1.18
log
@Updated.
@
text
@d12 1
d41 1
a41 1
[[#comment]]
d60 41
@


1.17
log
@Updated.
@
text
@d39 20
a58 1
- [5] [WEAK[2002-12-01 (日) 20:31]] ''[[わかば]]'': 簡易グラフ機能
@


1.16
log
@Updated.
@
text
@d1 1
a12 1
- 2002-08-30 (Fri) 11:26:51 ''[[名無しさん]]'' : 注釈に番号付けて、ちょっと>>1よきいてくれ、とかかけるようにして
d14 5
a18 6
- 2002-08-30 (Fri) 11:31:27 ''[[名無しさん]]'' : [[InterWiki]] 復活きぼんぬ
- 2002-08-30 (Fri) 11:36:24 ''[[名無しさん]]'' : 小さな画像埋め込み用にうpできるといいかも。
- 2002-08-30 (Fri) 11:36:42 ''[[名無しさん]]'' : Wiki file には [[Base64]] で貼っとけばいい。
- 2002-08-30 (Fri) 11:37:11 ''[[名無しさん]]'' : だけど[[トロイの木馬]]化の危険はある。
- 2002-08-30 (Fri) 11:37:43 ''[[名無しさん]]'' : [[img要素]]使えば、可能性があるとしたら WinIE くらいじゃない?
- 2002-08-30 (Fri) 12:39:18 ''[[名無しさん]]'' : [[WalWiki]] のアンテナは取り込まないの?
a25 1
- 2002-09-28 (Sat) 21:13:12 ''[[名無しさん]]'' : 画像貼り付け ([[URI]] 末尾で判別する方式には問題がある。)
d33 7
a39 6
- 2002-10-14 (Mon) 16:14:47 ''[[名無しさん]]'' : 無作為に Wiki page に飛ぶのがあるといいかと。
- 2002-10-15 (Tue) 19:30:29 ''[[名無しさん]]'' : "[[" '#DateTime' "]]" みたいなの。編集毎に書き加えてく。 (編集毎に書き換えられるのっているかな? 一番お尻に Last modified 出るからねえ)
- 2002-10-15 (Tue) 19:31:04 ''[[名無しさん]]'' : ていうかやっぱり #DT っているかな? 要らない気がしてきた。要る場面ってどんなのでしょう?
- [1] 2002-10-25 (金) 18:56 ''[[わかば]]'': WikiName 中に & などがあるときに HTML の[[一般実体参照]]にあたる文字列そのものがみえるように出力されてしまうのは不具合ですが、いずれなおします。
- [2] 2002-11-06 (水) 19:35 ''[[名無しさん]]'' >>1 のようなのを行頭にかけないのは不便です。また "[" 1*DIGIT "]" を行頭にしかかけないのも結構不便。 "[" .. "]" がないと anchor にならないのも不便だけど、我慢するしかないかな、これは。
- [3] [WEAK[2002-11-15 (金) 18:56]] ''[[名無しさん]]'': ''SAMP'' 要素...
@


1.15
log
@Updated.
@
text
@d40 1
@


1.14
log
@Updated.
@
text
@d39 1
@


1.13
log
@Updated.
@
text
@d38 1
@


1.12
log
@Updated.
@
text
@a35 3
- 2002-10-15 (Tue) 19:20:01 ''[[名無しさん]]'' : 検索の時に magic header まで検索対象になってしまう。 [[SuikaWiki]] だとなんでもかんでもマッチする。
- 2002-10-15 (Tue) 19:22:53 ''[[名無しさん]]'' : 他の Wiki page の埋め込み '[EMBED[' ... ']EMBED]'
- 2002-10-15 (Tue) 19:26:25 ''[[名無しさん]]'' : 脚注 '[FN[' ... ']FN]' 表示は脚注とはいいつつも横 (float: right にして) に出るのはどう?
@


1.11
log
@Updated.
@
text
@a18 2
- 2002-08-30 (Fri) 11:49:01 ''[[名無しさん]]'' : Wiki page 中の anchor へとそこへのジャンプ機能が欲しい
- 2002-08-30 (Fri) 11:52:04 ''[[わかば]]'' : anchor は実装方法を考え中。
a20 1
- 2002-08-30 (Fri) 13:02:17 ''[[わかば]]'' : HTML でいう sub, sup, abbr, ruby とかが欲しいと前から思ってるけど、どう実装したら良い?
d30 11
a40 16
- 2002-10-09 (Wed) 12:01:11 ''[[わかば]]'' : なお、 [[UTF-8]] 化が進まない(というか実行されない)理由は、 (1) ついでに[[名前空間]]導入とかしたいんで、かなり大改造になりそう。
- 2002-10-09 (Wed) 12:02:03 ''[[わかば]]'' : ていうか[[文字コード]]処理がまだ不十分。 [[perl]] 5.8 も入れなきゃ。
- 2002-10-09 (Wed) 12:02:51 ''[[わかば]]'' : (2.1) [[Unicode]] にすると似た符号位置問題で危険。 (見て見ぬふり案が有力)
- 2002-10-09 (Wed) 12:03:06 ''[[わかば]]'' : などが挙げられます。
- 2002-10-09 (Wed) 12:03:24 ''[[わかば]]'' : もちろん、 (999) めんどくさい。 ってのもあります。
- 2002-10-14 (Mon) 16:14:47 ''[[名無しさん]]'' : 無作為に Wiki page に飛ぶのがあるといいかと。 
- 2002-10-15 (Tue) 18:46:07 ''[[名無しさん]]'' : CRLF CRLF '[INS[' CRLF ... CRLF ']INS]' CRLF CRLF は <p><ins>...</ins></p> になりますが、これは <ins><p>...</p></ins> とかになるべきです。
- 2002-10-15 (Tue) 19:20:01 ''[[名無しさん]]'' : 検索の時に magic header まで検索対象になってしまう。 [[SuikaWiki]] だとなんでもかんでもマッチする。
- 2002-10-15 (Tue) 19:22:53 ''[[名無しさん]]'' : 他の Wiki page の埋め込み '[EMBED[' ... ']EMBED]'
- 2002-10-15 (Tue) 19:26:25 ''[[名無しさん]]'' : 脚注 '[FN[' ... ']FN]' 表示は脚注とはいいつつも横 (float: right にして) に出るのはどう?
- 2002-10-15 (Tue) 19:30:29 ''[[名無しさん]]'' : "[[" '#DateTime' "]]" みたいなの。編集毎に書き加えてく。 (編集毎に書き換えられるのっているかな? 一番お尻に Last modified 出るからねえ)
- 2002-10-15 (Tue) 19:31:04 ''[[名無しさん]]'' : ていうかやっぱり #DT っているかな? 要らない気がしてきた。要る場面ってどんなのでしょう?
- 2002-10-15 (Tue) 20:33:30 ''[[わかば]]'' : page 内 anchor の書き方を決めました(未実装)。行ごとに ^-*\[([0-9]+)\] を anchor #anchor-$1 に置換します。 (-* は #comment に対応するため。)
- 2002-10-15 (Tue) 20:34:44 ''[[わかば]]'' : また、任意の場所の >>([0-9]+) を #anchor-$1 へのリンクにします。 (>>\d- とか >>\d-\d は実装しません (出来ません)。)
- 2002-10-15 (Tue) 20:35:47 ''[[わかば]]'' : 外部 Wiki page からのリンク方法はまだ検討中。 (場合によっては[[名前空間]]導入時に。)
- 2002-10-15 (Tue) 20:36:55 ''[[わかば]]'' : また、 #r?commenr で追加時にいま -$date... なのを -[$anchor] $date... に替えます。 $anchor の番号は追加先 Wiki page を scan して、一番大きい番号の次にします。
@


1.10
log
@Updated.
@
text
@d39 10
@


1.9
log
@Updated.
@
text
@d38 1
@


1.8
log
@Updated.
@
text
@d32 6
@


1.7
log
@Updated.
@
text
@d7 4
a13 2
- 2002-08-30 (Fri) 11:27:54 ''[[わかば]]'' : 1ディレクトリに全部 WikiName の名前で1つずついれてるから、ファイル多すぎなのをなんとかしとくれ。
- 2002-08-30 (Fri) 11:28:07 ''[[名無しさん]]'' : [[言い出しっぺの法則]]
a14 3
- 2002-08-30 (Fri) 11:32:47 ''[[名無しさん]]'' : Referer 記録があったらいい。
- 2002-08-30 (Fri) 11:33:17 ''[[わかば]]'' : Referer 記録するとしたら別ファイルです。(頻度高そうだから、本ファイルが壊れたら困る。)
- 2002-08-30 (Fri) 11:33:34 ''[[わかば]]'' : だけど別ファイルをどう管理するかな?
a18 4
- 2002-08-30 (Fri) 11:43:16 ''[[名無しさん]]'' : [[CVS]] 対応を真面目に実装しろゴラァ
- 2002-08-30 (Fri) 11:45:54 ''[[わかば]]'' : 生 [[HTML]] は将来的にも使えるようにはしません。
- 2002-08-30 (Fri) 11:46:35 ''[[わかば]]'' : Wiki は wiki で HTML ではないし、 (X)HTML としての文書構造を保証できないからです。
- 2002-08-30 (Fri) 11:47:28 ''[[わかば]]'' : それ以上に安全でない要素とか[[クロスサイトスクリプティング脆弱性]]問題とかを解決できませんし。
a19 2
- 2002-08-30 (Fri) 11:51:24 ''[[わかば]]'' : [[HTML]] でいうところの物理要素は追加しません。
- 2002-08-30 (Fri) 11:51:38 ''[[わかば]]'' : むしろ削除しました。
a20 5
- 2002-08-30 (Fri) 12:13:38 ''[[名無しさん]]'' : URI と本文の [[UTF-8]] 化は?
- 2002-08-30 (Fri) 12:16:44 ''[[わかば]]'' : [[Perl]] の Encode で [[ISO/IEC2022]] が扱えるようになったら。 2022 → UTF-8 は大体出来たから、あとは UTF-8 → 2022
- 2002-08-30 (Fri) 12:17:16 ''[[わかば]]'' : わかばは怠慢だからもう少し時間がかかりそう。 SuikaWiki の UTF-8 化はその更に後。
- 2002-08-30 (Fri) 12:17:52 ''[[わかば]]'' : 2022 と UTF-8 をどの程度 unify するかの問題もある。ちゃんとしないと大量のデータが読めなくなってしまう...
- 2002-08-30 (Fri) 12:18:43 ''[[わかば]]'' : 詳しくは [[PerlのEncode::ISO2022スレ]]で
a23 1
- 2002-08-30 (Fri) 13:04:58 ''[[わかば]]'' : [[名前空間]]については別[[スレ]]で。 →[[SuikaWikiの名前空間実装]]
d30 2
a31 8
- 2002-08-30 (Fri) 14:00:59 ''[[名無しさん]]'' : Last-modified
- 2002-09-22 (Sun) 13:53:40 ''[[わかば]]'' : ごめんなさい、当分 [[hack]] 出来ません。(気が乗らない)
- 2002-09-28 (Sat) 19:34:12 ''[[わかば]]'' : 幾つかは[[解決済みのSuikaWikiについての意見]]に移動しました。
- 2002-09-28 (Sat) 21:11:22 ''[[名無しさん]]'' : sage
- 2002-09-28 (Sat) 21:13:12 ''[[名無しさん]]'' : 画像貼り付け ([[URI]] 末尾で判別する方式には問題がある。)
- 2002-09-29 (Sun) 17:20:42 ''[[名無しさん]]'' : [[SGML]] でいうところの [[!ENTITY]] と[[実体参照]]
- 2002-10-06 (Sun) 17:18:00 ''[[名無しさん]]'' : [[SuikaWiki:WikiPage保管形式の検討]]
- 2002-10-06 (Sun) 18:13:16 ''[[名無しさん]]'' : [[SuikaWiki:URIの形式]]
@


1.6
log
@Updated.
@
text
@d49 2
@


1.5
log
@Updated.
@
text
@d48 1
@


1.4
log
@Updated.
@
text
@d6 1
a7 2
- 2002-08-30 (Fri) 11:25:36 ''[[名無しさん]]'' : 1行注釈欄をもっとおっきくして欲しい。
- 2002-08-30 (Fri) 11:26:22 ''[[名無しさん]]'' : 注釈欄をどの WikiPage にも標準装備して欲しい
a12 1
- 2002-08-30 (Fri) 11:32:13 ''[[名無しさん]]'' : 名前入れなかったら勝手に名無しさんにしてほすぃー
a19 1
- 2002-08-30 (Fri) 11:42:46 ''[[名無しさん]]'' : 見出し一覧で h3 以降が反映されないのをなんとかしろゴラァ
d23 1
a23 1
- 2002-08-30 (Fri) 11:47:28 ''[[わかば]]'' : それ以上に安全でない要素とか[[クロスサイトスクリプティンぐ脆弱性]]問題とかを解決できませんし。
d36 12
a47 12
- 2002-08-30 (Fri) 13:04:58 ''[[わかば]]'' : [[名前空間]]については別[[スレ]]で。 →[[SuikaWikiの名前空間実装]]
- 2002-08-30 (Fri) 13:17:25 ''[[名無しさん]]'' : [[一般実体参照]]とか[[数値文字参照]]みたいのを実装きぼんぬ
- 2002-08-30 (Fri) 13:22:48 ''[[わかば]]'' : これも UTF-8 の後ね
- 2002-08-30 (Fri) 13:27:17 ''[[わかば]]'' : かねてからの懸案 [[H2H]] 化は遥かかなたのいつか。
- 2002-08-30 (Fri) 13:27:55 ''[[わかば]]'' : H2H への完全移行は無くて、またーり共存していくことになるんでは。
- 2002-08-30 (Fri) 13:28:13 ''[[わかば]]'' : H2H 自体立ち消えの可能性もあるが:)
- 2002-08-30 (Fri) 13:29:21 ''[[わかば]]'' : H2H 以外にも色んな形式を plug-in 的に使えるようにして、 Wiki system と format の分離を図りたいなーと
- 2002-08-30 (Fri) 14:00:59 ''[[名無しさん]]'' : Last-modified
- 2002-08-30 (Fri) 15:46:33 ''[[名無しさん]]'' : [[ins要素]] & [[del要素]]キボーン
- 2002-09-08 (Sun) 21:47:27 ''[[名無しさん]]'' : [[news:URI]] へのリンクが上手く行きません: <news://suika.fam.cx/suika.robamimi>
- 2002-09-22 (Sun) 13:53:40 ''[[わかば]]'' : ごめんなさい、当分 [[hack]] 出来ません。(気が乗らない)
[[#comment]]@


1.3
log
@Updated.
@
text
@d49 1
@


1.2
log
@Updated.
@
text
@d48 1
@


1.1
log
@Updated.
@
text
@d7 41
a47 29
- 2002-08-30 (Fri) 11:25:36 ''[[名無しさん]]'' : 1行注釈欄をもっとおっきくして欲しい。
- 2002-08-30 (Fri) 11:26:22 ''[[名無しさん]]'' : 注釈欄をどの WikiPage にも標準装備して欲しい
- 2002-08-30 (Fri) 11:26:51 ''[[名無しさん]]'' : 注釈に番号付けて、ちょっと>>1よきいてくれ、とかかけるようにして
- 2002-08-30 (Fri) 11:27:11 ''[[名無しさん]]'' : WikiName に [[SPACE]] 入れられるようにして
- 2002-08-30 (Fri) 11:27:54 ''[[わかば]]'' : 1ディレクトリに全部 WikiName の名前で1つずついれてるから、ファイル多すぎなのをなんとかしとくれ。
- 2002-08-30 (Fri) 11:28:07 ''[[名無しさん]]'' : [[言い出しっぺの法則]]
- 2002-08-30 (Fri) 11:31:27 ''[[名無しさん]]'' : [[InterWiki]] 復活きぼんぬ
- 2002-08-30 (Fri) 11:32:13 ''[[名無しさん]]'' : 名前入れなかったら勝手に名無しさんにしてほすぃー
- 2002-08-30 (Fri) 11:32:47 ''[[名無しさん]]'' : Referer 記録があったらいい。
- 2002-08-30 (Fri) 11:33:17 ''[[わかば]]'' : Referer 記録するとしたら別ファイルです。(頻度高そうだから、本ファイルが壊れたら困る。)
- 2002-08-30 (Fri) 11:33:34 ''[[わかば]]'' : だけど別ファイルをどう管理するかな?
- 2002-08-30 (Fri) 11:36:24 ''[[名無しさん]]'' : 小さな画像埋め込み用にうpできるといいかも。
- 2002-08-30 (Fri) 11:36:42 ''[[名無しさん]]'' : Wiki file には [[Base64]] で貼っとけばいい。
- 2002-08-30 (Fri) 11:37:11 ''[[名無しさん]]'' : だけど[[トロイの木馬]]化の危険はある。
- 2002-08-30 (Fri) 11:37:43 ''[[名無しさん]]'' : [[img要素]]使えば、可能性があるとしたら WinIE くらいじゃない?
- 2002-08-30 (Fri) 11:42:46 ''[[名無しさん]]'' : 見出し一覧で h3 以降が反映されないのをなんとかしろゴラァ
- 2002-08-30 (Fri) 11:43:16 ''[[名無しさん]]'' : [[CVS]] 対応を真面目に実装しろゴラァ
- 2002-08-30 (Fri) 11:45:54 ''[[わかば]]'' : 生 [[HTML]] は将来的にも使えるようにはしません。
- 2002-08-30 (Fri) 11:46:35 ''[[わかば]]'' : Wiki は wiki で HTML ではないし、 (X)HTML としての文書構造を保証できないからです。
- 2002-08-30 (Fri) 11:47:28 ''[[わかば]]'' : それ以上に安全でない要素とか[[クロスサイトスクリプティンぐ脆弱性]]問題とかを解決できませんし。
- 2002-08-30 (Fri) 11:49:01 ''[[名無しさん]]'' : Wiki page 中の anchor へとそこへのジャンプ機能が欲しい
- 2002-08-30 (Fri) 11:51:24 ''[[わかば]]'' : [[HTML]] でいうところの物理要素は追加しません。
- 2002-08-30 (Fri) 11:51:38 ''[[わかば]]'' : むしろ削除しました。
- 2002-08-30 (Fri) 11:52:04 ''[[わかば]]'' : anchor は実装方法を考え中。
- 2002-08-30 (Fri) 12:13:38 ''[[名無しさん]]'' : URI と本文の [[UTF-8]] 化は?
- 2002-08-30 (Fri) 12:16:44 ''[[わかば]]'' : [[Perl]] の Encode で [[ISO/IEC2022]] が扱えるようになったら。 2022 → UTF-8 は大体出来たから、あとは UTF-8 → 2022
- 2002-08-30 (Fri) 12:17:16 ''[[わかば]]'' : わかばは怠慢だからもう少し時間がかかりそう。 SuikaWiki の UTF-8 化はその更に後。
- 2002-08-30 (Fri) 12:17:52 ''[[わかば]]'' : 2022 と UTF-8 をどの程度 unify するかの問題もある。ちゃんとしないと大量のデータが読めなくなってしまう...
- 2002-08-30 (Fri) 12:18:43 ''[[わかば]]'' : 詳しくは [[PerlのEncode::ISO2022スレ]]で
@

