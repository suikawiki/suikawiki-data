head	1.68;
access;
symbols
	suikawiki3-final:1.68
	before-db-leaffile:1.2
	after-upgrade-to-suikawiki-3:1.2
	before-fork-suikawiki3:1.2
	after-restore-20040122:1.2;
locks; strict;
comment	@# @;
expand	@b@;


1.68
date	2008.11.08.03.27.32;	author wakaba;	state Exp;
branches;
next	1.67;

1.67
date	2008.11.03.02.58.11;	author wakaba;	state Exp;
branches;
next	1.66;

1.66
date	2008.10.23.03.16.06;	author wakaba;	state Exp;
branches;
next	1.65;

1.65
date	2008.09.13.02.59.52;	author wakaba;	state Exp;
branches;
next	1.64;

1.64
date	2008.07.03.04.20.45;	author wakaba;	state Exp;
branches;
next	1.63;

1.63
date	2008.02.18.02.59.11;	author wakaba;	state Exp;
branches;
next	1.62;

1.62
date	2008.01.18.02.54.01;	author wakaba;	state Exp;
branches;
next	1.61;

1.61
date	2007.09.23.02.42.46;	author wakaba;	state Exp;
branches;
next	1.60;

1.60
date	2007.07.08.02.52.10;	author wakaba;	state Exp;
branches;
next	1.59;

1.59
date	2007.04.23.02.33.09;	author wakaba;	state Exp;
branches;
next	1.58;

1.58
date	2007.04.03.02.42.19;	author wakaba;	state Exp;
branches;
next	1.57;

1.57
date	2007.03.23.02.52.00;	author wakaba;	state Exp;
branches;
next	1.56;

1.56
date	2007.03.08.02.48.22;	author wakaba;	state Exp;
branches;
next	1.55;

1.55
date	2007.02.27.02.31.52;	author wakaba;	state Exp;
branches;
next	1.54;

1.54
date	2007.02.18.02.34.38;	author wakaba;	state Exp;
branches;
next	1.53;

1.53
date	2007.02.08.02.26.13;	author wakaba;	state Exp;
branches;
next	1.52;

1.52
date	2007.02.03.02.31.09;	author wakaba;	state Exp;
branches;
next	1.51;

1.51
date	2007.01.31.02.30.11;	author wakaba;	state Exp;
branches;
next	1.50;

1.50
date	2007.01.27.02.31.32;	author wakaba;	state Exp;
branches;
next	1.49;

1.49
date	2007.01.08.02.32.59;	author wakaba;	state Exp;
branches;
next	1.48;

1.48
date	2006.11.23.02.16.10;	author wakaba;	state Exp;
branches;
next	1.47;

1.47
date	2006.11.18.02.21.03;	author wakaba;	state Exp;
branches;
next	1.46;

1.46
date	2006.11.13.02.22.05;	author wakaba;	state Exp;
branches;
next	1.45;

1.45
date	2006.10.31.02.20.38;	author wakaba;	state Exp;
branches;
next	1.44;

1.44
date	2006.10.27.02.21.42;	author wakaba;	state Exp;
branches;
next	1.43;

1.43
date	2006.10.08.02.18.15;	author wakaba;	state Exp;
branches;
next	1.42;

1.42
date	2006.09.08.02.18.17;	author wakaba;	state Exp;
branches;
next	1.41;

1.41
date	2006.08.31.02.19.12;	author wakaba;	state Exp;
branches;
next	1.40;

1.40
date	2006.08.08.02.17.10;	author wakaba;	state Exp;
branches;
next	1.39;

1.39
date	2006.07.31.02.17.11;	author wakaba;	state Exp;
branches;
next	1.38;

1.38
date	2006.07.23.02.15.06;	author wakaba;	state Exp;
branches;
next	1.37;

1.37
date	2006.04.27.02.16.43;	author wakaba;	state Exp;
branches;
next	1.36;

1.36
date	2006.04.23.02.22.58;	author wakaba;	state Exp;
branches;
next	1.35;

1.35
date	2006.03.31.02.13.42;	author wakaba;	state Exp;
branches;
next	1.34;

1.34
date	2006.03.23.02.14.36;	author wakaba;	state Exp;
branches;
next	1.33;

1.33
date	2006.03.13.02.14.08;	author wakaba;	state Exp;
branches;
next	1.32;

1.32
date	2006.03.03.02.16.25;	author wakaba;	state Exp;
branches;
next	1.31;

1.31
date	2006.02.03.02.17.42;	author wakaba;	state Exp;
branches;
next	1.30;

1.30
date	2006.01.08.02.13.59;	author wakaba;	state Exp;
branches;
next	1.29;

1.29
date	2005.12.27.02.13.53;	author wakaba;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.13.02.14.16;	author wakaba;	state Exp;
branches;
next	1.27;

1.27
date	2005.12.03.02.25.58;	author wakaba;	state Exp;
branches;
next	1.26;

1.26
date	2005.11.18.02.17.42;	author wakaba;	state Exp;
branches;
next	1.25;

1.25
date	2005.10.08.02.14.29;	author wakaba;	state Exp;
branches;
next	1.24;

1.24
date	2005.09.18.02.09.43;	author wakaba;	state Exp;
branches;
next	1.23;

1.23
date	2005.08.13.02.07.03;	author wakaba;	state Exp;
branches;
next	1.22;

1.22
date	2005.08.03.02.06.58;	author wakaba;	state Exp;
branches;
next	1.21;

1.21
date	2005.07.13.02.11.49;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2005.07.08.02.07.27;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2005.07.03.02.11.44;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2005.05.13.02.10.46;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2005.05.08.02.07.19;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2005.04.27.02.15.27;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2005.04.23.02.11.07;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2005.04.03.02.05.55;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2005.03.31.02.11.47;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2005.03.18.02.06.18;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2005.03.13.02.06.22;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.08.02.07.13;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2005.03.03.02.05.41;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.23.02.10.23;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2005.02.08.02.11.13;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2005.01.23.02.06.19;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2005.01.18.02.09.44;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.13.02.04.16;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2004.09.08.02.05.53;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.27.02.02.55;	author wakaba;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.13.02.03.14;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.68
log
@auto-committed
@
text
@[135]
[DFN[[RUBYB[素片識別子] [fragment identifier]]]]は、
[[URL]] の一部分であり、[[素片識別子]]''以外''の部分により識別される[[資源]]の一部分、
あるいは[[表現]]の一種を識別するために使われます。


* 用語に関して


** 呼称

[136] '''俗称''':
[[DOM]] では、[[素片識別子]]を表す[[属性名]]として「[CODE(DOMa)@@en[[[hash]]]]」
を使っています。これは、[[素片識別子]]の先頭を表す[[文字]]「[CODE(char)[#]]」
の俗称に由来しています。

[137] 特に [[HTML]] [[文書]]の[[素片識別子]]については、「[[アンカー]]」や
「[[アンカー名]]」と呼ばれることもあります。

[21] '''日本語訳''':
「[[素片識別子]]」 (fragment identifier) は、
[DFN[フラグメント識別子]]、[DFN[断片識別子]]などとも訳されます。

[[#comment]]


** 定義

[1] '''ISO-HTML における定義''':

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[152] '''RELAX NG における定義''':

>
:3.6 fragment identifier:
additional information in a URI reference used by a user agent after the retrieval action on a URI has been
successfully performed

;; [[ISO/IEC 19757]]‐2:2003

[[#comment]]


** URI/URL と素片識別子

[22] [[RFC 2396]] においては[[素片識別子]]は [[URI]] の一部とはされていませんでした。
[[絶対URI]], [[相対URI]], [[素片識別子]]をあわせたものを
[[URI参照]]と呼んでいました。

[138]
新しい [[RFC 3986]] は、[[素片識別子]]を [[URI]] の一部としています。

[139]
非公式には、以前から[[素片識別子]]を [[URI]] の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)
[[HTML 4]] のように、[[素片識別子]]を [[URI]] の一部としない仕様書を参照しておきながら、
(「[[URI参照]]」ではなく) 「[[URI]]」という用語を使い、
しかも[[素片識別子]]も使えるような規定が含まれる仕様も存在し、
混乱の元となっていました。

[[#comment]]


** メモ

[[#comment]]


* 仕様に関して

[20] '''主たる仕様''':
- [DEL@@en[[[RFC 1630]] ([[URI]] 1[SUP[st]])]]
- [DEL@@en[[[RFC 1738]] ([[URL]] 2[SUP[nd]])]]
- [DEL[[[RFC 1808]] ([[相対URL]])]]
- [DEL@@en[[[RFC 2396]] ([[URI]] 3[SUP[rd]])]]
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>
- [[HTML 5]] ([[URL]])

[137] '''関連仕様''':
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9


** 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


** 部分資源を識別しない、あるいは何を識別するか未定義の場合

[140] 本来、[[媒体型]]についての[[素片識別子]]の仕様書は、
[[素片識別子]]がどのような[[部分資源]]を識別するのかを完全に定義するべきです。
例えば、 [CODE(HTMLa)@@en[[[id]]]] [[属性]]の値が[[一致]]する[[要素]]を識別するような場合、
[[一致]]する[[要素]]が存在しない場合に何を識別するのか (しないのか)、
実装がどのように動作するべきなのかを規定しておくべきです。

[141] ですが、現実には、多くの仕様はそれを曖昧にしています。
更には、ほとんどの[[媒体型]]については、そもそも[[素片識別子]]が定義されていません。

[3] [[HTML]] [[文書]] ([CODE(MIME)@@en[[[text/html]]]]) の場合、
[[文書]]内に存在しない[[素片識別子]]つきの [[URI参照]]を[[レンダリング]]させようとすると、
[[文書]]の最初を表示する [[Webブラウザ]] 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示する [[Webブラウザ]] [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


** メモ

[[#comment]]


* 意味に関して


** 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[142] [[URI scheme]] によっては、歴史的、その他の理由により、
構文的に[[素片識別子]]と矛盾する規定・実装がなされていることがあります。
詳しくは >>95 を参照してください。

[[#comment]]


** 素片識別子と基底 URL

@@@@ この項は書きかけです。 [[基底URL]] の解説とあわせて内容をなんとかしたいところです。。。

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は、[[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。

[[#comment]]


** 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


** 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


** 要約値の埋め込み

[143] [[素片識別子]]を、 [[URL]] によって識別される[[資源]]の[[表現]]が正当なものである、
あるいはある特定の版であることを確認するための[[ハッシュ値]]、
あるいは[[指紋]]を埋め込む場所として用いようとする提案があります。

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
([[名無しさん]] [WEAK[2006-11-11 03:36:08 +00:00]])

[144] 詳しくは [CODE(URI)@@en[#[[hash]]()]] の項を参照してください。

[145] このような提案は、実装実験も行われている一方で、
元々の[[素片識別子]]の意味から逸脱しているとの批判もあります。

[150]
>>15 や >>90 のような[[版]]を指定する[[素片識別子]]もこれに類するといえるかもしれません。
([[名無しさん]])

[[#comment]]


** メモ

[[#comment]]


* 構文に関して


** 素片識別子の始まり以外の [CODE(char)[#]]

[95] [[RFC 3986]]/[[RFC 3987]] の定義に従えば、 [[URI]] 中の[[文字]] [CODE(char)[#]]
は[[素片識別子]]のはじまりを表します。これは [[URI scheme]] によらず、
すべての [[URI]] に適用されます。

[62] ですが、現実には、[[URI]] の中で使われる[[文字]] [CODE(char)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

[63] [[Vodafone]] の独自 [[HTML]] 仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[133]
'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[134]
[[Webブラウザ]]の実装では [CODE(URI)@@en[[[data]]:]],
[CODE(URI)@@en[[[javascript]]:]], [CODE(URI)@@en[[[mailto]]:]]
のような [[URL scheme]] で [CODE(char)[#]] が[[素片識別子]]のはじまりとして扱われないことがあります。

;; 
[131]
この記事はその例を紹介しています:
[CITE@@ja[冬様もすなる☆日記というもの (2008年6月)]]
([[わかば]] 著, [CODE[2008-06-28 21:18:51 +09:00]] 版)
<http://suika.fam.cx/~wakaba/d/d200806#d28-1>

[[#comment]]


** 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


** メモ

[[#comment]]


* 様々な素片識別子構文

[146] 現在、様々な[[媒体型]]に対して様々な[[素片識別子]]の構文が定義・実装されています。

[[#comment]]


** HTML 系 / [CODE(XML)@@en[ID]] 属性型素片識別子

- -- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
-- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
--- [113] [[DSML]]
---- [CITE[Directory Services Markup Language (DSML)]] 
<http://www.dsmltools.org/dsml.org/dsml.html>
---- 明確な規定はありませんが、頻用されています。
--- [120] [[VoiceXML 1.0]]
---- 
<http://www.voicexml.org/specs/VoiceXML-100.pdf#page=74>
---- 
[CITE[Voice eXtensible Markup Language (VoiceXML) version 1.0]] <http://www.w3.org/TR/2000/NOTE-voicexml-20000505/#s19.7>
--- [122] [[SCXML]]
---- [CITE@@en[State Chart XML (SCXML): State Machine Notation for Control Abstraction]]
<http://www.w3.org/TR/2007/WD-scxml-20070221/#files>
--- [114] [[APEX]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
---- [[BEEP]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
を規定・登録する [[RFC 3080]] <urn:ietf:rfc:3080>
には、[[素片識別子]]への言及がありません。
---- [[BEEP]] の[[プロファイル]]たる [[APEX]] は、
同じ[[文書]]内の[[要素]]を[[参照]]するために[[素片識別子]]だけの
[[URI参照]]を使っています。
---- [[RFC 3340]] ([[IETF]] [[提案標準]]) <urn:ietf:rfc:3340>
4.1, 4.4.4

[153] [[KML]] 
([CODE(MIME)@@en[[[application/vnd.google-earth.kml+xml]]]],
[CODE(MIME)@@en[[[application/vnd.google-earth.kmz]]]])
では[[要素]]の [CODE(XML)@@en[xs:[[ID]]]] [[属性値]]を[[素片識別子]]に使えるようです。

;; [CITE[KML リファレンス]] ([TIME[2008-01-09 04:59:52 +09:00]] 版) <http://earth.google.co.jp/kml/kml_tags_21.html#styleurl>

[[#comment]]


** XML/XPointer 系素片識別子

- -- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
-- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [[SOAP]] ([CODE(MIME)[[[application/soap+xml]]]])
---- [115] [[RFC 3902]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
---- [116] [CITE@@en[Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)]]
<http://docs.oasis-open.org/wss/v1.1/>
----- [CODE(XML)@@en[[[IDREF]]]] による[[参照]]について規定しています。
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---- [[DocBook]] 4.3 [[WD]]
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]]
<http://www.w3.org/TR/2008/REC-rdf-sparql-XMLres-20080115/#mime-form>
----- [[RFC 3023]]を参照。
--- [117] [[XSLT 2.0]] ([CODE(MIME)@@en[[[application/xslt+xml]]]])
---- [CITE@@en[XSL Transformations (XSLT) Version 2.0]] 
<http://www.w3.org/TR/2007/REC-xslt20-20070123/#media-type-fragid>
----- [[RFC 3023]] を参照。
----- 本文中に [CODE(XML)@@en[[[ID]]]] [[属性]]を[[参照]]する例あり。
--- [118] [[XQueryX]] ([CODE(MIME)@@en[[[application/xquery+xml]]]])
---- [CITE@@en[XML Syntax for XQuery 1.0 (XQueryX)]] 
<http://www.w3.org/TR/2007/REC-xqueryx-20070123/#xqueryx-mime-fragments>
----- [[RFC 3023]] を参照。
--- [129] [[WS-Policy]] 1.5 
([CODE(MIME)@@en[[[application/wspolycy+xml]]]])
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#ietf-reg>
----- [[RFC 3023]] を参照。
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#Policy_Identification>
----- [CODE(XMLa)@@en[[VAR@@en[wsu]]:[[Id]]]] [[属性]]を使った[[素片識別子]]について
[[WS-Security]] 2004 を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL 2.0]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]]
<http://www.w3.org/TR/2007/REC-wsdl20-20070626/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [119] [[WSDL 1.1]]
--- [CITE@@en[WSDL 1.1 Element Identifiers]] ([CODE[2007-01-30 07:47:21 +09:00]] 版) 
<http://www.w3.org/TR/2007/WD-wsdl11elementidentifiers-20070131/>
--- [[比較]]のための[[正準形]]も定義されています。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [125] [[SML]]
--- [CITE[Service Modeling Language, Version 1.0]] 
<http://www.w3.org/Submission/2007/SUBM-sml-20070321/#Fragment_Identifier>
--- [[XPointer]] の[[プロファイル]]。
-- [124] [[XFA]]
--- [[XFA]] 2.4 195頁
--- 明確に[[素片識別子]]であるとは書かれていませんが、
見た感じ[[URI参照]]である[[構文]]が定義されています。
--- [[素片識別子]]部は明らかに [[XPointer]] を意識しています。
--- [[素片識別子]]部内に[[百分率符号化]]されていない
[CODE(URI)[#]] が登場し得るようです。
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0 [[会員提出]]: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[勧告]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2007-01-25 02:12:49 +09:00]] 版) 
<http://www.w3.org/TR/2007/REC-webcgm20-20070130/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[標準]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2006-11-04 01:53:46 +09:00]] 版) 
<http://docs.oasis-open.org/webcgm/v2.0/OS/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

[CODE(MIME)@@en[[[[VAR[*]]/[VAR[*]]+xml]]]] [[媒体型]]の[[素片識別子]]の定義の実態を調査した報告です。

[130]
[CITE@@en[Numbers as anchors]] ([[Henry S. Thompson]] 著, [CODE[2008-02-15 02:28:33 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-xml-core-wg/2008Feb/0026.html>

[[数値]]からはじまる[[素片識別子]]を [[XML]] では定義できないことが問題提起されています。

;; この問題は、連番や日付を使いたいときによく遭遇します。

[[#comment]]


** RDF 系素片識別子

[13] [[RDF]] は >>97 のような事情から、 [[RDF URI参照]]における[[素片識別子]]は
[CODE(MIME)@@en[[[application/rdf+xml]]]] の[[表現]]のものである、
などといった辻褄あわせともいえる規定を持っています。

- [148] [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
-- [[RFC 3870]]
-- [CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>

[147] [[RDF]] の[[具象構文]]の1つ、 [[N3]] は、 [[RDF]]
を直接参照せず、このように[[素片識別子]]を規定しています。
- [[素片識別子]]以外の部分が [[N3]] [[表現]]を持つ[[資源]]を識別する場合、
その[[素片識別子]]は、抽象的であろうが具象的であるが、
任意の[[情報資源]]を識別することができます。
- その [[N3]] [[表現]]は、その[[情報資源]]についての情報を[[文]]として含めることができます。
- 構文的には、 [[N3]] における [[qname]] の [CODE(char)[[[:]]]] 以降の部分と一致するべきです

- [149] [[N3]] ([CODE(MIME)@@en[[[text/n3]]]], [CODE(MIME)@@en[[[text/rdf+n3]]]],
[CODE(MIME)@@en[[[application/n3]]]])
-- [CITE@@en[Notation3 (N3): A readable RDF syntax]] ([CODE[2008-01-16 03:12:43 +09:00]] 版) <http://www.w3.org/TeamSubmission/2008/SUBM-n3-20080114/#frag>

[[#comment]]


** Blorb 素片識別子

[111]
[CITE[Suggested Interactive Fiction Mediatypes]]
<http://purl.org/int-fiction/ifmi/documents/mediatypes>

[[Blorb]] ([CODE(MIME)@@en[[[application/prs.blorb]]]],
[CODE(MIME)@@en[[[[VAR[*]]/[VAR[*]]+blorb]]]]) の[[素片識別子]]として、
[CODE(URI)@@en[#Pict([VAR[n]])]] や [CODE(URI)@@en[#Fspc]] 
のようなものを提案しています。

また、関連して、 [[TADS]] 3 ([CODE(MIME)@@en[[[application/prs.t3vm.image]]]])
の[[素片識別子]]として [CODE(URI)@@en[#mres([VAR[path]])]] を提案してます。

[[#comment]]


** その他の名前型素片識別子

- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]] <IW:P3P:"">
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
<IW:P3P:"#POLICY">
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
<IW:P3P:"#ref_file_policyref">
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
<IW:P3P:"#DATA">
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
<IW:P3P:"#DATA-DEF-TYPE">
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>

[[#comment]]


** 関数呼び出し型素片識別子

- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。

[[#comment]]


** 名前・値型素片識別子

- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)@@en[[[text/plain]]]]
--- [[RFC 5147]]
---- 長らく [[I-D]] で半放置状態でしたが、ようやく [[RFC]] になりました。
--- [CODE(ABNF)@@en[[[param]]]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
-- [126] [[時刻付き媒体]]向け[[素片識別子]]
--- [127]
[CITE@@en[Specifying time intervals in URI queries and fragments of time-based Web resources]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/URI_fragments.html#rfc.section.4>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- この仕様自体は特定の[[媒体型]]には依存していません。
--- [128] [[CMML]] ([CODE(MIME)@@en[[[text/cmml]]]])
---- [CITE@@en[The Continuous Media Markup Language (CMML), Version 2.1]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/cmml.html#rfc.section.10>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- >>127 を採用しています。

[[#comment]]


** 数値型素片識別子

- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。

[[#comment]]


** 素片識別子は未定義と明記されているもの

[105] [[素片識別子]]を定義している[[媒体型]]はほんの一握りで、
[[IANA]] に登録されているほとんどの[[媒体型]]の仕様では[[素片識別子]]は言及すらされていません。
しかし、一部の[[媒体型]]に関しては、「[[素片識別子]]は未定義」
の旨が明確に規定されています。

- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
-- [[RFC 4329]] <urn:ietf:rfc:4329>

[[#comment]]


** メモ

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[121]
[CITE[Fragment Search]] ([CODE[2007-02-10 03:37:54 +09:00]] 版) <http://www.gerv.net/software/fragment-search/>
([[名無しさん]] [WEAK[2007-02-14 22:56:14 +00:00]])

> Fragment Search is a Greasemonkey script which allows people to create URLs which link to content within a page without having control over that page.

> So, for example, http://www.gerv.net/#!s!design searches for the word "design" on the front page of this site. "#" starts the fragment identifier, "!" is the special character so it's obvious it's not a normal fragment identifier, "s" stands for search (there are several other things we want to do with the fragment identifier, like link fingerprints, so we need to keep them all separate) and the second "!" separates the command name from the instruction - i.e. what to search for, in this case "design". 

[[#comment]]


* 関連

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

同様な [[URI scheme]] は [CODE(URI)@@en[[[zip]]:]], [CODE(URI)@@en[[[tar]]:]],
[CODE(URI)@@en[[[pack]]:]] など多数あります。

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[123]
[[CSS]] などで用いられる[[識別子選択子]]は本質的に[[素片識別子]]と同じものです。

[132]
[[HTML]] の [CODE(HTMLa)@@en[[[usemap]]]] [[属性]]の値は元々 [[URI参照]]であるとされていましたが、諸々の事情により、
現在は [CODE(char)[#]] の後に参照する [CODE(HTMLe)@@en[[[map]]]]
[[要素]]の [CODE(HTMLa)@@en[[[name]]]]
[[属性]]の値を指定することになっています。


[151]
[[Webブラウザ]]で表示中の[[文書]]で[[ナビゲーション]]の結果[[素片識別子]]が変更された時に発生する
[[DOM]] [[事象]] [CODE(DOMe)@@en[[[hashchange]]]] が [[HTML 5]]
で定義されています。
([[名無しさん]])


[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** メモ

[[#comment]]@


1.67
log
@auto-committed
@
text
@d481 7
@


1.66
log
@auto-committed
@
text
@d1 951
a951 937

[135]
[DFN[[RUBYB[素片識別子] [fragment identifier]]]]は、
[[URL]] の一部分であり、[[素片識別子]]''以外''の部分により識別される[[資源]]の一部分、
あるいは[[表現]]の一種を識別するために使われます。


* 用語に関して


** 呼称

[136] '''俗称''':
[[DOM]] では、[[素片識別子]]を表す[[属性名]]として「[CODE(DOMa)@@en[[[hash]]]]」
を使っています。これは、[[素片識別子]]の先頭を表す[[文字]]「[CODE(char)[#]]」
の俗称に由来しています。

[137] 特に [[HTML]] [[文書]]の[[素片識別子]]については、「[[アンカー]]」や
「[[アンカー名]]」と呼ばれることもあります。

[21] '''日本語訳''':
「[[素片識別子]]」 (fragment identifier) は、
[DFN[フラグメント識別子]]、[DFN[断片識別子]]などとも訳されます。

[[#comment]]


** 定義

[1] '''ISO-HTML における定義''':

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[[#comment]]


** URI/URL と素片識別子

[22] [[RFC 2396]] においては[[素片識別子]]は [[URI]] の一部とはされていませんでした。
[[絶対URI]], [[相対URI]], [[素片識別子]]をあわせたものを
[[URI参照]]と呼んでいました。

[138]
新しい [[RFC 3986]] は、[[素片識別子]]を [[URI]] の一部としています。

[139]
非公式には、以前から[[素片識別子]]を [[URI]] の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)
[[HTML 4]] のように、[[素片識別子]]を [[URI]] の一部としない仕様書を参照しておきながら、
(「[[URI参照]]」ではなく) 「[[URI]]」という用語を使い、
しかも[[素片識別子]]も使えるような規定が含まれる仕様も存在し、
混乱の元となっていました。

[[#comment]]


** メモ

[[#comment]]


* 仕様に関して

[20] '''主たる仕様''':
- [DEL@@en[[[RFC 1630]] ([[URI]] 1[SUP[st]])]]
- [DEL@@en[[[RFC 1738]] ([[URL]] 2[SUP[nd]])]]
- [DEL[[[RFC 1808]] ([[相対URL]])]]
- [DEL@@en[[[RFC 2396]] ([[URI]] 3[SUP[rd]])]]
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>
- [[HTML 5]] ([[URL]])

[137] '''関連仕様''':
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9


** 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


** 部分資源を識別しない、あるいは何を識別するか未定義の場合

[140] 本来、[[媒体型]]についての[[素片識別子]]の仕様書は、
[[素片識別子]]がどのような[[部分資源]]を識別するのかを完全に定義するべきです。
例えば、 [CODE(HTMLa)@@en[[[id]]]] [[属性]]の値が[[一致]]する[[要素]]を識別するような場合、
[[一致]]する[[要素]]が存在しない場合に何を識別するのか (しないのか)、
実装がどのように動作するべきなのかを規定しておくべきです。

[141] ですが、現実には、多くの仕様はそれを曖昧にしています。
更には、ほとんどの[[媒体型]]については、そもそも[[素片識別子]]が定義されていません。

[3] [[HTML]] [[文書]] ([CODE(MIME)@@en[[[text/html]]]]) の場合、
[[文書]]内に存在しない[[素片識別子]]つきの [[URI参照]]を[[レンダリング]]させようとすると、
[[文書]]の最初を表示する [[Webブラウザ]] 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示する [[Webブラウザ]] [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


** メモ

[[#comment]]


* 意味に関して


** 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[142] [[URI scheme]] によっては、歴史的、その他の理由により、
構文的に[[素片識別子]]と矛盾する規定・実装がなされていることがあります。
詳しくは >>95 を参照してください。

[[#comment]]


** 素片識別子と基底 URL

@@@@ この項は書きかけです。 [[基底URL]] の解説とあわせて内容をなんとかしたいところです。。。

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は、[[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。

[[#comment]]


** 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


** 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


** 要約値の埋め込み

[143] [[素片識別子]]を、 [[URL]] によって識別される[[資源]]の[[表現]]が正当なものである、
あるいはある特定の版であることを確認するための[[ハッシュ値]]、
あるいは[[指紋]]を埋め込む場所として用いようとする提案があります。

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
([[名無しさん]] [WEAK[2006-11-11 03:36:08 +00:00]])

[144] 詳しくは [CODE(URI)@@en[#[[hash]]()]] の項を参照してください。

[145] このような提案は、実装実験も行われている一方で、
元々の[[素片識別子]]の意味から逸脱しているとの批判もあります。


[150]
>>15 や >>90 のような[[版]]を指定する[[素片識別子]]もこれに類するといえるかもしれません。
([[名無しさん]])


[[#comment]]


** メモ

[[#comment]]


* 構文に関して


** 素片識別子の始まり以外の [CODE(char)[#]]

[95] [[RFC 3986]]/[[RFC 3987]] の定義に従えば、 [[URI]] 中の[[文字]] [CODE(char)[#]]
は[[素片識別子]]のはじまりを表します。これは [[URI scheme]] によらず、
すべての [[URI]] に適用されます。

[62] ですが、現実には、[[URI]] の中で使われる[[文字]] [CODE(char)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

[63] [[Vodafone]] の独自 [[HTML]] 仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[133]
'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[134]
[[Webブラウザ]]の実装では [CODE(URI)@@en[[[data]]:]],
[CODE(URI)@@en[[[javascript]]:]], [CODE(URI)@@en[[[mailto]]:]]
のような [[URL scheme]] で [CODE(char)[#]] が[[素片識別子]]のはじまりとして扱われないことがあります。

;; 
[131]
この記事はその例を紹介しています:
[CITE@@ja[冬様もすなる☆日記というもの (2008年6月)]]
([[わかば]] 著, [CODE[2008-06-28 21:18:51 +09:00]] 版)
<http://suika.fam.cx/~wakaba/d/d200806#d28-1>

[[#comment]]


** 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


** メモ

[[#comment]]


* 様々な素片識別子構文

[146] 現在、様々な[[媒体型]]に対して様々な[[素片識別子]]の構文が定義・実装されています。

[[#comment]]


** HTML 系 / [CODE(XML)@@en[ID]] 属性型素片識別子

- -- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
--- [113] [[DSML]]
---- [CITE[Directory Services Markup Language (DSML)]] 
<http://www.dsmltools.org/dsml.org/dsml.html>
---- 明確な規定はありませんが、頻用されています。
--- [120] [[VoiceXML 1.0]]
---- 
<http://www.voicexml.org/specs/VoiceXML-100.pdf#page=74>
---- 
[CITE[Voice eXtensible Markup Language (VoiceXML) version 1.0]] <http://www.w3.org/TR/2000/NOTE-voicexml-20000505/#s19.7>
--- [122] [[SCXML]]
---- [CITE@@en[State Chart XML (SCXML): State Machine Notation for Control Abstraction]]
<http://www.w3.org/TR/2007/WD-scxml-20070221/#files>
--- [114] [[APEX]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
---- [[BEEP]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
を規定・登録する [[RFC 3080]] <urn:ietf:rfc:3080>
には、[[素片識別子]]への言及がありません。
---- [[BEEP]] の[[プロファイル]]たる [[APEX]] は、
同じ[[文書]]内の[[要素]]を[[参照]]するために[[素片識別子]]だけの
[[URI参照]]を使っています。
---- [[RFC 3340]] ([[IETF]] [[提案標準]]) <urn:ietf:rfc:3340>
4.1, 4.4.4

[[#comment]]


** XML/XPointer 系素片識別子

- -- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [[SOAP]] ([CODE(MIME)[[[application/soap+xml]]]])
---- [115] [[RFC 3902]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
---- [116] [CITE@@en[Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)]]
<http://docs.oasis-open.org/wss/v1.1/>
----- [CODE(XML)@@en[[[IDREF]]]] による[[参照]]について規定しています。
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---- [[DocBook]] 4.3 [[WD]]
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]]
<http://www.w3.org/TR/2008/REC-rdf-sparql-XMLres-20080115/#mime-form>
----- [[RFC 3023]]を参照。
--- [117] [[XSLT 2.0]] ([CODE(MIME)@@en[[[application/xslt+xml]]]])
---- [CITE@@en[XSL Transformations (XSLT) Version 2.0]] 
<http://www.w3.org/TR/2007/REC-xslt20-20070123/#media-type-fragid>
----- [[RFC 3023]] を参照。
----- 本文中に [CODE(XML)@@en[[[ID]]]] [[属性]]を[[参照]]する例あり。
--- [118] [[XQueryX]] ([CODE(MIME)@@en[[[application/xquery+xml]]]])
---- [CITE@@en[XML Syntax for XQuery 1.0 (XQueryX)]] 
<http://www.w3.org/TR/2007/REC-xqueryx-20070123/#xqueryx-mime-fragments>
----- [[RFC 3023]] を参照。
--- [129] [[WS-Policy]] 1.5 
([CODE(MIME)@@en[[[application/wspolycy+xml]]]])
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#ietf-reg>
----- [[RFC 3023]] を参照。
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#Policy_Identification>
----- [CODE(XMLa)@@en[[VAR@@en[wsu]]:[[Id]]]] [[属性]]を使った[[素片識別子]]について
[[WS-Security]] 2004 を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL 2.0]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]]
<http://www.w3.org/TR/2007/REC-wsdl20-20070626/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [119] [[WSDL 1.1]]
--- [CITE@@en[WSDL 1.1 Element Identifiers]] ([CODE[2007-01-30 07:47:21 +09:00]] 版) 
<http://www.w3.org/TR/2007/WD-wsdl11elementidentifiers-20070131/>
--- [[比較]]のための[[正準形]]も定義されています。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [125] [[SML]]
--- [CITE[Service Modeling Language, Version 1.0]] 
<http://www.w3.org/Submission/2007/SUBM-sml-20070321/#Fragment_Identifier>
--- [[XPointer]] の[[プロファイル]]。
-- [124] [[XFA]]
--- [[XFA]] 2.4 195頁
--- 明確に[[素片識別子]]であるとは書かれていませんが、
見た感じ[[URI参照]]である[[構文]]が定義されています。
--- [[素片識別子]]部は明らかに [[XPointer]] を意識しています。
--- [[素片識別子]]部内に[[百分率符号化]]されていない
[CODE(URI)[#]] が登場し得るようです。
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0 [[会員提出]]: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[勧告]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2007-01-25 02:12:49 +09:00]] 版) 
<http://www.w3.org/TR/2007/REC-webcgm20-20070130/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[標準]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2006-11-04 01:53:46 +09:00]] 版) 
<http://docs.oasis-open.org/webcgm/v2.0/OS/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

[CODE(MIME)@@en[[[[VAR[*]]/[VAR[*]]+xml]]]] [[媒体型]]の[[素片識別子]]の定義の実態を調査した報告です。

[130]
[CITE@@en[Numbers as anchors]] ([[Henry S. Thompson]] 著, [CODE[2008-02-15 02:28:33 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-xml-core-wg/2008Feb/0026.html>

[[数値]]からはじまる[[素片識別子]]を [[XML]] では定義できないことが問題提起されています。

;; この問題は、連番や日付を使いたいときによく遭遇します。

[[#comment]]


** RDF 系素片識別子

[13] [[RDF]] は >>97 のような事情から、 [[RDF URI参照]]における[[素片識別子]]は
[CODE(MIME)@@en[[[application/rdf+xml]]]] の[[表現]]のものである、
などといった辻褄あわせともいえる規定を持っています。

- [148] [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
-- [[RFC 3870]]
-- [CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>

[147] [[RDF]] の[[具象構文]]の1つ、 [[N3]] は、 [[RDF]]
を直接参照せず、このように[[素片識別子]]を規定しています。
- [[素片識別子]]以外の部分が [[N3]] [[表現]]を持つ[[資源]]を識別する場合、
その[[素片識別子]]は、抽象的であろうが具象的であるが、
任意の[[情報資源]]を識別することができます。
- その [[N3]] [[表現]]は、その[[情報資源]]についての情報を[[文]]として含めることができます。
- 構文的には、 [[N3]] における [[qname]] の [CODE(char)[[[:]]]] 以降の部分と一致するべきです

- [149] [[N3]] ([CODE(MIME)@@en[[[text/n3]]]], [CODE(MIME)@@en[[[text/rdf+n3]]]],
[CODE(MIME)@@en[[[application/n3]]]])
-- [CITE@@en[Notation3 (N3): A readable RDF syntax]] ([CODE[2008-01-16 03:12:43 +09:00]] 版) <http://www.w3.org/TeamSubmission/2008/SUBM-n3-20080114/#frag>

[[#comment]]


** Blorb 素片識別子

[111]
[CITE[Suggested Interactive Fiction Mediatypes]]
<http://purl.org/int-fiction/ifmi/documents/mediatypes>

[[Blorb]] ([CODE(MIME)@@en[[[application/prs.blorb]]]],
[CODE(MIME)@@en[[[[VAR[*]]/[VAR[*]]+blorb]]]]) の[[素片識別子]]として、
[CODE(URI)@@en[#Pict([VAR[n]])]] や [CODE(URI)@@en[#Fspc]] 
のようなものを提案しています。

また、関連して、 [[TADS]] 3 ([CODE(MIME)@@en[[[application/prs.t3vm.image]]]])
の[[素片識別子]]として [CODE(URI)@@en[#mres([VAR[path]])]] を提案してます。

[[#comment]]


** その他の名前型素片識別子

- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]] <IW:P3P:"">
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
<IW:P3P:"#POLICY">
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
<IW:P3P:"#ref_file_policyref">
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
<IW:P3P:"#DATA">
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
<IW:P3P:"#DATA-DEF-TYPE">
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>

[[#comment]]


** 関数呼び出し型素片識別子

- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。

[[#comment]]


** 名前・値型素片識別子

- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)@@en[[[text/plain]]]]
--- [[RFC 5147]]
---- 長らく [[I-D]] で半放置状態でしたが、ようやく [[RFC]] になりました。
--- [CODE(ABNF)@@en[[[param]]]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
-- [126] [[時刻付き媒体]]向け[[素片識別子]]
--- [127]
[CITE@@en[Specifying time intervals in URI queries and fragments of time-based Web resources]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/URI_fragments.html#rfc.section.4>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- この仕様自体は特定の[[媒体型]]には依存していません。
--- [128] [[CMML]] ([CODE(MIME)@@en[[[text/cmml]]]])
---- [CITE@@en[The Continuous Media Markup Language (CMML), Version 2.1]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/cmml.html#rfc.section.10>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- >>127 を採用しています。

[[#comment]]


** 数値型素片識別子

- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。

[[#comment]]


** 素片識別子は未定義と明記されているもの

[105] [[素片識別子]]を定義している[[媒体型]]はほんの一握りで、
[[IANA]] に登録されているほとんどの[[媒体型]]の仕様では[[素片識別子]]は言及すらされていません。
しかし、一部の[[媒体型]]に関しては、「[[素片識別子]]は未定義」
の旨が明確に規定されています。

- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
-- [[RFC 4329]] <urn:ietf:rfc:4329>

[[#comment]]


** メモ

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[121]
[CITE[Fragment Search]] ([CODE[2007-02-10 03:37:54 +09:00]] 版) <http://www.gerv.net/software/fragment-search/>
([[名無しさん]] [WEAK[2007-02-14 22:56:14 +00:00]])

> Fragment Search is a Greasemonkey script which allows people to create URLs which link to content within a page without having control over that page.

> So, for example, http://www.gerv.net/#!s!design searches for the word "design" on the front page of this site. "#" starts the fragment identifier, "!" is the special character so it's obvious it's not a normal fragment identifier, "s" stands for search (there are several other things we want to do with the fragment identifier, like link fingerprints, so we need to keep them all separate) and the second "!" separates the command name from the instruction - i.e. what to search for, in this case "design". 

[[#comment]]


* 関連

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

同様な [[URI scheme]] は [CODE(URI)@@en[[[zip]]:]], [CODE(URI)@@en[[[tar]]:]],
[CODE(URI)@@en[[[pack]]:]] など多数あります。

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[123]
[[CSS]] などで用いられる[[識別子選択子]]は本質的に[[素片識別子]]と同じものです。

[132]
[[HTML]] の [CODE(HTMLa)@@en[[[usemap]]]] [[属性]]の値は元々 [[URI参照]]であるとされていましたが、諸々の事情により、
現在は [CODE(char)[#]] の後に参照する [CODE(HTMLe)@@en[[[map]]]]
[[要素]]の [CODE(HTMLa)@@en[[[name]]]]
[[属性]]の値を指定することになっています。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** メモ

@


1.65
log
@auto-committed
@
text
@d2 4
a5 4
[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。
d7 24
a30 1
[1] 
d37 35
a71 5
[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
a73 2
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
d83 37
d124 16
a139 1
* URI と素片識別子
d141 1
a141 3
[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。
a142 1
新しい [[RFC 3986]] は、素片識別子を URI の一部としています。
d144 1
a144 2
非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)
d149 4
a152 1
* 素片識別子と URI scheme
d162 6
a167 1
[95] '''素片識別子と矛盾する URI scheme'''
d169 1
a169 1
古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。
d171 1
a171 3
'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。
d173 3
a175 6
[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]
d177 3
a179 3
[131]
[CITE@@ja[冬様もすなる☆日記というもの (2008年6月)]] ([[わかば]] 著, [CODE[2008-06-28 21:18:51 +09:00]] 版) <http://suika.fam.cx/~wakaba/d/d200806.ja.html#d28-1>
([[名無しさん]])
d184 1
a184 1
* 素片識別子と媒体型
d229 7
d244 1
a244 1
* 動的表現との関係
d269 82
a350 1
* 内部参照に使う URI 参照としての素片識別子
a351 5
[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。
d353 1
a353 3
素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。
d355 1
a355 2
[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。
a356 4
[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。
d358 1
a358 8
[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])
d360 1
a360 1
[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>
d365 1
a365 1
* 素片識別子の色々
d367 1
a367 2
- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
a464 6
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
d474 7
a480 2
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
d650 63
a712 41
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)@@en[[[text/plain]]]]
--- [[RFC 5147]]
---- 長らく [[I-D]] で半放置状態でしたが、ようやく [[RFC]] になりました。
--- [CODE(ABNF)@@en[[[param]]]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
-- [126] [[時刻付き媒体]]向け[[素片識別子]]
--- [127]
[CITE@@en[Specifying time intervals in URI queries and fragments of time-based Web resources]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/URI_fragments.html#rfc.section.4>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- この仕様自体は特定の[[媒体型]]には依存していません。
--- [128] [[CMML]] ([CODE(MIME)@@en[[[text/cmml]]]])
---- [CITE@@en[The Continuous Media Markup Language (CMML), Version 2.1]] ([CODE[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/cmml.html#rfc.section.10>
---- [[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- >>127 を採用しています。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
d793 71
a863 2
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
d868 6
a873 1
--- [[RFC 4329]] <urn:ietf:rfc:4329>
a881 4
[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

d886 1
a886 9
[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。
d888 1
a888 15
[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。
d893 1
a893 1
* 他との関係
d905 3
d916 2
a917 1
現在は [CODE(char)[#]] の後に参照先の [CODE(HTMLa)@@en[[[name]]]]
a918 1
([[名無しさん]])
d936 1
a936 47
** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[133]
[CODE(URI)@@en[[[irc]]:]] [[URL scheme]] では [CODE(char)[#]] が[[チャンネル名]]の[[接頭辞]]の意味で使われることがあります。
([[名無しさん]])


[134]
[[Webブラウザ]]の実装では [CODE(URI)@@en[[[data]]:]],
[CODE(URI)@@en[[[javascript]]:]], [CODE(URI)@@en[[[mailto]]:]]
のような [[URL scheme]] で [CODE(char)[#]] が[[素片識別子]]のはじまりとして扱われないことがあります。

;; [CITE@@ja[冬様もすなる☆日記というもの (2008年6月)]] ([[わかば]] 著, [TIME[2008-06-28 21:18:51 +09:00]] 版) <http://suika.fam.cx/~wakaba/d/d200806#d28-1>

([[名無しさん]])


[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

[111]
[CITE[Suggested Interactive Fiction Mediatypes]] <http://purl.org/int-fiction/ifmi/documents/mediatypes>
([[名無しさん]])

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
([[名無しさん]] [WEAK[2006-11-11 03:36:08 +00:00]])
d938 1
a938 3
[130]
[CITE@@en[Numbers as anchors]] ([[Henry S. Thompson]] 著, [CODE[2008-02-15 02:28:33 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-xml-core-wg/2008Feb/0026.html>
([[名無しさん]])@


1.64
log
@auto-committed
@
text
@d491 4
a494 2
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
a671 1

d673 2
a674 2
[[HTML]] の [CODE(HTMLa)@@en[[[usemap]]]] [[属性]]の値は元々 [[URI参照]]であるとされていましたが、諸々の事情により、
現在は [CODE(char)[#]] の後に参照先の [CODE(HTMLa)@@en[[[name]]]]
a677 1

d704 15
@


1.63
log
@auto-committed
@
text
@d75 4
d670 8
d728 2
a729 3
[CITE@@en[Numbers as anchors]] ([[Henry S. Thompson]] 著, [TIME[2008-02-15 02:28:33 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-xml-core-wg/2008Feb/0026.html>
([[名無しさん]])

@


1.62
log
@auto-committed
@
text
@d1 718
a718 715
[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
--- [113] [[DSML]]
---- [CITE[Directory Services Markup Language (DSML)]] 
<http://www.dsmltools.org/dsml.org/dsml.html>
---- 明確な規定はありませんが、頻用されています。
--- [120] [[VoiceXML 1.0]]
---- 
<http://www.voicexml.org/specs/VoiceXML-100.pdf#page=74>
---- 
[CITE[Voice eXtensible Markup Language (VoiceXML) version 1.0]] <http://www.w3.org/TR/2000/NOTE-voicexml-20000505/#s19.7>
--- [122] [[SCXML]]
---- [CITE@@en[State Chart XML (SCXML): State Machine Notation for Control Abstraction]]
<http://www.w3.org/TR/2007/WD-scxml-20070221/#files>
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
--- [114] [[APEX]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
---- [[BEEP]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
を規定・登録する [[RFC 3080]] <urn:ietf:rfc:3080>
には、[[素片識別子]]への言及がありません。
---- [[BEEP]] の[[プロファイル]]たる [[APEX]] は、
同じ[[文書]]内の[[要素]]を[[参照]]するために[[素片識別子]]だけの
[[URI参照]]を使っています。
---- [[RFC 3340]] ([[IETF]] [[提案標準]]) <urn:ietf:rfc:3340>
4.1, 4.4.4
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [[SOAP]] ([CODE(MIME)[[[application/soap+xml]]]])
---- [115] [[RFC 3902]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
---- [116] [CITE@@en[Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)]]
<http://docs.oasis-open.org/wss/v1.1/>
----- [CODE(XML)@@en[[[IDREF]]]] による[[参照]]について規定しています。
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---- [[DocBook]] 4.3 [[WD]]
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]]
<http://www.w3.org/TR/2008/REC-rdf-sparql-XMLres-20080115/#mime-form>
----- [[RFC 3023]]を参照。
--- [117] [[XSLT 2.0]] ([CODE(MIME)@@en[[[application/xslt+xml]]]])
---- [CITE@@en[XSL Transformations (XSLT) Version 2.0]] 
<http://www.w3.org/TR/2007/REC-xslt20-20070123/#media-type-fragid>
----- [[RFC 3023]] を参照。
----- 本文中に [CODE(XML)@@en[[[ID]]]] [[属性]]を[[参照]]する例あり。
--- [118] [[XQueryX]] ([CODE(MIME)@@en[[[application/xquery+xml]]]])
---- [CITE@@en[XML Syntax for XQuery 1.0 (XQueryX)]] 
<http://www.w3.org/TR/2007/REC-xqueryx-20070123/#xqueryx-mime-fragments>
----- [[RFC 3023]] を参照。
--- [129] [[WS-Policy]] 1.5 
([CODE(MIME)@@en[[[application/wspolycy+xml]]]])
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#ietf-reg>
----- [[RFC 3023]] を参照。
---- [CITE@@en-US[Web Services Policy 1.5 - Framework]] 
<http://www.w3.org/TR/2007/REC-ws-policy-20070904/#Policy_Identification>
----- [CODE(XMLa)@@en[[VAR@@en[wsu]]:[[Id]]]] [[属性]]を使った[[素片識別子]]について
[[WS-Security]] 2004 を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL 2.0]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]]
<http://www.w3.org/TR/2007/REC-wsdl20-20070626/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [119] [[WSDL 1.1]]
--- [CITE@@en[WSDL 1.1 Element Identifiers]] ([CODE[2007-01-30 07:47:21 +09:00]] 版) 
<http://www.w3.org/TR/2007/WD-wsdl11elementidentifiers-20070131/>
--- [[比較]]のための[[正準形]]も定義されています。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [125] [[SML]]
--- [CITE[Service Modeling Language, Version 1.0]] 
<http://www.w3.org/Submission/2007/SUBM-sml-20070321/#Fragment_Identifier>
--- [[XPointer]] の[[プロファイル]]。
-- [124] [[XFA]]
--- [[XFA]] 2.4 195頁
--- 明確に[[素片識別子]]であるとは書かれていませんが、
見た感じ[[URI参照]]である[[構文]]が定義されています。
--- [[素片識別子]]部は明らかに [[XPointer]] を意識しています。
--- [[素片識別子]]部内に[[百分率符号化]]されていない
[CODE(URI)[#]] が登場し得るようです。
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0 [[会員提出]]: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[勧告]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2007-01-25 02:12:49 +09:00]] 版) 
<http://www.w3.org/TR/2007/REC-webcgm20-20070130/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[標準]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2006-11-04 01:53:46 +09:00]] 版) 
<http://docs.oasis-open.org/webcgm/v2.0/OS/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
-- [126] [[時刻付き媒体]]向け[[素片識別子]]
--- [127]
[CITE@@en[Specifying time intervals in URI queries and fragments of time-based Web resources]] ([TIME[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/URI_fragments.html#rfc.section.4>
----[[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
----この仕様自体は特定の[[媒体型]]には依存していません。
--- [128] [[CMML]] ([CODE(MIME)@@en[[[text/cmml]]]])
---- [CITE@@en[The Continuous Media Markup Language (CMML), Version 2.1]] ([TIME[2006-05-06 10:39:46 +09:00]] 版) 
<http://annodex.net/TR/cmml.html#rfc.section.10>
----[[満期]] ([DEL@@en[[[IETF]] [[I-D]]]])
---- >>127 を採用しています。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]] <IW:P3P:"">
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
<IW:P3P:"#POLICY">
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
<IW:P3P:"#ref_file_policyref">
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
<IW:P3P:"#DATA">
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
<IW:P3P:"#DATA-DEF-TYPE">
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

[121]
[CITE[Fragment Search]] ([CODE[2007-02-10 03:37:54 +09:00]] 版) <http://www.gerv.net/software/fragment-search/>
([[名無しさん]] [WEAK[2007-02-14 22:56:14 +00:00]])




[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[123]
[[CSS]] などで用いられる[[識別子選択子]]は本質的に[[素片識別子]]と同じものです。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

[111]
[CITE[Suggested Interactive Fiction Mediatypes]] <http://purl.org/int-fiction/ifmi/documents/mediatypes>
([[名無しさん]])

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
([[名無しさん]] [WEAK[2006-11-11 03:36:08 +00:00]])@


1.61
log
@auto-committed
@
text
@d378 2
a379 2
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
@


1.60
log
@auto-committed
@
text
@d390 9
@


1.59
log
@auto-committed
@
text
@d417 2
a418 2
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
@


1.58
log
@auto-committed
@
text
@d484 11
a604 1

d606 1
a606 1
[CITE[Fragment Search]] ([TIME[2007-02-10 03:37:54 +09:00]] 版) <http://www.gerv.net/software/fragment-search/>
d608 2
@


1.57
log
@auto-committed
@
text
@d434 4
@


1.56
log
@auto-committed
@
text
@d434 7
@


1.55
log
@auto-committed
@
text
@d633 3
@


1.54
log
@auto-committed
@
text
@d1 679
a679 677

[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
--- [113] [[DSML]]
---- [CITE[Directory Services Markup Language (DSML)]] 
<http://www.dsmltools.org/dsml.org/dsml.html>
---- 明確な規定はありませんが、頻用されています。
--- [120] [[VoiceXML 1.0]]
---- 
<http://www.voicexml.org/specs/VoiceXML-100.pdf#page=74>
---- 
[CITE[Voice eXtensible Markup Language (VoiceXML) version 1.0]] <http://www.w3.org/TR/2000/NOTE-voicexml-20000505/#s19.7>
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
--- [114] [[APEX]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
---- [[BEEP]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
を規定・登録する [[RFC 3080]] <urn:ietf:rfc:3080>
には、[[素片識別子]]への言及がありません。
---- [[BEEP]] の[[プロファイル]]たる [[APEX]] は、
同じ[[文書]]内の[[要素]]を[[参照]]するために[[素片識別子]]だけの
[[URI参照]]を使っています。
---- [[RFC 3340]] ([[IETF]] [[提案標準]]) <urn:ietf:rfc:3340>
4.1, 4.4.4
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [[SOAP]] ([CODE(MIME)[[[application/soap+xml]]]])
---- [115] [[RFC 3902]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
---- [116] [CITE@@en[Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)]]
<http://docs.oasis-open.org/wss/v1.1/>
----- [CODE(XML)@@en[[[IDREF]]]] による[[参照]]について規定しています。
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---- [[DocBook]] 4.3 [[WD]]
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
----- [[RFC 3023]]を参照。
--- [117] [[XSLT 2.0]] ([CODE(MIME)@@en[[[application/xslt+xml]]]])
---- [CITE@@en[XSL Transformations (XSLT) Version 2.0]] 
<http://www.w3.org/TR/2007/REC-xslt20-20070123/#media-type-fragid>
----- [[RFC 3023]] を参照。
----- 本文中に [CODE(XML)@@en[[[ID]]]] [[属性]]を[[参照]]する例あり。
--- [118] [[XQueryX]] ([CODE(MIME)@@en[[[application/xquery+xml]]]])
---- [CITE@@en[XML Syntax for XQuery 1.0 (XQueryX)]] 
<http://www.w3.org/TR/2007/REC-xqueryx-20070123/#xqueryx-mime-fragments>
----- [[RFC 3023]] を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL 2.0]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [119] [[WSDL 1.1]]
--- [CITE@@en[WSDL 1.1 Element Identifiers]] ([CODE[2007-01-30 07:47:21 +09:00]] 版) 
<http://www.w3.org/TR/2007/WD-wsdl11elementidentifiers-20070131/>
--- [[比較]]のための[[正準形]]も定義されています。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0 [[会員提出]]: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[勧告]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2007-01-25 02:12:49 +09:00]] 版) 
<http://www.w3.org/TR/2007/REC-webcgm20-20070130/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[標準]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([CODE[2006-11-04 01:53:46 +09:00]] 版) 
<http://docs.oasis-open.org/webcgm/v2.0/OS/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]] <IW:P3P:"">
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
<IW:P3P:"#POLICY">
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
<IW:P3P:"#ref_file_policyref">
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
<IW:P3P:"#DATA">
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
<IW:P3P:"#DATA-DEF-TYPE">
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])


[121]
[CITE[Fragment Search]] ([TIME[2007-02-10 03:37:54 +09:00]] 版) <http://www.gerv.net/software/fragment-search/>
([[名無しさん]] [WEAK[2007-02-14 22:56:14 +00:00]])


[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

[111]
[CITE[Suggested Interactive Fiction Mediatypes]] <http://purl.org/int-fiction/ifmi/documents/mediatypes>
([[名無しさん]])

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
@


1.53
log
@auto-committed
@
text
@d1 678
a678 672
[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
--- [113] [[DSML]]
---- [CITE[Directory Services Markup Language (DSML)]] 
<http://www.dsmltools.org/dsml.org/dsml.html>
---- 明確な規定はありませんが、頻用されています。
--- [120] [[VoiceXML 1.0]]
---- 
<http://www.voicexml.org/specs/VoiceXML-100.pdf#page=74>
---- 
[CITE[Voice eXtensible Markup Language (VoiceXML) version 1.0]] <http://www.w3.org/TR/2000/NOTE-voicexml-20000505/#s19.7>
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
--- [114] [[APEX]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
---- [[BEEP]] ([CODE(MIME)@@en[[[application/beep+xml]]]])
を規定・登録する [[RFC 3080]] <urn:ietf:rfc:3080>
には、[[素片識別子]]への言及がありません。
---- [[BEEP]] の[[プロファイル]]たる [[APEX]] は、
同じ[[文書]]内の[[要素]]を[[参照]]するために[[素片識別子]]だけの
[[URI参照]]を使っています。
---- [[RFC 3340]] ([[IETF]] [[提案標準]]) <urn:ietf:rfc:3340>
4.1, 4.4.4
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [[SOAP]] ([CODE(MIME)[[[application/soap+xml]]]])
---- [115] [[RFC 3902]] ([[IANA]] 登録)
------ [[RFC 3023]] を参照。
---- [116] [CITE@@en[Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)]]
<http://docs.oasis-open.org/wss/v1.1/>
----- [CODE(XML)@@en[[[IDREF]]]] による[[参照]]について規定しています。
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---- [[DocBook]] 4.3 [[WD]]
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
----- [[RFC 3023]]を参照。
---[117] [[XSLT 2.0]] ([CODE(MIME)@@en[[[application/xslt+xml]]]])
---- [CITE@@en[XSL Transformations (XSLT) Version 2.0]] 
<http://www.w3.org/TR/2007/REC-xslt20-20070123/#media-type-fragid>
----- [[RFC 3023]] を参照。
----- 本文中に [CODE(XML)@@en[[[ID]]]] [[属性]]を[[参照]]する例あり。
---[118] [[XQueryX]] ([CODE(MIME)@@en[[[application/xquery+xml]]]])
---- [CITE@@en[XML Syntax for XQuery 1.0 (XQueryX)]] 
<http://www.w3.org/TR/2007/REC-xqueryx-20070123/#xqueryx-mime-fragments>
----- [[RFC 3023]] を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL 2.0]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
--[119] [[WSDL 1.1]]
--- [CITE@@en[WSDL 1.1 Element Identifiers]] ([TIME[2007-01-30 07:47:21 +09:00]] 版) 
<http://www.w3.org/TR/2007/WD-wsdl11elementidentifiers-20070131/>
--- [[比較]]のための[[正準形]]も定義されています。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0 [[会員提出]]: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[勧告]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([TIME[2007-01-25 02:12:49 +09:00]] 版) 
<http://www.w3.org/TR/2007/REC-webcgm20-20070130/WebCGM20-IC.html#webcgm_3_1_1>
--- 2.0 [[標準]]:
[CITE[WebCGM 2.0 - WebCGM Intelligent Content]] ([TIME[2006-11-04 01:53:46 +09:00]] 版) 
<http://docs.oasis-open.org/webcgm/v2.0/OS/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]] <IW:P3P:"">
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
<IW:P3P:"#POLICY">
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
<IW:P3P:"#ref_file_policyref">
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
<IW:P3P:"#DATA">
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
<IW:P3P:"#DATA-DEF-TYPE">
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

[111]
[CITE[Suggested Interactive Fiction Mediatypes]] <http://purl.org/int-fiction/ifmi/documents/mediatypes>
([[名無しさん]])

[112]
[CITE[Link Fingerprints]] <http://www.gerv.net/security/link-fingerprints/>
([[名無しさん]] [WEAK[2006-11-11 03:36:08 +00:00]])

@


1.52
log
@auto-committed
@
text
@d282 5
@


1.51
log
@auto-committed
@
text
@d405 1
a405 1
-- [69] [[WSDL]] 方式
d415 4
d435 1
a435 1
--- 2.0: 
d438 6
@


1.50
log
@auto-committed
@
text
@d374 1
a374 1
---- [CITE@@EN[XSL Transformations (XSLT) Version 2.0]] 
d378 4
@


1.49
log
@auto-committed
@
text
@d373 5
@


1.48
log
@auto-committed
@
text
@d324 6
a329 2
--- [33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
([[RFC 3023]] を参照。)
d358 2
@


1.47
log
@auto-committed
@
text
@d288 9
@


1.46
log
@auto-committed
@
text
@d452 1
a452 7
- [58] [[P3P]]
-- [[P3P 1.0]]: 
[CITE@@en[The Platform for Privacy Preferences 1.0 (P3P1.0) Specification]] 
<http://www.w3.org/TR/2002/REC-P3P-20020416/>
-- [[P3P 1.1]]:
[CITE@@en[The Platform for Privacy Preferences 1.1 (P3P1.1) Specification]] 
<http://www.w3.org/TR/2005/WD-P3P11-20050701/>
d456 1
a456 2
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#POLICY>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#POLICY>
d460 1
a460 2
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#ref_file_policyref>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#ref_file_policyref>
d466 1
a466 2
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#DATA>
d474 1
a474 1
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA-DEF-TYPE>
@


1.45
log
@auto-committed
@
text
@d1 642
a642 635

[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
--- [110] [[WADL]]
([CODE(MIME)@@en[[[application/vnd.sun.wadl+xml]]]])
---- 仕様書に例がありますが、明確な規定はありません。
---- [[IANA]] [[媒体型]]登録にも言及はありません。
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
([[RFC 3023]] を参照。)
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
----- [[RFC 3023]]を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]]
-- [[P3P 1.0]]: 
[CITE@@en[The Platform for Privacy Preferences 1.0 (P3P1.0) Specification]] 
<http://www.w3.org/TR/2002/REC-P3P-20020416/>
-- [[P3P 1.1]]:
[CITE@@en[The Platform for Privacy Preferences 1.1 (P3P1.1) Specification]] 
<http://www.w3.org/TR/2005/WD-P3P11-20050701/>
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#POLICY>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#POLICY>
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#ref_file_policyref>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#ref_file_policyref>
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#DATA>
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA-DEF-TYPE>
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])

[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

[111]
[CITE[Suggested Interactive Fiction Mediatypes]] <http://purl.org/int-fiction/ifmi/documents/mediatypes>
([[名無しさん]])

@


1.44
log
@auto-committed
@
text
@d1 635
a635 627
[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
---[108]
[CODE(MIME)@@en[[[text/x-oeb1-document]]]]
---- 仕様書には明記なし。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
--- [109] [[CellML]] ([CODE(MIME)@@en[[[application/cellml+xml]]]])
---- [[媒体型]]を登録する [[RFC 4708]]
([[IETF]] [[情報提供]] [[RFC]]) <urn:ietf:rfc:4708>
に[[素片識別子]]への言及はありません。
---- [[CellML 1.0]]
<http://www.cellml.org/specifications/cellml_1.0/index_html#sec_metadata>
---- [[CellML 1.1]]
<http://www.cellml.org/specifications/cellml_1.1/index_html#sec_metadata>
---- 同じ[[文書]]内の [[RDF/XML]] から[[参照]]するために、
[[素片識別子]]として [CODE(XML)@@en[[[ID]]]]
[[属性]]を使う方法が規定されています。
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
([[RFC 3023]] を参照。)
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
----- [[RFC 3023]]を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]]
-- [[P3P 1.0]]: 
[CITE@@en[The Platform for Privacy Preferences 1.0 (P3P1.0) Specification]] 
<http://www.w3.org/TR/2002/REC-P3P-20020416/>
-- [[P3P 1.1]]:
[CITE@@en[The Platform for Privacy Preferences 1.1 (P3P1.1) Specification]] 
<http://www.w3.org/TR/2005/WD-P3P11-20050701/>
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#POLICY>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#POLICY>
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#ref_file_policyref>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#ref_file_policyref>
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#DATA>
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA-DEF-TYPE>
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。


[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])


[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])@


1.43
log
@auto-committed
@
text
@d263 11
@


1.42
log
@auto-committed
@
text
@d1 615
a615 613

[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
--- [100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
--- [99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
([[RFC 3023]] を参照。)
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
--- [81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
--- [101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
---- [[RFC 4287]] <urn:ietf:rfc:4287>
----- [[RFC 3023]]を参照。
--- [102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
----- [[RFC 3023]]を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
-- [91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
-- [92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]]
-- [[P3P 1.0]]: 
[CITE@@en[The Platform for Privacy Preferences 1.0 (P3P1.0) Specification]] 
<http://www.w3.org/TR/2002/REC-P3P-20020416/>
-- [[P3P 1.1]]:
[CITE@@en[The Platform for Privacy Preferences 1.1 (P3P1.1) Specification]] 
<http://www.w3.org/TR/2005/WD-P3P11-20050701/>
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#POLICY>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#POLICY>
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#ref_file_policyref>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#ref_file_policyref>
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#DATA>
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA-DEF-TYPE>
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
- [87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
- [89] [[HORB]] [[ACL]][[ファイル]]
-- [CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
- [93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
- [94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
- [105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。


[107]
[CITE[Re: XPointer considered incomprehensible from Bjoern Hoehrmann on 2006-09-05 (www-tag@@w3.org from September 2006)]] <http://lists.w3.org/Archives/Public/www-tag/2006Sep/0019.html>
([[名無しさん]] [WEAK[2006-09-07 23:21:03 +00:00]])


[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
@


1.41
log
@auto-committed
@
text
@d1 614
a614 608
[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>
-- [CSECTION@@en[4.5.8. Fragment identifiers in XML]]
<http://www.w3.org/TR/webarch/#xml-fragids>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[95] '''素片識別子と矛盾する URI scheme'''

古い時代のものでなくても、設計者の[[URI]]の構文についての知識が乏しいがために[[素片識別子]]と矛盾した[[URI scheme]]も存在します。

'''[CODE(URI)@@en[[[irc]]:]] [[URI scheme]]'''は、
[[IRC]]の[[チャンネル名]]に[CODE(char)[#]]が使われるのをそのまま[[URI]]で用いることがあり、
標準化案 ([[Internet Draft]]) もそれを容認し、さらに拡張しようとしていました。

[104] '''[CODE(URI)@@en[xmpp:]] URI scheme''':
[CODE(URI)@@en[[[xmpp]]:]] [[URI scheme]]
では、 [[XMPP]] においては[[資源]]が[[表現]]を持たないので、
[[媒体型]]もなく、 [[RFC 3986]] にある通り実質無制約になり、
[[XMPP]] [[応用]]は好きに使って良い、とされています。
[SRC@@en[[[RFC 4622]] 2.6]]

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。
動的表現 (>>26) をも一つの URI 参照に対応する[[資源]]の[[表現]]の一種と考えることもできます。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[29] 素片識別子を媒体型から独立したものにしようという提案もありますが、
今のところ広く受け入れられてはいません。

- [CITE[A generic fragment identifier syntax]] 
<http://www.rddl.org/fragment-syntax>,
<urn:ietf:id:draft-borden-frag-00>

[96]
[[URI]]が単なる所在指示子としてだけではなく、[[識別子]]として重要性を帯びてからは、
[[素片識別子]]もが[[取出し]]を伴わない文脈で用いられるようになりました。
仕様の側もそれを容認すると明記しています。
構文と[[素片識別子]]単体での意味も事実上不定になります。
(>>24, [WebArch], [RFC 3986])

[97]
この問題に遭遇した[[RDF]]は、 
(当時の[[URI]]仕様である[[RFC 2396]]との整合性のため)
[Q[[[RDF URI参照]]における[[素片識別子]]は、[CODE(MIME)@@en[[[application/rdf+xml]]]]で解釈することとする]]とのやや無理のある規定を設けています。

[98]
[[名前空間URI]]では[[局所名]]と結合した時に[[素片識別子]]付き[[URI]]となることを期待して[CODE(URI)[#]]で終わらせた[[URI]]を使うことがよくありますが、
これも[[取出し]]て得られる[[表現]]とは (あったとしても)
なんら関係がなく、単に形式的なものです。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 内部参照に使う URI 参照としての素片識別子

[50] 同じ[[文書]]内で参照を行うためには [[SGML]]
の [CODE(SGML)[[[IDREF]]]] 
のように専用の機構を用意しているものもありますが、
[[URI参照]]や [[IRI参照]]を採用して外部への参照と兼用していることもよくあります。
その場合、当然[[素片識別子]]が使われることになります。

素片識別子の構文と意味は、
その参照先の[[資源]]の[[表現]]の[[媒体型]]によります (>>24)。ですから、
そのような使い方をする文書形式では[[素片識別子]]の構文と意味が陽に定義されている必要があります。

[51] 特に [[XML]] 系の文書形式の仕様で、 [CODE(XML)[[[ID]]]]
属性を参照先として使っている場合には自明なためか明確に規定されることがあまりありません。

[52] 複数の語彙を組合わせる時にはとりわけ注意が必要です。
素片識別子の意味を組合せて使う仕様の仕様書で明確に規定しておかないと、
個々の仕様で解釈が割れていたり、
曖昧なものが含まれていたりする時に困ったことになります。

[53]
例: [[XML事象]]は [CODE(XMLa)[[[handler]]]] 属性などで
[[URI参照]]を使っていますが、
それが[[同文書参照]]である時の意味を特に規定していません。
意味的には [CODE(XML)[[[IDREF]]]] として扱われることが期待されていますが、
[[XML事象]]は[[ホスト言語]]と組合せて使うものですから、
その組合せの[[プロファイル]]でこれと矛盾しないように[[素片識別子]]の規定を行わなければなりません。
(その例: [[SVG 1.2]])

[CITE[XML Events]] <http://www.w3.org/TR/2003/REC-xml-events-20031014/>

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [37] [CODE(HTMLa)[[[name]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
--- [CODE(MIME)[[[text/x-hdml]]]]
---- [CITE[3 Language Elements]] 
<http://www.w3.org/TR/hdml20-6.html#MARKER-9-4>
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
---- [54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
---- [55] [[ISO-HTML]]
<http://purl.org/NET/ISO+IEC.15445/Users-Guide.html#ANCHOR-FOLDING>
---[100] [[XDML]] ([CODE(MIME)@@en[[[application/xhtml+xml]]]])
---- [[DASE]]-2 5.1.1.5.1.1
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [47] [[XHTML 1.0]]
---- [[適合利用者エージェント]]は [[XHTML]]
[[文書]]の [CODE(XML)[[[ID]]]] 属性だけを[[素片識別子]]に使わなければなりません。
---- <IW:XHTML10:"uaconf">
---- [CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
(参考) <IW:XHTML10:"h-4.10">
---- [CSECTION[C.8. Fragment Identifiers]] (参考)
<IW:XHTML10:"C_8">
--- [48] [[XHTML m12n]]
---- [CSECTION[3.5. XHTML Family User Agent Conformance]]
<IW:XHTML1m12n:"conformance.html#s_conform_user_agent">
--- [34] [CODE(MIME)[[[application/xhtml+xml]]]]: [[RFC 3236]]
---- [[RFC 3023]] を参照しています。
---- しかし、 RFC 3023 は実質無規定なので、新版になるまでは
[CODE(XML)[[[ID]]]] 属性に拠ると規定しています。
--- [103] [[XHTML+Voice]] ([CODE(MIME)@@en[[[application/xv+xml]]]])
---- [[RFC 4374]] <urn:ietf:rfc:4374>
---- [[RFC 3236]] を参照しています。
--- [36] [CITE[XBL - XML Binding Language]] 
<http://www.w3.org/TR/2001/NOTE-xbl-20010223/#attach-css>
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil+xml]]]],
[CODE(MIME)@@en[[[application/smil]]]])
---- [74]
[CITE@@en[Synchronized Multimedia Integration Language]] 
([[SMIL 1.0]]) <http://www.w3.org/TR/REC-smil/#hyperlinking>
---- [75] [CITE@@en[The SMIL 2.0 Linking Modules]] 
<http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
---- [76] [[RFC 4536]] <urn:ietf:rfc:4536>
----- [[SMIL]] 仕様書 (版指定なし) を参照。
--- [15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
---- [CODE(XMLe)[[[deck]]]] 名を表します。
---- <http://www.openmobilealliance.org/release_program/docs/CopyrightClick.asp?pck=Browsing&file=V2_3-20050118-C/WAP-191-WML-20000219-a.pdf>
--- [60] [[XForms]]
---- [CITE@@en[Document Structure]] 
<http://www.w3.org/TR/2003/REC-xforms-20031014/slice3.html#structure-model>
----- [CODE(XMLe)[[[model]]]] 要素の [CODE(XMLa)[[[schema]]]]
属性で同じ文書内の [CODE(XML)[[[ID]]]] を参照できます。
--- [42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
---- [CODE(XMLe)[[[rule]]]] 名を表します。
---- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
---- [DEL[以前媒体型登録のための [[I-D]] が出ていましたが、その後音沙汰なし。 (2005年3月現在) 素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。]]
---- その後 [[RFC 4267]] で登録されました (>>83)。
--- [56] [[XTD]]
---- [CITE[tradic論理フォーマット]] 
<http://www.tradic.jp/format_tradic_logical#reference>
---- [CITE[tradic物理フォーマット: XMLバインディング]] 
<http://www.tradic.jp/format_tradic_xml>
--- [76] [[EMMA]] ([CODE(MIME)@@en[[[application/emma+xml]]]])
---- [CITE[EMMA: Extensible MultiModal Annotation markup language]] 
<http://www.w3.org/TR/2005/WD-emma-20050916/>
---- [[媒体型]]登録のための雛形が附属書 B にありますが、
[[素片識別子]]については言及がありません。
---- 仕様書中の例には[[同文書参照]]が頻出しますが、
同じ文書内の [CODE(XML)@@en[[[ID]]]] 型[[属性]]の値を使っているようです。
- [13] [[RDF URI参照]]方式
-- [[RDF/XML]] ([CODE(MIME)[[[application/rdf+xml]]]])
--- [[RFC 3870]], 
[CITE@@en[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION@@en[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]
[[属性]]の値が [[XML]] を指す場合は[[素片識別子]]は [[XPointer]] です。
--- <IW:XLink1:"#link-locators">
--- [[XLink]] 仕様書のこの部分は規定ですが、参照されている [[XPointer]]
仕様書は古い [[WD]] ([[勧告]]とは非互換) で、 Informative Reference になっています。
--- [[XLink 1.1]] [[WD]] でも [[XLink 1.0]] [[勧告]]と同じ古い [[WD]]
が Informative に参照されています。
--- [80] [[XBRL]]
---- [[XBRL]] は [[XLink 1.0]] を使用しており、
[[XLink 1.0]] の [[XPointer]] を使うという規定を引用しつつ、
[[XBRL]] [[要素]]を参照するための[[素片識別子]]について、
[[XPointer]] [[勧告]]に基づき[[速記識別子]]と
[CODE(XPointerScheme)@@en[[[element]]()]] が使えると規定しています。
---- [[JIS X 7206]]:2005 ([[XBRL 2.1]]) 3.5.4
---[99] [[SVG 1.0]], [[SVG 1.1]]
---- <IW:SVG:"struct.html#xlinkusage">
---- [[XLink 1.0]]を参照していますが、リンク先が[[XML]]なら[[素片識別子]]は[[XPointer]]という同じ規定があり、
こちらでは[[XPointer]][[勧告]]が参照されています。
-- [44] [[MathML]] では [[XPointer]] を使うことができます。
--- [CITE[Combining Presentation and Content Markup]] 
<http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter5.html#id.5.3.4>
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
([[RFC 3023]] を参照。)
--- [35] [CODE(MIME)[[[application/xop+xml]]]]
---- [46] [CITE[XML-binary Optimized Packaging]]
<http://www.w3.org/TR/2005/REC-xop10-20050125/#id2270207>
([[RFC 3023]] を参照。)
---- [45] [IANAREG] 
([[RFC 3023]] を参照。)
--- [57] [[CCXML]] ([CODE(MIME)[[[application/ccxml+xml]]]])
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050629/#media-type-fragid>
----- [[RFC 3023]] を参照。
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [82] [[VoiceXML]] ([CODE(MIME)@@en[[[application/voicexml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [83] [[SRGS]] ([[XML]] 表現) 
([CODE(MIME)@@en[[[application/srgs+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [85] [[SSML]] ([CODE(MIME)@@en[[[application/ssml+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [84] [[PLS]] ([CODE(MIME)@@en[[[application/pls+xml]]]])
---- [[RFC 4267]] ([[IANA]] 登録)
----- [[RFC 3023]] を参照。
--- [64] [[DocBook]] ([CODE(MIME)@@en[[[application/docbook+xml]]]])
---- [CITE@@en[The DocBook Document Type]] 
<http://www.oasis-open.org/docbook/specs/cd-docbook-docbook-4.4.html#fragid>
----- [[RFC 3023]] を参照。
---[81] [[WS-CDL]] ([CODE(MIME)@@en[[[application/cdl+xml]]]])
---- [CITE@@en[Web Services Choreography Description Language Version 1.0]] 
<http://www.w3.org/TR/2005/CR-ws-cdl-10-20051109/#Mime-Type-definition>
----- [[RFC 3023]] を参照。
---[101] [[Atom]] ([CODE(MIME)@@en[[[application/atom+xml]]]])
----[[RFC 4287]] <urn:ietf:rfc:4287>
-----[[RFC 3023]]を参照。
---[102] [[SPARQL]]結果 
([CODE(MIME)@@en[[[application/sparql-result+xml]]]])
---- [CITE@@en[SPARQL Query Results XML Format]] 
<http://www.w3.org/TR/2006/CR-rdf-sparql-XMLres-20060406/#mime-form>
-----[[RFC 3023]]を参照。
-- [[SVG]] 素片識別子
--- [29] [[SVG]] は [[XPointer]] 
と互換な簡単な素片識別子の構文を規定しています。
--- [30] [CODE(MIME)[[[image/svg+xml]]]]
---- [CITE[Linking - SVG 1.0]] 
<http://www.w3.org/TR/SVG10/linking.html#SVGFragmentIdentifiers>
---- [CITE[Linking - SVG 1.1]] 
<http://www.w3.org/TR/SVG11/linking.html#SVGFragmentIdentifiers>
-- [49] [[XML署名]], [[XML暗号化]] 
([CODE(MIME)[[[application/xenc+xml]]]])
--- [CITE[XML-Signature Syntax and Processing]] <http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Same-Document>
--- [[XML暗号化]] ([CODE(MIME)[[[application/xenc+xml]]]])
の仕様書やその中の登録雛形には素片識別子に関する明確な規定がありませんが、
[[XML署名]]の仕様の処理モデルに従うようです。
--- というか、外部から文書を参照するためのものではなく、処理中の
[[XML署名]]や [[XML暗号化]]の文書内にある 
[[URI参照]]の[[素片識別子]]の解釈について規定されています。
--- [CITE[Decryption Transform for XML Signature]] 
<http://www.w3.org/TR/2002/REC-xmlenc-decrypt-20021210#sec-syntax>
-- [38] [[XFrames]] 素片識別子
--- [39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
--- [40] [CITE[XFrames]] 
<http://www.w3.org/TR/2002/WD-xframes-20020806/#s_populating>
-- [69] [[WSDL]] 方式
--- [70] [[WSDL 2.0]] [[XML]] [[直列化]] 
([CODE(MIME)@@en[[[application/wsdl+xml]]]])
---- [71] 
[CITE@@en[Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language]] 
<http://www.w3.org/TR/2005/WD-wsdl20-20050803/#ietf-draft>
---- [72] 
[[RFC 3023]] の定義とこの仕様の附属書の定義のどちらかを使うと定義されています
(なんだそりゃ)。附属書で定義されているのは [[XPointer]]
の[[プロファイル]]です。
--[91] [[TEI]]
--- [[TEI]]では[[XPointer]]を[[素片識別子]]として使います。
--- [CITE[Linking, Segmentation, and Alignment]] 
<http://www.tei-c.org/P5/Guidelines/SA.html#SATSLR>
--[92] [[XSD]]
--- [CSECTION@@en[3.15.2.2 References to Schema Components from Elsewhere]]
<IW:XMLSchema1:"#d0e16826">
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]])
は [[XPointer]] に似ている [WEAK[(もののやや異なる)]] 
構文の素片識別子を使っています。
--- 初版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/1999/REC-WebCGM-19990121/REC-03-CGM-IC#webcgm_3_1_1>
--- 第2版: [CITE[WebCGM Intelligent Content]] 
<http://www.w3.org/TR/2001/REC-WebCGM-20011217/REC-03-CGM-IC.html#webcgm_3_1_1>
--- 2.0: 
[CITE@@en[OASIS CGM Open specification - WebCGM 2.0 - WebCGM Intelligent Content]] 
<http://www.w3.org/Submission/2006/SUBM-WebCGM20-20060313/WebCGM20-IC.html#webcgm_3_1_1>
-- [19] [[FIXptr]]
--- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
--- [[XPointer]] の古い案の簡略版。現在の [[XPointer]] とは非互換。
- [5] [CODE(MIME)[[[text/vnd.wap.wmlscript]]]]
-- 関数呼出しを記述できます。
-- 
<http://www.openmobilealliance.org/release_program/docs/Browsing/V2_3-20050118-C/WAP-193_101-WMLScript-20010928-a.pdf?page=70>
- [78] [[Java]]
-- [CODE(URI)@@en[[[java]]:]] [[URI scheme]] (非標準) の実装で、
[CODE(ABNF)@@en[[[path]]]] で[[クラス]]を識別し、
素片識別子で[[メソッド]]を識別するものがあります
[WEAK[([[Java]] におけるメソッドの識別法 (非 URI) に倣っています)]]。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
--- [CODE(ABNF)[param]] 型構文で文章の行や文字列を指定できます。
-- [15] [[CAB]] ファイル
--- [CODE(ABNF)[param]] 型構文で
[[ActiveX Control]] の版を指定できます。
-- [31] [CODE(MIME)[[[application/pdf]]]]
--- [CODE(ABNF)[param]] 型構文で命令を指定できます。
- [11] 数値系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。
-- [86] [[ニュース組]]の[[記事番号]]
--- [[w3m]] が以前実装していました。
--- [CODE(URI)@@en[[[news]]:]] [[URI]] 
が[[ニュース組]]を表す際に使えました。
-- [90] [CODE(URI)@@en[[[artifact]]:]], [CODE(URI)@@en[[[link]]:]],
[CODE(URI)@@en[[[local]]:]] [[URI scheme]]では、
版番号のために[[素片識別子]]が使われています。
- [43] [[N-Gram]]
-- [[開始記号]]を素片識別子で指定します。
-- [CITE[Stochastic Language Models (n-gram) Specification]] 
<http://www.w3.org/TR/2001/WD-ngram-spec-20010103/>
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2.4>
- [77] [[LTM]] ([[線形Topic Map記法]])
-- [[話題ID]] を使用します。
-- [CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N870>
- [58] [[P3P]]
-- [[P3P 1.0]]: 
[CITE@@en[The Platform for Privacy Preferences 1.0 (P3P1.0) Specification]] 
<http://www.w3.org/TR/2002/REC-P3P-20020416/>
-- [[P3P 1.1]]:
[CITE@@en[The Platform for Privacy Preferences 1.1 (P3P1.1) Specification]] 
<http://www.w3.org/TR/2005/WD-P3P11-20050701/>
-- [CODE(XMLe)[[[POLICY]]]] [[要素]] [CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型):
[[素片識別子]]として使われます。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#POLICY>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#POLICY>
-- [CODE(XMLe)[[[POLICY-REF]]]] [[要素]] [CODE(XMLa)[[[about]]]] 
[[属性]]で使う[[素片識別子]]: [CODE(XMLe)[[[POLICY]]]]
[[要素]]で [CODE(XMLa)[[[name]]]] [[属性]]が一致するものを指します。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#ref_file_policyref>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#ref_file_policyref>
-- [CODE(XMLe)[[[DATA]]]] [[要素]] [CODE(XMLa)[[[ref]]]] 
[[属性]]で使う[[素片識別子]]:
[[データ要素]]や[[データ集合]]を指します。
[[要素型名]]を[[親]]から[[子]]に向かって [CODE(char)[.]] 
で連結したものを使います。
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA>
--- [[P3P 1.1]] <http://www.w3.org/TR/2005/WD-P3P11-20050701/#DATA>
-- [CODE(XMLe)[[[DATA-STRUCT]]]], [CODE(XMLe)[[[DATA-DEF]]]] [[要素]]
[CODE(XMLa)[[[structref]]]] [[属性]]:
[[構造]]を指します。構造の名前 ([CODE(XMLa)[[[name]]]] [[属性]]
([CODE(XML)[[[ID]]]] 型) の
[CODE(char)[.]] で階層を区切った文字列) を使います。
指される方の定義が明示的に[[要素]]として存在するとは限りません。
[WEAK[(例えば [SAMP(URI)[#a]] が指すものは [SAMP[a.b]] や [SAMP[a.c]] などによって暗示的に定義され得ます。)]]
--- [[P3P 1.0]] <http://www.w3.org/TR/2002/REC-P3P-20020416/#DATA-DEF-TYPE>
- [65] [[DITA]]
-- [CITE@@en[OASIS Standards and Other Approved Work]] 
<http://www.oasis-open.org/specs/index.php#ditav1.0>
-- [CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-- [CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
--- [CODE(XML)@@en[[[ID]]]]
-- [CITE@@en[%id-atts;]] 
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
-[87] [[J#]] [[マネージ・ライブラリ]]
-- [[クラス名]]を[[素片識別子]]として使用
-- [CITE[Java アプレットから Microsoft J# ブラウザ コントロールへの移行]] 
<http://www.microsoft.com/japan/msdn/vs/vj/vjtskMigratingJavaAppletsToMicrosoftJBrowserControls.asp>
- [67] [[X3D]] 系 ([[視点]]の名前を指定)
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
--- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
-- [68] [[X3D]]
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
--- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
-- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
-- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
-- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
-- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
- [42] [[TTZ]] ([[T-Time]] 文書)
-- [[TTZ]] [[ファイル]]内の[[名前]]。
- [88] [[Texinfo]]
-- [[Texinfo]]系[CODE(URI)@@en[[[info]]:]] [[URI]]で[[節点名]]が[[素片識別子]]として使われます。
-[89] [[HORB]] [[ACL]][[ファイル]]
--[CODE(URI)@@en[[[horb]]:]] [[URI]]で[[ACL]]名が[[素片識別子]]として使われます。
-[93] [CODE(URI)@@en[[[irc]]:]] [[URI scheme]]
-- [[チャンネル名]]を[[素片識別子]]とする流儀があります。
-[94] [[名前空間]]に属する[[語彙]]
-- [CITE[XML Schema Part 2: Datatypes Second Edition]] 
<http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/#built-in-datatypes>
-- [CITE[Associating Resources with Namespaces]] 
<http://www.w3.org/2001/tag/doc/nsDocuments-2005-12-13/#div.fragid>
-[105] [[素片識別子]]は未定義と規定している仕様
-- [106] [[JavaScript]]・[[ECMAScript]]
([CODE(MIME)@@en[[[text/javascript]]]],
[CODE(MIME)@@en[[[text/ecmascript]]]],
[CODE(MIME)@@en[[[application/javascript]]]],
[CODE(MIME)@@en[[[application/ecmascript]]]])
--- [[RFC 4329]] <urn:ietf:rfc:4329>

[59]
[CITE@@en[XML Schema Datatypes in RDF and OWL]] 
<http://www.w3.org/TR/2005/WD-swbp-xsch-datatypes-20050427/#sec-user-defined-problem>

[[XML Schema]] で定義された[[データ型]]をどういう [[URI]]
([[素片識別子]]) で識別するべきかという議論があります。

[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[28]
[[WinIE]] は [CODE(CSS)[[[behavior]]]] で [CODE(URI)[#]] が2つ入った文字列の指定を受け付けます。
ただし、素片識別子の拡張というよりはむしろ [Q[URI もどき]]です。

[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[32]
>>16 他に、素片識別子を使った表現の方法を採ると[[相対参照]]が使えなくなってしまう問題もあります。

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


** 素片識別子の始まり以外の [CODE(char)[#]]

[62] [[URI]] の中で使われる [CODE(URI)[#]] 
が[[素片識別子]]の始まりとして扱われないことがあります
(もちろん'''仕様違反'''です)。

- [63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
[[URI scheme]] および [CODE(URI)[[[vtel]]:]] [[URI scheme]]
で[[電話]]の [CODE(char)[#]] ボタンの意味で生の
[CODE(URI)[#]] を使います。

[[#comment]]


* メモ

[79]
[CITE[The Linear Topic Map Notation]] 
<http://www.ontopia.net/download/ltm.html#N565>

[[LTM]] ([[線形Topic Map記法]]) の [CODE@@en[[[BASEURI]]]]
[[指令]]は [[RFC 2396]] 的解釈に基づき、
[[素片識別子]]だけの [[URI]] には適用されないことになっています。
([[名無しさん]])

@


1.40
log
@auto-committed
@
text
@d509 7
@


1.39
log
@auto-committed
@
text
@d67 7
@


1.38
log
@auto-committed
@
text
@d218 2
a219 1
--- [73] [[SMIL]] ([CODE(MIME)@@en[[[application/smil]]]])
d225 2
@


1.37
log
@auto-committed
@
text
@d213 3
@


1.36
log
@auto-committed
@
text
@d318 5
@


1.35
log
@auto-committed
@
text
@d315 3
@


1.34
log
@auto-committed
@
text
@d364 3
@


1.33
log
@auto-committed
@
text
@d195 2
d268 4
@


1.32
log
@auto-committed
@
text
@d59 8
d103 17
d472 7
a478 1

@


1.31
log
@auto-committed
@
text
@d321 3
@


1.30
log
@auto-committed
@
text
@d317 4
@


1.29
log
@auto-committed
@
text
@a219 20
-- [67] [[X3D]] 系 ([[視点]]の名前を指定)
--- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
---- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
---- <http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
--- [68] [[X3D]]
---- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 23 Navigation component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/navigation.html#Viewpoint>
---- 
[CITE@@en[Extensible 3D (X3D), ISO/IEC 19775-1:200x, Part 1 -- 9 Networking component]] 
<http://www.web3d.org/x3d/specifications/ISO-IEC-19775-IS-X3DAbstractSpecification/Part01/components/networking.html#Anchor>
-- [41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
--- XML 形の [CODE(XML)[ID]] に相当する規則名を指します。
--- [CITE[Speech Recognition Grammar Specification Version 1.0]] 
<http://www.w3.org/TR/2004/REC-speech-grammar-20040316/#S2.2>
--- [DEL[以前媒体型の IANA 登録のための [[I-D]] が出ていて、素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。登録手続きはその後音沙汰なし。 (2005年3月現在)]]
--- その後 [[RFC 4267]] で登録されましたが、
[[素片識別子]]に関する規定はなくなっています。
-- [42] [[TTZ]] ([[T-Time]] 文書)
--- [[TTZ]] [[ファイル]]内の[[名前]]。
d355 3
d416 24
@


1.28
log
@auto-committed
@
text
@d29 1
a29 1
-- [CSECTION[4.5.8. Fragment identifiers in XML] ] ]]
d427 6
a433 2
<http://docs.oasis-open.org/dita/v1.0/langspec/id-atts.html>
- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
@


1.27
log
@auto-committed
@
text
@d371 4
@


1.26
log
@auto-committed
@
text
@d206 2
a207 3
---- 以前媒体型登録のための [[I-D]] が出ていましたが、
その後音沙汰なし。 (2005年3月現在)
素片識別子については [[RFC 3023]] と同じとか書いてありましたが・・・。
d235 3
a237 3
--- 以前媒体型の IANA 登録のための [[I-D]] が出ていて、
素片識別子は [[RFC 3023]] と同じなどと頓珍漢なことが書かれていました。
登録手続きはその後音沙汰なし。 (2005年3月現在)
d277 1
a277 1
--- [57] [[CCXML 1.0]] ([CODE(MIME)[[[application/ccxml+xml]]]])
d280 16
a295 1
---- [[RFC 3023]] を参照。
@


1.25
log
@auto-committed
@
text
@d286 4
@


1.24
log
@auto-committed
@
text
@d221 1
a221 1
--[67] [[X3D]] 系 ([[視点]]の名前を指定)
d223 4
a226 4
----<http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
----<http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
---[68] [[X3D]]
----
d229 1
a229 1
----
d248 1
a248 1
--[61] [[XLink]] の [CODE(XMLa)[[QN[xlink:[[href]]][[[http://www.w3.org/1999/xlink]]]]]]
d250 1
a250 1
---<IW:XLink1:"#link-locators">
d255 7
d336 5
d359 4
d396 1
a396 1
--[CITE@@en[OASIS Standards and Other Approved Work]] 
d398 1
a398 1
--[CITE@@en[topic]] <http://docs.oasis-open.org/dita/v1.0/langspec/topic.html>
d400 1
a400 1
--[CITE@@en[xref]] <http://docs.oasis-open.org/dita/v1.0/langspec/xref.html>
d402 1
a402 1
--[CITE@@en[link]] <http://docs.oasis-open.org/dita/v1.0/langspec/link.html>
d404 2
a405 1
--[CITE@@en[%id-atts;]] 
d407 1
a407 1
--- [CODE(ABNF)[[CODE(XML)@@en[[[ID]]]] "/" [CODE(XML)@@en[[[ID]]]]]]
a415 1

d475 1
d482 1
a482 1
-[63] [[Vodafone]] の独自仕様では、 [CODE(URI)[[[tel]]:]]
d489 12
a500 1
* メモ@


1.23
log
@auto-committed
@
text
@d214 7
@


1.22
log
@auto-committed
@
text
@d188 6
a193 2
--- [CODE(MIME)[[[application/smil]]]]
---- [CITE[The SMIL 2.0 Linking Modules]] <http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
d295 10
@


1.21
log
@auto-committed
@
text
@d210 11
a220 3
-- [66] [[VRML]] ([CODE(MIME)@@en[[[model/vrml]]]])
---<http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Anchor>
---<http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-IS-VRML97WithAmendment1/part1/nodesRef.html#Viewpoint>
@


1.20
log
@auto-committed
@
text
@d210 3
d229 7
d256 4
d350 12
a369 2
([[名無しさん]])

d430 12
@


1.19
log
@auto-committed
@
text
@d7 1
d29 1
a29 1
--[CSECTION[4.5.8. Fragment identifiers in XML] ] 
d122 1
d156 1
d160 4
a163 4
--[37] [CODE(HTMLa)[[[name]]]] 属性を参照
---[CODE(MIME)[[[text/html]]]]: [[RFC 1866]]
---[CODE(MIME)[[[text/x-hdml]]]]
----[CITE[3 Language Elements]] 
d167 2
a168 2
----[54] [[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
----[55] [[ISO-HTML]]
d171 1
a171 1
---[47] [[XHTML 1.0]]
d175 1
a175 1
----[CSECTION[4.10. The elements with 'id' and 'name' attributes]] 
d177 1
a177 1
----[CSECTION[C.8. Fragment Identifiers]] (参考)
d179 2
a180 2
---[48] [[XHTML m12n]]
----[CSECTION[3.5. XHTML Family User Agent Conformance]]
d186 1
a186 1
---[36] [CITE[XBL - XML Binding Language]] 
d190 1
a190 1
---[15] [CODE(MIME)[[[text/vnd.wap.wml]]]]
d193 6
a198 1
---[42] [CODE(MIME)[[[application/srgs+xml]]]] ([[SRGS]] [[XML]] 形)
d200 1
a200 1
----[CITE[Speech Recognition Grammar Specification Version 1.0]] 
d205 1
a205 1
---[56] [[XTD]]
d210 1
a210 6
-- [13] [[RDF URI参照]]方式
--- [CODE(MIME)[[[application/rdf+xml]]]]
---- [[RFC 3870]], [CITE[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
--[41] [CODE(MIME)[[[application/srgs]]]] ([[SRGS]] [[ABNF]] 形)
d212 1
a212 1
---[CITE[Speech Recognition Grammar Specification Version 1.0]] 
d214 1
a214 1
---以前媒体型の IANA 登録のための [[I-D]] が出ていて、
d217 1
a217 1
--[42] [[TTZ]] ([[T-Time]] 文書)
d219 6
d226 2
a227 2
--[44] [[MathML]] では [[XPointer]] を使うことができます。
---[CITE[Combining Presentation and Content Markup]] 
d234 1
a234 1
---[33] [CODE(MIME)[[[application/soap+xml]]]]: [[RFC 3902]]
d237 1
a237 1
----[46] [CITE[XML-binary Optimized Packaging]]
d240 1
a240 1
----[45] [IANAREG] 
d242 1
a242 1
---[57] [[CCXML 1.0]] ([CODE(MIME)[[[application/ccxml+xml]]]])
d254 1
a254 1
--[49] [[XML署名]], [[XML暗号化]] 
d265 3
a267 3
--[38] [[XFrames]] 素片識別子
---[39] [[XFrames]] は [[XPointer]] と互換な簡単な素片識別子の構文を規定しています。
---[40] [CITE[XFrames]] 
d284 1
a284 1
--
d298 3
a300 3
-[43] [[N-Gram]]
--[[開始記号]]を素片識別子で指定します。
--[CITE[Stochastic Language Models (n-gram) Specification]] 
d302 1
a302 1
--[CITE[Speech Recognition Grammar Specification Version 1.0]] 
d304 42
a387 1

a389 1

@


1.18
log
@auto-committed
@
text
@d74 1
d233 1
a233 1
--- [CODE(MIME)[[[application/ccxml+xml]]]]
d235 2
a236 2
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050111/#media-type-fragid>
---- RFC 3023 を参照。
d272 1
a272 1
--- XPointer の超簡略版。ただし XPointer とは非互換。
a312 2
([[名無しさん]] [sage])

a339 1
([[名無しさん]])
@


1.17
log
@auto-committed
@
text
@d196 5
@


1.16
log
@auto-committed
@
text
@d120 32
d163 3
a165 1
[[HTML 4]], [[XHTML 1.0]], [[RFC 2854]]
@


1.15
log
@auto-committed
@
text
@d205 11
d222 7
a228 3
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]]) は [[XPointer]] に似ている (もののやや異なる) 素片識別子を使っています。
--- 
''WebCGM Intelligent Content: 3.1.1 URI Fragment specification'' <http://www.w3.org/TR/REC-WebCGM/REC-03-CGM-IC.html#webcgm_3_1_1>
@


1.14
log
@auto-committed
@
text
@d174 2
@


1.13
log
@auto-committed
@
text
@d141 3
@


1.12
log
@auto-committed
@
text
@a6 1

d133 8
@


1.11
log
@auto-committed
@
text
@d175 5
a179 1
--- [35] [CODE(MIME)[[[application/xop+xml]]]]: [IANAREG] 
@


1.10
log
@auto-committed
@
text
@d125 5
d132 1
a132 1
[[RFC 1866]], [[XHTML 1.0]], [[RFC 2854]]
d145 7
d157 7
d165 3
d189 4
d214 1
a214 1
- [11] その他 ad hoc 系
d218 6
@


1.9
log
@auto-committed
@
text
@d29 2
@


1.8
log
@auto-committed
@
text
@d1 204
a204 173


[21] [DFN[[RUBYB[素片識別子] [fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 

>
:[RUBYB[素片識別子] [Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
- [WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
-- [CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
-- [CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
-- [CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>

[[#comment]]


* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]


* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[[#comment]]


* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[[#comment]]


* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]


* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
[[RFC 1866]], [[XHTML 1.0]], [[RFC 2854]]
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [CODE(MIME)[[[application/smil]]]]
---- [CITE[The SMIL 2.0 Linking Modules]] <http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
-- [13] [[RDF URI参照]]方式
--- [CODE(MIME)[[[application/rdf+xml]]]]
---- [[RFC 3870]], [CITE[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [CODE(MIME)[[[application/ccxml+xml]]]]
---- 
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050111/#media-type-fragid>
---- RFC 3023 を参照。
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]]) は [[XPointer]] に似ている (もののやや異なる) 素片識別子を使っています。
--- 
''WebCGM Intelligent Content: 3.1.1 URI Fragment specification'' <http://www.w3.org/TR/REC-WebCGM/REC-03-CGM-IC.html#webcgm_3_1_1>
- [5]
[[WMLScript]] ([[ECMAScript]] もどき) 
は素片識別子として関数呼出しを記述できます。
- [9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
-- [15] [[CAB]] ファイル
- [19] [[FIXptr]]
-- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
-- XPointer の超簡略版。ただし XPointer とは非互換。
- [11] その他 ad hoc 系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。

[[#comment]]


* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])


[28]
d207 49
a255 44

([[名無しさん]] [sage])


[[#comment]]


* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]


* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[[#comment]]


** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]


@


1.7
log
@auto-committed
@
text
@d1 220
a220 199
[21] [DFN[[RUBYB[素片識別子][fragment identifier]]]]
[WEAK[([DFN[フラグメント識別子]], [DFN[断片識別子]]などとも。)]]
は、 [[URI参照]]の一部分であり、
ある[[資源]]の中の一部分や一つの[[表現]]を[[識別]]します。

[1] 
>
:[RUBYB[素片識別子][Fragment identifier]]:
[CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。[SRC[ISO‐HTML 4.9]]

[20] 仕様書:
- [[RFC 1630]] ([[URI]] 1[SUP[st]])
- [[RFC 1738]] ([[URL]] 2[SUP[nd]])
- [[RFC 1808]] ([[相対URL]])
- [[RFC 2396]] ([[URI]] 3[SUP[rd]])
- [[RFC 3986]] ([[URI]] 4[SUP[th]])
- [[RFC 3987]] ([[IRI]])
- [[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS>
-- 4.9
-[WebArch] [CITE[Architecture of the World Wide Web, Volume One]] 
--[CSECTION[2.6. Fragment Identifiers]]
<http://www.w3.org/TR/webarch/#fragid>
--[CSECTION[3.2.1. Representation types and fragment identifier semantics]]
<http://www.w3.org/TR/webarch/#media-type-fragid>
--[CSECTION[3.2.2. Fragment identifiers and content negotiation]]
<http://www.w3.org/TR/webarch/#frag-coneg>

[[#comment]]

* URI と素片識別子

[22] [[RFC 2396]] は素片識別子は [[URI]] の一部ではなく、
[[絶対URI]], [[相対URI]], 素片識別子をあわせたものを
[[URI参照]]と呼んでいました。

新しい [[RFC 3986]] は、素片識別子を URI の一部としています。

非公式には、以前から素片識別子を URI の一部としている人も多くいました。
(単なる無知からそうしている人もいれば、そう定義するべきと考えてそうしている人もいました。)

[[#comment]]

* 素片識別子と URI scheme

[23] URI の素片識別子と scheme 以外の部分の構文は、
[WEAK[(URI 全体の規定の範囲内で)]]
使用している [[URI scheme]] によって規定されています。
古くは素片識別子も URI scheme に依存すると考えられたこともあり、
古い URI scheme の中には素片識別子の扱いについて触れているものもあります。
しかし、現在では素片識別子は URI によって識別される[[資源]]の性質に依存するものであり、
'''URI scheme とは独立'''であると考えられています。

[[#comment]]

* 素片識別子と媒体型

[24] URI の仕様書によれば、素片識別子の構文はその URI 
参照による[[取出し]]行為 
[WEAK[([[RDF]] のように仮想的な[Q[取出し]]行為も含まれます。)]]
の結果得られる[[資源]]の[[媒体型]]に依存するとされています。
[Q[取出し]]が行われなければ、素片識別子の構文と解釈はできず、
実質無制約になります [SRC[WebArch 3.2.1]]。

[25] URI 参照によって識別される資源は[[内容折衝]]の対象になっているかもしれません。
そうでなくても、一つの URI 参照に対応する資源を取出す手段
[WEAK[(仮想的なものかもしれません。)]] が複数あれば、
それぞれによって違うものが取出されるかもしれません。

取出された資源の媒体型が異なると、同じ素片識別子であっても異なるものを指し得ます。
あるいは、一方に対しては構文や意味が定義されていなかったり正しくなかったりすることも起こり得ます。

実際に識別されるものが意味的に異なっている場合は、
鯖の設定の誤りと考えられます。構文や意味が未定義であるのは、
すべての媒体型が同じ機能を提供していないのですから仕方が無いことです。
[SRC[WebArch 3.2.2]]

このような問題をできるだけ避けるために、
各媒体型で素片識別子の構文や意味論は大きく変えてしまわないことが好ましいと考えられています。

[[#comment]]

* 動的表現との関係

[26] 例えばある XML 文書 <http://www.example.org/xml> で、
はじめ [SAMP(XML)[id]] という識別子は定義されていなかったとします。
この時、 URI 参照 <http://www.example.org/xml#id> は指すものがありません。

ところが、 Web ブラウザにおける何らかの処理の過程においてこの文書のある要素の
[CODE(XML)[[[ID]]]] が [SAMP(XML)[id]] と設定されたとします。すると
URI 参照 <http://www.example.org/xml#id> はその要素を識別するようになります。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[27] ある XML 文書を [[XSLT]] [[スタイル・シート]]によって変換したとします。
変換した結果には、元の文書に存在していた [CODE(XML)[ID]]
が (それに対応する要素と共に) 残っているかもしれませんし、
残っていないかもしれません。ある[[原始要素]]に対応する[[結果要素]]の識別子は元とは違った識別子になっているかもしれません。
ある識別子に対応するのは原始要素に対応する結果要素とは違う
(関係のない別の) 要素かもしれません。元の文書とは無関係に、
スタイル・シートが新しい識別子を導入するかもしれません。

このような状況は、便利なこともありますし、混乱を招くこともあります。

[[#comment]]

* 素片識別子の色々

- [CODE(SGML)[[[ID]]]] 系
-- [7] [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]] 属性を参照
--- [CODE(MIME)[[[text/html]]]]: 
[[RFC 1866]], [[XHTML 1.0]], [[RFC 2854]]
-- [14] [CODE(XML)[[[ID]]]] 属性を参照
--- [CODE(MIME)[[[application/smil]]]]
---- [CITE[The SMIL 2.0 Linking Modules]] <http://www.w3.org/TR/2005/REC-SMIL2-20050107/extended-linking.html#SMILLinking-Into>
-- [13] [[RDF URI参照]]方式
--- [CODE(MIME)[[[application/rdf+xml]]]]
---- [[RFC 3870]], [CITE[Resource Description Framework (RDF): Concepts and Abstract Syntax]] 
[CSECTION[7. Fragment Identifiers]]
<http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-fragID>
- [[XPointer]] 系
-- [6] [[RFC 3023]] 方式
--- RFC 3023 は [[XPointer]] 原案に言及していますが、
素片識別子について実際には何も規定していません。
--- [CODE(MIME)[[[application/xml]]]]: [[RFC 3023]]
--- [CODE(MIME)[[[text/xml]]]]: RFC 3023
--- [CODE(MIME)[[[application/ccxml+xml]]]]
----
[CITE[Voice Browser Call Control: CCXML Version 1.0]] <http://www.w3.org/TR/2005/WD-ccxml-20050111/#media-type-fragid>
---- RFC 3023 を参照。
-- [[WebCGM]] 方式
--- [4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]]) は [[XPointer]] に似ている (もののやや異なる) 素片識別子を使っています。
---
''WebCGM Intelligent Content: 3.1.1 URI Fragment specification'' <http://www.w3.org/TR/REC-WebCGM/REC-03-CGM-IC.html#webcgm_3_1_1>
- [5]
[[WMLScript]] ([[ECMAScript]] もどき) 
は素片識別子として関数呼出しを記述できます。
-[9] [CODE(ABNF)[[[param]]]] 系
-- [10] [CODE(MIME)[[[text/plain]]]]: [[I-D]]
-- [15] [[CAB]] ファイル
- [19] [[FIXptr]]
-- [CODE(MIME)[[[application/xml]]]], [CODE(MIME)[[[text/xml]]]]:
[[Gecko]] などが実装。
-- XPointer の超簡略版。ただし XPointer とは非互換。
- [11] その他 ad hoc 系
-- [12] [CODE(MIME)[[[text/plain]]]]
--- 行数などを指定。
--- [[w3m]] などが実装。

[[#comment]]

* 素片識別子の拡張

[8] 公式な URI の仕様の素片識別子には様々な問題点があり、
それを改善しようとする提案もいくつかあります。
しかし、公式に採用されたり、
広く受け入れられたりするに至ったものはまだありません。

[2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 
(例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])

[[#comment]]

* 実装

[3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ 
[WEAK[(例: [[WinIE]] や [[Mozilla]] ([[Gecko]]))]] と、
最後を表示するブラウザ [WEAK[(例: [[Classic Mozilla]])]] があります。

[[#comment]]

* 他との関係

[16] [CODE(URI)[[[jar]]:]] [[URI scheme]] は、
[[ZIP]] 形式の圧縮ファイルの中のファイルを識別できます。
本来、[Q[ある資源の中に含まれる資源]]ですから、
素片識別子を使って表現するのが適当にも思えますが、
[CODE(URI)[jar:]] は[Q[資源の中の資源]]まで一つの
URI 本体だけで識別できます。

(この方式を推進する人は、[Q[ある資源の中の資源の中の資源]]
のような入れ子の場合を素片識別子は綺麗に表現できないことを問題視しています。)

[[#comment]]

** 素片識別子だけを使うプロトコル要素

[17] [[SMIL]] の [CODE(XMLa)[[[fragment]]]] 属性は、
[[HTML]] の [CODE(HTMLa)[[[name]]]] 属性や [CODE(HTMLa)[[[id]]]]
属性や、 [[XML]] 
の素片識別子を使ってある資源の一部を識別するために使うことができます。

[18] [[XInclude]] の [CODE(XMLa)[[[xpointer]]]] 属性は、
[[XPointer]] を使って XML の一部を識別するために使うことができます。

[[#comment]]

* メモ
@


1.6
log
@auto-committed
@
text
@d1 5
d7 2
d10 94
a103 2
に続く部分。 Fragment identifier。
([[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS> 4.9 参照。)
@


1.5
log
@auto-committed
@
text
@d43 4
@


1.4
log
@auto-committed
@
text
@d1 37
a37 18


[1] [CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。 Fragment identifier。
([[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS> 4.9 参照。)

- [2] [[GNOME]] [ABBR[VFS] [仮想ファイル・システム]] URI とやら (''Writing Modules'' <http://developer.gnome.org/doc/API/gnome-vfs/writing-modules.html#URIS>) は、素片識別子 (のようなもの) を複数つけることができます。 (例: [SAMP(URI)[ftp://username:password@@host.net/path/to/file.tar.gz#gzip#tar/path/to/hello.c]])
- [3] 文書内に存在しない素片識別子つきの URI 参照を表示させようとすると、文書の最初を表示する WWW ブラウザ (例: [[WinIE]] や [[Mozilla]] ([[Gecko]])) と、最後を表示するブラウザ (例: 4 以前の [[NN]]) があります。

[4]
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]]) は [[XPointer]] に似ている (もののやや異なる) 素片識別子を使っています。

''WebCGM Intelligent Content: 3.1.1 URI Fragment specification'' <http://www.w3.org/TR/REC-WebCGM/REC-03-CGM-IC.html#webcgm_3_1_1>

([[名無しさん]])


[5]
d39 58
a96 3
は素片識別子として関数呼出しを記述できます。
([[名無しさん]])

@


1.3
log
@auto-committed
@
text
@d11 1
a11 3
[[WebCGM]] ([CODE(MIME)[[[image/cgm]]; [[version]]=4; [[profileid]]=WebCGM]]) は [[XPointer]] に似ている (もののやや異なる) 素片識別子を使っています。

''WebCGM Intelligent Content: 3.1.1 URI Fragment specification'' <http://www.w3.org/TR/REC-WebCGM/REC-03-CGM-IC.html#webcgm_3_1_1>
d13 8
@


1.2
log
@auto-committed
@
text
@d1 6
a6 5
#?SuikaWiki/0.9
[1] [CODE(HTMLa)[[[href]]]] 属性値の [CODE(URI)[#]]
に続く部分。 Fragment identifier。
([[ISO‐HTML]] <http://purl.org/NET/ISO+IEC.15445/15445.html#DEFS> 4.9 参照。)

d9 8
@


1.1
log
@auto-committed
@
text
@d6 2
@

