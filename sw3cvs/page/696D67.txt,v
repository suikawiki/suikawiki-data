head	1.47;
access;
symbols
	suikawiki3-final:1.47
	before-db-leaffile:1.8
	after-upgrade-to-suikawiki-3:1.7
	before-fork-suikawiki3:1.7
	after-restore-20040122:1.7;
locks; strict;
comment	@# @;


1.47
date	2008.08.13.02.56.45;	author wakaba;	state Exp;
branches;
next	1.46;

1.46
date	2007.10.23.02.49.08;	author wakaba;	state Exp;
branches;
next	1.45;

1.45
date	2007.09.13.02.38.04;	author wakaba;	state Exp;
branches;
next	1.44;

1.44
date	2007.09.08.02.52.08;	author wakaba;	state Exp;
branches;
next	1.43;

1.43
date	2007.07.03.02.50.05;	author wakaba;	state Exp;
branches;
next	1.42;

1.42
date	2007.05.23.02.39.17;	author wakaba;	state Exp;
branches;
next	1.41;

1.41
date	2007.04.18.02.45.06;	author wakaba;	state Exp;
branches;
next	1.40;

1.40
date	2007.04.13.02.57.59;	author wakaba;	state Exp;
branches;
next	1.39;

1.39
date	2007.03.31.02.42.51;	author wakaba;	state Exp;
branches;
next	1.38;

1.38
date	2007.03.13.02.40.21;	author wakaba;	state Exp;
branches;
next	1.37;

1.37
date	2007.01.23.02.31.48;	author wakaba;	state Exp;
branches;
next	1.36;

1.36
date	2007.01.13.02.32.26;	author wakaba;	state Exp;
branches;
next	1.35;

1.35
date	2006.12.27.02.17.37;	author wakaba;	state Exp;
branches;
next	1.34;

1.34
date	2006.12.18.02.23.31;	author wakaba;	state Exp;
branches;
next	1.33;

1.33
date	2006.12.08.02.14.27;	author wakaba;	state Exp;
branches;
next	1.32;

1.32
date	2006.11.23.02.11.58;	author wakaba;	state Exp;
branches;
next	1.31;

1.31
date	2006.10.31.02.17.12;	author wakaba;	state Exp;
branches;
next	1.30;

1.30
date	2006.09.23.02.13.19;	author wakaba;	state Exp;
branches;
next	1.29;

1.29
date	2006.02.03.02.15.13;	author wakaba;	state Exp;
branches;
next	1.28;

1.28
date	2006.01.18.02.11.38;	author wakaba;	state Exp;
branches;
next	1.27;

1.27
date	2006.01.08.02.11.48;	author wakaba;	state Exp;
branches;
next	1.26;

1.26
date	2005.12.31.02.10.36;	author wakaba;	state Exp;
branches;
next	1.25;

1.25
date	2005.12.23.02.17.22;	author wakaba;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.03.02.22.11;	author wakaba;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.23.02.18.44;	author wakaba;	state Exp;
branches;
next	1.22;

1.22
date	2005.08.23.02.07.00;	author wakaba;	state Exp;
branches;
next	1.21;

1.21
date	2005.07.13.02.09.52;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2005.06.13.02.19.51;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2005.05.31.02.06.32;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2005.04.23.02.09.50;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2005.04.13.02.07.40;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2005.04.08.02.06.14;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2005.03.23.02.05.10;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2005.03.08.02.06.18;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2005.02.18.02.07.31;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2005.01.18.02.08.10;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.08.02.05.55;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2004.07.31.02.03.00;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2004.07.23.02.04.16;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2004.03.31.02.00.54;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2003.12.31.02.02.56;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.23.02.03.24;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2003.11.13.02.03.13;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2003.10.13.02.02.15;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.28.10.14.32;	author make;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.06.12.26.31;	author make;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.27.07.25.02;	author make;	state Exp;
branches;
next	;


desc
@@


1.47
log
@auto-committed
@
text
@
* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[copyright]]]],,,,非標準,[[EMOBILE]]
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)@@en[[[href]]]]	,	,	,[[リンク先]]	,[[W3C]] [[WD]]	,[[XHTML 2.0]]
,[CODE(XMLa)@@en[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]	,	,	,[[リンク先]]	,[[W3C]] [[WD]] 内部案	,[[XHTML 2.0]]
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[livesrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)@@en[[[mediaout]]]],,[CODE(HTML)@@en[[[no]]]],,非標準,[[EMOBILE]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[private]]]],,[CODE(HTML)@@en[[[no]]]],,非標準,[[EMOBILE]]
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[74]
[CITE[Chapter 2]] ([CODE[1998-05-20 00:22:16 +09:00]] 版) <http://www.w3.org/People/Raggett/book4/ch02.html>
([[名無しさん]] [WEAK[2007-03-11 03:12:31 +00:00]])

[79]
[CITE[EMail Msg <9303130632.AA14200@@wintermute.ncsa.uiuc.edu>]] ([CODE[2007-07-01 02:38:29 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/249.html>
([[名無しさん]])

[80]
>>79
- [Q@@en[Mosaic v0.10]] で [CODE(HTMLe)@@en[[[img]]]]
[CODE(HTMLa)@@en[[[src]]]] を実装する
- [[GIF]] と [[XBM]] に対応する
- [CODE(HTTP)@@en[[[Content-Type]]]] は今のところは気にしない
(将来はする予定) で、[[実体本体]]をチェックして形式を判断する
- [CODE(HTMLe)@@en[[[include]]]] や [CODE(HTMLe)@@en[[[embed]]]]
には今のところ対応しない。任意の埋め込みを許すと[[再帰]]とか問題が山積していて[[画像]]を埋め込みたいだけのとは話が違う

([[名無しさん]])

[81]
[CITE[EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>]] ([CODE[2007-07-01 04:29:39 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/254.html>
([[名無しさん]])

[82]
[CITE[EMail Msg <9307122305.AA40433@@stat1.cc.ukans.edu>]] ([CODE[2007-07-01 04:58:23 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q3.messages/117.html>
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[77]
[CITE[Conformance for Mail clients (and maybe other WYSIWYG	editors)]] ([[Maciej Stachowiak <mjs@@...>]] 著, [CODE[2007-04-11 08:21:31 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/10162>
([[名無しさん]] [WEAK[2007-04-12 14:01:01 +00:00]])

[78]
[CITE[HTML5 IRC logs: w3c / #html-wg / 20070411]] ([CODE[2007-04-14 11:34:25 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/html-wg/20070411>
([[名無しさん]] [WEAK[2007-04-14 03:26:14 +00:00]])

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[75]
[[JustView]] は [[Windows]] [[BMP]] に対応していたようです。
([[名無しさん]] [sage])

[76]
[CITE[A Beginner's Guide to HTML]] ([CODE[2003-08-15 22:48:58 +09:00]] 版) <http://ccat.sas.upenn.edu/jod/primer.html#InlineImage>

[[NCSA]] の [[HTML]] 入門。
([[名無しさん]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]

[73]

[PRE(HTML invalid example code)[
<IMG BORDER="0" WIDTH="88" HEIGHT="31" showme="Microsoft Internet Explorer" SRC="/workshop/graphics/ieget_animated.gif" MINVER="5" SAMPLEPATH="/workshop/samples/author/misc/ccdh01.htm" FEATURES="top=25,left=25,height=300,width=400,statusbar=yes,resizable=1"></IMG>
]PRE]

;; [CITE@@en-us[About Conditional Comments]] ([CODE[2007-01-08 14:42:10 +09:00]] 版) <http://msdn.microsoft.com/workshop/author/dhtml/overview/ccomment_ovw.asp>

([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[83]
[CITE@@en-gb[Juicy Studio: The HTML 5 Image Element]] ([CODE[2007-09-08 09:16:22 +09:00]] 版) <http://juicystudio.com/article/html5-image-element-no-alt.php>
([[名無しさん]])

[84]
[CITE@@en[Web Accessibility Best Practices: Text Equivalents Overview]] ([CODE[2007-09-09 12:03:04 +09:00]] 版) <http://html.cita.uiuc.edu/text/>
([[名無しさん]])

[85]
[CITE[Re: <img> element comments]] ([[Ian Hickson <ian@@...>]] 著, [CODE[2007-08-15 10:48:42 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/11692>
([[名無しさん]])


[86]
[CITE[Re: <img> element comments]] ([[Ian Hickson <ian@@...>]] 著, [TIME[2007-10-12 22:55:46 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/12011>
([[名無しさん]])


[[#comment]]


* メモ@


1.46
log
@auto-committed
@
text
@d1 711
a711 709


* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)@@en[[[href]]]]	,	,	,[[リンク先]]	,[[W3C]] [[WD]]	,[[XHTML 2.0]]
,[CODE(XMLa)@@en[[QN[xlink:[[href]]] [[[http://www.w3.org/1999/xlink]]]]]]	,	,	,[[リンク先]]	,[[W3C]] [[WD]] 内部案	,[[XHTML 2.0]]
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[livesrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[74]
[CITE[Chapter 2]] ([CODE[1998-05-20 00:22:16 +09:00]] 版) <http://www.w3.org/People/Raggett/book4/ch02.html>
([[名無しさん]] [WEAK[2007-03-11 03:12:31 +00:00]])

[79]
[CITE[EMail Msg <9303130632.AA14200@@wintermute.ncsa.uiuc.edu>]] ([CODE[2007-07-01 02:38:29 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/249.html>
([[名無しさん]])

[80]
>>79
- [Q@@en[Mosaic v0.10]] で [CODE(HTMLe)@@en[[[img]]]]
[CODE(HTMLa)@@en[[[src]]]] を実装する
- [[GIF]] と [[XBM]] に対応する
- [CODE(HTTP)@@en[[[Content-Type]]]] は今のところは気にしない
(将来はする予定) で、[[実体本体]]をチェックして形式を判断する
- [CODE(HTMLe)@@en[[[include]]]] や [CODE(HTMLe)@@en[[[embed]]]]
には今のところ対応しない。任意の埋め込みを許すと[[再帰]]とか問題が山積していて[[画像]]を埋め込みたいだけのとは話が違う

([[名無しさん]])

[81]
[CITE[EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>]] ([CODE[2007-07-01 04:29:39 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/254.html>
([[名無しさん]])

[82]
[CITE[EMail Msg <9307122305.AA40433@@stat1.cc.ukans.edu>]] ([CODE[2007-07-01 04:58:23 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q3.messages/117.html>
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[77]
[CITE[Conformance for Mail clients (and maybe other WYSIWYG	editors)]] ([[Maciej Stachowiak <mjs@@...>]] 著, [CODE[2007-04-11 08:21:31 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/10162>
([[名無しさん]] [WEAK[2007-04-12 14:01:01 +00:00]])

[78]
[CITE[HTML5 IRC logs: w3c / #html-wg / 20070411]] ([CODE[2007-04-14 11:34:25 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/html-wg/20070411>
([[名無しさん]] [WEAK[2007-04-14 03:26:14 +00:00]])

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[75]
[[JustView]] は [[Windows]] [[BMP]] に対応していたようです。
([[名無しさん]] [sage])

[76]
[CITE[A Beginner's Guide to HTML]] ([CODE[2003-08-15 22:48:58 +09:00]] 版) <http://ccat.sas.upenn.edu/jod/primer.html#InlineImage>

[[NCSA]] の [[HTML]] 入門。
([[名無しさん]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]

[73]

[PRE(HTML invalid example code)[
<IMG BORDER="0" WIDTH="88" HEIGHT="31" showme="Microsoft Internet Explorer" SRC="/workshop/graphics/ieget_animated.gif" MINVER="5" SAMPLEPATH="/workshop/samples/author/misc/ccdh01.htm" FEATURES="top=25,left=25,height=300,width=400,statusbar=yes,resizable=1"></IMG>
]PRE]

;; [CITE@@en-us[About Conditional Comments]] ([CODE[2007-01-08 14:42:10 +09:00]] 版) <http://msdn.microsoft.com/workshop/author/dhtml/overview/ccomment_ovw.asp>

([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[83]
[CITE@@en-gb[Juicy Studio: The HTML 5 Image Element]] ([CODE[2007-09-08 09:16:22 +09:00]] 版) <http://juicystudio.com/article/html5-image-element-no-alt.php>
([[名無しさん]])

[84]
[CITE@@en[Web Accessibility Best Practices: Text Equivalents Overview]] ([CODE[2007-09-09 12:03:04 +09:00]] 版) <http://html.cita.uiuc.edu/text/>
([[名無しさん]])

[85]
[CITE[Re: <img> element comments]] ([[Ian Hickson <ian@@...>]] 著, [CODE[2007-08-15 10:48:42 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/11692>
([[名無しさん]])


[86]
[CITE[Re: <img> element comments]] ([[Ian Hickson <ian@@...>]] 著, [TIME[2007-10-12 22:55:46 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/12011>
([[名無しさん]])


[[#comment]]


@


1.45
log
@auto-committed
@
text
@d693 7
d701 3
a703 2
[84]
[CITE@@en[Web Accessibility Best Practices: Text Equivalents Overview]] ([TIME[2007-09-09 12:03:04 +09:00]] 版) <http://html.cita.uiuc.edu/text/>
@


1.44
log
@auto-committed
@
text
@d689 4
d694 2
a695 2
[83]
[CITE@@en-gb[Juicy Studio: The HTML 5 Image Element]] ([TIME[2007-09-08 09:16:22 +09:00]] 版) <http://juicystudio.com/article/html5-image-element-no-alt.php>
@


1.43
log
@auto-committed
@
text
@a278 1

d280 1
a280 1
[CITE[EMail Msg <9307122305.AA40433@@stat1.cc.ukans.edu>]] ([TIME[2007-07-01 04:58:23 +09:00]] 版) <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q3.messages/117.html>
a282 1

d688 6
@


1.42
log
@auto-committed
@
text
@d1 693
a693 668

* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)@@en[[[href]]]],,,[[リンク先]],[[W3C]] [[WD]],[[XHTML 2.0]]
,[CODE(XMLa)@@en[[QN[xlink:[[href]]][[[http://www.w3.org/1999/xlink]]]]]],,,[[リンク先]],"[[W3C]] [[WD]] 内部案",[[XHTML 2.0]]
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[livesrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[74]
[CITE[Chapter 2]] ([CODE[1998-05-20 00:22:16 +09:00]] 版) <http://www.w3.org/People/Raggett/book4/ch02.html>
([[名無しさん]] [WEAK[2007-03-11 03:12:31 +00:00]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[77]
[CITE[Conformance for Mail clients (and maybe other WYSIWYG	editors)]] ([[Maciej Stachowiak <mjs@@...>]] 著, [CODE[2007-04-11 08:21:31 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/10162>
([[名無しさん]] [WEAK[2007-04-12 14:01:01 +00:00]])


[78]
[CITE[HTML5 IRC logs: w3c / #html-wg / 20070411]] ([TIME[2007-04-14 11:34:25 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/html-wg/20070411>
([[名無しさん]] [WEAK[2007-04-14 03:26:14 +00:00]])


[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[75]
[[JustView]] は [[Windows]] [[BMP]] に対応していたようです。
([[名無しさん]] [sage])

[76]
[CITE[A Beginner's Guide to HTML]] ([CODE[2003-08-15 22:48:58 +09:00]] 版) <http://ccat.sas.upenn.edu/jod/primer.html#InlineImage>

[[NCSA]] の [[HTML]] 入門。
([[名無しさん]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]

[73]

[PRE(HTML invalid example code)[
<IMG BORDER="0" WIDTH="88" HEIGHT="31" showme="Microsoft Internet Explorer" SRC="/workshop/graphics/ieget_animated.gif" MINVER="5" SAMPLEPATH="/workshop/samples/author/misc/ccdh01.htm" FEATURES="top=25,left=25,height=300,width=400,statusbar=yes,resizable=1"></IMG>
]PRE]

;; [CITE@@en-us[About Conditional Comments]] ([CODE[2007-01-08 14:42:10 +09:00]] 版) <http://msdn.microsoft.com/workshop/author/dhtml/overview/ccomment_ovw.asp>

([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]


@


1.41
log
@auto-committed
@
text
@d1 668
a668 667


* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[livesrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[74]
[CITE[Chapter 2]] ([CODE[1998-05-20 00:22:16 +09:00]] 版) <http://www.w3.org/People/Raggett/book4/ch02.html>
([[名無しさん]] [WEAK[2007-03-11 03:12:31 +00:00]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[77]
[CITE[Conformance for Mail clients (and maybe other WYSIWYG	editors)]] ([[Maciej Stachowiak <mjs@@...>]] 著, [CODE[2007-04-11 08:21:31 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/10162>
([[名無しさん]] [WEAK[2007-04-12 14:01:01 +00:00]])


[78]
[CITE[HTML5 IRC logs: w3c / #html-wg / 20070411]] ([TIME[2007-04-14 11:34:25 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/html-wg/20070411>
([[名無しさん]] [WEAK[2007-04-14 03:26:14 +00:00]])


[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[75]
[[JustView]] は [[Windows]] [[BMP]] に対応していたようです。
([[名無しさん]] [sage])

[76]
[CITE[A Beginner's Guide to HTML]] ([CODE[2003-08-15 22:48:58 +09:00]] 版) <http://ccat.sas.upenn.edu/jod/primer.html#InlineImage>

[[NCSA]] の [[HTML]] 入門。
([[名無しさん]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]

[73]

[PRE(HTML invalid example code)[
<IMG BORDER="0" WIDTH="88" HEIGHT="31" showme="Microsoft Internet Explorer" SRC="/workshop/graphics/ieget_animated.gif" MINVER="5" SAMPLEPATH="/workshop/samples/author/misc/ccdh01.htm" FEATURES="top=25,left=25,height=300,width=400,statusbar=yes,resizable=1"></IMG>
]PRE]

;; [CITE@@en-us[About Conditional Comments]] ([CODE[2007-01-08 14:42:10 +09:00]] 版) <http://msdn.microsoft.com/workshop/author/dhtml/overview/ccomment_ovw.asp>

([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]


@


1.40
log
@auto-committed
@
text
@d396 1
a396 1
[CITE[Conformance for Mail clients (and maybe other WYSIWYG	editors)]] ([[Maciej Stachowiak <mjs@@...>]] 著, [TIME[2007-04-11 08:21:31 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/10162>
d398 5
@


1.39
log
@auto-committed
@
text
@d395 5
d430 2
a432 3
[76]
[CITE[A Beginner's Guide to HTML]] ([TIME[2003-08-15 22:48:58 +09:00]] 版) <http://ccat.sas.upenn.edu/jod/primer.html#InlineImage>

a434 1

@


1.38
log
@auto-committed
@
text
@a252 1

d254 1
a254 1
[CITE[Chapter 2]] ([TIME[1998-05-20 00:22:16 +09:00]] 版) <http://www.w3.org/People/Raggett/book4/ch02.html>
a256 1

d420 12
@


1.37
log
@auto-committed
@
text
@d1 649
a649 645

* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[livesrc]]]],,,,非標準
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]


[73]

[PRE(HTML invalid example code)[
<IMG BORDER="0" WIDTH="88" HEIGHT="31" showme="Microsoft Internet Explorer" SRC="/workshop/graphics/ieget_animated.gif" MINVER="5" SAMPLEPATH="/workshop/samples/author/misc/ccdh01.htm" FEATURES="top=25,left=25,height=300,width=400,statusbar=yes,resizable=1"></IMG>
]PRE]

;; [CITE@@en-us[About Conditional Comments]] ([TIME[2007-01-08 14:42:10 +09:00]] 版) <http://msdn.microsoft.com/workshop/author/dhtml/overview/ccomment_ovw.asp>


([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])


[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]


@


1.36
log
@auto-committed
@
text
@d1 583
a583 583


* [CODE(HTMLe)@@en[img]] 要素 (HTML)

[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)@@en[[[dojotype]]]]	,	,	,	,非標準	,[[Dojo]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,''非''標準
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[oversrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]] [urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]]	,([[ブール型属性]])	,([[偽]])	,	,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。

[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案

([[名無しさん]])

[[#comment]]


*** メモ

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
[PRE(HTML invalid example code)[
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
]PRE]


[73]
d591 55
a645 55

([[名無しさん]] [WEAK[2007-01-08 05:46:11 +00:00]])


[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]


@


1.35
log
@auto-committed
@
text
@d1 583
a583 1
* [CODE(HTMLe)@@en[img]] 要素 (HTML)
a584 570
[33] [[HTML]] の [DFN[[CODE(HTMLe)@@en[img]] [[要素]]]]は、
[[画像]]を埋込みます。

[35]
:状態:[[W3C]] [[勧告]]、[[WHATWG]] [[WD]]
:[[名前空間URI]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[局所名]]:[CODE(HTMLe)@@en[[[img]]]]
([Q@@en[[[image]]]] ([Q[[[画像]]]]) より)
:[[開始タグ]]:必須
:[[終了タグ]]:禁止
:文脈:[[厳密行内内容]]としてなど (例外あり)
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[内容モデル]]:[[空]]
:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[dojoattachpoint]]]],,,,"非標準","[[Dojo]]"
,[CODE(HTMLa)@@en[[[dojotype]]]],,,,"非標準","[[Dojo]]"
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)@@en[[[hb:hoversrc]]]],[CODE(SGML)@@en[%[[URI]];]],,,"''非''標準"
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[orgsrc]]]],,,,"非標準"
,[CODE(HTMLa)@@en[[[oversrc]]]],,,,"非標準"
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(XMLa)@@en[[QN[v:[[shapes]]][urn:schemas-microsoft-com:vml]]]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[x-sas-useimageheight]]]],([[ブール型属性]]),([[偽]]),,非標準
,[CODE(HTMLa)@@en[[[x-sas-useimagewidth]]]],([[ブール型属性]]),([[偽]]),,非標準
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。


[71]

@@@@ 初期の [[XHTML 2.0]] with [[XLink]] 案


([[名無しさん]])


[[#comment]]


*** メモ

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[72] 
d586 1
a586 5
<!--[if gte vml 1]><v:shapetype id="_x0000_t136"
 coordsize="21600,21600" o:spt="136" adj="10800" path="m@@7,l@@8,m@@5,21600l@@6,21600e">
 [VAR[...]]
</v:shape><![endif]--><![if !vml]><img border=0 width=571 height=96
src="image001.gif" alt="..." v:shapes="_x0000_s1025"><![endif]>
d589 1
a589 50
[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]

d591 55
@


1.34
log
@auto-committed
@
text
@d29 2
d36 1
@


1.33
log
@auto-committed
@
text
@d1 1
d3 1
a3 3
* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
a5 8
[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

d7 4
a10 3
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
d12 2
a13 3
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
d15 2
d64 1
d70 2
d80 7
a86 3

:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]

d568 9
@


1.32
log
@auto-committed
@
text
@d1 373
a373 372


* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)@@en[[[mce_src]]]]	,[CODE(SGML)@@en[%[[URI]];]]	,	,	,非標準
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


:[[DOM界面]]:[CODE(DOMi)@@en[[[HTMLImageElement]]]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[70]

@@@@ [[アニメーションGIF]], [CODE(HTMLa)@@en[[[dynsrc]]]],
[CODE(HTMLa)@@en[[[motion]]]]
([[名無しさん]])

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[69]

@@@@ [[HTML 2.0]]

@@@@ [[HTML 4]] で非推奨? 廃止?

@@@@ [[HTML 4]] [CODE(HTMLa)@@en[[[alt]]]],
[CODE(HTMLa)@@en[[[longdesc]]]]

([[名無しさん]])

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。


[71]
d377 243
a619 243

([[名無しさん]])


[[#comment]]


*** メモ

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

[[#comment]]


@


1.31
log
@auto-committed
@
text
@d1 618
a618 601

* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

([[名無しさん]] [sage])

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[62] '''[CODE(HTMLe)@@en[[[image]]]]'''

[[HTML]] には [CODE(HTMLe)@@en[[[image]]]]
という[[要素型]]もあります。詳しくは
[CODE(HTMLe)@@en[[[image]]]] の項を参照してください。

[[#comment]]


** 歴史


*** [CODE(HTMLe)@@en[img]] の誕生

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


*** [CODE(HTMLe)@@en[img]] の標準化

@@@@ 

[[#comment]]


*** XHTML 2

[63] '''[CODE(HTMLe)@@en[[QN[alt] [http://www.w3.org/1999/xhtml]]]] 要素型の導入'''

2000年頃の [[XHTML 2.0]] 仕様案では、
[CODE(HTMLe)@@en[[QN[[[img]]] [http://www.w3.org/1999/xhtml]]]]
が[[内容]]を持ち得る[[要素]]となり、
[CODE(HTMLa)@@en[[[alt]]]] [[属性]]に代わる
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
[[要素]]や[[画像写像]]のためと思われる
[CODE(HTMLe)@@en[[[a]]]] [[要素]]や
[CODE(HTMLe)@@en[[[area]]]] [[要素]]を[[子供]]とできるとされていました。

;; [[XHTML m12n 1.0]] の [[DTD]] 
[[QNameモジュール]]に [CODE(HTMLe)@@en[[[alt]]]]
[[要素型]]の[[引数実体]]があります。
詳しくは、
[CODE(HTMLe)@@en[[QN[[[alt]]] [http://www.w3.org/1999/xhtml]]]]
の項を参照してください。

;; [CITE[Image Module]] 
<http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/*checkout*/xhtml2/xhtml2_modules.mhtml?rev=1.4&content-type=text/html#s_imagemodule>

[68]
[CITE[xhtml2/DTD/xhtml-image-2.mod - view - 1.1]] <http://htmlwg.mn.aptest.com/viewcvs/viewcvs.cgi/xhtml2/DTD/xhtml-image-2.mod?rev=1.1&content-type=text/vnd.viewcvs-markup>

;; この時点ではまだ[[名前空間URI]] が未確定なのか、
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/2000/xhtml]]]] だったり
[CODE(URI)@@en[[[http://www.w3.org/TR/xhtml2]]]]
だったりよくわかりません。

[64] '''[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]] 要素への移行'''

しかし、2002年8月に公開された [[XHTML 2.0]] の最初の [[WD]]
には、 [CODE(HTMLe)@@en[[[img]]]] [[要素]]に相当するものは含まれていませんでした。
[[画像]]の埋め込みには、 (一時期 [[HTML 4]] が狙っていたように)
汎用の 
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]を使うとされていました。

;; [CITE[- XHTML Object Module]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20020805/mod-object.html#s_objectmodule>

;; [[画像写像]]の[[モジュール]]の説明文には、
[CODE(HTMLe)@@en[[[img]]]] [[要素]]への言及が残ったままになっていました。

[65] '''[CODE(XMLa)@@en[src]] 属性への移行'''

その次の2002年11月の [[XHTML 2.0]] [[WD]] は、
[[共通属性]]として [CODE(XMLa)@@en[[[src]]]] [[属性]]を追加しました。
[[画像]]その他の[[物体]]を埋め込むための、
[CODE(HTMLe)@@en[[[img]]]] や [CODE(HTMLe)@@en[[[object]]]]
に代わる新機能でしたが、
[CODE(XMLe)@@en[[QN[[[object]]] [http://www.w3.org/2002/06/xhtml2]]]]
[[要素]]もそのまま残されました。

;; [CITE[- XHTML Attribute Collections]] 
<http://www.w3.org/TR/2002/WD-xhtml2-20021211/mod-attribute-collections.html#col_Embedding>

;; 2004年7月の [[WD]] で、 [[XHTML 1]]
との差異の解説が追加され、 [CODE(XMLa)@@en[[[src]]]]
が [CODE(HTMLe)@@en[[[img]]]] に代わるものとして紹介されています:
[CITE[- Introduction]] 
<http://www.w3.org/TR/2004/WD-xhtml2-20040722/introduction.html#s_intro_differences>

[66] '''[CODE(XMLe)@@en[[QN[img] [http://www.w3.org/2002/06/xhtml2/]]]] の復活'''

ところが、2005年5月の [[WD]] で、
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
が[Q[[[XHTML 2]] への移行を容易にするため]<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>]と称して[Q[復活]]しています。

この
[CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
[[要素]]にはすべての [[XHTML 2.0]] [[共通属性]]が定義されていました
(その中に [CODE(XMLa)@@en[[[src]]]] も含まれます)。
[[XHTML 1]] と比較すると、[[表現属性]]の他に
[CODE(HTMLa)@@en[[[alt]]]] と [CODE(HTMLa)@@en[[[longdesc]]]]
が消えています。そして、[[代替文]]は[[要素]]の[[内容]]として記述することとされています。

;; 
[CITE[XHTML 2.0 - XHTML Image Module]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/mod-image.html#sec_19.1.>

;; [[XHTML 1]] との違いの解説は前の版から変わっていません:
[CITE[XHTML 2.0 - Introduction]] 
<http://www.w3.org/TR/2005/WD-xhtml2-20050527/introduction.html#s_intro_differences>

[67]
[[XHTML 2]] への移行を容易にすると謳っています
(そのような触れ込みで残されている[[要素]]や[[属性]]は他にも多数あります) 
が、
- 当時の [[XHTML 2.0]] [[WD]] が定義する[[要素型]]の属する[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/2002/06/xhtml2/]]]]
は [[XHTML 1]] の[[名前空間URI]]
[CODE(URI)@@en[[[http://www.w3.org/1999/xhtml]]]]
と異なり、 [[XML名前空間]]的互換性がないこと
- [CODE(XMLe)@@en[[QN[[[img]]] [http://www.w3.org/2002/06/xhtml2/]]]]
の[[属性]]と[[内容]]のように、[[名前空間]]を無視しても
[[XHTML 1]] と互換性がないこと
- そもそも [[XHTML 2]] は [[XHTML 1]] と互換性のない大改訂と謳っていること

などから、うわべだけの互換性を持たせようとしているに過ぎないと非難されています。

;; 一方 [[HTML WG]] は、[[著者]]の学習の便などを考えているようですが・・・・・・。




[[#comment]]


*** メモ

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])

[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

([[名無しさん]] [sage])

[[#comment]]


@


1.30
log
@auto-committed
@
text
@d1 601
a601 471


* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]]	,	,	,	,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>

([[名無しさん]] [sage])

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[60]
[CITE[ha.ckers.org web application security lab - Archive &#187; Detecting FireFox Extentions]] <http://ha.ckers.org/blog/20060823/detecting-firefox-extentions/>
([[名無しさん]] [WEAK[2006-09-21 10:23:53 +00:00]])


[61]
[CITE[秋元@@サイボウズ研究所プログラマーBlog: 訪問者が入れているFirefox extensionを検知するJavascript]] <http://labs.cybozu.co.jp/blog/akky/archives/2006/09/detect_firefox_extension.html>
([[名無しさん]] [WEAK[2006-09-21 10:24:43 +00:00]])


[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>
<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]

([[名無しさん]] [sage])

[[#comment]]


@


1.29
log
@auto-committed
@
text
@d104 3
d108 2
a109 6
[59]
[[libwww]]は1994年4月の2.16 Prerelease 1で修正されるまで、
[CODE(HTMLe)@@en[[[img]]]]に[[終了タグ]]が必要でした。

[CITE[Change History for W3C Sample Code Library]] 
<http://www.w3.org/Library/User/History.html>
a112 1

d308 10
@


1.28
log
@auto-committed
@
text
@d1 463
a463 456

* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)@@en[[[x-save-file]]]],,,,非標準
,[CODE(HTMLa)@@en[[[x-save-method]]]],,,,非標準 
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])


[58]
[CODE(HTMLe)@@en[[[img]]]][[要素型]]の設計は[[GSML]]的に見ても好ましくないという人もいますが、実際はそうでもありません。
>>25,>>37 にある通り、[[URI]]の代わりに[[非解析対象実体]]を使えば、まさに典型的な[[SGML]]的表現になります。

[[文書型定義]]内に:
[PRE(SGML example code)[
<!NOTATION cgm
    PUBLIC "ISO 8632:1987//NOTATION Computer Graphics Metafile//EN"
    [SPAN(comment)[-- この[[公開識別子]]が正しいのかはよく分からない --]]>
<!ENTITY image-resource
    SYSTEM "<url>http://example.com/image"
    NDATA cgm>

<!ELEMENT img - o EMPTY>
<!ATTLIST img
    src    ENTITY    #REQUIRED>
]PRE]

[[文書実現値]]に:
[PRE(SGML example code)[
<img src="image-resource"/>
]PRE]



([[名無しさん]] [sage])


[[#comment]]


@


1.27
log
@auto-committed
@
text
@d1 426
a426 425


* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])

[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;; 
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>

([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])


[58]
d450 7
a456 7

([[名無しさん]] [sage])


[[#comment]]


@


1.26
log
@auto-committed
@
text
@d1 440
a440 353

* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:状態:[[W3C]] [[勧告]]
:[[局所名]]:[CODE(HTMLe)[img]] ([Q@@en[[[image]]]] ([Q[[[画像]]]]) の略)
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)@@en[[[composite]]]]	,	,	,非標準	,[[Dashboard]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)@@en[[[localsrc]]]],,,,非標準
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)@@en[[[onload]]]]	,[CODE(SGML)@@en[%[[Script]]]]	,(なし)	,	,非標準	,[[NetFront]]
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]


[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]]	,[[WBMP]]
,	,[[WMF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


** 実装

@@@@ 
[55] 未確認:
[[WinIE]] は [[Windows]] に登録されている[[濾過器]]
([[Microsoft Paint]] や [[Microsoft Office]] などで用いられるもの)
を使っているのでは無いか? (ex. [[WMF]])


[57]
[CITE[EZweb XHTML<img>]]  (2002年5月付け)
<http://www001.upp.so-net.ne.jp/hdml/wap2/xhtml/img.html>

これによると、[[EZweb]]の[[WAP 2.0]]対応と称する端末では[CODE(HTMLa)@@en[[[src]]]][[属性]]に[[画像]]でなく、[[音声]]を指定すると、それが[[再生]]されるそうです。

公式の資料にはそのような説明は無く、そのように実装されているとしても仕様ではなく偶然でしょうから、音声用にも使えるかのような紹介の仕方は不適切です。[WEAK[(本当に機能だと公式に説明されているなら、それを引用するべきです。)]]

;;
[CITE[XHTML Mobile Profileリファレンス バージョン 1.0]] 
<http://developer.openwave.com/ja/tools_and_sdk/documentation/ue11/xhtml-mp-referenceJ/xhtml-mp.htm#pgfId-652027>,
[CITE[KDDI au: タグ変換仕様 > <img>/<object>/<dl>・<dt>・<dd>]] <http://www.au.kddi.com/ezfactory/tec/spec/html_con05.html>



([[名無しさん]] [sage] [WEAK[2005-12-27 06:11:50 +00:00]])


[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
d443 3
a445 34
[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
a447 37
出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[56]
[[行内画像]]は[[文字]]をあらわすために使うこともできます。

;; <IW:HTML4:"charset.html#h-5.3">

([[名無しさん]] [sage])

[[#comment]]

d449 7
@


1.25
log
@auto-committed
@
text
@d1 1
d30 1
a30 1
,[CODE(HTMLa)@@en[[[composite]]]],,,非標準,[[Dashboard]]
d47 1
d60 1
a60 1
,[CODE(HTMLa)@@en[[[onload]]]],[CODE(SGML)@@en[%[[Script]]]],(なし),,非標準,[[NetFront]]
a79 1

a83 1

d152 2
a153 2
,[CODE(MIME)@@en[[[image/vnd.wap.wbmp]]]],[[WBMP]]
,,[[WMF]]
d224 1
d227 1
a227 1
@@@@
d233 19
d254 1
d419 7
@


1.24
log
@auto-committed
@
text
@d58 1
d152 1
@


1.23
log
@auto-committed
@
text
@a0 1

d151 1
d222 9
@


1.22
log
@auto-committed
@
text
@d1 390
a390 389


* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[局所名]]:[CODE(HTMLe)[img]]
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[controls]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[datafld]]]]	,	,	,データ欄	,非標準
,[CODE(HTMLa)[[[datasrc]]]]	,[CODE(SGML)[%[[URI]]]]	,	,データ源	,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]]	,	,	,	,非標準	,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]]	,	,	,繰返し回数	,非標準
,[CODE(HTMLa)[[[loopdelay]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]]	,[SAMP(HTML)[TRUE]]	,	,縦横比保存	,非標準	,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]]	,	,	,	,非標準	,[[Gecko]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]]	,	,	,	,非標準	,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,[[XHTML m12n]]



[54]
xcvxcvcxv
([[Mr.Anonymous]] [WEAK[2005-08-22 21:38:18 +00:00]])


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]]	,[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]]	,[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]


** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[[#comment]]


** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])

[[#comment]]


@


1.21
log
@auto-committed
@
text
@d1 389
a389 380
* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
-[[SI 4281]]:1998
<http://www.qsm.co.il/Hebrew/si4281e.htm>
--[CSECTION[6.1.4 Elements with no directionality]]
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[局所名]]:[CODE(HTMLe)[img]]
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:禁止 (HTML 4), 必須 (XHTML 1)
:[[内容模型]]:[CODE(SGML)[[[EMPTY]]]] (常に[[強制空要素]])。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[controls]]]],,,,非標準
,[CODE(HTMLa)[[[datafld]]]],,,データ欄,非標準
,[CODE(HTMLa)[[[datasrc]]]],[CODE(SGML)[%[[URI]]]],,データ源,非標準
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)@@en[[[direction]]]],,,,非標準,[Vodafone]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)@@en[[[flash]]]],,,,非標準,[Vodafone]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[galleryimg]]]],,,,非標準,[[WinIE 6]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[loop]]]],,,繰返し回数,非標準
,[CODE(HTMLa)[[[loopdelay]]]],,,,非標準
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[x-maintain-ratio]]]],[SAMP(HTML)[TRUE]],,縦横比保存,非標準,[[ROBOHelp]]]]
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[_moz_resizing]]]],,,,非標準,[[Gecko]]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[start]]]],,,,非標準
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)@@en[[[viblength]]]],,,,非標準,[Vodafone]
,[CODE(HTMLa)@@en[[[vibration]]]],,,,非標準,[Vodafone]
,[CODE(HTMLa)[[[vrml]]]],,,,非標準
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない
,[CODE(XMLa)[[[xmlns]]]],[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定,==,[[名前空間名]],[[XHTML m12n]]

[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)


[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[Windows Bitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/vnd.microsoft.icon]]]],[[ICO]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[X Bitmap]]
,[CODE(MIME)[[[application/xneval]]]],[SRC[Vodafone]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** レンダリング

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]] が
使われます。 [HTML 4]

[50] '''Bidi との関係''':
[CODE(HTMLe)[[[img]]]] [[要素]]は、 [[bidi]]
的には方向性に関して[[中立]]な[[文字]]1[[文字]]であるかのように扱います。
方向について特に配慮が必要なら
前後に [CODE(char)[[[LRM]]]] や [CODE(char)[[[RLM]]]]
を使えます。 [SRC[SI 4281 6.1.4]]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>

[[#comment]]

** 安全性

[45] [[利用者エージェント]]によっては、
埋込み画像が[[認証]]などにより保護されている場合に合言葉を問合せたり、
対応していない[[媒体型]]である時に処理方法を問合せたりします。
悪意のある[[著者]]がこれを利用して、認証が必要な画像を多く埋込んだり、
未対応と思われる型の資源にリンクしたりして、
利用者エージェントに利用者への問合せを連続して行わせることで事実上操作不能にすることができてしまうかもしれません。
利用者エージェントは利用者に問合せるにしてもその方法を工夫した方がよいでしょう。

[48] >>45 と似た手口として、 [CODE(HTMLa)[[[src]]]] を
[CODE(URI)[[[mailto]]:]] URI や [CODE(URI)[[[telnet]]:]]
URI として大量に外部プログラムを起動させて操作不能に陥らせる[[ブラクラ]]も知られています。
利用者エージェントは処理を外部に委託するよう実装している [[URI scheme]]
や著しく負荷がかかる [[URI scheme]] が指定されている時の対策が必要です。

[46] 
画像を埋込むことによって著者が情報を取得することがよく行われています。
典型的なのはいわゆる[Q[カウンタ]]です。
純粋なカウンタは単純に画像が取得された回数を記録しているだけですが、
実際には鯖が入手できる情報はなんでも記録できます。
[[Cookie]] や[[スクリプト]]と組合せることで、
利用者の個人情報が知らぬ間に収集されることもあるかもしれません。
(もちろん、これは画像に限ったことではありません。
しかし、埋込み画像を使う手口は手軽なのでよく使われます。)

[[電子メイル]]など私的な輸送媒体で [CODE(HTMLe)[[[img]]]]
が使われている場合は特に注意が必要です。
[CODE(HTMLa)[[[src]]]] に著者の鯖などを指定することにより、
受信者がメッセージを開いたかどうかを自動的に通知させることができてしまいます
[WEAK[(読んだかどうかは別問題)]]。 [[spam]] ではしばしば使われます。
電子メイルなどでは外部の画像を読み込まないのが望ましいと考えられます。

このような手口を [[Web bug]] (盗聴器) や
[[Web beacon]] (発信器) と呼ぶ人もいます。

[47] [[グロ画像]]などの読者を不快にさせる種類の画像が埋め込まれることがあります。
読者が意図しない種類の画像を見せられてしまうことは技術的にほとんど防ぎようがありません。
しかし、できるだけ読者が見てしまわないような設定ができれば便利です。
例えば、 [[URI参照]]に特定の文字列が含まれていたら画像を自動表示しないとか、
一度非表示と指定した画像は次から表示しないとか
[WEAK[(URI 参照による非表示制御は URI 参照が変えられると無力ですから、画像の[[ハッシュ]]などを使うと良いでしょう。)]]
の対策が考えられます。こうした対策は (必ずしも
[CODE(HTMLe)[img]] ではありませんが) 
[[2chブラウザ]]の類でよく実装されています。

[[#comment]]

** Q & A

[52] '''Q: [CODE(HTMLe)[img]] が廃止されるから [CODE(HTMLe)[object]] を使えといわれましたが、本当ですか?'''

A: 確かに [[HTML 4.0]] の制定時に [CODE(HTMLe)[img]]
を止めて [CODE(HTMLe)[[[object]]]] に統一することが検討されていました。
しかし、結局 [CODE(HTMLe)[img]] は削除も削除の予告も非推奨ともされませんでした。

従来の [[HTML]] や [[XHTML 1]] と互換性のない [[XHTML 2.0]]
ですら、以前は [CODE(HTMLe)[[[img]]]] に相当するものが無く、
[CODE(XMLa)[[[src]]]] 属性がどの[[要素型]]でも使えるようになるとされていましたが、
最近の原案で [CODE(XMLe)[[[img]]]] 要素型が[Q[復活]]しました。

まとめ: 画像の埋込みに [CODE(HTMLe)[[[object]]]] 
を使っても'''構いません'''が、 [CODE(HTMLe)[[[img]]]]
を使っても'''構いません'''。

[53] '''Q: [CODE(HTMLe)[img]] 要素は W3C が反対したが Netscape が勝手に作ったというのは本当ですか?'''

A: '''嘘'''です。

そもそも [CODE(HTMLe)[img]] 要素型を導入したのは [[NCSA Mosaic]]
であって [[Netscape]] ではありません。また、 [CODE(HTMLe)[img]]
要素型ができた1993年に [[W3O]] はあっても [[W3C]] はありません。

ただし、 [CODE(HTMLe)[img]] 要素型が従来の [[HTML]]
の機能とは異なり十分な技術的検討と[[コミュニティ]]の同意を経ずに実装され、
[[HTML]] が崩壊に至った端緒となったことは間違いではありません。

[[#comment]]

** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[49]

[PRE(HTML example)[
<[CODE(HTMLe)[[[p]]]]><[CODE(HTMLe)[[[img]]]] [CODE(HTMLa)[[[src]]]]="[CODE(URI)[/images/logo]]" [CODE(HTMLe)[[[alt]]]]="WHATWG, "><[CODE(HTMLe)[[[span]]]] [CODE(HTMLa)[[[class]]]]="date">Friday, January 28th 2005</[CODE(HTMLe)[[[span]]]]></[CODE(HTMLe)[[[p]]]]>
]PRE]

出典: [CITE[Web Hypertext Application Technology Working Group]] 
<http://www.whatwg.org/> (2005年1月付け)

[51] >>46 の例

>
[PRE(HTML deprecated example code)[
<[CODE(HTMLe)[script]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/javascript]]">
[CODE(comment)[<!--]]
[CODE(DOMa)[document]].[CODE(DOMm)[write]]("<[CODE(HTMLe)[img]] [CODE(HTMLa)[src]]='[CODE(URI)[../bin/report.cgi?]]");
[CODE(DOMa)[document]].[CODE(DOMm)[write]]([CODE(DOMa)[document]].[CODE(DOMa)[referrer]]+"' [CODE(HTMLa)[width]]=1 [CODE(HTMLa)[height]]=1>");
[CODE(comment)[// -->]]
</[CODE(HTMLe)[script]]>
]PRE]

出典: [CITE[WEB相談室]] 
<http://www.parkcity.ne.jp/~chaichan/bin/qanda.cgi?modefg=9>
(2005年4月現在)

この例では、[[照会]]に [[Referer]] [[URI]]
を入れた [[URI]] を [CODE(HTMLa)[[[src]]]] とする高さ1画素、
幅1画素の[Q[隠し]]画像を [CODE(HTMLe)[[[script]]]]
により埋め込んでいます。

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。


[44]
[CITE[ImCat in pixels]] <http://rimantas.com/bits/icxbm.html>

こんなのありかよ! ひでー。
[[WinIE 6]] では表示できなかったけど [[Gecko]] は OK。

([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])


[[#comment]]


@


1.20
log
@auto-committed
@
text
@d32 1
d34 1
d67 2
d144 1
@


1.19
log
@auto-committed
@
text
@a204 1
([[名無しさん]])
d253 31
@


1.18
log
@auto-committed
@
text
@d46 1
@


1.17
log
@auto-committed
@
text
@d133 1
d299 21
@


1.16
log
@auto-committed
@
text
@d7 3
d34 1
d58 1
d106 1
d156 1
a156 1
** 応用
d163 1
a163 1
[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
d165 7
@


1.15
log
@auto-committed
@
text
@d277 9
@


1.14
log
@auto-committed
@
text
@d227 2
a228 1
このような手口を [[Web bug]] と呼ぶ人もいます。
@


1.13
log
@auto-committed
@
text
@d1 287
a287 236



* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
- [[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[開始タグ]]:必須
:[[終了タグ]] ([[HTML 4]]):禁止
:終了タグ ([[XHTML 1]]):必須
:[[内容模型]]:[[強制空要素]]。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)[[[gaiji]]]]	,([[真偽値属性]])	,(偽)	,[[外字]]画像かどうか	,[[T-Time]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** 応用

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
使われます。 [HTML 4]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>
([[名無しさん]])

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。


[44]
d293 7
a299 7
([CODE(URI)[[[javascript]]:]] scheme を使って [[XBM]] のデータを値として返している。)
([[名無しさん]] [WEAK[2005-02-14 00:25:27 +00:00]])


[[#comment]]


@


1.12
log
@auto-committed
@
text
@d1 248
a248 237

* [CODE(HTMLe)[img]] 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
-[[HTML 4]]
-- [CSECTION[13.2 Including an image: the [CODE(HTMLe)[IMG]] element]]
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[開始タグ]]:必須
:[[終了タグ]] ([[HTML 4]]):禁止
:終了タグ ([[XHTML 1]]):必須
:[[内容模型]]:[[強制空要素]]。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,属性名,属性値,既定値,説明,出典
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)[[[gaiji]]]],([[真偽値属性]]),(偽),[[外字]]画像かどうか,[[T-Time]]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** 応用

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
使われます。 [HTML 4]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>


[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>
([[名無しさん]])


[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[[#comment]]


@


1.11
log
@auto-committed
@
text
@d1 237
a237 236



* img 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
[[HTML 4]] 13.2 Including an image: the [CODE(HTMLe)[IMG]] element
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[開始タグ]]:必須
:[[終了タグ]] ([[HTML 4]]):禁止
:終了タグ ([[XHTML 1]]):必須
:[[内容模型]]:[[強制空要素]]。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] [[height]>>15] に移動しました。


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** 応用

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
使われます。 [HTML 4]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>


[43]
[CITE[IMGの誕生]] <http://www.silenth.sytes.net/diary.php?date=2003-12>
([[名無しさん]])


[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[[#comment]]


@


1.10
log
@auto-committed
@
text
@d1 236
a236 228
#?SuikaWiki/0.9


* img 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
[[HTML 4]] 13.2 Including an image: the [CODE(HTMLe)[IMG]] element
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[開始タグ]]:必須
:[[終了タグ]] ([[HTML 4]]):禁止
:終了タグ ([[XHTML 1]]):必須
:[[内容模型]]:[[強制空要素]]。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4] おすすめしない
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4] おすすめしない


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。

** width/height 両属性問題

[15] [[height]>>15] に移動しました。

** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** 応用

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
使われます。 [HTML 4]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[[#comment]]


@


1.9
log
@auto-committed
@
text
@d1 228
a228 271
#?SuikaWiki/0.9


* img 要素型 (HTML, XHTML 1)

[33] [[HTML]] の [DFN[[CODE(HTMLe)[img]] 要素型]]は、
[[画像]]を埋込みます。

[34] 仕様書:
[[HTML 4]] 13.2 Including an image: the [CODE(HTMLe)[IMG]] element
<IW:HTML4:"objects.html#edef-IMG">

[35]
:[[開始タグ]]:必須
:[[終了タグ]] ([[HTML 4]]):禁止
:終了タグ ([[XHTML 1]]):必須
:[[内容模型]]:[[強制空要素]]。
:出現できる文脈:[CODE(SGML)[%inline]] な文脈。
(歴史的変遷: <http://suika.fam.cx/www/2004/html/classes>)
:[[属性]]:
,[CODE(HTMLa)[[[align]]]]	,	,	,揃え位置	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[alt]]]]	,[CODE(SGML)[%[[Text]]]]	,(必須)	,[[代替文]]	,[HTML 4]
,[CODE(HTMLa)[[[border]]]]	,	,	,枠線	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[dynsrc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,動画 URI	,[WinIE]
,[CODE(HTMLa)[[[height]]]]	,[CODE(SGML)[%[[Length]]]]	,(自動)	,高さ	,[HTML 4]
,[CODE(HTMLa)[[[hspace]]]]	,	,	,水平余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[internal]]]]	,	,	,内部画像名	,[WebExplorer]
,[CODE(HTMLa)[[[ismap]]]]	,([[真偽値属性]])	,(偽)	,[[鯖側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[longdesc]]]]	,[CODE(SGML)[%[[URI]]]]	,(なし)	,説明文書	,[HTML 4]
,[CODE(HTMLa)[[[lowsrc]]]]	,[CODE(SGML)[%URI]]	,(なし)	,低解像度画像 URI
,[CODE(HTMLa)[[[motion]]]]	,[CODE(SGML)[%URI]]	,(なし)	,動画こま URI
,[CODE(HTMLa)[[[name]]]]	,	,(なし)	,名前	,[HTML 4]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(必須)	,画像 URI	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)[[[usemap]]]]	,	,(なし)	,[[クライアント側画像写像]]	,[HTML 4]
,[CODE(HTMLa)[[[vspace]]]]	,	,	,垂直余白	,[HTML 4] 非推奨
,[CODE(HTMLa)[[[width]]]]	,[CODE(SGML)[%Length]]	,(自動)	,幅	,[HTML 4]


[[#comment]]


** 内容模型

[37] [CODE(HTMLe)[img]] は[[強制空要素]]です。
どんな[[内容]]も持つことができません。

[38] しばしば、 (代替文のために) [Q[[CODE(HTMLe)[img]] は空要素にするべきではなかった]]
と言う人がいます。しかし、 [[SGML]] 的には、そう突飛な設計というわけでもありません。

中には、[Q[[CODE(HTMLe)[img]] は空要素になる''はず''だった]]
(のに Mosaic が馬鹿なことをした) などと主張する人もいますが、
根拠がありません。 (あったら教えてください。)
>>12 の議論で [CODE(HTMLe)[[[a]]]] 要素を流用する案が出たりもしていますが、
これが根拠なら[Q[空要素になる''はず''だった]]は言い過ぎです。

[[#comment]]


** 出現する文脈

[26] よく、 [CODE(HTMLe)[img]] の親を [CODE(HTMLe)[[[p]]]] にすべきか 
[CODE(HTMLe)[[[div]]]] にすべきか問題になるけど、 HTML 
の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 
[CODE(HTMLe)[p]] が適当なんじゃないのかな。
[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]

[27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 
[CODE(HTMLe)[[[fig]]]] 要素型マンセー。

[[#comment]]

[21] [CODE(HTMLa)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 
[[DOM 1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 
([[DOM 2]] HTML で削除されました。)

[22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 
[CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。

[32]
>>2 その二つの属性は HTML 4 で一応予約だけはされていますから。

[[#comment]]


** Mozilla の内部画像

[40] [CODE(HTMLa)[[[src]]]] の説明に移動しました。


** width/height 両属性問題

[15] 特に [[Stricter]] の間では、 [CODE(HTML)[IMG]]
要素の [[width]], [[height]] 両属性が論理属性なのか物理属性
(表現属性) なのかが議論となることがあります。たとえば:
- ''agenda - 2002/5/16〜31 - Personnel'' <http://members.jcom.home.ne.jp/jintrick/Personal/d20025l.html>
- ''agenda - 2002/6/1〜15 - Personnel'' <http://members.jcom.home.ne.jp/jintrick/Personal/d20026f.html>

なお、以降において、具体的な仕様や実装を念頭に置くときはそれを明記し、明記しない場合は現実の使われ方を無視した、理想的なあり方を考えることとします。

[16] 論理属性として意識している場合:
- 画像の実際の大きさを表す参考情報。
-- 画像 (= 別資源) に内在している情報を持つことにやや抵抗がありますが、 [[type]] 属性の同類と考えればすっきりします。
無視していいのです。
- 関連付けられた image map の座標系 (というか単位長) の確定のための情報

物理属性として意識している場合:
- 画像の拡大・縮小を狙って実際の大きさと異なる値を指定
- 画像非表示状態の場合に、代替内容の大きさを無視してこの属性の値で表示
- 画像到着前の仮表示における大きさの推定

[17] でも実際のところ、 [CODE(HTML)[WIDTH]] 属性,
[CODE(HTML)[HEIGHT]] 属性には表示上の大きさを示す以上の使い方は出来ない気がする。
(大きさを知ってから取り寄せる、という使い方は、
(ブラウザでなく) 画像取り出し器が使うみたいな場合以外つかわなそうだ。)
廃止しても良いのじゃないかな。もしどうしても必要なら、
content feature の埋め込み ([[CC/PP]] かなにか?)
でも使って表現するのがいいのでは。
(Image map は、別の方法を考えるとして。)

[18] 今まで両属性の strict DTD における存在について判断しかねていたんですけど、 [[agenda]] のそふぃあさんの文章を読んで、あってもいいかなあと思うようになりました。でも想定される用途の幅と誤用の危険性を考えれば、なくてもいいかなあとも思います。個人的意見ですが。

[43]
[CODE(HTMLa)[width]] も [CODE(HTMLa)[height]] も、
HTML 4 仕様書では 13.7 Visual presentation of images, objects, and applets
のところに解説があるんだから、物理属性以外の何者でもない。
論理的意味があるようなことは一言も書いてないし。

しかも、属性そのものこそ非推奨ではないけど、
[Q[attributes that concern visual alignment and presentation have been deprecated in favor of style sheets]]
と前置きされた章の中にあるのだからあまりおすすめされているものでもなさそう。
([[名無しさん]])

[[#comment]]


** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : 
[[WinIE]] で任意の画像形式に対応する handler の作り方。

[[#comment]]


** 応用

[41] [CODE(HTMLe)[img]] 要素は普通 [CODE(HTMLa)[src]] 
で指定された画像で[[行内]]で置換えられます。
(ただし、左右に揃えた ([CODE(HTMLa)[[[align]]]] 参照。) ときは行外に浮動します。)
[HTML 4]

[42] 画像を表示できない時には [CODE(HTMLa)[[[alt]]]]
使われます。 [HTML 4]

[[#comment]]


** 他との関係

[36] 画像の埋込みは、 [CODE(HTMLe)[[[object]]]]
を用いても行えます。 (HTML 4 の時に [CODE(HTMLe)[img]]
を廃止または非推奨にするべきとの強硬意見もあったようですが、
当時はまだ非現実的と判断されたようです。)

[[#comment]]


** 歴史

[12] ''proposed new tag: IMG'' 
<http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: 
[CODE(HTMLe)[img]] 要素の最初の提案 (1993 @@ [[www-html]])

[13] 異論を無視して当初の提案どおり実装された Mosaic 0.10 の告知: 
''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' 
<http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>

[14] >>13 でも実装しますた。にはその時には特に文句は出てないね。
異論というのも対案が幾つか出てきただけであまり深い議論になってないし。

[19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>

[[#comment]]


** 参考文献

- [9] [CODE(HTMLe)[img]] 要素はなぜ[[空要素]]になったのか: 
''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>

[[#comment]]


** 例

[39] 
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<IMG src="http://www.somecompany.com/People/Ian/vacation/family.png"
     alt="A photo of my family at the lake.">
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

同じことを [CODE(HTMLe)[[[object]]]] で書いた例:
[PRE(HTML)[
<BODY>
<P>I just returned from vacation! Here's a photo of my family at the lake:
<OBJECT data="http://www.somecompany.com/People/Ian/vacation/family.png"
        type="image/png">
A photo of my family at the lake.
</OBJECT>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[[#comment]]


** メモ

[25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) 
[[外部非解析対象実体]]として存在するべきだよね。今更もうどうにもならないけど。

[37] >>25 実際そうする案もありましたが、面倒なので相手にされませんでした。

[[#comment]]


@


1.8
log
@auto-committed
@
text
@d1 1
a1 1
#?SuikaWiki/0.9 page-icon="HTML"
d4 1
a4 1
* img 要素 (HTML)
d6 89
a94 12
- [9] [CODE(HTML)[IMG]] 要素はなぜ[[空要素]]になったのか ''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>
- [12] ''proposed new tag: IMG'' <http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: [CODE(HTML)[IMG]] 要素の最初の提案 (1993 @@ [[www-html]])
- [13] 異論を無視して当初の提案どおり実装された Mosaic 0.10: ''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' <http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>
- [14] >>13 でも実装しますた。にはその時には特に文句は出てないね
- [19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>
- [21] [CODE(HTML)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 [[DOM1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 ([[DOM2]] HTML で削除されました。)
- [22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 [CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。
- [24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : [[WinIE]] で任意の画像形式に対応する handler の作り方。
- [25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) [[外部非解析実体]]として存在するべきだよね。今更もうどうにもならないけど。
- [26] よく、 [CODE(HTML)[img]] の親を [CODE(HTML)[p]] にすべきか [CODE(HTML)[div]] にすべきか問題になるけど、 HTML の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 [CODE(HTML)[p]] が適当なんじゃないのかな。[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]
- [27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 [CODE(HTMLe)[[[fig]]]] 要素型マンセー
d97 2
a98 2
>>2 その二つの属性は HTML 4 で一応予約だけされていますから。
([[名無しさん]])
d104 1
a104 33
[1] [[NN]]/[[Mozilla]] は、 [[src]] 
属性に特定の値を指定すると、組込みの画像が表示されます。

,[CODE[src]]	,画像
,internal-gopher-menu	,<IMG:internal-gopher-menu>
,internal-gopher-sound	,<IMG:internal-gopher-sound>
,internal-gopher-movie	,<IMG:internal-gopher-movie>
,internal-gopher-telnet	,<IMG:internal-gopher-telnet>
,internal-gopher-text	,<IMG:internal-gopher-text>
,internal-gopher-audio	,<IMG:internal-gopher-audio>
,internal-gopher-binary	,<IMG:internal-gopher-binary>
,internal-gopher-find	,<IMG:internal-gopher-find>
,internal-gopher-image	,<IMG:internal-gopher-image>
,internal-gopher-index	,<IMG:internal-gopher-index>

[2] [[相対URI]] と区別できないのであんまりよくないと思いますが。。。

[3] [[Gecko]] な [[Mozilla]] では  [[NN]]4 以前より表示できる数が少ないようです。
特に、 [[Netscape]] 6 くらいの古い Gecko Mozilla ではどれも表示できません。

[CODE(URI)[[[resource:]]///res/html/gopher-[VAR[*]].gif]]
が使われているみたいです。

- [4] ''Browser-interne Ressourcen'' <http://www.meb.uni-bonn.de/html_tutorial/intgraf.htm#a2>
- [5] >>4 によれば [[IBM]] の [[WebExplorer]] も一部対応しているそうです。
- [6] >>5 また、 WebExplorer には [[internal]] 属性があって、こちらに組込み画像名を指定する方法も使えるそうです。
- [7] '''' <http://www.cs.vu.nl/~eliens/documents/javascript/img/internal_images.html>'''
- [8] ところでなぜだかわかりませんが、この隠し機能を説明している文書はほとんどが非英語の欧州語です。なぜでしょ。
- [11] 由来は [[Mosaic]] までさかのぼります: ''"internal-gopher-image"?!?'' <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q4.messages/819.html>
- [20] CSS で [SAMP(CSS)[background-image: url(internal-gopher-text)]] とかしてみたけど流石に駄目でした。
- [23] >>3 勝手にファイルを追加したも反映はされないみたいです。
- [31] [[NC]] 4.01 で [CODE(URI)[internal-gopher-audio]] と [CODE(URI)[internal-gopher-find]] が表示できないみたい。
[[#comment]]
d138 12
d176 92
@


1.7
log
@auto-committed
@
text
@d1 57
a57 48
#?SuikaWiki/0.9 page-icon="HTML"
*img 要素 (HTML)
- [9] [CODE(HTML)[IMG]] 要素はなぜ[[空要素]]になったのか ''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/550-557>
- [10] ''alt要素? -- imgタグにおけるaltの使い方について -- ごく簡単なHTMLの説明'' <http://www.kanzaki.com/docs/html/htminfo-alt.html#alt-element>
- [12] ''proposed new tag: IMG'' <http://web.archive.org/web/19970524004107/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/174.html>: [CODE(HTML)[IMG]] 要素の最初の提案 (1993 @@ [[www-html]])
- [13] 異論を無視して当初の提案どおり実装された Mosaic 0.10: ''EMail Msg <9303141100.AA22479@@wintermute.ncsa.uiuc.edu>'' <http://web.archive.org/web/19970524005359/http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/.www-talk-1993q1.messages/254.html>
- [14] >>13 でも実装しますた。にはその時には特に文句は出てないね
- [19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>
- [21] [CODE(HTML)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 [[DOM1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 ([[DOM2]] HTML で削除されました。)
- [22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 [CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。
- [24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : [[WinIE]] で任意の画像形式に対応する handler の作り方。
- [25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) [[外部非解析実体]]として存在するべきだよね。今更もうどうにもならないけど。
- [26] よく、 [CODE(HTML)[img]] の親を [CODE(HTML)[p]] にすべきか [CODE(HTML)[div]] にすべきか問題になるけど、 HTML の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 [CODE(HTML)[p]] が適当なんじゃないのかな。[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]
- [27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 [CODE(HTMLe)[[[fig]]]] 要素型マンセー
[[#comment]]
**Mozilla の内部画像

[1] [[NN]]/[[Mozilla]] は、 [[src]] 
属性に特定の値を指定すると、組込みの画像が表示されます。

,[CODE[src]]                     ,画像
,internal-gopher-menu            ,<IMG:internal-gopher-menu>
,internal-gopher-sound           ,<IMG:internal-gopher-sound>
,internal-gopher-movie           ,<IMG:internal-gopher-movie>
,internal-gopher-telnet          ,<IMG:internal-gopher-telnet>
,internal-gopher-text            ,<IMG:internal-gopher-text>
,internal-gopher-audio           ,<IMG:internal-gopher-audio>
,internal-gopher-binary          ,<IMG:internal-gopher-binary>
,internal-gopher-find            ,<IMG:internal-gopher-find>
,internal-gopher-image           ,<IMG:internal-gopher-image>
,internal-gopher-index           ,<IMG:internal-gopher-index>

[2] [[相対URI]] と区別できないのであんまりよくないと思いますが。。。

[3] [[Gecko]] な [[Mozilla]] では  [[NN]]4 以前より表示できる数が少ないようです。
特に、 [[Netscape]] 6 くらいの古い Gecko Mozilla ではどれも表示できません。

[CODE(URI)[[[resource:]]///res/html/gopher-[VAR[*]].gif]]
が使われているみたいです。

- [4] ''Browser-interne Ressourcen'' <http://www.meb.uni-bonn.de/html_tutorial/intgraf.htm#a2>
- [5] >>4 によれば [[IBM]] の [[WebExplorer]] も一部対応しているそうです。
- [6] >>5 また、 WebExplorer には [[internal]] 属性があって、こちらに組込み画像名を指定する方法も使えるそうです。
- [7] '''' <http://www.cs.vu.nl/~eliens/documents/javascript/img/internal_images.html>
- [8] ところでなぜだかわかりませんが、この隠し機能を説明している文書はほとんどが非英語の欧州語です。なぜでしょ。
- [11] 由来は [[Mosaic]] までさかのぼります: ''"internal-gopher-image"?!?'' <http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q4.messages/819.html>
- [20] CSS で [SAMP(CSS)[background-image: url(internal-gopher-text)]] とかしてみたけど流石に駄目でした。
- [23] >>3 勝手にファイルを追加したも反映はされないみたいです。
d59 65
a123 63
[[#comment]]


**width/height 両属性問題

[15] 特に [[Stricter]] の間では、 [CODE(HTML)[IMG]]
要素の [[width]], [[height]] 両属性が論理属性なのか物理属性
(表現属性) なのかが議論となることがあります。たとえば:
-''agenda - 2002/5/16〜31 - Personnel'' <http://members.jcom.home.ne.jp/jintrick/Personal/d20025l.html>
-''agenda - 2002/6/1〜15 - Personnel'' <http://members.jcom.home.ne.jp/jintrick/Personal/d20026f.html>

なお、以降において、具体的な仕様や実装を念頭に置くときはそれを明記し、明記しない場合は現実の使われ方を無視した、理想的なあり方を考えることとします。

[16] 論理属性として意識している場合:
-画像の実際の大きさを表す参考情報。
--画像 (= 別資源) に内在している情報を持つことにやや抵抗がありますが、 [[type]] 属性の同類と考えればすっきりします。
無視していいのです。
-関連付けられた image map の座標系 (というか単位長) の確定のための情報

物理属性として意識している場合:
-画像の拡大・縮小を狙って実際の大きさと異なる値を指定
-画像非表示状態の場合に、代替内容の大きさを無視してこの属性の値で表示
-画像到着前の仮表示における大きさの推定

[17] でも実際のところ、 [CODE(HTML)[WIDTH]] 属性,
[CODE(HTML)[HEIGHT]] 属性には表示上の大きさを示す以上の使い方は出来ない気がする。
(大きさを知ってから取り寄せる、という使い方は、
(ブラウザでなく) 画像取り出し器が使うみたいな場合以外つかわなそうだ。)
廃止しても良いのじゃないかな。もしどうしても必要なら、
content feature の埋め込み ([[CC/PP]] かなにか?)
でも使って表現するのがいいのでは。
(Image map は、別の方法を考えるとして。)

[18] 今まで両属性の strict DTD における存在について判断しかねていたんですけど、 [[agenda]] のそふぃあさんの文章を読んで、あってもいいかなあと思うようになりました。でも想定される用途の幅と誤用の危険性を考えれば、なくてもいいかなあとも思います。個人的意見ですが。
[[#comment]]

** 画像の種類

[28] 有史以来 [CODE(HTMLe)[img]]
要素のリンク先として使われたことのある画像の種類 ([CODE(HTMLa)[src]], [CODE(HTMLa)[lowsrc]] 属性):
,媒体型 (代表)	,説明
,[CODE(MIME)[[[image/x-bitmap]]]]	,[[WindowsBitmap]]
,[CODE(MIME)[[[image/gif]]]]	,[[GIF]]
,[CODE(MIME)[[[image/jpeg]]]]	,[[JPEG]]
,[CODE(MIME)[[[video/x-mng]]]]	,[[MNG]]
,[CODE(MIME)[[[image/png]]]]	,[[PNG]]
,[CODE(MIME)[[[image/tiff]]]]	,[[TIFF]]
,[CODE(MIME)[[[image/x-xbitmap]]]]	,[[XBitmap]]

[29] ([CODE(HTMLa)[dynsrc]] 属性):
,[CODE(MIME)[[[video/x-avi]]]]	,[[AVI]]
,[CODE(MIME)[[[video/mpeg]]]]	,[[MPEG]]
,	,[[NetShow]] ([[ASF]])
,	,[[QuickTime]] movie
,[CODE(MIME)[[[model/vrml]]]]	,[[VRML]]
,	,[[WMV]]

[30] ([CODE(HTMLa)[motion]] 属性):
,[CODE(MIME)[image/png]]	,PNG

[[#comment]]

*メモ@


1.6
log
@auto-committed
@
text
@d11 4
a14 4
- [24] ''Creating an IMG SRC handler'' <http://eside.homeip.net/column/imgsrc.html> : [[WinIE]] で任意の画像形式に対応する handler の作り方。
- [25] [CODE(HTML)[img]] 要素ってそもそも SGML 的には (面倒だけど) [[外部非解析実体]]として存在するべきだよね。今更もうどうにもならないけど。
- [26] よく、 [CODE(HTML)[img]] の親を [CODE(HTML)[p]] にすべきか [CODE(HTML)[div]] にすべきか問題になるけど、 HTML の当初の設計思想であるワープロ互換のための[[フラットでリニアな構造]]化を考えると、 [CODE(HTML)[p]] が適当なんじゃないのかな。[WEAK[(Strict 的に正しいという主張でも、そうするべきだという主張でもないよ。)]]
- [27] ところで >>26 のネタはしつこいくらいよくでてくるよねぇ。 [CODE(HTMLe)[[[fig]]]] 要素型マンセー
d48 2
a49 1
- [23] >>3 勝手にファイルを追加したも反映はされないみたいです。
d83 27
a109 1
- [18] 今まで両属性の strict DTD における存在について判断しかねていたんですけど、 agenda のそふぃあさんの文章を読んで、あってもいいかなあと思うようになりました。でも想定される用途の幅と誤用の危険性を考えれば、なくてもいいかなあとも思います。個人的意見ですが。
@


1.5
log
@auto-committed
@
text
@d14 1
@


1.4
log
@auto-committed
@
text
@d12 2
@


1.3
log
@auto-commited
@
text
@d11 1
@


1.2
log
@auto-commited
@
text
@d8 3
a10 3
- [19] ''スラッシュドット ジャパン | IMGタグ10周年'' <http://slashdot.jp/article.pl?sid=03/03/17/1133209&topic=74&mode=nested>
- [21] [CODE(HTML)[[[lowsrc]]]] 属性は W3C HTML には存在しませんが、 [[DOM1]] HTML の [CODE(DOMi)[[[HTMLImageElement]]]] 界面には定義されていました。 ([[DOM2]] HTML で削除されました。)
- [22] >>21 同じ独自拡張 HTML 属性が DOM に紛れている例でも、 [CODE(DOMi)[[[HTMLScriptElement]]]] の [CODE(DOMa)[[[htmlFor]]]] と [CODE(DOMa)[[[event]]]] は削除されてないのにねぇ。
a17 1
,internal-gopher-index           ,<IMG:internal-gopher-index>
d23 5
d33 4
d43 2
a44 1
- [20] CSS で [SAMP(CSS)[background-image: url(internal-gopher-text)]] とかしてみたけど流石に駄目でした。
d78 1
a78 1
- [18] 今まで両属性の strict DTD における存在について判断しかねていたんですけど、 agenda のそふぃあさんの文章を読んで、あってもいいかなあと思うようになりました。でも想定される用途の幅と誤用の危険性を考えれば、なくてもいいかなあとも思います。個人的意見ですが。
@


1.1
log
@pre-namespace
@
text
@d9 2
d35 1
@

