head	1.17;
access;
symbols
	suikawiki3-final:1.17
	before-db-leaffile:1.3
	after-upgrade-to-suikawiki-3:1.1
	before-fork-suikawiki3:1.1
	after-restore-20040122:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.17
date	2008.06.08.02.49.11;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2007.04.08.02.39.43;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2007.01.08.02.26.22;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2006.12.23.02.24.42;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2006.08.08.02.13.33;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2006.02.03.02.14.51;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2006.01.31.02.10.18;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2005.07.13.02.09.40;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2005.04.13.02.07.37;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2004.12.13.02.08.59;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.18.02.08.02;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2004.07.18.02.03.07;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2004.04.27.02.07.59;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.23.03.38.25;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2004.03.27.02.00.46;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2004.03.23.02.01.36;	author wakaba;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.18.02.03.19;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.17
log
@auto-committed
@
text
@

* [CODE(HTMLe)[dir]] 属性 (HTML, XHTML 1)

[1] [ABBR[[[HTML]]] [Hypertext Markup Language]] 
のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。

[31] 仕様書:
- [[SI 4281]]:1998
-- [CSECTION[6.1.1 The dir Attribute]]
<http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[9.3 Lists]]
- [[HTML 4]]
-- [CITE[8.2 Specifying the direction of text and tables: the [CODE(HTMLa)[dir]] attribute]]
<IW:HTML4:"struct/dirlang.html#adef-dir">
-- [CITE[12.3.3 Links and search engines]]
<IW:HTML4:"struct/links.html#h-12.3.3">
-- [CITE[HTML 4 Changes]]
<IW:HTML4:"appendix/changes.html#h-A.1.1.6">
-- [CITE[HTML 4 Changes]]
<IW:HTML4:"appendix/changes.html#h-A.1.1.8">

[[#comment]]


** 適用対象

[33] [ABBR[[[HTML]]] [Hypertext Markup Language]] 
のほとんどの要素型の要素の [CODE(HTMLa)[dir]]
属性は、書字方向中立文 (固有方向性を持たない文) 
の基底方向を定義します。
これは、要素の[[内容]]や[[属性値]]に適用されます 
[SRC[HTML 4.01 8.2, A.1.1.6]]。

[32]
[CODE(HTMLe)[bdo]] 要素の [CODE(HTMLa)[dir]]
属性は、他の要素の [CODE(HTMLa)[dir]]
属性と少し性質が違います。 [CODE(HTMLe)[[[bdo]]]]
要素の説明を参照してください。

[34] [CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、通常の意味に加えて、表の進行方向をも規定します。

[37] [ABBR[HTML] [Hypertext Markup Language]] 4.0 12.3.3 には 
[CODE(HTMLe)[[[link]]]] 要素で [CODE(HTMLa)[dir]] 
属性を指定するとリンク先文書のことを記述しているように書かれていましたが、
誤りであるとして後に削除されました [SRC[HTML 4.01 A.1.1.8]]。
正しくは [CODE(HTMLe)[link]] 要素でも他のほとんどの要素型と同じく、
属性値にだけ適用されます。 
[WEAK[([CODE(HTMLe)[link]] 要素は[[強制空要素]]なので、内容には適用のしようがありません。)]]

[[#comment]]


** 属性値

[2] この属性は[[列挙型]]です。

,属性値	,意味
,[CODE(HTML)[[[ltr]]]]	,左から右へ
,[CODE(HTML)[[[rtl]]]]	,右から左へ

[[HTML 4]] では、大文字・小文字を区別しません。
[ABBR[[[XHTML]]] [Extensible Hypertext Markup Language]] 
では、大文字・小文字を区別します。

[ABBR[HTML] [Hypertext Markup Language]] 4 や 
[ABBR[XHTML] [Extensible Hypertext Markup Language]] 1 のように 
[ABBR[[[DTD]]] [Document Type Definition]] 
で[[列挙型]]として定義されている版の 
[ABBR[HTML] [Hypertext Markup Language]]
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[22]
[ABBR[XHTML [[m12n]]] [XHTML のモジュール化]] 
仕様書の抽象モジュール定義に 
[Q[[CODE[dir''*'' ("ltr" | "rtl")]]]<http://www.w3.org/TR/2001/REC-xhtml-modularization-20010410/abstract_modules.html#s_bdomodule>]
とかいてある [WEAK[(属性名の後の [CODE[*]] は必須を表す)]] けど、 
[ABBR[DTD] [Document Type Definition]] 実装と矛盾しているし、
誤植でしょうか?

[[#comment]]


** レンダリング

[3] [ABBR[HTML] [Hypertext Markup Language]] 4 では、 [[Unicode]] の 
[ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには
[ABBR[HTML] [Hypertext Markup Language]] 4
適合 [ABBR[UA] [利用者エージェント]] 
は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 
[ABBR[HTML] [Hypertext Markup Language]] 4 適合 UA は Unicode
[ABBR[bidi] [bidirectional]] 算法に従わなければなりません。

[ABBR[Bidi] [bidirectional]] 
算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 
要素を使って陽に方向を指定することができます。

なお、 [ABBR[HTML] [Hypertext Markup Language]] 4 仕様書によれば、 
[CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 [ABBR[HTML] [Hypertext Markup Language]] 4 は 
[CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] [ABBR[HTML] [Hypertext Markup Language]] 4 仕様書は、
[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 
文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用する[RUBYB[べきです] [should]]。
どうしても両方を使用する必要があるときには、
適当に埋め込み・[RUBYB[上書き] [override]]の関係が入れ子になるように気をつける[RUBYB[べきです] [should]]。
そうでない場合のレンダリング結果は未定義です。

[42] [[並び]] ([CODE(HTMLe)[[[ul]]]], [CODE(HTMLe)[[[ol]]]],
[CODE(HTMLe)[[[dl]]]]) の[[記号]]・[[数字]]・用語
([CODE(HTMLe)[[[dt]]]]) をレンダリングする位置も方向性によって変わります。
左から右なら左側、右から左なら右側になります。
[SRC[SI 4281:1998 9.3]]

[[#comment]]


** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
[ABBR[bidi] [双方向性]] 算法でいうところの[[文ブロック]]の[[基底文方向]]
[WEAK[(ブロック全体としての方向性)]] を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 
[ABBR[bidi] [双方向性]] 算法的には新しい深さの埋め込み水準となります。

[6] [ABBR[HTML] [Hypertext Markup Language]] 4 仕様書 
<IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ 
[ABBR[[[CSS]]] [Cascading Style Sheets]] で 
[CODE(CSS)[[[display]]]] を変えるようなことをしても、
[ABBR[HTML] [Hypertext Markup Language]] の水準で行われる 
[CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 [ABBR[HTML] [Hypertext Markup Language]] 4 が 
[CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
[WEAK[(便宜上 [ABBR[[[CSS]]] [Cascading Style Sheets]] の言葉を使って説明します。)]]

- [CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、
直近のブロック要素から継承します。
- [CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、 [CODE(HTMLa)[dir]] 
属性の継承値を陽に指定した場合と同じ結果が得られる[RUBYB[べきです] [should]]。

[7] [ABBR[HTML] [Hypertext Markup Language]] 
的には属性の存在だけを提供して、
あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[ABBR[[[CSS2]]] [Cascading Style Sheets, Level 2]] と 
[ABBR[HTML] [Hypertext Markup Language]] 4 
の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる [ABBR[bidi] [双方向性]] 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]

[21]
[CODE(HTMLe)[[[title]]]] 要素などではどう継承するのでしょう? 
任意の要素の属性値ではどうなのでしょう?

>>7 [Q[スタイル言語によって異なる [ABBR[bidi] [双方向性]] 算法を採用していたりしたら]>>7]、
そのスタイル言語のスタイル・シートで表示するときは 
[ABBR[HTML] [Hypertext Markup Language]] 4 不適合になるのだろうなあ 
(>>3)。

[27] <IW:HTML4:"struct/tables.html#table-directionality">
の説明によれば、 [CODE(HTMLe)[[[td]]]] はブロック水準要素型らしいです。
意味的に考えても、行内要素型以外はすべてブロック水準要素型と見なしてよいのではないでしょうか。
少なくても [CODE(HTMLa)[dir]] 属性の目的では。

[29]
表の中では [CODE(SGML)[%[[cellvalign]]]]
と同じ継承規則が使われると [ABBR[HTML] [Hypertext Markup Language]] 4
では規定されています。

[[#comment]]


** 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 [ABBR[HTML] [Hypertext Markup Language]] 
[[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも [ABBR[OK]] です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 [ABBR[bidi] [双方向性]] 
算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、
普通は期待通りの結果が得られます。

[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、
引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
[ABBR[Bidi] [双方向性]] 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[45]
[[XHTML m12n]] では、[[双方向的文]][[モジュール]]に、
この[[モジュール]]を選択すると [[I18n]] [[属性集成]]に
[CODE(HTMLa)@@en[[[dir]]]] が追加される、とあります。

これはわかりにくい。 [[Anne]] たんが見落とすのも無理はない。

しかも、[Q@@en[dir* ("ltr" | "rtl")]] と名前の後に星印がついている。
つまり必須。それはおかしい。
([[名無しさん]] [WEAK[2006-08-06 05:24:05 +00:00]])

[46]
[CITE['dir' attribute on BIDI inline elements and actual browsers from Helmut Wollmersdorfer on 2006-12-18 (www-html@@w3.org from December 2006)]] <http://lists.w3.org/Archives/Public/www-html/2006Dec/0017>
([[名無しさん]] [WEAK[2006-12-20 23:30:41 +00:00]])


[49]
[CITE@@fr[Denes Nad Makedonija - Wikip&#233;dia]] ([TIME[2008-06-04 06:14:58 +09:00]] 版) <http://fr.wikipedia.org/wiki/Denes_Nad_Makedonija>

[PRE(HTML example code)[
<span dir='ltr'><a href="/wiki/Cat%C3%A9gorie:Hymne_national" title="Cat&#233;gorie:Hymne national">Hymne national</a></span>
]PRE]

;; The document element also has the [CODE(HTMLa)@@en[[[dir]]]] attribute
specified with the value of [CODE(HTML)@@en[[[ltr]]]], therefore the
[CODE(HTMLa)@@en[[[dir]]]] attribute on the [CODE(HTMLe)@@en[[[span]]]]
element is redundant.


([[名無しさん]])


[[#comment]]


** table 要素 dir 属性 (HTML, XHTML 1)

[26] [ABBR[HTML] [Hypertext Markup Language]] の
[CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、 >>1- の通常の役割に加えて、表の方向を決定します。

[CODE(HTML)[ltr]] なら表は左から右へ、 [CODE(HTML)[rtl]]
なら右から左へ進みます。

[CODE(HTMLe)[table]] はブロック水準要素型なので、 >>4-
の通り、既定値は上位要素からの継承です。

[36]
仕様書: 
- [[SI 4281]]:1998 <http://www.qsm.co.il/Hebrew/si4281e.htm>
-- [CSECTION[9.2 Tables]]
- [[HTML 4]]
-- <IW:HTML4:"struct/tables.html#table-directionality">

[27] 表が左から右に進むときは、最初の行は左側で、
次の行がその右に続きます。
右から左に進むときは、最初の行は右側で、次の行がその左に続きます。
どちらの場合も最初の列は上で、次の列が下に続きます。
[SRC[HTML 4, SI 4281:1998 9.2]]

[41]
このような効果があるのは、 [CODE(HTMLe)[table]] 要素だけです。
[CODE(HTMLe)[[[tbody]]]] や [CODE(HTMLe)[[[tr]]]]
は通常通りの働きしか持ちません。

なお、 [CODE(HTMLe)[[[th]]]] や [CODE(HTMLe)[[[td]]]]
の [CODE(HTMLa)[dir]] 属性は、通常通りそのこま内のレンダリングを制御します。
両要素型はブロック水準要素型らしいので、上位の指定を継承します。

[30]
表の中では行だけではなく列からも継承します。
[CODE(SGML)[%[[cellvalign]]]]
の説明をみてください。

[[#comment]]


** メモ

[[#comment]]


* bdo 要素 dir 属性 (HTML, XHTML 1)

[28] [CODE(HTMLe)[[[bdo]]]] 要素型の説明を参照してください。


* dir 要素型 (HTML, XHTML 1)

[23] [ABBR[HTML] [Hypertext Markup Language]] の
[DFN[[CODE(HTMLe)[dir]] 要素型]]の要素 (directory list)
は、多行表示の並びを表します。 [[Un|x]] の [KBD[[[ls]]]]
命令の表示や、 [[Windoze]] の [[ListView]] control
の[Q[小さなアイコン]]や[Q[一覧]]表示のような感じです。

[40] 仕様書: 
- [[HTML 4]]
-- <IW:HTML4:"struct/lists.html#edef-DIR">

[24]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[([CODE(HTMLe)[[[li]]]])+]]
:出現できる文脈:[CODE(SGML)[%[[list]];]] な文脈
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,出典
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[compact]]]]	,([[真偽値属性]])	,([[偽]])	,コンパクト表示	,[HTML4] 非推奨
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[type]]]]	,	,	,	,非標準	,[Vodafone]


[[#comment]]


** 代替

[39]
この要素は [ABBR[HTML] [Hypertext Markup Language]] 4 
では'''非推奨'''で、代わりに [CODE(HTMLe)[[[ul]]]]
を使うことが'''強く'''推奨されています。

[[#comment]]


** レンダリング

[25] [ABBR[HTML] [Hypertext Markup Language]] 4 仕様書が 
[Q[The [CODE(HTMLe)[DIR]] element was designed to be used for creating multicolumn directory lists.]]
と言っているように、 [CODE(HTMLe)[dir]] は[[物理要素]]であり、
>>23 のようなレンダリングを想定しています。

しかし、 [[Classic Mozilla]] や 
[ABBR[[[WinIE]]] [Internet Explorer (Windows 版)]] 
をはじめとして、ここ数年のほとんどのブラウザは、 [CODE(HTMLe)[[[ul]]]] 
と同じようにレンダリングします。

[[#comment]]


** 他との関係

[38] 1993年1月に [ABBR[Dan] [Daniel W. Connolly]] は
[CODE(HTMLe)[[[ul]]]] と [CODE(HTMLe)[[[dir]]]] と
[CODE(HTMLe)[[[menu]]]] の別は見た目で定義されており、
意味で定義するべきだと述べています。

それに対して [ABBR[Tim] [Tim Berners‐Lee]] は、
[Q[論理的・意味的なマーク付けは好きだけど、 HTML は広範囲の意味・データを扱うし、要素型名は覚えやすいようにつけてあるのだ]]
と言ってます。

<http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/64.html>

[44]
[[Line Mode Browser]]の1.2a (1992年2月?)で、
[CODE(HTMLe)@@en[[[dir]]]]と[CODE(HTMLe)@@en[[[menu]]]]が将来使用するためとして導入されています。

;; [CITE@@en[Change History of Line Mode Browser]] 
<http://www.w3.org/LineMode/User/Features.html>

([[名無しさん]] [sage])

[[#comment]]


** メモ

[[#comment]]


* メモ

[43]
[CITE[Re: [Comment on its tagset WD] On (Bi)Directionality from Felix Sasaki on 2006-01-18 (www-i18n-comments@@w3.org from January 2006)]] <http://lists.w3.org/Archives/Public/www-i18n-comments/2006Jan/0003>
([[名無しさん]] [WEAK[2006-01-28 02:48:57 +00:00]])

[47]
[[ISO/IEC 19757]]-3:2006 は 
[DFN@@en[[CODE(XMLe)@@en[[QN[[[dir]]] [http://purl.oclc.org/dsdl/schematron]]]]]]
[[要素]]を定義しています。
[CODE(XMLa)@@en[[[value]]]] [[属性]]があって、
[CODE(XML)@@en[[[ltr]]]] ([[左]]から[[右]]) または
[CODE(XML)@@en[[[rtl]]]] ([[右]]から[[左]])
の[[自然言語文]]を表すとだけ規定されています。
([[名無しさん]])

[48]
[CITE@@en-US[Internationalization Tag Set (ITS) Version 1.0]] ([CODE[2007-04-03 18:11:18 +09:00]] 版) <http://www.w3.org/TR/2007/REC-its-20070403/#directionality>
([[名無しさん]])@


1.16
log
@auto-committed
@
text
@d260 17
d447 2
a448 3
[CITE@@en-US[Internationalization Tag Set (ITS) Version 1.0]] ([TIME[2007-04-03 18:11:18 +09:00]] 版) <http://www.w3.org/TR/2007/REC-its-20070403/#directionality>
([[名無しさん]])

@


1.15
log
@auto-committed
@
text
@d420 6
a425 6
[[ISO/IEC 19757]]-3:2006 は 
[DFN@@en[[CODE(XMLe)@@en[[QN[[[dir]]][http://purl.oclc.org/dsdl/schematron]]]]]]
[[要素]]を定義しています。
[CODE(XMLa)@@en[[[value]]]] [[属性]]があって、
[CODE(XML)@@en[[[ltr]]]] ([[左]]から[[右]]) または
[CODE(XML)@@en[[[rtl]]]] ([[右]]から[[左]])
d427 4
@


1.14
log
@auto-committed
@
text
@a255 1

a259 1

d417 12
a428 1
([[名無しさん]] [WEAK[2006-01-28 02:48:57 +00:00]])@


1.13
log
@auto-committed
@
text
@d245 6
d252 1
a252 8
[45]
[[XHTML m12n]] では、[[双方向的文]][[モジュール]]に、
この[[モジュール]]を選択すると [[I18n]] [[属性集成]]に
[CODE(HTMLa)@@en[[[dir]]]] が追加される、とあります。

これはわかりにくい。 [[Anne]] たんが見落とすのも無理はない。

しかも、[Q@@en[dir* ("ltr" | "rtl")]] と名前の後に星印がついている。
d255 5
@


1.12
log
@auto-committed
@
text
@d245 13
d394 3
d398 2
a399 7
[44]
[[Line Mode Browser]]の1.2a (1992年2月?)で、
[CODE(HTMLe)@@en[[[dir]]]]と[CODE(HTMLe)@@en[[[menu]]]]が将来使用するためとして導入されています。

;; [CITE@@en[Change History of Line Mode Browser]] 
<http://www.w3.org/LineMode/User/Features.html>

a401 1

@


1.11
log
@auto-committed
@
text
@d381 12
d405 1
a405 2
([[名無しさん]] [WEAK[2006-01-28 02:48:57 +00:00]])

@


1.10
log
@auto-committed
@
text
@d1 394
a394 379
* [CODE(HTMLe)[dir]] 属性 (HTML, XHTML 1)

[1] [ABBR[[[HTML]]][Hypertext Markup Language]] 
のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。

[31] 仕様書:
- [[SI 4281]]:1998
--[CSECTION[6.1.1 The dir Attribute]]
<http://www.qsm.co.il/Hebrew/si4281e.htm>
--[CSECTION[9.3 Lists]]
- [[HTML 4]]
-- [CITE[8.2 Specifying the direction of text and tables: the [CODE(HTMLa)[dir]] attribute]]
<IW:HTML4:"struct/dirlang.html#adef-dir">
-- [CITE[12.3.3 Links and search engines]]
<IW:HTML4:"struct/links.html#h-12.3.3">
-- [CITE[HTML 4 Changes]]
<IW:HTML4:"appendix/changes.html#h-A.1.1.6">
-- [CITE[HTML 4 Changes]]
<IW:HTML4:"appendix/changes.html#h-A.1.1.8">

[[#comment]]

** 適用対象

[33] [ABBR[[[HTML]]][Hypertext Markup Language]] 
のほとんどの要素型の要素の [CODE(HTMLa)[dir]]
属性は、書字方向中立文 (固有方向性を持たない文) 
の基底方向を定義します。
これは、要素の[[内容]]や[[属性値]]に適用されます 
[SRC[HTML 4.01 8.2, A.1.1.6]]。

[32]
[CODE(HTMLe)[bdo]] 要素の [CODE(HTMLa)[dir]]
属性は、他の要素の [CODE(HTMLa)[dir]]
属性と少し性質が違います。 [CODE(HTMLe)[[[bdo]]]]
要素の説明を参照してください。

[34] [CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、通常の意味に加えて、表の進行方向をも規定します。

[37] [ABBR[HTML][Hypertext Markup Language]] 4.0 12.3.3 には 
[CODE(HTMLe)[[[link]]]] 要素で [CODE(HTMLa)[dir]] 
属性を指定するとリンク先文書のことを記述しているように書かれていましたが、
誤りであるとして後に削除されました [SRC[HTML 4.01 A.1.1.8]]。
正しくは [CODE(HTMLe)[link]] 要素でも他のほとんどの要素型と同じく、
属性値にだけ適用されます。 
[WEAK[([CODE(HTMLe)[link]] 要素は[[強制空要素]]なので、内容には適用のしようがありません。)]]

[[#comment]]

** 属性値

[2] この属性は[[列挙型]]です。

,属性値	,意味
,[CODE(HTML)[[[ltr]]]]	,左から右へ
,[CODE(HTML)[[[rtl]]]]	,右から左へ

[[HTML 4]] では、大文字・小文字を区別しません。
[ABBR[[[XHTML]]][Extensible Hypertext Markup Language]] 
では、大文字・小文字を区別します。

[ABBR[HTML][Hypertext Markup Language]] 4 や 
[ABBR[XHTML][Extensible Hypertext Markup Language]] 1 のように 
[ABBR[[[DTD]]][Document Type Definition]] 
で[[列挙型]]として定義されている版の 
[ABBR[HTML][Hypertext Markup Language]]
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[22]
[ABBR[XHTML [[m12n]]][XHTML のモジュール化]] 
仕様書の抽象モジュール定義に 
[Q[[CODE[dir''*'' ("ltr" | "rtl")]]]<http://www.w3.org/TR/2001/REC-xhtml-modularization-20010410/abstract_modules.html#s_bdomodule>]
とかいてある [WEAK[(属性名の後の [CODE[*]] は必須を表す)]] けど、 
[ABBR[DTD][Document Type Definition]] 実装と矛盾しているし、
誤植でしょうか?

[[#comment]]

** レンダリング

[3] [ABBR[HTML][Hypertext Markup Language]] 4 では、 [[Unicode]] の 
[ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには
[ABBR[HTML][Hypertext Markup Language]] 4
適合 [ABBR[UA][利用者エージェント]] 
は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 
[ABBR[HTML][Hypertext Markup Language]] 4 適合 UA は Unicode
[ABBR[bidi][bidirectional]] 算法に従わなければなりません。

[ABBR[Bidi][bidirectional]] 
算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 
要素を使って陽に方向を指定することができます。

なお、 [ABBR[HTML][Hypertext Markup Language]] 4 仕様書によれば、 
[CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 [ABBR[HTML][Hypertext Markup Language]] 4 は 
[CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] [ABBR[HTML][Hypertext Markup Language]] 4 仕様書は、
[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 
文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用する[RUBYB[べきです][should]]。
どうしても両方を使用する必要があるときには、
適当に埋め込み・[RUBYB[上書き][override]]の関係が入れ子になるように気をつける[RUBYB[べきです][should]]。
そうでない場合のレンダリング結果は未定義です。

[42] [[並び]] ([CODE(HTMLe)[[[ul]]]], [CODE(HTMLe)[[[ol]]]],
[CODE(HTMLe)[[[dl]]]]) の[[記号]]・[[数字]]・用語
([CODE(HTMLe)[[[dt]]]]) をレンダリングする位置も方向性によって変わります。
左から右なら左側、右から左なら右側になります。
[SRC[SI 4281:1998 9.3]]

[[#comment]]


** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
[ABBR[bidi][双方向性]] 算法でいうところの[[文ブロック]]の[[基底文方向]]
[WEAK[(ブロック全体としての方向性)]] を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 
[ABBR[bidi][双方向性]] 算法的には新しい深さの埋め込み水準となります。

[6] [ABBR[HTML][Hypertext Markup Language]] 4 仕様書 
<IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ 
[ABBR[[[CSS]]][Cascading Style Sheets]] で 
[CODE(CSS)[[[display]]]] を変えるようなことをしても、
[ABBR[HTML][Hypertext Markup Language]] の水準で行われる 
[CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 [ABBR[HTML][Hypertext Markup Language]] 4 が 
[CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
[WEAK[(便宜上 [ABBR[[[CSS]]][Cascading Style Sheets]] の言葉を使って説明します。)]]

- [CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、
直近のブロック要素から継承します。
- [CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、 [CODE(HTMLa)[dir]] 
属性の継承値を陽に指定した場合と同じ結果が得られる[RUBYB[べきです][should]]。

[7] [ABBR[HTML][Hypertext Markup Language]] 
的には属性の存在だけを提供して、
あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[ABBR[[[CSS2]]][Cascading Style Sheets, Level 2]] と 
[ABBR[HTML][Hypertext Markup Language]] 4 
の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる [ABBR[bidi][双方向性]] 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]

[21]
[CODE(HTMLe)[[[title]]]] 要素などではどう継承するのでしょう? 
任意の要素の属性値ではどうなのでしょう?

>>7 [Q[スタイル言語によって異なる [ABBR[bidi][双方向性]] 算法を採用していたりしたら]>>7]、
そのスタイル言語のスタイル・シートで表示するときは 
[ABBR[HTML][Hypertext Markup Language]] 4 不適合になるのだろうなあ 
(>>3)。

[27] <IW:HTML4:"struct/tables.html#table-directionality">
の説明によれば、 [CODE(HTMLe)[[[td]]]] はブロック水準要素型らしいです。
意味的に考えても、行内要素型以外はすべてブロック水準要素型と見なしてよいのではないでしょうか。
少なくても [CODE(HTMLa)[dir]] 属性の目的では。

[29]
表の中では [CODE(SGML)[%[[cellvalign]]]]
と同じ継承規則が使われると [ABBR[HTML][Hypertext Markup Language]] 4
では規定されています。

[[#comment]]


** 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 [ABBR[HTML][Hypertext Markup Language]] 
[[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも [ABBR[OK]] です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 [ABBR[bidi][双方向性]] 
算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、
普通は期待通りの結果が得られます。

[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、
引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
[ABBR[Bidi][双方向性]] 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[[#comment]]


** table 要素 dir 属性 (HTML, XHTML 1)

[26] [ABBR[HTML][Hypertext Markup Language]] の
[CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、 >>1- の通常の役割に加えて、表の方向を決定します。

[CODE(HTML)[ltr]] なら表は左から右へ、 [CODE(HTML)[rtl]]
なら右から左へ進みます。

[CODE(HTMLe)[table]] はブロック水準要素型なので、 >>4-
の通り、既定値は上位要素からの継承です。

[36]
仕様書: 
-[[SI 4281]]:1998 <http://www.qsm.co.il/Hebrew/si4281e.htm>
--[CSECTION[9.2 Tables]]
- [[HTML 4]]
-- <IW:HTML4:"struct/tables.html#table-directionality">

[27] 表が左から右に進むときは、最初の行は左側で、
次の行がその右に続きます。
右から左に進むときは、最初の行は右側で、次の行がその左に続きます。
どちらの場合も最初の列は上で、次の列が下に続きます。
[SRC[HTML 4, SI 4281:1998 9.2]]

[41]
このような効果があるのは、 [CODE(HTMLe)[table]] 要素だけです。
[CODE(HTMLe)[[[tbody]]]] や [CODE(HTMLe)[[[tr]]]]
は通常通りの働きしか持ちません。

なお、 [CODE(HTMLe)[[[th]]]] や [CODE(HTMLe)[[[td]]]]
の [CODE(HTMLa)[dir]] 属性は、通常通りそのこま内のレンダリングを制御します。
両要素型はブロック水準要素型らしいので、上位の指定を継承します。


[30]
表の中では行だけではなく列からも継承します。
[CODE(SGML)[%[[cellvalign]]]]
の説明をみてください。

[[#comment]]

** メモ

[[#comment]]


* bdo 要素 dir 属性 (HTML, XHTML 1)

[28] [CODE(HTMLe)[[[bdo]]]] 要素型の説明を参照してください。

* dir 要素型 (HTML, XHTML 1)

[23] [ABBR[HTML][Hypertext Markup Language]] の
[DFN[[CODE(HTMLe)[dir]] 要素型]]の要素 (directory list)
は、多行表示の並びを表します。 [[Un|x]] の [KBD[[[ls]]]]
命令の表示や、 [[Windoze]] の [[ListView]] control
の[Q[小さなアイコン]]や[Q[一覧]]表示のような感じです。

[40] 仕様書: 
-[[HTML 4]]
--<IW:HTML4:"struct/lists.html#edef-DIR">

[24]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[([CODE(HTMLe)[[[li]]]])+]]
:出現できる文脈:[CODE(SGML)[%[[list]];]] な文脈
:[[属性]]:
,属性名,属性値,既定値,説明,出典
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[compact]]]]	,([[真偽値属性]])	,([[偽]])	,コンパクト表示	,[HTML4] 非推奨
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr
,[CODE(HTMLa)@@en[[[type]]]],,,,非標準,[Vodafone]


[[#comment]]

** 代替

[39]
この要素は [ABBR[HTML][Hypertext Markup Language]] 4 
では'''非推奨'''で、代わりに [CODE(HTMLe)[[[ul]]]]
を使うことが'''強く'''推奨されています。

[[#comment]]

** レンダリング

[25] [ABBR[HTML][Hypertext Markup Language]] 4 仕様書が 
[Q[The [CODE(HTMLe)[DIR]] element was designed to be used for creating multicolumn directory lists.]]
と言っているように、 [CODE(HTMLe)[dir]] は[[物理要素]]であり、
>>23 のようなレンダリングを想定しています。

しかし、 [[Classic Mozilla]] や 
[ABBR[[[WinIE]]][Internet Explorer (Windows 版)]] 
をはじめとして、ここ数年のほとんどのブラウザは、 [CODE(HTMLe)[[[ul]]]] 
と同じようにレンダリングします。

[[#comment]]

** 他との関係

[38] 1993年1月に [ABBR[Dan][Daniel W. Connolly]] は
[CODE(HTMLe)[[[ul]]]] と [CODE(HTMLe)[[[dir]]]] と
[CODE(HTMLe)[[[menu]]]] の別は見た目で定義されており、
意味で定義するべきだと述べています。

それに対して [ABBR[Tim][Tim Berners‐Lee]] は、
[Q[論理的・意味的なマーク付けは好きだけど、 HTML は広範囲の意味・データを扱うし、要素型名は覚えやすいようにつけてあるのだ]]
と言ってます。

<http://ksi.cpsc.ucalgary.ca/archives/WWW-TALK/www-talk-1993q1.messages/64.html>

[[#comment]]

** メモ

[[#comment]]


* メモ@


1.9
log
@auto-committed
@
text
@d331 1
@


1.8
log
@auto-committed
@
text
@d10 4
d118 6
d257 2
d266 1
d268 1
@


1.7
log
@auto-committed
@
text
@d1 1
a1 1
* bdo 要素型以外の dir 属性 (HTML, XHTML 1)
d3 2
a4 1
[1] [[HTML]] のほとんどの[[要素型]]で定義されている
d24 6
a29 3
[33] HTML のほとんどの要素型の要素の [CODE(HTMLa)[dir]]
属性は、書字方向中立文 (固有方向性を持たない文) の基底方向を定義します。
これは、要素の[[内容]]や[[属性値]]に適用されます [SRC[HTML 4.01 8.2, A.1.1.6]]。
d40 4
a43 3
[37] HTML 4.0 12.3.3 には [CODE(HTMLe)[[[link]]]] 要素で
[CODE(HTMLa)[dir]] 属性を指定するとリンク先文書のことを記述しているように書かれていましたが、
誤りであるとして削除されました [SRC[HTML 4.01 A.1.1.8]]。
d45 2
a46 2
属性値に適用されます。 
[WEAK[([CODE(HTMLe)[link]] 要素は[[強制空要素]]なので、内容には適用しようがありません。)]]
d54 1
a54 1
,値	,意味
d59 2
a60 1
[[XHTML]] では、大文字・小文字を区別します。
d62 5
a66 1
HTML 4 や XHTML 1 のように [[DTD]] で[[列挙型]]として定義されている版の HTML
d71 5
a75 2
XHTML [[m12n]] 仕様書の抽象モジュール定義に [Q[[CODE[dir''*'' ("ltr" | "rtl")]]]<http://www.w3.org/TR/2001/REC-xhtml-modularization-20010410/abstract_modules.html#s_bdomodule>]
とかいてある (属性名の後の [CODE[*]] は必須を表す) けど、 DTD 実装と矛盾しているし、
d82 14
a95 5
[3] HTML 4 は、 [[Unicode]] の [ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには、 HTML 4
適合 UA は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 HTML 4 適合 UA は Unicode
bidi 算法に従わなければなりません。
d97 2
a98 4
Bidi 算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 要素を使って陽に指定することができます。

なお、 HTML 4 仕様書によれば、 [CODE(HTMLa)[dir]] 属性をある要素に指定することは、
d102 2
a103 1
[9] ちなみに、 HTML 4 は [CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。
d105 8
a112 6
[19] HTML 4 仕様書は、[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用するべきです
(should)。どうしても両方を使用する必要があるときには、
適当に埋め込み・上書き (override) の関係が入れ子になるように気をつけるべきです
(should)。そうでない場合のレンダリング結果は未定義です。
d120 2
a121 2
bidi 算法でいうところの、[[文ブロック]]の基底文方向
(ブロック全体としての方向性) を指定するものです。
d129 5
a133 2
[CODE(HTMLa)[dir]] 属性が示された要素は、 bidi 算法的には新しい深さの埋め込み水準となります。
[6] HTML 4 仕様書 <IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
d135 7
a141 3
つまり、たとえ [[CSS]] で [CODE(CSS)[[[display]]]] を変えるようなことをしても、
HTML の水準で行われる [CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 HTML 4 が [CODE(CSS)[display]] 変更を非推奨としている理由でしょう。
d146 1
a146 1
(便宜上 [[CSS]] の言葉を使って説明します。)
d148 1
a148 1
[CODE(HTMLa)[dir]] 属性を持たない
d150 13
a162 10
としたときには、 [CODE(HTMLa)[dir]] 属性値を、直近のブロック要素から継承します。

[CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、
[CODE(HTMLa)[dir]] 属性の継承値を陽に指定した場合と同じ結果が得られるべきです
(should)。

[7] HTML 的には属性の存在だけを提供して、あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[[CSS2]] と HTML 4 の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる bidi 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]
d165 2
a166 1
[CODE(HTMLe)[[[title]]]] 要素などではどう継承するのでしょう? 属性値ではどうなのでしょう?
d168 4
a171 1
>>7 [Q[スタイル言語によって異なる bidi 算法を採用していたりしたら]>>7]、そのスタイル言語のスタイル・シートで表示するときは HTML 4 不適合になるのだろうなあ (>>3)。
d180 1
a180 1
と同じ継承規則が使われると HTML 4
a181 1
([[名無しさん]])
d193 2
a194 1
このとき、 HTML [[マーク付け]]としては
d199 1
a199 1
のどれでも OK です。
d205 4
a208 1
>>11 だけでも、 bidi 算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、普通は期待通りの結果が得られます。
d210 2
a211 1
を考えます。ややこしいことに、引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。
d218 1
a218 1
Bidi 算法はそもそも[[平文]]を想定しているので、
d235 2
a236 1
[26] [CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
d250 2
a251 1
[27] 表が左から右に進むときは、最初の行は左側で、次の行がその右に続きます。
d278 1
a278 2
[28] [CODE(HTMLe)[[[bdo]]]] 要素型の説明を参照。

d282 2
a283 1
[23] [DFN[[CODE(HTMLe)[dir]] 要素型]] (directory list)
d288 3
a290 5
この要素は HTML 4 では非推奨で、代わりに [CODE(HTMLe)[[[ul]]]]
を使うことが強く推奨されています。

仕様書: [HTML 4]
<IW:HTML4:"struct/lists.html#edef-DIR">
d298 1
d321 8
d332 2
a333 1
[25] HTML 4 仕様書が [Q[The [CODE(HTMLe)[DIR]] element was designed to be used for creating multicolumn directory lists.]]
d337 3
a339 2
しかし、 [[Classic Mozilla]] や [[WinIE]] をはじめとして、
ここ数年のほとんどのブラウザは、 [CODE(HTMLe)[[[ul]]]] 
d344 14
@


1.6
log
@auto-committed
@
text
@d1 221
a221 184
#?SuikaWiki/0.9


* bdo 要素型以外の dir 属性 (HTML, XHTML 1)

[1] [[HTML]] のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。
また、[[表]]関連の要素で使うと、やや特殊な意味を持ちます。
(<IW:HTML4:"struct/dirlang.html#adef-dir"> 参照。)

[CODE(HTMLe)[bdo]] 要素の [CODE(HTMLa)[dir]]
属性は、他の要素の [CODE(HTMLa)[dir]]
属性と少し性質が違います。 [CODE(HTMLe)[[[bdo]]]]
要素の説明を参照してください。

[2] 属性値:
,値	,意味
,[CODE(HTML)[[[ltr]]]]	,左から右へ
,[CODE(HTML)[[[rtl]]]]	,右から左へ

[[HTML4]] では、大文字・小文字を区別しません。
[[XHTML]] では、大文字・小文字を区別します。

HTML 4 や XHTML 1 のように [[DTD]] で[[列挙型]]として定義されている版の HTML
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[3] HTML 4 は、 [[Unicode]] の [ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには、 HTML 4
適合 UA は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 HTML 4 適合 UA は Unicode
bidi 算法に従わなければなりません。

Bidi 算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 要素を使って陽に指定することができます。

なお、 HTML 4 仕様書によれば、 [CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 HTML 4 は [CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] HTML 4 仕様書は、[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用するべきです
(should)。どうしても両方を使用する必要があるときには、
適当に埋め込み・上書き (override) の関係が入れ子になるように気をつけるべきです
(should)。そうでない場合のレンダリング結果は未定義です。

[22]
XHTML [[m12n]] 仕様書に [Q[[CODE[dir''*'' ("ltr" | "rtl")]]]<http://www.w3.org/TR/2001/REC-xhtml-modularization-20010410/abstract_modules.html#s_bdomodule>]
とかいてある (属性名の後の [CODE[*]] は必須を表す) けど、 DTD と矛盾しているし、誤植でしょうか?

[[#comment]]


** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
bidi 算法でいうところの、[[文ブロック]]の基底文方向
(ブロック全体としての方向性) を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 bidi 算法的には新しい深さの埋め込み水準となります。
[6] HTML 4 仕様書 <IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ [[CSS]] で [CODE(CSS)[[[display]]]] を変えるようなことをしても、
HTML の水準で行われる [CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 HTML 4 が [CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
(便宜上 [[CSS]] の言葉を使って説明します。)

[CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、直近のブロック要素から継承します。

[CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、
[CODE(HTMLa)[dir]] 属性の継承値を陽に指定した場合と同じ結果が得られるべきです
(should)。

[7] HTML 的には属性の存在だけを提供して、あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[[CSS2]] と HTML 4 の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる bidi 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]

[21]
[CODE(HTMLe)[[[title]]]] 要素などではどう継承するのでしょう? 属性値ではどうなのでしょう?

>>7 [Q[スタイル言語によって異なる bidi 算法を採用していたりしたら]>>7]、そのスタイル言語のスタイル・シートで表示するときは HTML 4 不適合になるのだろうなあ (>>3)。

[27] <IW:HTML4:"struct/tables.html#table-directionality">
の説明によれば、 [CODE(HTMLe)[[[td]]]] はブロック水準要素型らしいです。
意味的に考えても、行内要素型以外はすべてブロック水準要素型と見なしてよいのではないでしょうか。
少なくても [CODE(HTMLa)[dir]] 属性の目的では。

[29]
表の中では [CODE(SGML)[%[[cellvalign]]]]
と同じ継承規則が使われると HTML 4
では規定されています。
([[名無しさん]])

[[#comment]]


* 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 HTML [[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも OK です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 bidi 算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、普通は期待通りの結果が得られます。
[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
Bidi 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[[#comment]]


* table 要素 dir 属性 (HTML, XHTML 1)

[26] [CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、 >>1- の通常の役割に加えて、表の方向を決定します。

[CODE(HTML)[ltr]] なら表は左から右へ、 [CODE(HTML)[rtl]]
なら右から左へ進みます。

[CODE(HTMLe)[table]] はブロック水準要素型なので、 >>4-
の通り、既定値は上位要素からの継承です。

仕様書: [HTML 4]
<IW:HTML4:"struct/tables.html#table-directionality">

[27] 表が左から右に進むときは、最初の行は左側で、次の行がその右に続きます。
右から左に進むときは、最初の行は右側で、次の行がその左に続きます。
どちらの場合も最初の列は上で、次の列が下に続きます。

このような効果があるのは、 [CODE(HTMLe)[table]] 要素だけです。
[CODE(HTMLe)[[[tbody]]]] や [CODE(HTMLe)[[[tr]]]]
は通常通りの働きしか持ちません。

なお、 [CODE(HTMLe)[[[th]]]] や [CODE(HTMLe)[[[td]]]]
の [CODE(HTMLa)[dir]] 属性は、通常通りそのこま内のレンダリングを制御します。
両要素型はブロック水準要素型らしいので、上位の指定を継承します。


[30]
d225 73
a297 72

([[名無しさん]])


[[#comment]]


* bdo 要素 dir 属性 (HTML, XHTML 1)

[28] [CODE(HTMLe)[[[bdo]]]] 要素型の説明を参照。


* dir 要素型 (HTML, XHTML 1)

[23] [DFN[[CODE(HTMLe)[dir]] 要素型]] (directory list)
は、多行表示の並びを表します。 [[Un|x]] の [KBD[[[ls]]]]
命令の表示や、 [[Windoze]] の [[ListView]] control
の[Q[小さなアイコン]]や[Q[一覧]]表示のような感じです。

この要素は HTML 4 では非推奨で、代わりに [CODE(HTMLe)[[[ul]]]]
を使うことが強く推奨されています。

仕様書: [HTML 4]
<IW:HTML4:"struct/lists.html#edef-DIR">

[24]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[([CODE(HTMLe)[[[li]]]])+]]
:出現できる文脈:[CODE(SGML)[%[[list]];]] な文脈
:[[属性]]:
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[compact]]]]	,([[真偽値属性]])	,([[偽]])	,コンパクト表示	,[HTML4] 非推奨
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr


[[#comment]]


** レンダリング

[25] HTML 4 仕様書が [Q[The [CODE(HTMLe)[DIR]] element was designed to be used for creating multicolumn directory lists.]]
と言っているように、 [CODE(HTMLe)[dir]] は[[物理要素]]であり、
>>23 のようなレンダリングを想定しています。

しかし、 [[Classic Mozilla]] や [[WinIE]] をはじめとして、
ここ数年のほとんどのブラウザは、 [CODE(HTMLe)[[[ul]]]] 
と同じようにレンダリングします。

[[#comment]]


** メモ

[[#comment]]


@


1.5
log
@auto-committed
@
text
@d1 260
a260 240
#?SuikaWiki/0.9


* bdo 要素型以外の dir 属性 (HTML, XHTML 1)

[1] [[HTML]] のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。
また、[[表]]関連の要素で使うと、やや特殊な意味を持ちます。
(<IW:HTML4:"struct/dirlang.html#adef-dir"> 参照。)

[CODE(HTMLe)[bdo]] 要素の [CODE(HTMLa)[dir]]
属性は、他の要素の [CODE(HTMLa)[dir]]
属性と少し性質が違います。 [CODE(HTMLe)[[[bdo]]]]
要素の説明を参照してください。

[2] 属性値:
,値	,意味
,[CODE(HTML)[[[ltr]]]]	,左から右へ
,[CODE(HTML)[[[rtl]]]]	,右から左へ

[[HTML4]] では、大文字・小文字を区別しません。
[[XHTML]] では、大文字・小文字を区別します。

HTML 4 や XHTML 1 のように [[DTD]] で[[列挙型]]として定義されている版の HTML
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[3] HTML 4 は、 [[Unicode]] の [ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには、 HTML 4
適合 UA は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 HTML 4 適合 UA は Unicode
bidi 算法に従わなければなりません。

Bidi 算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 要素を使って陽に指定することができます。

なお、 HTML 4 仕様書によれば、 [CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 HTML 4 は [CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] HTML 4 仕様書は、[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用するべきです
(should)。どうしても両方を使用する必要があるときには、
適当に埋め込み・上書き (override) の関係が入れ子になるように気をつけるべきです
(should)。そうでない場合のレンダリング結果は未定義です。


[22]
XHTML [[m12n]] 仕様書に [Q[[CODE[dir''*'' ("ltr" | "rtl")]]]<http://www.w3.org/TR/2001/REC-xhtml-modularization-20010410/abstract_modules.html#s_bdomodule>]
とかいてある (属性名の後の [CODE[*]] は必須を表す) けど、 DTD と矛盾しているし、誤植でしょうか?

[[#comment]]


** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
bidi 算法でいうところの、[[文ブロック]]の基底文方向
(ブロック全体としての方向性) を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 bidi 算法的には新しい深さの埋め込み水準となります。
[6] HTML 4 仕様書 <IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ [[CSS]] で [CODE(CSS)[[[display]]]] を変えるようなことをしても、
HTML の水準で行われる [CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 HTML 4 が [CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
(便宜上 [[CSS]] の言葉を使って説明します。)

[CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、直近のブロック要素から継承します。

[CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、
[CODE(HTMLa)[dir]] 属性の継承値を陽に指定した場合と同じ結果が得られるべきです
(should)。

[7] HTML 的には属性の存在だけを提供して、あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[[CSS2]] と HTML 4 の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる bidi 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]

[21]
[CODE(HTMLe)[[[title]]]] 要素などではどう継承するのでしょう? 属性値ではどうなのでしょう?

>>7 [Q[スタイル言語によって異なる bidi 算法を採用していたりしたら]>>7]、そのスタイル言語のスタイル・シートで表示するときは HTML 4 不適合になるのだろうなあ (>>3)。

[27] <IW:HTML4:"struct/tables.html#table-directionality">
の説明によれば、 [CODE(HTMLe)[[[td]]]] はブロック水準要素型らしいです。
意味的に考えても、行内要素型以外はすべてブロック水準要素型と見なしてよいのではないでしょうか。
少なくても [CODE(HTMLa)[dir]] 属性の目的では。

[[#comment]]


* 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 HTML [[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも OK です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 bidi 算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、普通は期待通りの結果が得られます。
[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
Bidi 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[[#comment]]

* table 要素 dir 属性 (HTML, XHTML 1)

[26] [CODE(HTMLe)[[[table]]]] 要素の [CODE(HTMLa)[dir]]
属性は、 >>1- の通常の役割に加えて、表の方向を決定します。

[CODE(HTML)[ltr]] なら表は左から右へ、 [CODE(HTML)[rtl]]
なら右から左へ進みます。

[CODE(HTMLe)[table]] はブロック水準要素型なので、 >>4-
の通り、既定値は上位要素からの継承です。

仕様書: [HTML 4]
<IW:HTML4:"struct/tables.html#table-directionality">

[27] 表が左から右に進むときは、最初の行は左側で、次の行がその右に続きます。
右から左に進むときは、最初の行は右側で、次の行がその左に続きます。
どちらの場合も最初の列は上で、次の列が下に続きます。

このような効果があるのは、 [CODE(HTMLe)[table]] 要素だけです。
[CODE(HTMLe)[[[tbody]]]] や [CODE(HTMLe)[[[tr]]]]
は通常通りの働きしか持ちません。

なお、 [CODE(HTMLe)[[[th]]]] や [CODE(HTMLe)[[[td]]]]
の [CODE(HTMLa)[dir]] 属性は、通常通りそのこま内のレンダリングを制御します。
両要素型はブロック水準要素型らしいので、上位の指定を継承します。

[[#comment]]

* bdo 要素 dir 属性 (HTML, XHTML 1)

[28] [CODE(HTMLe)[[[bdo]]]] 要素型の説明を参照。

* dir 要素型 (HTML, XHTML 1)

[23] [DFN[[CODE(HTMLe)[dir]] 要素型]] (directory list)
は、多行表示の並びを表します。 [[Un|x]] の [KBD[[[ls]]]]
命令の表示や、 [[Windoze]] の [[ListView]] control
の[Q[小さなアイコン]]や[Q[一覧]]表示のような感じです。

この要素は HTML 4 では非推奨で、代わりに [CODE(HTMLe)[[[ul]]]]
を使うことが強く推奨されています。

仕様書: [HTML 4]
<IW:HTML4:"struct/lists.html#edef-DIR">

[24]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]]:[CODE(SGML)[([CODE(HTMLe)[[[li]]]])+]]
:出現できる文脈:[CODE(SGML)[%[[list]];]] な文脈
:[[属性]]:
,[CODE(HTMLa)[[[class]]]]	,	,	,[[級]]	,[HTML4] %[[coreattr]]
,[CODE(HTMLa)[[[compact]]]],([[真偽値属性]]),([[偽]]),コンパクト表示,[HTML4] 非推奨
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,[HTML4] %[[i18n]]
,[CODE(HTMLa)[[[id]]]]	,	,	,一意識別子	,[HTML4] %coreattr
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML4] %i18n
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML1]
,[CODE(HTMLa)[[[onclick]]]]	,	,	,	,[HTML4] %[[events]]
,[CODE(HTMLa)[[[ondblclick]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeydown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeypress]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onkeyup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousedown]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmousemove]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseout]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseover]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[onmouseup]]]]	,	,	,	,[HTML4] %events
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,[HTML4] %coreattr
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,[HTML4] %coreattr

[[#comment]]

** レンダリング

[25] HTML 4 仕様書が [Q[The [CODE(HTMLe)[DIR]] element was designed to be used for creating multicolumn directory lists.]]
と言っているように、 [CODE(HTMLe)[dir]] は[[物理要素]]であり、
>>23 のようなレンダリングを想定しています。

しかし、 [[Classic Mozilla]] や [[WinIE]] をはじめとして、
ここ数年のほとんどのブラウザは、 [CODE(HTMLe)[[[ul]]]] 
と同じようにレンダリングします。

[[#comment]]

** メモ


[[#comment]]

* メモ
@


1.4
log
@auto-committed
@
text
@d102 4
a105 1
([[名無しさん]])
d150 32
@


1.3
log
@auto-committed
@
text
@d148 1
d150 56
a205 1
* メモ@


1.2
log
@auto-committed
@
text
@d1 97
a97 88
#?SuikaWiki/0.9


* dir 属性 (HTML, XHTML 1)

[1] [[HTML]] のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。
また、[[表]]関連の要素で使うと、やや特殊な意味を持ちます。
(<IW:HTML4:"struct/dirlang.html#adef-dir"> 参照。)

[2] 属性値:
,値	,意味
,[CODE(HTML)[[[ltr]]]]	,左から右へ
,[CODE(HTML)[[[rtl]]]]	,右から左へ

[[HTML4]] では、大文字・小文字を区別しません。
[[XHTML]] では、大文字・小文字を区別します。

HTML 4 や XHTML 1 のように [[DTD]] で[[列挙型]]として定義されている版の HTML
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[3] HTML 4 は、 [[Unicode]] の [ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには、 HTML 4
適合 UA は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 HTML 4 適合 UA は Unicode
bidi 算法に従わなければなりません。

Bidi 算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 要素を使って陽に指定することができます。

なお、 HTML 4 仕様書によれば、 [CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 HTML 4 は [CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] HTML 4 仕様書は、[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用するべきです
(should)。どうしても両方を使用する必要があるときには、
適当に埋め込み・上書き (override) の関係が入れ子になるように気をつけるべきです
(should)。そうでない場合のレンダリング結果は未定義です。

[[#comment]]


** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
bidi 算法でいうところの、[[文ブロック]]の基底文方向
(ブロック全体としての方向性) を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 bidi 算法的には新しい深さの埋め込み水準となります。
[6] HTML 4 仕様書 <IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ [[CSS]] で [CODE(CSS)[[[display]]]] を変えるようなことをしても、
HTML の水準で行われる [CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 HTML 4 が [CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
(便宜上 [[CSS]] の言葉を使って説明します。)

[CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、直近のブロック要素から継承します。

[CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、
[CODE(HTMLa)[dir]] 属性の継承値を陽に指定した場合と同じ結果が得られるべきです
(should)。

[7] HTML 的には属性の存在だけを提供して、あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[[CSS2]] と HTML 4 の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる bidi 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]


[21]
d101 48
a148 48

([[名無しさん]])

[[#comment]]


* 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 HTML [[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも OK です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 bidi 算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、普通は期待通りの結果が得られます。
[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
Bidi 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[[#comment]]


@


1.1
log
@auto-committed
@
text
@d1 140
a140 127
#?SuikaWiki/0.9
* dir 属性 (HTML, XHTML 1)

[1] [[HTML]] のほとんどの[[要素型]]で定義されている
[DFN[[CODE(HTMLa)[dir]] [[属性]]]]は、
[[書字方向]]に関して中立な文 ([[固有方向性]]を有しない文)
の[[基底方向]]を規定します。
また、[[表]]関連の要素で使うと、やや特殊な意味を持ちます。
(<IW:HTML4:"struct/dirlang.html#adef-dir"> 参照。)

[2] 属性値:
,値                  ,意味
,[CODE(HTML)[[[ltr]]]],左から右へ
,[CODE(HTML)[[[rtl]]]],右から左へ

[[HTML4]] では、大文字・小文字を区別しません。
[[XHTML]] では、大文字・小文字を区別します。

HTML 4 や XHTML 1 のように [[DTD]] で[[列挙型]]として定義されている版の HTML
では、[[属性値表記]]内で実際の値の前後に[[空白]]を入れることができますが、
互換性のためにそうするべきではありません。

[3] HTML 4 は、 [[Unicode]] の [ABBR[[[bidi]]] [bidirectonal]] 算法に従うことになっています。
文書に右から左の文字を1文字も含まないときには、 HTML 4
適合 UA は必ずしもこの算法に従う必要はありませんが、
文書が右から左の文字を1文字でも含むなら、 HTML 4 適合 UA は Unicode
bidi 算法に従わなければなりません。

Bidi 算法では著者の意図した通りの書字方向にならないときには、
適宜 [CODE(HTMLa)[dir]] 属性や [CODE(HTMLe)[[[bdo]]]] 要素を使って陽に指定することができます。

なお、 HTML 4 仕様書によれば、 [CODE(HTMLa)[dir]] 属性をある要素に指定することは、
その前後に[[制御文字]] [CODE(char)[[[LRE]]]] や [CODE(char)[[[RLE]]]]
や [CODE(char)[[[PDP]]]] を記述するのと同じことです。

[9] ちなみに、 HTML 4 は [CODE(HTMLa)[[[lang]]]] 属性で書字方向を決定することを禁じています。

[19] HTML 4 仕様書は、[[著者]]および[[著述ソフトウェア]]の設計者に、 
[CODE(HTMLa)[dir]] 属性と Unicode 文字による指定が衝突し得ることに注意を促しています。
意図しない結果となってしまわないように、どちらかの方法のみを使用するべきです
(should)。どうしても両方を使用する必要があるときには、
適当に埋め込み・上書き (override) の関係が入れ子になるように気をつけるべきです
(should)。そうでない場合のレンダリング結果は未定義です。

[[#comment]]

** 属性値の継承

[4] [[ブロック水準要素]]の [CODE(HTMLa)[dir]] 属性の値は、
bidi 算法でいうところの、[[文ブロック]]の基底文方向
(ブロック全体としての方向性) を指定するものです。

ブロック水準要素の [CODE(HTMLa)[dir]] 属性の値は、
上位のブロック水準要素の [CODE(HTMLa)[dir]] 属性の値を継承します。
最上位である [CODE(HTMLe)[[[html]]]] 要素に [CODE(HTMLa)[dir]] 
属性が明示されていないときの既定値は [CODE(HTML)[ltr]] です。

[5] 一方、[[行内要素]]の [CODE(HTMLa)[dir]] 属性の値は継承しません。
[CODE(HTMLa)[dir]] 属性が示された要素は、 bidi 算法的には新しい深さの埋め込み水準となります。
[6] HTML 4 仕様書 <IW:HTML4:"struct/dirlang.html#blocklevel-bidi">
によれば、ブロック水準要素・行内要素の区別は既定の表現によります。
つまり、たとえ [[CSS]] で [CODE(CSS)[[[display]]]] を変えるようなことをしても、
HTML の水準で行われる [CODE(HTMLa)[dir]] 属性の継承値決定には影響しないということです。
たぶんこれが、 HTML 4 が [CODE(CSS)[display]] 変更を非推奨としている理由でしょう。

[20] これに関して、
<IW:HTML4:"struct/dirlang.html#style-bidi">
には更に注意があります。
(便宜上 [[CSS]] の言葉を使って説明します。)

[CODE(HTMLa)[dir]] 属性を持たない
[[ブロック水準要素]]を [CODE(CSS)[display: inline]]
としたときには、 [CODE(HTMLa)[dir]] 属性値を、直近のブロック要素から継承します。

[CODE(HTMLa)[dir]] 属性を持たない行内要素を
[CODE(CSS)[display: block]] としたときには、
[CODE(HTMLa)[dir]] 属性の継承値を陽に指定した場合と同じ結果が得られるべきです
(should)。


[7] HTML 的には属性の存在だけを提供して、あとはスタイル言語に任せることにでもしておけばうまくいったかもしれませんけど、
[[CSS2]] と HTML 4 の時間的関係を考えればやむを得ないと言うか何と言うか。
[WEAK[(スタイル言語によって異なる bidi 算法を採用していたりしたら面倒なことになりそうだよなぁ。)]]

[[#comment]]
* 例

[10] [SAMP[english1 4WERBEH 3WERBEH 2WERBEH english5]]
のように表示されるべき段落があるとします。段落自体は[[ラテン文字]]の英文ですから、
左から右に向かうべきですが、中に[[ヘブライ文字]]で書かれた文を引用しています。
この部分は右から左に向かうべきです。

このとき、 HTML [[マーク付け]]としては
- [11] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [12] [SAMP(HTML)[<p dir="ltr">english1 <q dir="rtl">HEBREW2 HEBREW3 HEBREW4</q> english5</p>]]
- [13] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 HEBREW3 HEBREW4[CODE(char)[PDP]] english5</p>]]

のどれでも OK です。
(>>13 では [CODE(HTMLe)[[[q]]]] のタグを書いていません。
[CODE(char)[RLE]] と [CODE(char)[PDP]] を [CODE(HTMLe)[q]]
要素に含めるべきか否かよくわからないからです。
視覚的マーク付けと意味的マーク付けは相性が悪い。)

>>11 だけでも、 bidi 算法がヘブライ文字を見つけて右から左に向かうことを勝手に判断しますから、普通は期待通りの結果が得られます。
[14] ここで、 [SAMP[english1 4WERBEH english3 2WERBEH english5]]
を考えます。ややこしいことに、引用するヘブライ文字の文が更にラテン文字の英語を含んでしまっています。

- [15] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q>english3</q> HEBREW4</q> english5</p>]]
- [16] [SAMP(HTML)[<p dir="ltr">english1 <q>HEBREW2 <q dir="rtl">english3</q> HEBREW4</q> english5</p>]]
- [17] [SAMP(HTML)[<p dir="ltr">english1 [CODE(char)[RLE]]HEBREW2 [CODE(char)[LRE]]english3[CODE(char)[PDP]] HEBREW4[CODE(char)[PDP]] english5</p>]]

>>15 はうまくいきません。
Bidi 算法はそもそも[[平文]]を想定しているので、
マーク付けによって木構造があっても特に取り計らってくれません。
[SAMP[HEBREW2]] と [SAMP[HEBREW4]] をそれぞれ別の埋め込み文とみなして、
[SAMP[english1 2WERBEH english3 4WERBEH english5]]
としてしまいます。

このように、2階層以上に左から右、右から左の入れ子関係があるときには、
>>16 か >>17 のように陽にこれを示さなければいけません。

[18] はっきりいってこの方式は駄目ですね。
折角の木構造を生かせていない。

[[#comment]]

* メモ
@

