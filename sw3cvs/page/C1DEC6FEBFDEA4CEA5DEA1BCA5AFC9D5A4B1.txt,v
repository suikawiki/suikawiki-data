head	1.1;
access;
symbols
	suikawiki3-final:1.1
	before-db-leaffile:1.1
	after-upgrade-to-suikawiki-3:1.1
	before-fork-suikawiki3:1.1
	after-restore-20040122:1.1;
locks; strict;
comment	@# @;


1.1
date	2003.07.18.00.11.24;	author w;	state Exp;
branches;
next	;


desc
@@


1.1
log
@auto-commited
@
text
@#?SuikaWiki/0.9
[1] 図とか表とかの文章中のマーク付けについての考察。

[2]
文章中の画像
	次の HTML 文書片を見てもらいたい。
		<p>これより、次の図を得る。</p>
		<SOMETHING><img src="fig1" alt="Alt. text of fig.1"/></SOMETHING>
		<p>従って、(略)</p>
	SOMETHING に適当な要素型(群)については、 ul > li, div, p
	など諸説ある。 (もちろん文脈にも依存し得る。) 図の題を書き入れることを
	考慮すると問題は複雑化する。

脚注
	現在の HTML には脚注を表すための要素型(群)は存在しない。
		マーク付け案1
		<span title="HTML 3.0 (draft) には FN 要素型が存在した。">
		現在の HTML には脚注を表すための要素型(群)は存在しない。</span>
		・「HTML らしい」マークの付け方だ。
		・現在の視覚的 WWW ブラウザは tooltip hint として表示するのが主流。
		  一覧性には欠けるが本文から目を離さずに済む。
		・脚注にマークをつけることが出来ない。
		・複数の箇所から同一の脚注を参照する時に脚注部が重複する。
		・現在の視覚的 WWW ブラウザの tooltip hint の実装では長い場合に
		  途切れることがある。
		  
		マーク付け案2
		現在の HTML には脚注を表すための要素型(群)は存在しない。
		<span class="footnote">HTML 3.0 (draft) には FN 要素型が存在した。
		</span>
		* 「しない。」の句点の前に注釈部を挿入する方法もあるが、
		  ここで話題とするマーク付けとは別の問題であるから、無視する。
		・被注釈部と注釈部の関係性を明示するため、 ruby 要素を使用する
		  案もあるが、あまり向かない気もする。
		・適切なレンダリングにはスタイル指定が必須。
		  ・表示用のスタイル・シートを適用して案3の形にすることも考えられる。
		  ・高度なレンダリング能力を持たない UA は前後に括弧でも挿入すれば
		    よい。
		・複数の箇所から同一の脚注を参照する時に異なる対応が必要。
		・LaTeX の \footnote や一部の Wiki や日記システムのの脚注の実装
		  と一致する。
		
		マーク付け案3
		現在の HTML には脚注を表すための要素型(群)は存在しない。
		<a href="#footnote1">*1</a>
		・・・
		<span class="footnote" id="footnote1">
		HTML 3.0 (draft) には FN 要素型が存在した。</span>
		・特別なスタイル指定の無い時に、脚注が一箇所に集まっており、
		  一覧性に富む。
		・紙の文書をそのまま翻刻したような形式。
		・複数箇所からの参照がある場合最も適切であろう。
		・参照部と脚注の表示上の距離が離れると、 (特にスクロール媒体だと)
		  読者の負担が大きくなる。
	いずれにせよ、しっくりこないものがある。

文書内障害物
	挿絵と脚注は、一見異なるものに見えて、実際異なるものだが、
	文章内に挿入されるが文章の流れに沿わないもの、という共通点がある。
	
行内画像
	例外 (文書の流れの中で挿入される画像。) はあり得る。
		であるから、<IMG/>の結果を得る。ここから推察するに、
		本来<IMG/>であったものが、何らかの原因により<IMG/>
		が混入し、先の結果に結びついたと思われる。
	しかし、このような使い方は、<IMG/>の大きさが文字の大きさと同程度
	でかつ別図としがたい場合にしかなされないであろう。
	
	ところで、見方を変えて、脚注マーク付け案2の画像版と考えたらどうだろう。
	一番簡単な実現は、 CSS で float: right のような指定を与えることだ。
	(但し、この場合文中の画像の箇所で文が途切れてしまうので、適当な文字列を
	何らかの方法で補うことにする。)
		であるから、[図1]の結果を得る。ここから推察するに、 +-----+
		本来[図2]であったものが、何らかの原因に   +-----+   | 図1 |
		より[図3]が混入し、先の結果に   +-----+   | 図2 |   +-----+
		結びついたと思われる。          | 図3 |   +-----+
		                                +-----+
	(もちろん、実際にはもっとうまく設定して図が縦に並ぶ方が良いし、文中の
	挿入句も自然な流れになるよう工夫する必要がある、)

RFC 2629 マーク付け言語での挿入図
	図を挿入する時には、図と結びついた段落ごと figure 要素で表現する。
		<figure>
		  <preamble>このような前提は、普遍的なものである。従って、</preamble>
		  <artwork/>
		  <postamble>のような結果になるのが自然だ。
		  しかしそう考えない人もいるのが事実だ。</postamble>
		</figure>
	このような表現には抵抗がある。なぜなら、
		<(文書構造)段落>
		<figure>
		  <preamble>
		    <(文書構造)行>このような前提は、普遍的なものである。
		    </(文書構造)行>
		    <(文書構造)行>従って、</preamble>
		  <artwork/>
		  <postamble>のような結果になるのが自然だ。</(文書構造)行>
		  <(文書構造)行>しかしそう考えない人もいるのが事実だ。
		  </(文書構造)行></postamble>
		</figure>
		</(文書構造)段落>
	なのではないかと思うのだ。 preamble, postamble 両要素は構造上ではなく
	表現上の塊なのではないか。

画像ブロックでよいのではないか。
	初めの例に戻る。
		<p>これより、次の図を得る。</p>
		<SOMETHING><img src="fig1" alt="Alt. text of fig.1"/></SOMETHING>
		<p>従って、(略)</p>
	この場合、画像は文の一部ではないし、構造上 (も典型的な表現上も)
	前後の段落と同等のブロックでいいのではないか。すなわち、
		<p>これより、次の図を得る。</p>
		<Img src="fig1" alt="Alt. text of fig.1"/>
		<p>従って、(略)</p>
	ここで、 Img 要素(仮)は、段落格の画像とし、文中の画像である img 要素
	と区別する。
		<p>これより、<img src="fig1" alt="Alt. text of fig.1"/>
		という図を得る。</p>
		<p>従って、(略)</p>
	(表示上はブロックとすることで同様の結果を得られる。)

挿入節ブロック要素型
	別の案:
		<p>これより、次の図を得る。</p>
		<SECTION><img src="fig1" alt="Alt. text of fig.1"/></SECTION>
		<p>従って、(略)</p>
	SECTION 要素型は、文章中に挿入されるブロックを表すことにする。
	図題をつけるのもありだ:
		<p>これより、次の図を得る。</p>
		<SECTION><caption>マーク付けの図形的解釈</caption>
		<img src="fig1" alt="Alt. text of fig.1"/></SECTION>
		<p>従って、(略)</p>
	SECTION 要素は画像以外の内容でもよいことにする。
	SECTION 要素が表という塊である特別な場合が table 要素型だと考えることも
	できる。更に、例示の塊にも使えそうだ。
		<p>たとえば、次の例のようなマーク付けを考えてみましょう。</p>
		<SECTION class="example"><caption>マーク付けの例</caption>
		<pre><![CDATA[<html>
		  <head><title>マーク付けにまつわる諸問題</title></head>
		  <body/>
		</html>]]></pre></SECTION>
		<p>ここでは、(略)</p>
	
	HTML では SECTION 要素に汎用のブロック要素型である div を使い
	(class 属性を適宜補い)、 XHTML 2.0 では section 要素型を使うのが良いだろう。

まとまった参照項目
	脚注マーク付け例3を考えてみる。
		<root>
		<body>
		  <p>ところで、<REF to="book1">カモノハシ本</REF>によれば、
		  <REF to="fn2">これらの大きな違いは3つある</REF>。</p>
		  <p>この違いは全て、<REF to="www1"/>が提示しているものだ。
		  <REF to="table1"/>にそれを示す。</p>
		  <p>一方で、異論もある。</p>
		</body>
		<tables>
		  <table id="table1"/>
		</tables>
		<footnotes>
		  <footnote id="fn1"/>
		  <footnote id="fn2">カモノハシ本の第1刷には(略)</footnote>
		</footnotes>
		<references>
		  <reference id="book1"/>
		  <reference id="book2"/>
		  <reference id="www1"><title>W3C 信者の生態</title>(略)</reference>
		</references>
		</root>
	この文書の表示の一例:
		  ところで、カモノハシ本[1]によれば、これらの大    
		きな違いは 3 つある*2。                            *2 カモノハシ本の
		  この違いは全て、『W3C 信者の生態』[3]が提示し       第1刷には「3.5
		ているものだ。表 1 にそれを示す。                     つある。」と書
		                                                     かれている(P.23)
		   +-------------------------------------------+      が、第 2 刷で修
		   |                    (略)                   |      正されている。
		   +-------------------------------------------+
		     表 1: 単なる W3C 信者と Strict 派の相違点
		
		  一方で、異論もある。
		(略)

[3] TODO:
- [[DocBook]] とかも考慮に入れる。@
