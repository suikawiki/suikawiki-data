head	1.1;
access;
symbols
	suikawiki3-final:1.1
	before-db-leaffile:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.1
date	2004.03.18.02.07.17;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.1
log
@auto-committed
@
text
@#?SuikaWiki/0.9

[1]
で、一晩経ってみたら鯖が過負荷でひどいことになってました。。。
昨晩の処理状況を見たところではどんなに長くても数分で終わっていたので (それでも随分ひどいが)、ここまでひどくなるとは思っていませんでしたけど、甘すぎでした。
一秒間に数要求もどっさり仕掛けてくる糞ロボットも来てますから、一度処理が追いつかなくなったらあとはもうだめぽ。

[2] 速度低下の一番の障害は search-result なので (大量のファイル IO があるのもシステムに負荷をかける原因かも)、とりあえずもう一度検索対象を制限して、今度は 1024 個にしてみました。

もっとも、これでは使い物になりませんから、やっぱり Namazu とかの使用を考えた方がいいでしょうね。
(今数えたらこの wiki の WikiPage 数は8000超。要求毎にそれだけのファイルの中身をチェックするなんて非常識にも程があるね。)
([[名無しさん]] [WEAK[2004-03-14 05:37:00 +00:00]])

[3]
>>2 これでも access が集中した時に捌けなくなってしまいました。。。やっぱりなにか構造的欠陥があるのかなあ。

せめて何が原因で詰まってしまうのかが分かればいいのだけど、複雑系なだけにどう追求したらよいのやら。
([[名無しさん]] [WEAK[2004-03-14 07:44:19 +00:00]])

[4]
>>2 の処置だけでも、同時に実行される wiki.cgi は 2〜3 個程度に抑えられるのだけど、何かの弾み(?)で一気に一杯起動して 20 個位たまると、あとはどんどん溜まる一方でシステム丸ごとやばくなってくみたいな感じです。
([[名無しさん]] [WEAK[2004-03-14 07:46:32 +00:00]])

[5]
とりあえず検索できないと悲しいことがあるので、 <http://suika.fam.cx/search/?idxname=wakaba> で検索できるようにしました。
([[SuikaWiki/0.9]] でも [CODE(MIME)[[[text/plain]]]] 扱いですが、我慢してください。)
([[名無しさん]] [WEAK[2004-03-14 08:30:11 +00:00]])

[6]
>>5 [SAMP[SuikaWiki]] で検索したら多すぎて検索できませんになってしまった。。。
([[名無しさん]] [WEAK[2004-03-14 08:30:51 +00:00]])


[7]
>>6 その一方で [SAMP[SuikaWiki/0.9]] では検索できちゃうのは何でだろ〜
([[名無しさん]] [WEAK[2004-03-14 08:31:37 +00:00]])
@
