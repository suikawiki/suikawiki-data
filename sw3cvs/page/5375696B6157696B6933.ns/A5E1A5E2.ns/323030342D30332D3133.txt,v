head	1.1;
access;
symbols
	suikawiki3-final:1.1
	before-db-leaffile:1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.1
date	2004.03.18.02.07.17;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.1
log
@auto-committed
@
text
@#?SuikaWiki/0.9

[1]
ついに本家 SuikaWiki を SuikaWiki 3 に upgrade する日を迎えることができました。
大変喜ばしいことでありますが自画自賛は省略。
([[名無しさん]] [WEAK[2004-03-13 08:48:40 +00:00]])

[2]
恐れていたことが本当になってしまったというか、 RequestLog plugin や Referer plugin はやっぱり本家 SW の負荷には耐えられませんでした。 BerkeleyDB で排他 lock するのがやっぱり追いつきません。
(って、 SW2 でやってたときのあの lock から見れば推測できますよね。。。ちょっと楽観視し過ぎていました。) おかげでそこで lock 解除待ちのまま死なない wiki.cgi が一杯で死ぬかと思いました。。。
([[名無しさん]] [WEAK[2004-03-13 08:51:30 +00:00]])

[3]
そういうわけで Referer & RequestLog は切ってあります。しょっちゅう access される wiki で使うのには危険すぎます。

どっちも捨てるのには惜しい機能なので、
いい方法があればいいんですけど。。。
(DB を壊さないためには追記型書込みしかないかなあ?)

([[名無しさん]] [WEAK[2004-03-13 09:13:08 +00:00]])

[4]
前も思ったけど単なる read で lock は不要だよな、ということでそうしてみました。あんまり綺麗なやり方じゃないのですけれども。

;; Lock 周辺を綺麗にしないと。
([[名無しさん]] [WEAK[2004-03-13 09:15:58 +00:00]])

[5]
Map plugin の search-result の結果も最大 512 個にしてしまいました。短い名前の WikiPage だと5分以上とか掛かっていたのですけど、幾らなんでもやりすぎだと思うので。。。

;; Referer にしてもこれにしても、上限は parameter で customizable にした方がいいのだろうか。
([[名無しさん]] [WEAK[2004-03-13 11:36:44 +00:00]])

[6]
実験用 wiki にあった[[SuikaWiki3//メモ]]とかをこっちの本家 SW に移動しました。
([[名無しさん]] [WEAK[2004-03-13 11:38:11 +00:00]])

[7]
>>2 朝令暮改というかなんというか、元に戻しました。寝ぼけてたのか、それやると WikiDB 内の最初の 512 個の WikiPage しか検索対象にならなくなるのでした。。。

で、元に戻したら、それまで何でか分からないけど随分速くなったなあと思っていたのに一気に遅くなりました。
やっぱり referer-list と search-result は SuikaWiki の速度の一番の neck です。
(でもこの2つがないと SW が SW でないような気もするんだよなー。)
([[名無しさん]] [WEAK[2004-03-13 13:48:34 +00:00]])

[8] [[SuikaWiki//BugTrack]] とかの懸案を一気に幾つも閉じました。気持ちいいですねぇ。

でも、 bug 系は潰れても、新機能系は相変わらずなのがちと物足りん。まあ SW 3.0 は再実装ばっかりだったから仕方ないなあ。
ぼちぼち SW 3.2 に向けて頑張りましょうか。


[9]
>>8 みたいなのんきなことを SW 3.0 を release する前に書いていたら怒られそうだ。

;; SW 3.0.0 は Referer と RequestLog の問題が解決して落ち着いたら release します。
([[名無しさん]] [WEAK[2004-03-13 13:54:54 +00:00]])
@
