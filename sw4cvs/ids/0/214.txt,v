head	1.28;
access;
symbols
	suika-20100509:1.8
	before-graph-20090923:1.6;
locks; strict;
comment	@# @;
expand	@b@;


1.28
date	2014.01.21.15.18.10;	author wakaba;	state Exp;
branches;
next	1.27;

1.27
date	2014.01.14.12.38.14;	author wakaba;	state Exp;
branches;
next	1.26;

1.26
date	2014.01.13.23.57.58;	author wakaba;	state Exp;
branches;
next	1.25;

1.25
date	2014.01.05.08.36.19;	author wakaba;	state Exp;
branches;
next	1.24;

1.24
date	2013.10.05.03.51.12;	author wakaba;	state Exp;
branches;
next	1.23;

1.23
date	2013.07.15.23.54.10;	author wakaba;	state Exp;
branches;
next	1.22;

1.22
date	2013.06.06.00.04.24;	author wakaba;	state Exp;
branches;
next	1.21;

1.21
date	2013.05.10.15.36.32;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2013.02.16.14.38.08;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2012.12.31.01.40.46;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2012.04.21.09.56.53;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2011.08.22.12.17.19;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2011.08.20.04.54.14;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2011.08.20.04.53.03;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.15.01.33.19;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2011.04.25.14.03.46;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2011.04.25.14.01.54;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2010.12.09.14.17.13;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.14.15.05.24;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2010.05.26.13.10.34;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2010.03.27.13.45.23;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2010.01.23.02.17.03;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2009.09.06.04.24.30;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.22.13.07.58;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2009.07.05.12.01.02;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2009.02.23.09.29.56;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.18.14.27.42;	author wakaba;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.10.15.20.54;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.28
log
@updated by (anon)
@
text
@[38] [[HTML]] の [DFN[[CODE(HTMLe)[style]] 要素型]]の要素を使うと、
文書の頭部 ([CODE(HTMLe)[[[head]]]]) に[[スタイル・シート]]規則を入れることができます。

[39] 仕様書:
- [[HTML 4]] 
-- [CITE[14.2.3 Header style information: the [CODE(HTMLe)[STYLE]] element]]
<IW:HTML4:"present/styles.html#style-group">
-- [CITE[14.5 Hiding style data from user agents]]
<IW:HTML4:"present/styles.html#hiding">
-- [CITE[Element content]]
<IW:HTML4:"appendix/notes.html#h-B.3.2.1">
- [[XHTML 1.0]]
-- [CSECTION[4.8. Script and Style elements]]
(参考) <IW:XHTML10:"h-4.8">
-- [CSECTION[C.14. Referencing Style Elements when serving as XML]]
(参考) <IW:XHTML10:"C_14">

[3]
:[[局所名]]:[CODE(HTMLe)[style]]
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]] ([[HTML 4]]):[CODE(SGML)[[[CDATA]]]]
:内容模型 ([[XHTML 1]]):[CODE(SGML)[[[PCDATA]]]]
:出現できる文脈:[CODE(HTMLe)[[[head]]]] の子供として任意個
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[class]]]]	,	,(なし)	,[[級]]	,
,[CODE(HTMLa)[[[dir]]]]	,	,(継承)	,[CODE(HTMLa)[title]] [[書字方向]]	,[HTML 4]
,[CODE(HTMLa)[[[disabled]]]]	,	,	,無効化	,非標準
,[CODE(HTMLa)[[[id]]]]	,[[ID]]	,(なし)	,唯一識別子	,
,[CODE(HTMLa)[[[lang]]]]	,	,(継承)	,[CODE(HTMLa)[title]] [[自然言語]]	,[HTML 4]
,[CODE(HTMLa)[[[xml]]:lang]]	,	,(継承)	,自然言語	,[XHTML 1]
,[CODE(HTMLa)[[[media]]]]	,[CODE(SGML)[%[[MediaDesc]]]]	,	,適用媒体	,[HTML 4]
,[CODE(HTMLa)[[[notation]]]]	,[CODE(SGML)[[[NOTATION]]]]	,	,スタイル言語	,[[HTML 3.0]]
,[CODE(HTMLa)[xml:[[space]]]]	,	,[CODE(XML)[[[preserve]]]]	,[[空白]]の扱い	,[XHTML 1.0]
,[CODE(HTMLa)[[[style]]]]	,	,(なし)	,スタイル指定	,
,[CODE(HTMLa)[[[title]]]]	,[CODE(SGML)[%[[Text]]]]	,(なし)	,注釈的題	,[HTML 4]
,[CODE(HTMLa)[[[type]]]]	,[CODE(SGML)[%[[ContentType]]]]	,(必須)	,[[スタイル言語]]	,[HTML 4]
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,W3C 勧告	,[[XHTML m12n]]


[[#comment]]


** 内容


*** 構文

[4] [[XHTML]] になる前の HTML では、 [CODE(HTMLe)[style]]
の[[内容]]は [CODE(SGML)[[[CDATA]]]] と宣言されていました。
これは、 [CODE(SGML)[[[STAGO]]]] ([CODE(char)[<]]) や
[CODE(SGML)[[[ERO]]]] ([CODE(char)[&]]) も含めて[[終了タグ]]までの文字列をすべて
[CODE(HTMLe)[style]] 要素の内容として扱うことを意味します。

ですから、例えば
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
'''<!--'''
   [CODE(HTMLe)[p]] {color: red; background-color: white}
'''-->'''
</[CODE(HTMLe)[style]]>
]PRE]

と記述したとしても、強調した部分は SGML の[[マーク]]ではなく、
単なる[[文字データ]]扱いになり、 SGML の[[注釈宣言]]とは見なされません。
(その一方で、 [CODE(HTMLe)[style]] が [CODE(SGML)[CDATA]]
と知らない古い UA からは注釈宣言に見えるので、中身を隠すことができるのです。)

[5] ところが、 [[XML]] では内容を [CODE(SGML)[CDATA]]
にすることができません。そこで、 [[XHTML 1]] では [CODE(HTMLe)[style]]
の内容は [CODE(XML)[(#[[PCDATA]])*]] と宣言されています。
これは、通常の内容の扱いと同じになる、つまり
[CODE(char)[<]] や [CODE(char)[&]] は [CODE(SGML)[[[stago]]]] などや
[CODE(SGML)[[[ero]]]] などと見なされ得ることを意味します。

この場合、 >>4 の注釈宣言に見える部分は本当に注釈宣言として扱われます。
このままだと [CODE(HTMLe)[style]] は実質空になってしまいます。

意図した通りに解釈させるためには
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
   [CODE(HTMLe)[p]] {color: red; background-color: white}
</[CODE(HTMLe)[style]]>
]PRE]

としなければなりません。 (当然、古い UA から隠すという機能は失われます。)

[6] スタイル・シートの一部として [CODE(char)[<]] や
[CODE(char)[&]] を書きたいとき、 >>4 では (終了タグと見なされてしまう場合を除き)
そのまま書くことができましたが、 >>5 では非[[整形式]]になってしまいます。

しかし、いちいち escape するのが面倒な場合には、
[[[CODE(XML)[CDATA]]区間]]を使って、
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
 [CODE(XML)['''<!''''''[''''''CDATA''''''[''']]
   /* -- Question of Q & A -- */
   [CODE(HTMLe)[p]] {color: red; background-color: white}
 [CODE(XML)[''']'''''']''''''>''']]
</[CODE(HTMLe)[style]]>
]PRE]

のように書くことができます。 [CODE(XML)[CDATA]] 区間の中では
[CODE(SGML)[[[MSE]]]] ([CODE(XML)[''']''']>]]) 
を除いてそのままの文字データと解釈されます。

[7] なお、 SGML 注釈宣言風の[Q[隠し方]]は HTML の一部ではなく、
スタイル言語の一部です。スタイル言語によっては使えないこともありますから、
注意してください。

[[#comment]]


*** 意味

[42] [CODE(HTMLe)[style]] の内容は、 [CODE(HTMLa)[type]] 
で識別される[[スタイル言語]]によって解釈されます。
構文等もスタイル言語によります。

[[#comment]]


*** CSS

[44] [[CSS]] の仕様書は、 SGML 
の注釈宣言のはじめと終わりのようなものについて次のように述べています。

> CSS style sheets are often embedded in HTML documents, and to be able to 
hide style sheets from older UAs, it is convenient put the style sheets 
inside HTML comments. The HTML comment tokens "<!--" and "-->" may occur 
before, after, and in between the statements. They may have whitespace 
around them. [INS[CSS1 7.1    Forward-compatible parsing <http://www.w3.org/TR/REC-CSS1#forward-compatible-parsing>]]

> [INS[和訳 (参考):]] CSS スタイル・シートはしばしば HTML 文書に埋込まれまして、
古めの UA からスタイル・シートを隠すことができるように、
スタイル・シートを HTML 注釈の中に入れるのが便利です。
HTML 注釈字句 [CODE[<!--]] と [CODE[-->]] は文の前・後・間に出現できます。
そのまわりに空白を入れても構いません。

> CSS also allows the SGML comment delimiters ("<!--" and "-->") in certain 
places, but they do not delimit CSS comments. They are permitted so that 
style rules appearing in an HTML source document (in the STYLE element) may 
be hidden from pre-HTML 3.2 user agents. See the HTML 4.0 specification 
([HTML40]) for more information. [INS[CSS2 4.1.9 Comments <http://www.w3.org/TR/REC-CSS2/syndata.html#comments>]]

> [INS[和訳 (参考):]] CSS はある場所で SGML 注釈区切子
([CODE(SGML)[<!--]] および [CODE(SGML)[-->]])
をも認めていますが、この両者は CSS 注釈を区切るものではありません。
両者を認めることによって、 HTML 原始文書 (の [CODE(HTMLe)[style]] 要素) 
に出現するスタイル規則を HTML 3.2 以前の利用者エージェントから隠すことができます。
詳しくは HTML 4.0 仕様書をご覧ください。

更に、 CSS2 附属書 D の文法規則でも規則など ([[選択子]]等 + 
[CODE(CSS)[{]] 〜 [CODE(CSS)[}]]) 
の部分の外側ならどこにでも書けるように書かれています。

[45] 仕様書の規定を読む限りでは [CODE(HTMLe)[style]] 要素以外の場所で使う時にも
[Q[SGML 注釈区切子]]を書けるように思えますが、
試しに外部スタイル・シートなどで使ってみると正しく処理できない UA
も少なくないようです。

[47]
CSS2 は HTML 4.0 を見よと言っていますが、 HTML 4 には CSS を注釈宣言のようなもので囲んだ例が挙げられているだけです。一体何を見せたかったのでしょうかね?
([[名無しさん]])

[[#comment]]


*** メモ

[46] XHTML では XSL のような XML base のスタイル言語も使えます。
但し、その場合にはもちろん [CODE(XML)[CDATA]] 
マーク区間で包むのは使えませんし、
注釈宣言での隠蔽などもってのほかです。
更に、陽に文書型宣言を行っている場合には適当に [[DTD]]
を書き換える必要があるでしょう。

[21] >>46 もっとも、 XSL は XML 対象のスタイル言語ですから、
たとえ書けたとしても意味がありませんね。で、実質 XML base 
のスタイル言語は他にないですから、どうでも良い問題といえばそれまでではあります。

[[#comment]]


** 応用

[40] [[スタイル・シート]]に対応しないか、または [CODE(HTMLa)[type]]
で指定されたスタイル言語に対応しない UA は、
[CODE(HTMLe)[style]] の内容を隠さなければなりません。
文章の一部としてレンダリングするのは[RUBY[誤り] [エラー]]です。 [SUP[ [HTML 4] ]]

対応していたらレンダリングしても良いようにも読める書き方ですが、
そういう意図ではないはずです。

[41] スタイル言語によっては、 ([[SGML]] の注釈風に記述することで)
HTML 4 非適合 UA で内容がレンダリングされないようにする機能を持つものもあります。

[[#comment]]


** 歴史

[8] 1995/05/06 の [[HTML 3.0]] draft [[DTD]]
では [CODE(HTMLe)[style]] 要素は次のように定義されています。
[PRE(SGML)[
 <!ENTITY % style-notations "dsssl-lite | w3c-style">
 <!NOTATION dsssl-lite PUBLIC
       "ISO/IEC 10179:1995//NOTATION DSSSL Style Language//EN">
      
 <!NOTATION w3c-style PUBLIC 
 --"IETF/RFC nnn//NOTATION W3C Style Language//EN"--
 "ISO/IEC 10179:1995//NOTATION DSSSL Style Language//EN">
 
 <!ELEMENT [CODE(HTMLe)[STYLE]] - O (#PCDATA)>
 <!ATTLIST [CODE(HTMLe)[STYLE]]
     [CODE(HTMLa)[notation]] NOTATION (%style-notations;) #REQUIRED
 >
]PRE]

これを次のようにして使うつもりでした。
[PRE(HTML)[
 <[CODE(HTMLe)[style]] [CODE(HTMLa)[notation]]=dsssl-lite>
   [INS[(DSSSL)]]
 </[CODE(HTMLe)[style]]>
]PRE]

[CODE(HTML)[w3c-style]] はおそらく [[DSSSL]] の subset でしょう。

[1] 1997年1月に勧告された [[HTML 3.2]] 
は将来の版で使用するとして予約だけしています。属性はありませんでした。

HTML 3.2 DTD より:

> [CODE(SGML)[<!ELEMENT [CODE(HTMLe)[STYLE]]  - - CDATA -- placeholder for style info -->]]

[18] その後に発表された ''HTML DTD with support for Style Sheets'' <http://www.w3.org/TR/NOTE-html-970421.html> (HTML 3.2 + StyleSheet) は 
[CODE(HTMLe)[style]] 要素に [CODE(HTMLa)[type]] 属性 (省略可能), 
[CODE(HTMLa)[media]] 属性 (列挙値 
[CODE(SGML)[(print | screen | projection | braille | aural | all)]], 
既定値 [CODE(HTML)[all]]), [CODE(HTMLa)[title]] 属性 (省略可能)
を規定していました。 

[20] 次の ''HTML DTD with support for Style Sheets'' 
<http://www.w3.org/TR/NOTE-html-970531.html> で、
[CODE(HTMLa)[media]] 属性は読点区切りの複数指定が出来るように 
[CODE(SGML)[CDATA]] に改められました。

[49]
[CITE@@en[draft-ietf-html-style-01]] ([CODE[2007-01-28 00:07:26 +09:00]] 版) <http://tools.ietf.org/html/draft-ietf-html-style-01>
([[名無しさん]])

[[#comment]]


** 例

[43] CSS を使った例
[PRE(HTML)[
<HEAD>
 <TITLE>Example of STYLE</TITLE>
 <STYLE type="text/css">
   H1.myclass {border-width: 1px; border: solid; text-align: center}
 </STYLE>
</HEAD>
<BODY>
 <H1 class="myclass"> This H1 is affected by our style </H1>
 <H1> This one is not affected by our style </H1>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より、改)]]

[75]
[CITE[菜の花は野沢菜? - 楽天トラベルブログ - 楽天ブログ(Blog)]] ([CODE[2008-06-07 17:21:07 +09:00]] 版) <http://plaza.rakuten.co.jp/travelblog/diary/200604280000/>

The only [CODE(HTMLe)@@en[[[style]]]] element has the [CODE(HTMLa)@@en[[[title]]]]
attribute specified:
[PRE(HTML example code)[
<style type=text/css title="plaza" media="screen,print">
]PRE]

([[名無しさん]])

[[#comment]]


** 他との関係

[48]
[[XHTML]] では、 [[XML]] [[応用]]との互換性のため
[CODE(HTMLe)[style]] 要素に [CODE(HTMLa)[[[id]]]]
属性を指定し、 [CODE(XML)[[[xml-stylesheet]]]]
[[処理指令]]からこれを参照するべきです。
[SRC[XHTML 1.0 C.14]]

[[#comment]]


** メモ

[52]
[CITE[Kid Language Specification]] ([CODE[2007-01-27 21:50:41 +09:00]] 版) <http://www.kid-templating.org/language.html#xml-comments>
([[名無しさん]])

[63]
[[XBL 1]] には [CODE(XMLe)@@en[[[stylesheet]]]] [[要素]]がありますが、
[[外部スタイル・シート]]のためのもので、
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]とは異なります。

([[名無しさん]])

[64]
[[XBL 2.0]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]は、
細部や適用対象が異なりますが、大まかにいえば [[HTML]]
の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じものです。
([[名無しさん]])

[65]
[[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]は、細部が異なりますが、
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じものです。
([[名無しさん]])

[66]
[[SMIL]] の [CODE(XMLe)@@en[[[layout]]]] [[要素]]は、色々違いはありますが
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じ用途のものです。
([[名無しさん]])

[67]
[[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]で
[CODE(XMLa)@@en[[[type]]]] [[属性]]が指定されなかった場合、
- [[Firefox]] 2 は[[要素]]自体 (だけ) を[[レンダリング]]上無視します。
[CODE(DOMa)@@en[[[sheet]]]] [[属性]]は [CODE(DOM)@@en[[[null]]]]
となります。
- [[Opera]] 9 は [CODE(MIME)@@en[[[text/css]]]] と指定されたかのように[[レンダリング]]します。
[CODE(DOMa)@@en[[[sheet]]]] [[属性]]も値を持ちます。

([[名無しさん]])

[68]
>>67 テスト <http://suika.fam.cx/~wakaba/-temp/test/svg/style/no-type-css-1.xml>
([[名無しさん]])

[69]
[[DOM]] から [[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]の[[内容]]を変更しても、
[[Opera]] 9 では反映されません。

;; テスト:
<http://suika.fam.cx/~wakaba/-temp/test/svg/style/dynamic-1.xml>

([[名無しさん]])

[70]
[[WinIE 6]] では、 [CODE(HTMLa)@@en[[[type]]]] [[属性]]の値は[[大文字]]または[[小文字]]の
[CODE(MIME)@@en[[[text/css]]]] でなければならず、その他の値が指定された場合、その[[スタイル・シート]]は適用されません。
[[引数]]や[[空白]]も一切含められません。

;; [[空文字列]]であってもいけません。

([[名無しさん]])

[71]
[[Firefox]] 2 では、[CODE(HTMLa)@@en[[[type]]]] [[属性]]で
= [CODE(MIME)[[[;]]]] があれば、それ以降はすべて無視されます。
= [[空白]] (少なくても [CODE(char)[[[U+000A]]]],
[CODE(char)[[[U+000D]]]], [CODE(char)[[[U+0009]]]],
[CODE(char)[[[U+0020]]]]。 [CODE(char)[[[U+000B]]]]
や [CODE(char)[[[U+000C]]]] は不可。) は一切無視されます。
= 残った文字列が[[大文字]]または[[小文字]]で
[CODE(MIME)@@en[[[text/css]]]] または[[空文字列]]なら、[[CSS]]
[[スタイル・シート]]として使われます。
そうでなければ、その[[スタイル・シート]]は適用されません。

([[名無しさん]])

[72]
[[Opera]] 9 は [CODE(HTMLa)@@en[[[type]]]]
[[属性]]の値に関わらず [[CSS]] [[スタイル・シート]]として処理するようです。
([[名無しさん]])

[73]
[CITE[Google Scholar]] ([CODE[2008-03-22 11:26:31 +09:00]] 版) <http://scholar.google.com/intl/ja/>

>
[PRE(HTML invalid example code)[
<style><!--
body,td,a,p,.h{font-family:arial,sans-serif}
.h{color:#224499}
.q{color:#0000cc}
//-->
</style><script><!--
function sf(){document.f.q.focus();}
// -->
</script>
]PRE]

* [CODE(XMLe)@@en[style]] 要素 (XFrames)

[76] [CITE@@en[XFrames]] ([TIME[2010-12-17 00:45:08 +09:00]] 版) <http://www.w3.org/TR/2010/NOTE-xframes-20101216/#s_style-element>

[77] [[XHTML1]] を引き継いで [CODE(XMLa)@@en[[[type]]]] [[属性]]が必須になっています。

[78] [[XHTML1]] の [CODE(HTMLe)@@en[[[link]]]] [[要素]]による[[外部スタイル・シート]]の参照を統合し
[CODE(XMLa)@@en[[[source]]]] [[属性]]が追加されています。なぜか [CODE(XMLa)@@en[[[src]]]]
ではなく [CODE(XMLa)@@en[[[source]]]] になっています。

[79] [CITE['''['''whatwg''']''' Why is @@scoped required for <style> as flow content?]]
([TIME[2011-06-15 09:29:28 +09:00]] 版)
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032053.html>

[80] [CITE[Styling – SVG 1.1 (Second Edition)]]
( ([TIME[2011-08-10 12:35:27 +09:00]] 版))
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleElement>

[81] [CITE[Styling – SVG 1.1 (Second Edition)]]
( ([TIME[2011-08-10 12:35:27 +09:00]] 版))
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleAttribute>

[82] [CITE[Styling – SVG 1.1 (Second Edition)]]
( ([TIME[2011-08-10 12:35:27 +09:00]] 版))
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#InterfaceSVGStyleElement>

[83] [CITE@@en-GB-x-Hixie[Hixie's Natural Log: And on the Eighth Day, He brought forth Progress. And it was good.]]
( ([TIME[2012-04-21 18:52:12 +09:00]] 版))
<http://ln.hixie.ch/?start=1042630901&count=1>

[84] [CITE@@en[Web Applications 1.0 r7620     Make the 'style' IDL attribute settable for authoring convenience.]]
( ([TIME[2012-12-31 05:27:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7619&to=7620>

[85] [CITE@@en-US[XBL 2.0]]
( ([TIME[2012-05-03 02:23:03 +09:00]] 版))
<http://dev.w3.org/2006/xbl2/Overview.html#style-blocks>

[86] [CITE[IRC logs: freenode / #whatwg / 20130426]]
( ([TIME[2013-05-06 17:03:20 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130426#l-1012>

[87] [CITE@@en[Web Applications 1.0 r7915 Move .style to CSSOM]]
( ([TIME[2013-06-06 08:31:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7914&to=7915>

[88] [CITE[IRC logs: freenode / #whatwg / 20130712]]
( ([TIME[2013-07-15 23:20:16 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130712#l-619>

[89] [CITE@@en[CSS Style Attributes]]
( ([TIME[2013-10-04 04:08:59 +09:00]] 版))
<http://www.w3.org/TR/2013/PR-css-style-attr-20131003/>

[90] [CITE@@en-US[XML Binding Language (XBL) 2.0]]
( ([TIME[2007-03-16 22:20:16 +09:00]] 版))
<http://www.w3.org/TR/2007/CR-xbl-20070316/#the-style>

[91] [CITE@@en[Web Applications 1.0 r8390     Update how the interaction with CSS style sheets and CSSOM is defined.]]
( ([TIME[2014-01-14 07:45:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8389&to=8390>

[92] [CITE@@en[Web Applications 1.0 r8390     Update how the interaction with CSS style sheets and CSSOM is defined.]]
( ([TIME[2014-01-14 07:45:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8389&to=8390>

[93] [CITE@@en-US[XML Binding Language (XBL) 2.0]]
( ([TIME[2007-03-16 22:20:16 +09:00]] 版))
<http://www.w3.org/TR/2007/CR-xbl-20070316/#loading1>@


1.27
log
@updated by (anon)
@
text
@d462 5
a466 1
<http://html5.org/tools/web-apps-tracker?from=8389&to=8390>@


1.26
log
@updated by (anon)
@
text
@d458 4
@


1.25
log
@updated by (anon)
@
text
@d454 5
a458 1
<http://www.w3.org/TR/2007/CR-xbl-20070316/#the-style>@


1.24
log
@updated by (anon)
@
text
@d450 5
a454 1
<http://www.w3.org/TR/2013/PR-css-style-attr-20131003/>@


1.23
log
@updated by (anon)
@
text
@d446 5
a450 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130712#l-619>@


1.22
log
@updated by (anon)
@
text
@d442 5
a446 1
<http://html5.org/tools/web-apps-tracker?from=7914&to=7915>@


1.21
log
@updated by (anon)
@
text
@d438 5
a442 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130426#l-1012>@


1.20
log
@updated by (anon)
@
text
@d434 5
a438 1
<http://dev.w3.org/2006/xbl2/Overview.html#style-blocks>@


1.19
log
@updated by (anon)
@
text
@d430 5
a434 1
<http://html5.org/tools/web-apps-tracker?from=7619&to=7620>@


1.18
log
@updated by (anon)
@
text
@d426 5
a430 1
<http://ln.hixie.ch/?start=1042630901&count=1>@


1.17
log
@updated by (anon)
@
text
@d422 5
a426 1
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#InterfaceSVGStyleElement>@


1.16
log
@updated by (anon)
@
text
@d418 5
a422 1
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleAttribute>@


1.15
log
@updated by (anon)
@
text
@d414 5
a418 1
<http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleElement>@


1.14
log
@updated by (anon)
@
text
@d410 5
a414 1
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/032053.html>@


1.13
log
@updated by (anon)
@
text
@d406 5
a410 1
ではなく [CODE(XMLa)@@en[[[source]]]] になっています。@


1.12
log
@updated by (anon)
@
text
@d402 5
@


1.11
log
@updated by (anon)
@
text
@d397 5
@


1.10
log
@updated by (anon)
@
text
@a0 4


* style 要素型 (HTML, XHTML 1)

a396 358

([[名無しさん]])

[[#comment]]


* style 属性 (HTML、SVG、MathML、XUL、VML、OOXML の VML)

[25] [[HTML]] のほとんどの要素型で定義されている
[DFN[[CODE(HTMLa)[style]] 属性]]は、その要素のスタイル情報を指定します。

[26] 仕様書:
- [[HTML 4]]
-- 14.2.1 Setting the default style sheet language
<IW:HTML4:"present/styles.html#default-style">
-- 14.2.2 Inline style information 
<IW:HTML4:"present/styles.html#style-element">
- [SVG 1.1] ''Styling - SVG 1.1 - 20030114'' <http://www.w3.org/TR/SVG11/styling#StyleAttribute>
- [MathML 2.0] ''MathML Fundamentals'' <http://www.w3.org/TR/MathML2/chapter2#fund_globatt>
- [XUL] ''XulPlanet.com - XUL Element Reference'' <http://www.xulplanet.com/references/elemref/ref_XULElement.html#attrblk>
- [i-XHTML] ''DoCoMo Net - iモード対応XHTML'' <http://www.nttdocomo.co.jp/mc-user/i/xhtml/hikaku.html>
- [VML] ''VML - the Vector Markup Language'' <http://www.w3.org/TR/NOTE-VML#_Toc416858384>

[12] [CODE(HTML)[style]] 属性は、ほとんどの [[HTML]],
[[SVG]], [[MathML]], [[XUL]], [[i-XHTML]] 要素にあって、
その要素に適用するスタイル指定を値に持ちます。

[[#comment]]


** 代替

[16] [[XHTML 1.1]] ではこの属性は'''非推奨'''とされています。
[[MathML 2.0]] でもこの属性は'''非推奨'''とされています。

代わりに、外部スタイル・シートを使って指定することができます。

[[#comment]]


** 属性値

[13] この属性の値は、 [CODE(SGML)[%[[StyleSheet]]]]
です。 [[SGML]] 的には [CODE(SGML)[[[CDATA]]]] です。
適当な[[スタイル言語]]によって解釈されます。

[27] この属性は省略可能です。

[[#comment]]


*** 属性値のスタイル言語

[28]
[[HTML 4]] では、
既定スタイル言語 ([CODE(HTTP)[[[Content-Style-Type]]:]] 欄の説明を参照。) 
の構文に従って指定します。

ただし、多くの HTML UA は [[CSS]] ([CODE(MIME)[[[text/css]]]])
に決め打ちしています。

[29] [[SVG]] では、 [CODE(XMLe)[[[svg]]]] 要素の
[CODE(XMLa)[[[contentStyleType]]]] 属性で指定した言語になります。

[30] [[MathML]], [[XUL]] では CSS で固定です。 [[i-XHTML]]
では [[i-CSS]] です。

[31] [[XSL]] のような XML 系スタイル言語を使うことって可能なのでしょうかね?

[[#comment]]


*** CSS

[36] [[CSS2]] の場合、 [CODE(HTMLa)[style]] 
属性値として指定するのは括弧無しの[RUBYB[宣言ブロック構文] [declaration block syntax]]です。
(という一文が [[HTML 4.01]] で一例として追加されました。 [[HTML 4.0]]
ではこの種の説明が一切ありませんでした。)

CSS 側には一切規定がありません (だから HTML 4.01 で慌てて追加したのでしょう)。
構文を拡張する WD [CSSATTR] が古くから提案されていますが、
[[CSS3]] にあわせて勧告になるのか、ならないのか。

- [CSS2] 4.1.8 Declarations and properties
<http://www.w3.org/TR/REC-CSS2/syndata.html#declaration>
- [CSSATTR] ''Syntax of CSS rules in HTML's "style" attribute'' <http://www.w3.org/TR/css-style-attr>

[[#comment]]


** 実装

[32] HTML 4 では [CODE(HTMLa)[style]] 属性を使う時は
[ABBR[CST] [[CODE(HTTP)[Content-Style-Type]]]] の指定が必須なわけですが、
[[Gecko]] は確かに [CODE(HTTP)[Content-Style-Type]] が無指定または [CODE(MIME)[text/css]] 以外だと無視してくれました。
しかし [[WinIE 6]] は遠慮なく適用します。
([[名無しさん]] [WEAK[2004-03-23 06:16:14 +00:00]])

[33] >>32 無指定のときは既定値の [CODE(MIME)[text/css]] となるべき (should)
だから [SUP[ [HTML 4] ]]、よくないんじゃないか?

[35] >>32 の無指定のときの結果は間違いかも。

[[#comment]]


** 他との関係

[23] HTML 4 では、 [CODE(HTMLa)[style]] 属性を使用する時は必ず
[CODE(HTTP)[[[Content-Style-Type]]]] の指定が必要です。

[37] 複数の要素にスタイルを指定するためには、 [CODE(HTMLe)[style]]
要素を使用するべきです。更に、柔軟性のために外部スタイル・シートを使用するべきです。
[SUP[ [HTML 4] ]]

[[#comment]]


** 歴史

[19] ''HTML DTD with support for Style Sheets'' <http://www.w3.org/TR/NOTE-html-970421.html> (HTML 3.2 + Style Sheet) 
はほとんどの要素型に [CODE(HTMLa)[style]] 属性を定義しています。

[57]
[CITE@@en[W3C Chat before XTech 2000: XHTML - a bridge to the Web of the future]] ([[Dan Connolly]] 著, [CODE[2000-02-21 12:36:22 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2000Feb/0203.html>

[CITE[IRC log from 2000-02-25T08:07-0500]] ([CODE[2000-02-26 00:53:02 +09:00]] 版) <http://www.w3.org/2000/02/25-xhtml-irc>
([[名無しさん]])

[58]
>>57 [CODE(HTMLa)@@en[[[style]]]] を削除しようかという議論をしているが特に面白いことはなかった。何か結論を出そうとしているのでもない。
([[名無しさん]])

[59]
[CITE@@en[inline CSS - score so far]] ([[JOrendorff@@ixl.com]] 著, [CODE[2000-02-23 17:52:57 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2000Feb/0317.html>

*** XHTML2

[86] [[XHTML2]] には最初含まれていませんでしたが、第5次案でなぜか
「[RUBYB[強く非推奨]@@en[strongly discouraged]]」としながらも復活しました。

;; [CITE@@en[- XHTML Style Attribute Module]] ([TIME[2003-05-08 01:23:41 +09:00]] 版) <http://www.w3.org/TR/2003/WD-xhtml2-20030506/mod-styleAttribute.html>

** 例

[34] [[CSS]] を使用した例
[PRE(HTML)[
<P style="font-size: 12pt; color: fuchsia">Aren't style sheets wonderful?
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[24]
UA が [ABBR[CST] [[CODE(HTTP)[Content-Style-Type]]]] を正しく扱っているかのテスト:
<http://suika.fam.cx/~wakaba/-temp/test/html/style/>

[[#comment]]


** メモ

[14] [CODE(HTML)[style]] 属性はある特定の要素の表現を制御するのに便利ですが、表現と構造を分離することを考えるとあまり得策ではありません。
(例えば、一つの文書に複数のスタイル・シートを適用させることを考えると、文書そのものにスタイル指定があるのは有害です。)
その問題を理解した上で使う (永続的なスタイルの指定とか。)
のであれば問題はないでしょうが、そうでなければ 
[[i-XHTML]]/[[i-CSS]] のような “[[TagSoup]] の CSS 版”
にしかならない諸刃の剣です。

[11] [[XHTML 2.0]] では採用されない予定です。

[17] [WEAK[2003-05-10 08:36]] ''>>11'': こんどの [[WD]] で復活

[15] さて CSS を値に使う場合の書式は、 HTML 4 も CSS 1
も CSS 2 もその他の規格も、例示で簡単に説明している程度で、
はっきりとは定義していません。現在 [[WD]]
である [CSSATTR] は、
現在の書式を更に柔軟な指定が可能に拡張したものを定義しています。

CSS 以外のスタイル言語で [CODE(HTMLa)[style]] 
属性の値として使う方法を規定したものがあるのかは不明です。

[22] >>15 [CODE(MIME)[[[text/jss]]]] で可能 ([[JIS X 4052]]:2000 5.4.2 を参照。)

[50]
[CITE[公開メモ日記 - JavaScriptによって事後に要素に埋め込む、style属性によるインラインスタイルシートは、これを肯定する]] ([CODE[2007-02-24 02:17:48 +09:00]] 版) <http://knoa.jp/memo/?id=2007-02-19+12:00>
([[名無しさん]] [WEAK[2007-02-23 17:20:53 +00:00]])

[51]
[CITE[公開メモ日記 - JavaScriptによって事後に要素に埋め込む、style属性によるインラインスタイルシートは、これを肯定する]] ([CODE[2007-02-24 02:17:48 +09:00]] 版) <http://knoa.jp/memo/?id=2007-02-19+12:00>
([[名無しさん]] [WEAK[2007-02-23 17:21:12 +00:00]])

[53]
[CODE(XMLe)@@en[[QN[text:[[wrap]]] [http://xmlns.graougraou.com/svg/text/]]]]
has [CODE(XMLa)@@en[[[style]]]].

[54]
[CITE[HTML5 IRC logs: freenode / #whatwg / 20070503]] ([CODE[2007-05-04 21:12:45 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/whatwg/20070503#l-431>
([[名無しさん]] [WEAK[2007-05-04 12:13:34 +00:00]])

[55]
>>54

> 03:31 <Hixie> othermaciej: the current spec is a failed experiment

([[名無しさん]])

[56]

> 03:31 <othermaciej> Hixie: I'm not sure removing style="", allowing it on <font> for WYSIWYG only, and adding scoped <style> addresses any actual requirements

([[名無しさん]])

[60]
[[Opera]] 9 も [[Firefox]] 2 も、 [CODE(DOMm)@@en[[[setAttribute]]]]
で [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]を変更すると勝手に[[属性値]]を[[正規化]]するようです ([CODE(DOMa)@@en[[[cssText]]]] と同じ?)。
([[名無しさん]])

[61]
>>60 [[Opera]] 9 で [[CSS]] として[[非妥当]]な値を与えた場合、
[CODE(CSS)[[[;]]]] が1つでも含まれていれば (その前後が[[妥当]]な[[宣言]]であろうとなかろうと)
無視するみたいです (元の [CODE(HTMLa)@@en[[[style]]]]
[[属性値]]のまま変わりません)。含まれていなければ、
[[属性値]]は[[空文字列]]になるようです。

;; <http://suika.fam.cx/~wakaba/-temp/test/dom/element/set-attr/html/style/>
([[名無しさん]])

[62]
>>61 [[空文字列]]ではなく [CODE(JS)@@en[[[null]]]] かもしれないがよくわからない。
([[名無しさん]])

[74]
[CITE@@en[We don't need the style attribute]] ([[Ian Hickson]] 著, [CODE[2003-01-16 21:19:27 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2003Jan/0277.html>
([[名無しさん]])

[76]
[PRE(HTML bad example code)[
style="color: green;
}
color: red;"
]PRE]

<http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=color%3A%20green%3B%0A%7D%0Acolor%3A%20red%3B%0A%0A;h=XXXXXXXXXX;p=n;x=style-attribute;i=html-div>

[[WinIE 7]] では赤色、それ以外3ブラウザでは緑色。
([[名無しさん]])

[77]
>>60 [[Safari]] 3.1 の動作は正しいです ([CODE(DOMa)@@en[[[cssText]]]]
は正規化済み、 [CODE(DOMm)@@en[[[getAttribute]]]] は元のまま。)

[[Opera]] は 9.27 の時は [CODE(DOMa)@@en[[[cssText]]]] の動作が正しく (正規化済み)、
[CODE(DOMm)@@en[[[getAttribute]]]] の動作が間違っていました (これも正規化済み) が、
9.52 では逆になっていて、 [CODE(DOMa)@@en[[[cssText]]]] の動作は誤り (元のまま)、
[CODE(DOMm)@@en[[[getAttribute]]]] の動作は正しい (元のまま) ようです。
([[名無しさん]])

[78]
>>77 [[Opera]] 9.52 で [CODE(DOMi)@@en[[[CSSStyleDeclaration]]]] 上の[[属性]]を変更すると、
[CODE(DOMa)@@en[[[cssText]]]] や [CODE(DOMa)@@en[[[style]]]]
[[内容属性]]の値は[[空文字列]]になるようです。

;; <http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=p%7B%0D%0Acolor%3A%20reD%3B%0D%0A%7D%3Bt%3B%0D%0Acolor%3A%20green%3B%0D%0Aunknown%20%3B%0D%0A%7D;h=%3Cspan%20onclick%3D%22sd().color%3D'blue'%3Bw(typeof%20(sd().cssText))%3Bu()%3B%22%3EXXXXXXXXXX;p=n;x=svg-style-attribute;i=html-div>

([[名無しさん]])

[79]
>>78 は間違いなので訂正。

変更すると、
- [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]の場合、
-- [CODE(DOMa)@@en[[[cssText]]]] は新しい値になります (正しい)
-- [[内容属性]]は新しい値になります (正しい)
- [[SVG]] の [CODE(XMLa)@@en[[[style]]]] [[属性]]の場合、
-- [CODE(DOMa)@@en[[[cssText]]]] は[[空文字列]]になります (おかしい)
-- [[内容属性]]は新しい値になります (正しい)

([[名無しさん]])

[80]
>>77 [[Opera]] 9.52 は [[SVG]] の [CODE(XMLa)@@en[[[style]]]] [[属性]]についてはどちらも正しい。
([[名無しさん]])

[81]
>>79 どうも、 [[Opera]] 9.52 の [[SVG]] の [CODE(SVGa)@@en[[[style]]]]
[[属性]]に対応する [CODE(DOMa)@@en[[[cssText]]]] は、単に任意の文字列を読み書きできるだけの[[オブジェクト特性]] (初期値は[[空文字列]]) になっているようです。
実際の[[スタイル特性]]の変化に追随しませんし、値を設定しても[[スタイル特性]]には影響しません。
([[名無しさん]])

[82]
>>81 他方、 [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]に対応する
[CODE(DOMa)@@en[[[cssText]]]] は、[CODE(HTMLa)@@en[[[style]]]] [[属性]]を[[文字列]]として[[反映]]しているだけのようです。
値を設定しても、[[文字列]]として[[内容属性]]が変化し、それに追随して[[スタイル特性]]も変化しますが、
[CODE(DOMa)@@en[[[cssText]]]] の値は[[内容属性]]と同じです。
[[スタイル特性]]が変更されるとそれに追随して[[内容属性]]も変化しますが、
[CODE(DOMa)@@en[[[cssText]]]] も同じ値に変化します。(なお、
[[スタイル特性]]を変更したものの、実際には値に変化が起こらない場合 (同じ値を代入した場合など) には[[内容属性]]も [CODE(DOMa)@@en[[[cssText]]]]
も変化しないみたいです。)
([[名無しさん]])

[83]

[PRE(HTML bad example code)[
style="color: red;
};
color: green;"
]PRE]

<http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=color%3A%20red%3B%0A%7D%3B%0Acolor%3A%20green%3B;h=XXXXXXXXXX;p=n;x=style-attribute;i=html-div>

[[Firefox]] 3 と [[WinIE 7]] では緑色 (正しい)。
[[Safari]] 3.1 と [[Opera]] 9.52 では赤色 (間違い)。
([[名無しさん]])


[84]
>>83 [CODE(CSS)[}]] を [CODE(CSS)[}{}]] とか [CODE(CSS)[}{]] とかに変えてみても結果は変わらず。
[[Safari]] と [[Opera]] では一度 [CODE(CSS)[}]] が現れると後はすべて無視されるのか?
([[名無しさん]])


[[#comment]]


* メモ

[85] [[WebKit]] は [CODE(DOMi)@@en[[[Attr]]]] [[オブジェクト]]にもなぜか [CODE(DOMa)@@en[[[style]]]]
[[DOM属性]]があります。、


[87] [CITE[IRC logs: freenode / #whatwg / 20090528]]
([TIME[2009-08-22 22:06:56 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090528#l-455>

[88] [CITE[IRC logs: freenode / #whatwg / 20090625]]
([TIME[2009-09-05 10:49:16 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090625#l-658>

[89] [CITE@@en[CSS Styling Attributes Level 1]]
([TIME[2010-01-22 00:40:34 +09:00]] 版)
<http://www.w3.org/TR/2010/WD-css-style-attr-20100121/>

[90] [CITE@@en[HTML5 Revision Tracker]]
([TIME[2010-03-27 22:15:10 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=4875&to=4876>

[91] 
[PRE(HTML bad example code)[
<p style="border: 3px solid blue" style="color: red">FAIL if text color is red
]PRE]

;; <http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cp%20style%3D%22border%3A%203px%20solid%20blue%22%20style%3D%22color%3A%20red%22%3EFAIL%20if%20text%20color%20is%20red>

[92] >>91 In IE8's IE7 and quirks modes text is red; In IE8 mode text is black.

[93] [CITE@@en[CSS Style Attributes]]
( ([TIME[2010-10-13 03:11:23 +09:00]] 版))
<http://www.w3.org/TR/2010/CR-css-style-attr-20101012/>@


1.9
log
@updated by (anon)
@
text
@d754 5
a758 1
[92] >>91 In IE8's IE7 and quirks modes text is red; In IE8 mode text is black.@


1.8
log
@updated by (anon)
@
text
@d729 26
a754 17


[87] [CITE[IRC logs: freenode / #whatwg / 20090528]]
([TIME[2009-08-22 22:06:56 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090528#l-455>

[88] [CITE[IRC logs: freenode / #whatwg / 20090625]]
([TIME[2009-09-05 10:49:16 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090625#l-658>

[89] [CITE@@en[CSS Styling Attributes Level 1]]
([TIME[2010-01-22 00:40:34 +09:00]] 版)
<http://www.w3.org/TR/2010/WD-css-style-attr-20100121/>

[90] [CITE@@en[HTML5 Revision Tracker]]
([TIME[2010-03-27 22:15:10 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=4875&to=4876>@


1.7
log
@updated by (anon)
@
text
@d741 5
a745 1
<http://www.w3.org/TR/2010/WD-css-style-attr-20100121/>@


1.6
log
@updated by (anon)
@
text
@d737 5
a741 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20090625#l-658>@


1.5
log
@updated by (anon)
@
text
@d733 5
a737 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20090528#l-455>@


1.4
log
@updated by (anon)
@
text
@d729 5
@


1.3
log
@updated by (anon)
@
text
@a535 1
([[名無しさん]])
d537 1
a537 1
[[#comment]]
d539 4
@


1.2
log
@updated by (anon)
@
text
@d722 4
a725 1
* メモ@


1.1
log
@converted from SuikaWiki3 <http://suika.fam.cx/gate/cvs/suikawiki/wikidata/page/7374796C65.txt>
@
text
@d1 713
a713 713


* style 要素型 (HTML, XHTML 1)

[38] [[HTML]] の [DFN[[CODE(HTMLe)[style]] 要素型]]の要素を使うと、
文書の頭部 ([CODE(HTMLe)[[[head]]]]) に[[スタイル・シート]]規則を入れることができます。

[39] 仕様書:
- [[HTML 4]] 
-- [CITE[14.2.3 Header style information: the [CODE(HTMLe)[STYLE]] element]]
<IW:HTML4:"present/styles.html#style-group">
-- [CITE[14.5 Hiding style data from user agents]]
<IW:HTML4:"present/styles.html#hiding">
-- [CITE[Element content]]
<IW:HTML4:"appendix/notes.html#h-B.3.2.1">
- [[XHTML 1.0]]
-- [CSECTION[4.8. Script and Style elements]]
(参考) <IW:XHTML10:"h-4.8">
-- [CSECTION[C.14. Referencing Style Elements when serving as XML]]
(参考) <IW:XHTML10:"C_14">

[3]
:[[局所名]]:[CODE(HTMLe)[style]]
:[[名前空間名]]:[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]]
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:[[内容模型]] ([[HTML 4]]):[CODE(SGML)[[[CDATA]]]]
:内容模型 ([[XHTML 1]]):[CODE(SGML)[[[PCDATA]]]]
:出現できる文脈:[CODE(HTMLe)[[[head]]]] の子供として任意個
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,状態	,出典
,[CODE(HTMLa)[[[class]]]]	,	,(なし)	,[[級]]	,
,[CODE(HTMLa)[[[dir]]]]	,	,(継承)	,[CODE(HTMLa)[title]] [[書字方向]]	,[HTML 4]
,[CODE(HTMLa)[[[disabled]]]]	,	,	,無効化	,非標準
,[CODE(HTMLa)[[[id]]]]	,[[ID]]	,(なし)	,唯一識別子	,
,[CODE(HTMLa)[[[lang]]]]	,	,(継承)	,[CODE(HTMLa)[title]] [[自然言語]]	,[HTML 4]
,[CODE(HTMLa)[[[xml]]:lang]]	,	,(継承)	,自然言語	,[XHTML 1]
,[CODE(HTMLa)[[[media]]]]	,[CODE(SGML)[%[[MediaDesc]]]]	,	,適用媒体	,[HTML 4]
,[CODE(HTMLa)[[[notation]]]]	,[CODE(SGML)[[[NOTATION]]]]	,	,スタイル言語	,[[HTML 3.0]]
,[CODE(HTMLa)[xml:[[space]]]]	,	,[CODE(XML)[[[preserve]]]]	,[[空白]]の扱い	,[XHTML 1.0]
,[CODE(HTMLa)[[[style]]]]	,	,(なし)	,スタイル指定	,
,[CODE(HTMLa)[[[title]]]]	,[CODE(SGML)[%[[Text]]]]	,(なし)	,注釈的題	,[HTML 4]
,[CODE(HTMLa)[[[type]]]]	,[CODE(SGML)[%[[ContentType]]]]	,(必須)	,[[スタイル言語]]	,[HTML 4]
,[CODE(XMLa)[[[xmlns]]]]	,[CODE(URI)[[[http://www.w3.org/1999/xhtml]]]] 固定	,==	,[[名前空間名]]	,W3C 勧告	,[[XHTML m12n]]


[[#comment]]


** 内容


*** 構文

[4] [[XHTML]] になる前の HTML では、 [CODE(HTMLe)[style]]
の[[内容]]は [CODE(SGML)[[[CDATA]]]] と宣言されていました。
これは、 [CODE(SGML)[[[STAGO]]]] ([CODE(char)[<]]) や
[CODE(SGML)[[[ERO]]]] ([CODE(char)[&]]) も含めて[[終了タグ]]までの文字列をすべて
[CODE(HTMLe)[style]] 要素の内容として扱うことを意味します。

ですから、例えば
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
'''<!--'''
   [CODE(HTMLe)[p]] {color: red; background-color: white}
'''-->'''
</[CODE(HTMLe)[style]]>
]PRE]

と記述したとしても、強調した部分は SGML の[[マーク]]ではなく、
単なる[[文字データ]]扱いになり、 SGML の[[注釈宣言]]とは見なされません。
(その一方で、 [CODE(HTMLe)[style]] が [CODE(SGML)[CDATA]]
と知らない古い UA からは注釈宣言に見えるので、中身を隠すことができるのです。)

[5] ところが、 [[XML]] では内容を [CODE(SGML)[CDATA]]
にすることができません。そこで、 [[XHTML 1]] では [CODE(HTMLe)[style]]
の内容は [CODE(XML)[(#[[PCDATA]])*]] と宣言されています。
これは、通常の内容の扱いと同じになる、つまり
[CODE(char)[<]] や [CODE(char)[&]] は [CODE(SGML)[[[stago]]]] などや
[CODE(SGML)[[[ero]]]] などと見なされ得ることを意味します。

この場合、 >>4 の注釈宣言に見える部分は本当に注釈宣言として扱われます。
このままだと [CODE(HTMLe)[style]] は実質空になってしまいます。

意図した通りに解釈させるためには
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
   [CODE(HTMLe)[p]] {color: red; background-color: white}
</[CODE(HTMLe)[style]]>
]PRE]

としなければなりません。 (当然、古い UA から隠すという機能は失われます。)

[6] スタイル・シートの一部として [CODE(char)[<]] や
[CODE(char)[&]] を書きたいとき、 >>4 では (終了タグと見なされてしまう場合を除き)
そのまま書くことができましたが、 >>5 では非[[整形式]]になってしまいます。

しかし、いちいち escape するのが面倒な場合には、
[[[CODE(XML)[CDATA]]区間]]を使って、
[PRE(HTML)[
<[CODE(HTMLe)[style]] [CODE(HTMLa)[type]]="[CODE(MIME)[text/css]]">
 [CODE(XML)['''<!''''''[''''''CDATA''''''[''']]
   /* -- Question of Q & A -- */
   [CODE(HTMLe)[p]] {color: red; background-color: white}
 [CODE(XML)[''']'''''']''''''>''']]
</[CODE(HTMLe)[style]]>
]PRE]

のように書くことができます。 [CODE(XML)[CDATA]] 区間の中では
[CODE(SGML)[[[MSE]]]] ([CODE(XML)[''']''']>]]) 
を除いてそのままの文字データと解釈されます。

[7] なお、 SGML 注釈宣言風の[Q[隠し方]]は HTML の一部ではなく、
スタイル言語の一部です。スタイル言語によっては使えないこともありますから、
注意してください。

[[#comment]]


*** 意味

[42] [CODE(HTMLe)[style]] の内容は、 [CODE(HTMLa)[type]] 
で識別される[[スタイル言語]]によって解釈されます。
構文等もスタイル言語によります。

[[#comment]]


*** CSS

[44] [[CSS]] の仕様書は、 SGML 
の注釈宣言のはじめと終わりのようなものについて次のように述べています。

> CSS style sheets are often embedded in HTML documents, and to be able to 
hide style sheets from older UAs, it is convenient put the style sheets 
inside HTML comments. The HTML comment tokens "<!--" and "-->" may occur 
before, after, and in between the statements. They may have whitespace 
around them. [INS[CSS1 7.1    Forward-compatible parsing <http://www.w3.org/TR/REC-CSS1#forward-compatible-parsing>]]

> [INS[和訳 (参考):]] CSS スタイル・シートはしばしば HTML 文書に埋込まれまして、
古めの UA からスタイル・シートを隠すことができるように、
スタイル・シートを HTML 注釈の中に入れるのが便利です。
HTML 注釈字句 [CODE[<!--]] と [CODE[-->]] は文の前・後・間に出現できます。
そのまわりに空白を入れても構いません。

> CSS also allows the SGML comment delimiters ("<!--" and "-->") in certain 
places, but they do not delimit CSS comments. They are permitted so that 
style rules appearing in an HTML source document (in the STYLE element) may 
be hidden from pre-HTML 3.2 user agents. See the HTML 4.0 specification 
([HTML40]) for more information. [INS[CSS2 4.1.9 Comments <http://www.w3.org/TR/REC-CSS2/syndata.html#comments>]]

> [INS[和訳 (参考):]] CSS はある場所で SGML 注釈区切子
([CODE(SGML)[<!--]] および [CODE(SGML)[-->]])
をも認めていますが、この両者は CSS 注釈を区切るものではありません。
両者を認めることによって、 HTML 原始文書 (の [CODE(HTMLe)[style]] 要素) 
に出現するスタイル規則を HTML 3.2 以前の利用者エージェントから隠すことができます。
詳しくは HTML 4.0 仕様書をご覧ください。

更に、 CSS2 附属書 D の文法規則でも規則など ([[選択子]]等 + 
[CODE(CSS)[{]] 〜 [CODE(CSS)[}]]) 
の部分の外側ならどこにでも書けるように書かれています。

[45] 仕様書の規定を読む限りでは [CODE(HTMLe)[style]] 要素以外の場所で使う時にも
[Q[SGML 注釈区切子]]を書けるように思えますが、
試しに外部スタイル・シートなどで使ってみると正しく処理できない UA
も少なくないようです。

[47]
CSS2 は HTML 4.0 を見よと言っていますが、 HTML 4 には CSS を注釈宣言のようなもので囲んだ例が挙げられているだけです。一体何を見せたかったのでしょうかね?
([[名無しさん]])

[[#comment]]


*** メモ

[46] XHTML では XSL のような XML base のスタイル言語も使えます。
但し、その場合にはもちろん [CODE(XML)[CDATA]] 
マーク区間で包むのは使えませんし、
注釈宣言での隠蔽などもってのほかです。
更に、陽に文書型宣言を行っている場合には適当に [[DTD]]
を書き換える必要があるでしょう。

[21] >>46 もっとも、 XSL は XML 対象のスタイル言語ですから、
たとえ書けたとしても意味がありませんね。で、実質 XML base 
のスタイル言語は他にないですから、どうでも良い問題といえばそれまでではあります。

[[#comment]]


** 応用

[40] [[スタイル・シート]]に対応しないか、または [CODE(HTMLa)[type]]
で指定されたスタイル言語に対応しない UA は、
[CODE(HTMLe)[style]] の内容を隠さなければなりません。
文章の一部としてレンダリングするのは[RUBY[誤り] [エラー]]です。 [SUP[ [HTML 4] ]]

対応していたらレンダリングしても良いようにも読める書き方ですが、
そういう意図ではないはずです。

[41] スタイル言語によっては、 ([[SGML]] の注釈風に記述することで)
HTML 4 非適合 UA で内容がレンダリングされないようにする機能を持つものもあります。

[[#comment]]


** 歴史

[8] 1995/05/06 の [[HTML 3.0]] draft [[DTD]]
では [CODE(HTMLe)[style]] 要素は次のように定義されています。
[PRE(SGML)[
 <!ENTITY % style-notations "dsssl-lite | w3c-style">
 <!NOTATION dsssl-lite PUBLIC
       "ISO/IEC 10179:1995//NOTATION DSSSL Style Language//EN">
      
 <!NOTATION w3c-style PUBLIC 
 --"IETF/RFC nnn//NOTATION W3C Style Language//EN"--
 "ISO/IEC 10179:1995//NOTATION DSSSL Style Language//EN">
 
 <!ELEMENT [CODE(HTMLe)[STYLE]] - O (#PCDATA)>
 <!ATTLIST [CODE(HTMLe)[STYLE]]
     [CODE(HTMLa)[notation]] NOTATION (%style-notations;) #REQUIRED
 >
]PRE]

これを次のようにして使うつもりでした。
[PRE(HTML)[
 <[CODE(HTMLe)[style]] [CODE(HTMLa)[notation]]=dsssl-lite>
   [INS[(DSSSL)]]
 </[CODE(HTMLe)[style]]>
]PRE]

[CODE(HTML)[w3c-style]] はおそらく [[DSSSL]] の subset でしょう。

[1] 1997年1月に勧告された [[HTML 3.2]] 
は将来の版で使用するとして予約だけしています。属性はありませんでした。

HTML 3.2 DTD より:

> [CODE(SGML)[<!ELEMENT [CODE(HTMLe)[STYLE]]  - - CDATA -- placeholder for style info -->]]

[18] その後に発表された ''HTML DTD with support for Style Sheets'' <http://www.w3.org/TR/NOTE-html-970421.html> (HTML 3.2 + StyleSheet) は 
[CODE(HTMLe)[style]] 要素に [CODE(HTMLa)[type]] 属性 (省略可能), 
[CODE(HTMLa)[media]] 属性 (列挙値 
[CODE(SGML)[(print | screen | projection | braille | aural | all)]], 
既定値 [CODE(HTML)[all]]), [CODE(HTMLa)[title]] 属性 (省略可能)
を規定していました。 

[20] 次の ''HTML DTD with support for Style Sheets'' 
<http://www.w3.org/TR/NOTE-html-970531.html> で、
[CODE(HTMLa)[media]] 属性は読点区切りの複数指定が出来るように 
[CODE(SGML)[CDATA]] に改められました。

[49]
[CITE@@en[draft-ietf-html-style-01]] ([CODE[2007-01-28 00:07:26 +09:00]] 版) <http://tools.ietf.org/html/draft-ietf-html-style-01>
([[名無しさん]])

[[#comment]]


** 例

[43] CSS を使った例
[PRE(HTML)[
<HEAD>
 <TITLE>Example of STYLE</TITLE>
 <STYLE type="text/css">
   H1.myclass {border-width: 1px; border: solid; text-align: center}
 </STYLE>
</HEAD>
<BODY>
 <H1 class="myclass"> This H1 is affected by our style </H1>
 <H1> This one is not affected by our style </H1>
</BODY>
]PRE]

[WEAK[(HTML 4 仕様書より、改)]]

[75]
[CITE[菜の花は野沢菜? - 楽天トラベルブログ - 楽天ブログ(Blog)]] ([CODE[2008-06-07 17:21:07 +09:00]] 版) <http://plaza.rakuten.co.jp/travelblog/diary/200604280000/>

The only [CODE(HTMLe)@@en[[[style]]]] element has the [CODE(HTMLa)@@en[[[title]]]]
attribute specified:
[PRE(HTML example code)[
<style type=text/css title="plaza" media="screen,print">
]PRE]

([[名無しさん]])

[[#comment]]


** 他との関係

[48]
[[XHTML]] では、 [[XML]] [[応用]]との互換性のため
[CODE(HTMLe)[style]] 要素に [CODE(HTMLa)[[[id]]]]
属性を指定し、 [CODE(XML)[[[xml-stylesheet]]]]
[[処理指令]]からこれを参照するべきです。
[SRC[XHTML 1.0 C.14]]

[[#comment]]


** メモ

[52]
[CITE[Kid Language Specification]] ([CODE[2007-01-27 21:50:41 +09:00]] 版) <http://www.kid-templating.org/language.html#xml-comments>
([[名無しさん]])

[63]
[[XBL 1]] には [CODE(XMLe)@@en[[[stylesheet]]]] [[要素]]がありますが、
[[外部スタイル・シート]]のためのもので、
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]とは異なります。

([[名無しさん]])

[64]
[[XBL 2.0]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]は、
細部や適用対象が異なりますが、大まかにいえば [[HTML]]
の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じものです。
([[名無しさん]])

[65]
[[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]は、細部が異なりますが、
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じものです。
([[名無しさん]])

[66]
[[SMIL]] の [CODE(XMLe)@@en[[[layout]]]] [[要素]]は、色々違いはありますが
[[HTML]] の [CODE(HTMLe)@@en[[[style]]]] [[要素]]と同じ用途のものです。
([[名無しさん]])

[67]
[[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]で
[CODE(XMLa)@@en[[[type]]]] [[属性]]が指定されなかった場合、
- [[Firefox]] 2 は[[要素]]自体 (だけ) を[[レンダリング]]上無視します。
[CODE(DOMa)@@en[[[sheet]]]] [[属性]]は [CODE(DOM)@@en[[[null]]]]
となります。
- [[Opera]] 9 は [CODE(MIME)@@en[[[text/css]]]] と指定されたかのように[[レンダリング]]します。
[CODE(DOMa)@@en[[[sheet]]]] [[属性]]も値を持ちます。

([[名無しさん]])

[68]
>>67 テスト <http://suika.fam.cx/~wakaba/-temp/test/svg/style/no-type-css-1.xml>
([[名無しさん]])

[69]
[[DOM]] から [[SVG]] の [CODE(XMLe)@@en[[[style]]]] [[要素]]の[[内容]]を変更しても、
[[Opera]] 9 では反映されません。

;; テスト:
<http://suika.fam.cx/~wakaba/-temp/test/svg/style/dynamic-1.xml>

([[名無しさん]])

[70]
[[WinIE 6]] では、 [CODE(HTMLa)@@en[[[type]]]] [[属性]]の値は[[大文字]]または[[小文字]]の
[CODE(MIME)@@en[[[text/css]]]] でなければならず、その他の値が指定された場合、その[[スタイル・シート]]は適用されません。
[[引数]]や[[空白]]も一切含められません。

;; [[空文字列]]であってもいけません。

([[名無しさん]])

[71]
[[Firefox]] 2 では、[CODE(HTMLa)@@en[[[type]]]] [[属性]]で
= [CODE(MIME)[[[;]]]] があれば、それ以降はすべて無視されます。
= [[空白]] (少なくても [CODE(char)[[[U+000A]]]],
[CODE(char)[[[U+000D]]]], [CODE(char)[[[U+0009]]]],
[CODE(char)[[[U+0020]]]]。 [CODE(char)[[[U+000B]]]]
や [CODE(char)[[[U+000C]]]] は不可。) は一切無視されます。
= 残った文字列が[[大文字]]または[[小文字]]で
[CODE(MIME)@@en[[[text/css]]]] または[[空文字列]]なら、[[CSS]]
[[スタイル・シート]]として使われます。
そうでなければ、その[[スタイル・シート]]は適用されません。

([[名無しさん]])

[72]
[[Opera]] 9 は [CODE(HTMLa)@@en[[[type]]]]
[[属性]]の値に関わらず [[CSS]] [[スタイル・シート]]として処理するようです。
([[名無しさん]])

[73]
[CITE[Google Scholar]] ([CODE[2008-03-22 11:26:31 +09:00]] 版) <http://scholar.google.com/intl/ja/>

>
[PRE(HTML invalid example code)[
<style><!--
body,td,a,p,.h{font-family:arial,sans-serif}
.h{color:#224499}
.q{color:#0000cc}
//-->
</style><script><!--
function sf(){document.f.q.focus();}
// -->
</script>
]PRE]

([[名無しさん]])

[[#comment]]


* style 属性 (HTML, XHTML 1, SVG, MathML, XUL, i-XHTML)

[25] [[HTML]] のほとんどの要素型で定義されている
[DFN[[CODE(HTMLa)[style]] 属性]]は、その要素のスタイル情報を指定します。

[26] 仕様書:
- [[HTML 4]]
-- 14.2.1 Setting the default style sheet language
<IW:HTML4:"present/styles.html#default-style">
-- 14.2.2 Inline style information 
<IW:HTML4:"present/styles.html#style-element">
- [SVG 1.1] ''Styling - SVG 1.1 - 20030114'' <http://www.w3.org/TR/SVG11/styling#StyleAttribute>
- [MathML 2.0] ''MathML Fundamentals'' <http://www.w3.org/TR/MathML2/chapter2#fund_globatt>
- [XUL] ''XulPlanet.com - XUL Element Reference'' <http://www.xulplanet.com/references/elemref/ref_XULElement.html#attrblk>
- [i-XHTML] ''DoCoMo Net - iモード対応XHTML'' <http://www.nttdocomo.co.jp/mc-user/i/xhtml/hikaku.html>
- [VML] ''VML - the Vector Markup Language'' <http://www.w3.org/TR/NOTE-VML#_Toc416858384>

[12] [CODE(HTML)[style]] 属性は、ほとんどの [[HTML]],
[[SVG]], [[MathML]], [[XUL]], [[i-XHTML]] 要素にあって、
その要素に適用するスタイル指定を値に持ちます。

[[#comment]]


** 代替

[16] [[XHTML 1.1]] ではこの属性は'''非推奨'''とされています。
[[MathML 2.0]] でもこの属性は'''非推奨'''とされています。

代わりに、外部スタイル・シートを使って指定することができます。

[[#comment]]


** 属性値

[13] この属性の値は、 [CODE(SGML)[%[[StyleSheet]]]]
です。 [[SGML]] 的には [CODE(SGML)[[[CDATA]]]] です。
適当な[[スタイル言語]]によって解釈されます。

[27] この属性は省略可能です。

[[#comment]]


*** 属性値のスタイル言語

[28]
[[HTML 4]] では、
既定スタイル言語 ([CODE(HTTP)[[[Content-Style-Type]]:]] 欄の説明を参照。) 
の構文に従って指定します。

ただし、多くの HTML UA は [[CSS]] ([CODE(MIME)[[[text/css]]]])
に決め打ちしています。

[29] [[SVG]] では、 [CODE(XMLe)[[[svg]]]] 要素の
[CODE(XMLa)[[[contentStyleType]]]] 属性で指定した言語になります。

[30] [[MathML]], [[XUL]] では CSS で固定です。 [[i-XHTML]]
では [[i-CSS]] です。

[31] [[XSL]] のような XML 系スタイル言語を使うことって可能なのでしょうかね?

[[#comment]]


*** CSS

[36] [[CSS2]] の場合、 [CODE(HTMLa)[style]] 
属性値として指定するのは括弧無しの[RUBYB[宣言ブロック構文] [declaration block syntax]]です。
(という一文が [[HTML 4.01]] で一例として追加されました。 [[HTML 4.0]]
ではこの種の説明が一切ありませんでした。)

CSS 側には一切規定がありません (だから HTML 4.01 で慌てて追加したのでしょう)。
構文を拡張する WD [CSSATTR] が古くから提案されていますが、
[[CSS3]] にあわせて勧告になるのか、ならないのか。

- [CSS2] 4.1.8 Declarations and properties
<http://www.w3.org/TR/REC-CSS2/syndata.html#declaration>
- [CSSATTR] ''Syntax of CSS rules in HTML's "style" attribute'' <http://www.w3.org/TR/css-style-attr>

[[#comment]]


** 実装

[32] HTML 4 では [CODE(HTMLa)[style]] 属性を使う時は
[ABBR[CST] [[CODE(HTTP)[Content-Style-Type]]]] の指定が必須なわけですが、
[[Gecko]] は確かに [CODE(HTTP)[Content-Style-Type]] が無指定または [CODE(MIME)[text/css]] 以外だと無視してくれました。
しかし [[WinIE 6]] は遠慮なく適用します。
([[名無しさん]] [WEAK[2004-03-23 06:16:14 +00:00]])

[33] >>32 無指定のときは既定値の [CODE(MIME)[text/css]] となるべき (should)
だから [SUP[ [HTML 4] ]]、よくないんじゃないか?

[35] >>32 の無指定のときの結果は間違いかも。

[[#comment]]


** 他との関係

[23] HTML 4 では、 [CODE(HTMLa)[style]] 属性を使用する時は必ず
[CODE(HTTP)[[[Content-Style-Type]]]] の指定が必要です。

[37] 複数の要素にスタイルを指定するためには、 [CODE(HTMLe)[style]]
要素を使用するべきです。更に、柔軟性のために外部スタイル・シートを使用するべきです。
[SUP[ [HTML 4] ]]

[[#comment]]


** 歴史

[19] ''HTML DTD with support for Style Sheets'' <http://www.w3.org/TR/NOTE-html-970421.html> (HTML 3.2 + Style Sheet) 
はほとんどの要素型に [CODE(HTMLa)[style]] 属性を定義しています。

[57]
[CITE@@en[W3C Chat before XTech 2000: XHTML - a bridge to the Web of the future]] ([[Dan Connolly]] 著, [CODE[2000-02-21 12:36:22 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2000Feb/0203.html>

[CITE[IRC log from 2000-02-25T08:07-0500]] ([CODE[2000-02-26 00:53:02 +09:00]] 版) <http://www.w3.org/2000/02/25-xhtml-irc>
([[名無しさん]])

[58]
>>57 [CODE(HTMLa)@@en[[[style]]]] を削除しようかという議論をしているが特に面白いことはなかった。何か結論を出そうとしているのでもない。
([[名無しさん]])

[59]
[CITE@@en[inline CSS - score so far]] ([[JOrendorff@@ixl.com]] 著, [CODE[2000-02-23 17:52:57 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2000Feb/0317.html>
([[名無しさん]])

[[#comment]]


** 例

[34] [[CSS]] を使用した例
[PRE(HTML)[
<P style="font-size: 12pt; color: fuchsia">Aren't style sheets wonderful?
]PRE]

[WEAK[(HTML 4 仕様書より)]]

[24]
UA が [ABBR[CST] [[CODE(HTTP)[Content-Style-Type]]]] を正しく扱っているかのテスト:
<http://suika.fam.cx/~wakaba/-temp/test/html/style/>

[[#comment]]


** メモ

[14] [CODE(HTML)[style]] 属性はある特定の要素の表現を制御するのに便利ですが、表現と構造を分離することを考えるとあまり得策ではありません。
(例えば、一つの文書に複数のスタイル・シートを適用させることを考えると、文書そのものにスタイル指定があるのは有害です。)
その問題を理解した上で使う (永続的なスタイルの指定とか。)
のであれば問題はないでしょうが、そうでなければ 
[[i-XHTML]]/[[i-CSS]] のような “[[TagSoup]] の CSS 版”
にしかならない諸刃の剣です。

[11] [[XHTML 2.0]] では採用されない予定です。

[17] [WEAK[2003-05-10 08:36]] ''>>11'': こんどの [[WD]] で復活

[15] さて CSS を値に使う場合の書式は、 HTML 4 も CSS 1
も CSS 2 もその他の規格も、例示で簡単に説明している程度で、
はっきりとは定義していません。現在 [[WD]]
である [CSSATTR] は、
現在の書式を更に柔軟な指定が可能に拡張したものを定義しています。

CSS 以外のスタイル言語で [CODE(HTMLa)[style]] 
属性の値として使う方法を規定したものがあるのかは不明です。

[22] >>15 [CODE(MIME)[[[text/jss]]]] で可能 ([[JIS X 4052]]:2000 5.4.2 を参照。)

[50]
[CITE[公開メモ日記 - JavaScriptによって事後に要素に埋め込む、style属性によるインラインスタイルシートは、これを肯定する]] ([CODE[2007-02-24 02:17:48 +09:00]] 版) <http://knoa.jp/memo/?id=2007-02-19+12:00>
([[名無しさん]] [WEAK[2007-02-23 17:20:53 +00:00]])

[51]
[CITE[公開メモ日記 - JavaScriptによって事後に要素に埋め込む、style属性によるインラインスタイルシートは、これを肯定する]] ([CODE[2007-02-24 02:17:48 +09:00]] 版) <http://knoa.jp/memo/?id=2007-02-19+12:00>
([[名無しさん]] [WEAK[2007-02-23 17:21:12 +00:00]])

[53]
[CODE(XMLe)@@en[[QN[text:[[wrap]]] [http://xmlns.graougraou.com/svg/text/]]]]
has [CODE(XMLa)@@en[[[style]]]].

[54]
[CITE[HTML5 IRC logs: freenode / #whatwg / 20070503]] ([CODE[2007-05-04 21:12:45 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/whatwg/20070503#l-431>
([[名無しさん]] [WEAK[2007-05-04 12:13:34 +00:00]])

[55]
>>54

> 03:31 <Hixie> othermaciej: the current spec is a failed experiment

([[名無しさん]])

[56]

> 03:31 <othermaciej> Hixie: I'm not sure removing style="", allowing it on <font> for WYSIWYG only, and adding scoped <style> addresses any actual requirements

([[名無しさん]])

[60]
[[Opera]] 9 も [[Firefox]] 2 も、 [CODE(DOMm)@@en[[[setAttribute]]]]
で [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]を変更すると勝手に[[属性値]]を[[正規化]]するようです ([CODE(DOMa)@@en[[[cssText]]]] と同じ?)。
([[名無しさん]])

[61]
>>60 [[Opera]] 9 で [[CSS]] として[[非妥当]]な値を与えた場合、
[CODE(CSS)[[[;]]]] が1つでも含まれていれば (その前後が[[妥当]]な[[宣言]]であろうとなかろうと)
無視するみたいです (元の [CODE(HTMLa)@@en[[[style]]]]
[[属性値]]のまま変わりません)。含まれていなければ、
[[属性値]]は[[空文字列]]になるようです。

;; <http://suika.fam.cx/~wakaba/-temp/test/dom/element/set-attr/html/style/>
([[名無しさん]])

[62]
>>61 [[空文字列]]ではなく [CODE(JS)@@en[[[null]]]] かもしれないがよくわからない。
([[名無しさん]])

[74]
[CITE@@en[We don't need the style attribute]] ([[Ian Hickson]] 著, [CODE[2003-01-16 21:19:27 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2003Jan/0277.html>
([[名無しさん]])

[76]
[PRE(HTML bad example code)[
style="color: green;
}
color: red;"
]PRE]

<http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=color%3A%20green%3B%0A%7D%0Acolor%3A%20red%3B%0A%0A;h=XXXXXXXXXX;p=n;x=style-attribute;i=html-div>

[[WinIE 7]] では赤色、それ以外3ブラウザでは緑色。
([[名無しさん]])

[77]
>>60 [[Safari]] 3.1 の動作は正しいです ([CODE(DOMa)@@en[[[cssText]]]]
は正規化済み、 [CODE(DOMm)@@en[[[getAttribute]]]] は元のまま。)

[[Opera]] は 9.27 の時は [CODE(DOMa)@@en[[[cssText]]]] の動作が正しく (正規化済み)、
[CODE(DOMm)@@en[[[getAttribute]]]] の動作が間違っていました (これも正規化済み) が、
9.52 では逆になっていて、 [CODE(DOMa)@@en[[[cssText]]]] の動作は誤り (元のまま)、
[CODE(DOMm)@@en[[[getAttribute]]]] の動作は正しい (元のまま) ようです。
([[名無しさん]])

[78]
>>77 [[Opera]] 9.52 で [CODE(DOMi)@@en[[[CSSStyleDeclaration]]]] 上の[[属性]]を変更すると、
[CODE(DOMa)@@en[[[cssText]]]] や [CODE(DOMa)@@en[[[style]]]]
[[内容属性]]の値は[[空文字列]]になるようです。

;; <http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=p%7B%0D%0Acolor%3A%20reD%3B%0D%0A%7D%3Bt%3B%0D%0Acolor%3A%20green%3B%0D%0Aunknown%20%3B%0D%0A%7D;h=%3Cspan%20onclick%3D%22sd().color%3D'blue'%3Bw(typeof%20(sd().cssText))%3Bu()%3B%22%3EXXXXXXXXXX;p=n;x=svg-style-attribute;i=html-div>

([[名無しさん]])

[79]
>>78 は間違いなので訂正。

変更すると、
- [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]の場合、
-- [CODE(DOMa)@@en[[[cssText]]]] は新しい値になります (正しい)
-- [[内容属性]]は新しい値になります (正しい)
- [[SVG]] の [CODE(XMLa)@@en[[[style]]]] [[属性]]の場合、
-- [CODE(DOMa)@@en[[[cssText]]]] は[[空文字列]]になります (おかしい)
-- [[内容属性]]は新しい値になります (正しい)

([[名無しさん]])

[80]
>>77 [[Opera]] 9.52 は [[SVG]] の [CODE(XMLa)@@en[[[style]]]] [[属性]]についてはどちらも正しい。
([[名無しさん]])

[81]
>>79 どうも、 [[Opera]] 9.52 の [[SVG]] の [CODE(SVGa)@@en[[[style]]]]
[[属性]]に対応する [CODE(DOMa)@@en[[[cssText]]]] は、単に任意の文字列を読み書きできるだけの[[オブジェクト特性]] (初期値は[[空文字列]]) になっているようです。
実際の[[スタイル特性]]の変化に追随しませんし、値を設定しても[[スタイル特性]]には影響しません。
([[名無しさん]])

[82]
>>81 他方、 [[HTML]] の [CODE(HTMLa)@@en[[[style]]]] [[属性]]に対応する
[CODE(DOMa)@@en[[[cssText]]]] は、[CODE(HTMLa)@@en[[[style]]]] [[属性]]を[[文字列]]として[[反映]]しているだけのようです。
値を設定しても、[[文字列]]として[[内容属性]]が変化し、それに追随して[[スタイル特性]]も変化しますが、
[CODE(DOMa)@@en[[[cssText]]]] の値は[[内容属性]]と同じです。
[[スタイル特性]]が変更されるとそれに追随して[[内容属性]]も変化しますが、
[CODE(DOMa)@@en[[[cssText]]]] も同じ値に変化します。(なお、
[[スタイル特性]]を変更したものの、実際には値に変化が起こらない場合 (同じ値を代入した場合など) には[[内容属性]]も [CODE(DOMa)@@en[[[cssText]]]]
も変化しないみたいです。)
([[名無しさん]])

[83]

[PRE(HTML bad example code)[
style="color: red;
};
color: green;"
]PRE]

<http://suika.fam.cx/gate/2007/cssom/viewer.en.html?c=color%3A%20red%3B%0A%7D%3B%0Acolor%3A%20green%3B;h=XXXXXXXXXX;p=n;x=style-attribute;i=html-div>

[[Firefox]] 3 と [[WinIE 7]] では緑色 (正しい)。
[[Safari]] 3.1 と [[Opera]] 9.52 では赤色 (間違い)。
([[名無しさん]])


[84]
d715 7
a721 7
[[Safari]] と [[Opera]] では一度 [CODE(CSS)[}]] が現れると後はすべて無視されるのか?
([[名無しさん]])


[[#comment]]


@

