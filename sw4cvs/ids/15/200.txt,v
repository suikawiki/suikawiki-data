head	1.36;
access;
symbols
	suika-20100509:1.5;
locks; strict;
comment	@# @;
expand	@b@;


1.36
date	2014.04.16.05.12.21;	author wakaba;	state Exp;
branches;
next	1.35;

1.35
date	2014.04.15.09.16.46;	author wakaba;	state Exp;
branches;
next	1.34;

1.34
date	2014.01.15.15.32.37;	author wakaba;	state Exp;
branches;
next	1.33;

1.33
date	2014.01.08.00.15.30;	author wakaba;	state Exp;
branches;
next	1.32;

1.32
date	2013.10.01.12.02.11;	author wakaba;	state Exp;
branches;
next	1.31;

1.31
date	2013.10.01.12.00.04;	author wakaba;	state Exp;
branches;
next	1.30;

1.30
date	2013.10.01.11.50.58;	author wakaba;	state Exp;
branches;
next	1.29;

1.29
date	2013.09.16.03.18.00;	author wakaba;	state Exp;
branches;
next	1.28;

1.28
date	2013.08.24.01.11.40;	author wakaba;	state Exp;
branches;
next	1.27;

1.27
date	2013.08.20.10.58.34;	author wakaba;	state Exp;
branches;
next	1.26;

1.26
date	2013.08.20.10.53.38;	author wakaba;	state Exp;
branches;
next	1.25;

1.25
date	2013.08.19.11.36.18;	author wakaba;	state Exp;
branches;
next	1.24;

1.24
date	2013.08.17.07.17.23;	author wakaba;	state Exp;
branches;
next	1.23;

1.23
date	2013.08.17.02.14.04;	author wakaba;	state Exp;
branches;
next	1.22;

1.22
date	2013.08.09.13.14.42;	author wakaba;	state Exp;
branches;
next	1.21;

1.21
date	2012.11.29.00.04.07;	author wakaba;	state Exp;
branches;
next	1.20;

1.20
date	2012.11.29.00.03.27;	author wakaba;	state Exp;
branches;
next	1.19;

1.19
date	2012.11.25.13.26.31;	author wakaba;	state Exp;
branches;
next	1.18;

1.18
date	2011.04.02.14.59.20;	author wakaba;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.06.23.13.26;	author wakaba;	state Exp;
branches;
next	1.16;

1.16
date	2011.03.06.23.05.08;	author wakaba;	state Exp;
branches;
next	1.15;

1.15
date	2011.03.06.10.09.43;	author wakaba;	state Exp;
branches;
next	1.14;

1.14
date	2011.03.06.06.55.33;	author wakaba;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.06.05.07.22;	author wakaba;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.06.01.42.06;	author wakaba;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.06.01.34.19;	author wakaba;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.06.01.20.50;	author wakaba;	state Exp;
branches;
next	1.9;

1.9
date	2011.03.06.01.19.05;	author wakaba;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.06.01.14.47;	author wakaba;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.16.13.22.21;	author wakaba;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.17.11.19.11;	author wakaba;	state Exp;
branches;
next	1.5;

1.5
date	2010.02.06.04.18.10;	author wakaba;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.12.14.21.51;	author wakaba;	state Exp;
branches;
next	1.3;

1.3
date	2009.10.12.14.21.08;	author wakaba;	state Exp;
branches;
next	1.2;

1.2
date	2009.10.12.14.19.35;	author wakaba;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.12.14.19.28;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.36
log
@updated by (anon)
@
text
@[15] [DFN@@en[[[IDNA]]]] ([DFN@@en[Internationalizing Domain Names in Applications]])
は、 [[IDN]] ([[国際化ドメイン名]]) を[[インターネット]]の様々な[[アプリケーション]]で扱うための技術です。

[17] [[IDNA]] では、既存の[[プロトコル]]や実働しているシステムへの変更無しで [[IDN]]
を扱うために、 [[IDN]] を [[ASCII文字]]に転写し、 [[IDN]] と [[ASCII]] 
の[[ドメイン名]]との変換を末端の[[アプリケーション]]内で行います。この [[ASCII文字]]への転写法としては
[[Punycode]] が採用されています。

* 版

[16] [[IDNA]] には2つの (非互換な) 版があります。

- [13] [[IDNA2003]]
- [14] [[IDNA2008]]

* テスト・ケース

[30] [CITE[Nameprep and IDNA Test Vectors]]
( ([TIME[2011-03-07 08:02:42 +09:00]] 版))
<http://www.gnu.org/software/libidn/draft-josefsson-idn-test-vectors.html>

[31] 
[CITE@@en-US[Savannah Git Hosting - libidn.git/tree - tests/]]
<http://git.savannah.gnu.org/gitweb/?p=libidn.git;a=tree;f=tests>

* 実装

[29] [CITE[Net::IDN::Encode - search.cpan.org]]
<http://search.cpan.org/dist/Net-IDN-Encode/lib/Net/IDN/Encode.pm>

* メモ

[12] [CITE@@en[RFC 5992 - Internationalized Domain Names Registration and Administration Guidelines for European Languages Using Cyrillic]]
([TIME[2010-10-05 09:48:08 +09:00]] 版)
<http://tools.ietf.org/html/rfc5992>


[32] [CITE[IRC logs: freenode / #whatwg / 20121107]]
( ([TIME[2012-11-25 12:45:34 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20121107#l-633>

[33] [CITE[Updating RFC 5890-5893 (IDNA 2008) to Full Standard]]
( ([TIME[2012-11-09 00:27:02 +09:00]] 版))
<http://www.alvestrand.no/pipermail/idna-update/2012-November/007450.html>

[34] [CITE[URL: IDNA2008 — Anne’s Blog]]
( ([TIME[2012-11-29 09:02:36 +09:00]] 版))
<http://annevankesteren.nl/2012/09/idna2008>

[35] [CITE@@en[RFC 6912 - Principles for Unicode Code Point Inclusion in Labels in the DNS]]
( ([TIME[2013-07-31 04:26:59 +09:00]] 版))
<http://tools.ietf.org/html/rfc6912>

[36] [CITE[IRC logs: freenode / #whatwg / 20130813]]
( ([TIME[2013-08-14 23:34:42 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130813#l-558>

[37] [CITE[IRC logs: freenode / #whatwg / 20130816]]
( ([TIME[2013-08-17 16:16:01 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130816#l-62>

[38] [CITE[''''''[''''''whatwg'''''']'''''' URL standard: Query string parsing; host parsing]]
( ([TIME[2013-08-19 10:56:48 +09:00]] 版))
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2013-August/040504.html>

[39] [CITE[IRC logs: freenode / #whatwg / 20130819]]
( ([TIME[2013-08-20 19:40:50 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130819>

[40] [CITE[URL: IDNA2003 — Anne’s Blog]]
( ([TIME[2013-08-20 19:56:56 +09:00]] 版))
<http://annevankesteren.nl/2013/08/idna2003>

[41] [CITE@@en[Re: Standardizing on IDNA 2003 in the URL Standard]]
( ([[Anne van Kesteren]] 著, [TIME[2013-08-20 21:32:23 +09:00]] 版))
<http://lists.w3.org/Archives/Public/www-tag/2013Aug/0085.html>

[42] [CITE[IRC logs: freenode / #whatwg / 20130912]]
( ([TIME[2013-09-15 16:17:53 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130912#l-744>

[43] [CITE[Issue 23642003: Support IDNA 2008 - Code Review]]
( ([TIME[2013-10-01 20:50:21 +09:00]] 版))
<https://codereview.chromium.org/23642003>

[44] [CITE@@en[479520 – (IDNA2008) Implement new IDNA2008 standards]]
( ([TIME[2013-10-01 20:50:45 +09:00]] 版))
<https://bugzilla.mozilla.org/show_bug.cgi?id=479520>

[45] [CITE@@en[How does IE handle the IDN2008 RFCs? - I'm not a Klingon (<span style="font-family:pIqaD,code2000;"> </span>) - Site Home - MSDN Blogs]]
( ([TIME[2013-10-01 20:56:41 +09:00]] 版))
<http://blogs.msdn.com/b/shawnste/archive/2013/09/09/how-does-ie-handle-the-idn2008-rfcs.aspx>

[46] [CITE@@en[Web Applications 1.0 r8381 Defer to URL spec for IDNA stuff.]]
( ([TIME[2014-01-08 06:12:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8380&to=8381>

[47] [CITE@@en[Bug 23009 – Unicode normalization can produce / code points in domain names]]
( ([TIME[2014-01-16 00:31:55 +09:00]] 版))
<https://www.w3.org/Bugs/Public/show_bug.cgi?id=23009>

[48] [CITE[IRC logs: freenode / #whatwg / 20140414]]
( ([TIME[2014-04-15 17:34:13 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140414>

[49] [CITE[IRC logs: freenode / #whatwg / 20140415]]
( ([TIME[2014-04-16 14:05:04 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140415>@


1.35
log
@updated by (anon)
@
text
@d104 5
a108 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20140414>@


1.34
log
@updated by (anon)
@
text
@d100 5
a104 1
<https://www.w3.org/Bugs/Public/show_bug.cgi?id=23009>@


1.33
log
@updated by (anon)
@
text
@d96 5
a100 1
<http://html5.org/tools/web-apps-tracker?from=8380&to=8381>@


1.32
log
@updated by (anon)
@
text
@d92 5
a96 1
<http://blogs.msdn.com/b/shawnste/archive/2013/09/09/how-does-ie-handle-the-idn2008-rfcs.aspx>@


1.31
log
@updated by (anon)
@
text
@d88 5
a92 1
<https://bugzilla.mozilla.org/show_bug.cgi?id=479520>@


1.30
log
@updated by (anon)
@
text
@d84 5
a88 1
<https://codereview.chromium.org/23642003>@


1.29
log
@updated by (anon)
@
text
@d80 5
a84 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130912#l-744>@


1.28
log
@updated by (anon)
@
text
@d76 5
a80 1
<http://lists.w3.org/Archives/Public/www-tag/2013Aug/0085.html>@


1.27
log
@updated by (anon)
@
text
@d72 5
a76 1
<http://annevankesteren.nl/2013/08/idna2003>@


1.26
log
@updated by (anon)
@
text
@d68 5
a72 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130819>@


1.25
log
@updated by (anon)
@
text
@d64 5
a68 1
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2013-August/040504.html>@


1.24
log
@updated by (anon)
@
text
@d60 5
a64 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130816#l-62>@


1.23
log
@updated by (anon)
@
text
@d56 5
a60 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20130813#l-558>@


1.22
log
@updated by (anon)
@
text
@d52 5
a56 1
<http://tools.ietf.org/html/rfc6912>@


1.21
log
@updated by (anon)
@
text
@d48 5
a52 1
<http://annevankesteren.nl/2012/09/idna2008>@


1.20
log
@updated by (anon)
@
text
@d44 5
a48 1
<http://www.alvestrand.no/pipermail/idna-update/2012-November/007450.html>@


1.19
log
@updated by (anon)
@
text
@d40 5
a44 1
<http://krijnhoetmer.nl/irc-logs/whatwg/20121107#l-633>@


1.18
log
@updated by (anon)
@
text
@d36 5
@


1.17
log
@updated by (anon)
@
text
@d7 1
a7 3
[[Punycode]] が採用されています。また、似た[[文字]]の[[正規化]]の方法として
[[Nameprep]] が規定されています。 [[IDNA]] を実装するには、 [[Punycode]] と [[Nameprep]]
を実装しなければ[['''なりません''']] [SRC[[[RFC 3490]] 1.3]]。
a15 27
* 演算

** ドメイン名に対する演算

[27] [[ドメイン名]]は次のように処理します。

= [21] まず、 [[ASCII]] や [[Unicode]] で[[符号化]]されていない文字列なら、
[[Unicode]] に変換します。
= [22] [[Stringprep]] でいうところの[[蓄積文字列]]と[[照合文字列]]のいずれかを決定します。
-- [[照合文字列]]であるなら、 [[AllowUnassigned]] [[フラグ]]を設定します。
= [23] [[ラベル分離子]]によって[[ドメイン名]]をそれぞれの[[ラベル]]に分割します。
= [24] 各[[ラベル]]に対して、 [[STD 3]] における[[ホスト名]]の [[ASCII文字]]に関する制限を適用するかどうかを決めます。
-- これは [[IDNA]] 以前から必要な作業であり、 [[IDNA]] 仕様はどちらにするか特に推奨するものではない、とされています。
-- この制限を適用するなら、 [[UseSTD3ASCIIRules]] [[フラグ]]を設定します。
= [25] [[ToASCII]] と [[ToUnicode]] のどちらか、適切な方を適用します。
= [26] [[ToASCII]] を適用したなら、[[ラベル分離子]]をすべて [CODE(char)[[[U+002E]]]]
[CODE(charname)@@en[[[FULL STOP]]]] に置き換えます。

;; [28] [[RFC 3490]] <http://tools.ietf.org/html/rfc3490#section-4>

** ラベルに対する演算

[18] [[IDNA]] では[[ラベル]]に対して次の2つの[[演算]]が定義されています。

- [19] [[ToASCII]]
- [20] [[ToUnicode]]

@


1.16
log
@updated by (anon)
@
text
@d45 15
d64 1
a64 9
<http://tools.ietf.org/html/rfc5992>

[29] [CITE[Net::IDN::Encode - search.cpan.org]]
( ([TIME[2011-03-06 19:09:37 +09:00]] 版))
<http://search.cpan.org/dist/Net-IDN-Encode/lib/Net/IDN/Encode.pm>

[30] [CITE[Nameprep and IDNA Test Vectors]]
( ([TIME[2011-03-07 08:02:42 +09:00]] 版))
<http://www.gnu.org/software/libidn/draft-josefsson-idn-test-vectors.html>@


1.15
log
@updated by (anon)
@
text
@d53 5
a57 1
<http://search.cpan.org/dist/Net-IDN-Encode/lib/Net/IDN/Encode.pm>@


1.14
log
@updated by (anon)
@
text
@d49 5
a53 1
<http://tools.ietf.org/html/rfc5992>@


1.13
log
@updated by (anon)
@
text
@d8 1
a8 1
[[Stringprep]] が規定されています。 [[IDNA]] を実装するには、 [[Punycode]] と [[Stringprep]]
@


1.12
log
@updated by (anon)
@
text
@d20 21
a40 1
[18] [[IDNA]] では次の2つの[[演算]]が定義されています。
@


1.11
log
@updated by (anon)
@
text
@d11 2
d18 7
@


1.10
log
@updated by (anon)
@
text
@d4 7
@


1.9
log
@updated by (anon)
@
text
@a10 19
[1] [CITE@@en-us[UTS #46: Unicode IDNA Compatible Preprocessing]]
([TIME[2008-12-10 08:56:55 +09:00]] 版)
<http://www.unicode.org/reports/tr46/tr46-1.html>

[2] [CITE@@en-us[Unicode IDNA Compatible Preprocesssing]]
([TIME[2009-09-30 06:24:51 +09:00]] 版)
<http://www.unicode.org/reports/tr46/tr46-2.html>

[3] [CITE@@en[draft-ietf-idnabis-mappings-04 - Mapping Characters in IDNA]]
([TIME[2009-09-29 08:04:24 +09:00]] 版)
<http://tools.ietf.org/html/draft-ietf-idnabis-mappings>

[4] しかしなんで連中はこう、[[非互換変更]]が好きなのかねぇ。

[5] [CITE[Security Degradations with IDNA2008 (Macchiato)]]
([TIME[2010-01-29 03:18:08 +09:00]] 版)
<http://www.macchiato.com/unicode/idna/security-issues>


@


1.8
log
@updated by (anon)
@
text
@d1 5
@


1.7
log
@updated by (anon)
@
text
@d1 2
a2 8
* 仕様書

- [6] [CITE@@en[RFC 5890 - Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework]] ([TIME[2010-08-05 01:32:35 +09:00]] 版) <http://tools.ietf.org/html/rfc5890>
- [7] [CITE@@en[RFC 5891 - Internationalized Domain Names in Applications (IDNA): Protocol]] ([TIME[2010-08-05 01:32:40 +09:00]] 版) <http://tools.ietf.org/html/rfc5891>
- [8] [CITE@@en[RFC 5892 - The Unicode Code Points and Internationalized Domain Names for Applications (IDNA)]] ([TIME[2010-08-05 01:32:32 +09:00]] 版) <http://tools.ietf.org/html/rfc5892>
- [9] [CITE@@en[RFC 5893 - Right-to-Left Scripts for Internationalized Domain Names for Applications (IDNA)]] ([TIME[2010-08-05 01:32:45 +09:00]] 版) <http://tools.ietf.org/html/rfc5893>
- [10] [CITE@@en[RFC 5894 - Internationalized Domain Names for Applications (IDNA): Background, Explanation, and Rationale]] ([TIME[2010-08-05 01:32:43 +09:00]] 版) <http://tools.ietf.org/html/rfc5894>
- [11] [CITE@@en[RFC 5895 - Mapping Characters for Internationalized Domain Names in Applications (IDNA) 2008]] ([TIME[2010-09-15 04:55:59 +09:00]] 版) <http://tools.ietf.org/html/rfc5895>
d23 4
a26 4


[12] [CITE@@en[RFC 5992 - Internationalized Domain Names Registration and Administration Guidelines for European Languages Using Cyrillic]]
([TIME[2010-10-05 09:48:08 +09:00]] 版)
@


1.6
log
@updated by (anon)
@
text
@d29 5
@


1.5
log
@updated by (anon)
@
text
@d1 11
d24 5
a28 5
[4] しかしなんで連中はこう、[[非互換変更]]が好きなのかねぇ。

[5] [CITE[Security Degradations with IDNA2008 (Macchiato)]]
([TIME[2010-01-29 03:18:08 +09:00]] 版)
<http://www.macchiato.com/unicode/idna/security-issues>@


1.4
log
@updated by (anon)
@
text
@d13 5
a17 1
[4] しかしなんで連中はこう、[[非互換変更]]が好きなのかねぇ。@


1.3
log
@updated by (anon)
@
text
@d1 13
a13 11
[1] [CITE@@en-us[UTS #46: Unicode IDNA Compatible Preprocessing]]
([TIME[2008-12-10 08:56:55 +09:00]] 版)
<http://www.unicode.org/reports/tr46/tr46-1.html>

[2] [CITE@@en-us[Unicode IDNA Compatible Preprocesssing]]
([TIME[2009-09-30 06:24:51 +09:00]] 版)
<http://www.unicode.org/reports/tr46/tr46-2.html>

[3] [CITE@@en[draft-ietf-idnabis-mappings-04 - Mapping Characters in IDNA]]
([TIME[2009-09-29 08:04:24 +09:00]] 版)
<http://tools.ietf.org/html/draft-ietf-idnabis-mappings>@


1.2
log
@updated by (anon)
@
text
@d7 5
a11 1
<http://www.unicode.org/reports/tr46/tr46-2.html>@


1.1
log
@created by (anon)
@
text
@d3 5
a7 1
<http://www.unicode.org/reports/tr46/tr46-1.html>@

