head	1.1;
access;
symbols
	suika-20100509:1.1
	before-graph-20090923:1.1;
locks; strict;
comment	@# @;
expand	@b@;


1.1
date	2008.11.21.20.30.00;	author wakaba;	state Exp;
branches;
next	;


desc
@@


1.1
log
@converted from SuikaWiki3 <http://suika.fam.cx/gate/cvs/suikawiki/wikidata/page/5375696B6157696B69.ns/57696B6956696577.ns/31.ns/3139.txt>
@
text
@#?SuikaWiki/0.9
- Subject: HTTP/1.0 だと「データがありません」と言われる
- Priority: normal
- Status: open
- Category: SuikaWiki
- Creation-Date: 2003-06-01T01:42:11+00:00

[1] [[Mozilla]] で HTTP/1.0 にして使っていると、なぜか「データがありません」と言われることがあります。

表示結果は問題ないように見えます。 [[HTTP/1.1]] にしたらこの問題はおきません。 ([[串]]は使ってません。)

原因は全く分かりません。
- [2] 言われる時といわれない時があるのですが、よく分かりません。
- [3] >>2 css mode が絡んでいるような器もするんですが、正常に見えますし・・・。

[4] ちょっと試してみましたが、さっぱりわかりません。
Mozilla 1.3 で発生しますが、 WinIE 6 では普通です。
いずれも、 HTTP/1.1 なら問題ないようです。

>>3 mode によらず発生します。

link 要素とか object 要素とかで2次的に資源を得る時に発生するようです。そのような要素をすべて取り除くと発生しなくなります。

で、次の要素が影響している疑いがありましたが、
どれも証拠不十分な状態です。再現率はそれ程高くなかったり、
あるときは何度でも再現するのにあるときは全然しなかったりです。
-出力内容の形式に依存?
--[[text/css]] でも [[image/png]] でも [[text/html]] でも全然関係ないらしい。
-[[内容折衝]]があると生じる?
--[[Content-Location:]] と [[Vary:]] が両方あると生じる?
---[CODE(HTTP)[Vary:]] に、
----[CODE(HTTP)[negotiate]] が含まれると発生?
-----[CODE(HTTP)[Negotiate]] なら発生しない (ように見えた。のちに否定)
-----[CODE(HTTP)[n]] なら発生しないが [CODE(HTTP)[ne]] なら発生する (ように見えた。のちに否定)
-----なら発生しないが [CODE(HTTP)[ne]] や [CODE(HTTP)[nE]] や [CODE(HTTP)[NE]] なら発生する (ように見えた。のちに否定)
---結局、これらの有無はあまり関係ないらしい。
----双方があると発生率が高まる? (真偽不明)
---特に [CODE(HTTP)[Content-Location:]] の値は全く影響ないと思われ
-ブラウザのキャッシュが影響?
--キャッシュ消去直後''だ''と発生率が高まる (こともある)
--キャッシュ消去直後''でない''と発生率が高い? (こともある)
--→結局因果不明
-他のサイトでは同様の問題は生じるか?
--今のところ発生せず。
-もしかして本当に内容が出力されてないんじゃ?
--今のところ確認できず。スタイルや画像が適用されている以上、ちゃんと送られていて、 Moz も受け取っているのでは??

[[Bugzilla]] で探してみましたが、似たような bug
は fix されたことになってます。
- [5] ダミーデータを必ず出力するようにしても内容ないって言われるから、出力されてないわけじゃないとおもわれ
- [6] どんな頑張っても Moz 1.3 + HTTP/1.1 や WinIE では再現できないんだけど、やっぱり Moz + HTTP/1.0 の bug なのかなあ? でもそれにしてはほかのサイトで再現できないのが謎なんだけど。
- [7] >>6 Moz 1.4b でも同じでした。
- [8] [CODE[Enable [[Keep-Alive]]]] っていう option は問題発生の有無に無関係の模様。
- [9] Mozilla [[Firebird]] 0.6 で試してみたら、問題ありませんでした。但し本当に効いているのかは分かりません。 (Firebird の GUI の設定項目に HTTP の版切り替えはないから。)
- [10] >>9 が本当に効いているのだとしたら、 Mozilla ([[Gecko]] とかではなく、 Mozilla。) の不具合の可能性が高くなります。
- [11] キャッシュを消したすぐ後でなる確率が高いような。
- [12] HTTP/1.1 を使うという解決策があるんですが、釈然としませんねぇ。
@
