* 仕様書

[REFS[
- [12] [CITE@en-US[DOM Standard]] ([TIME[2015-01-14 18:37:27 +09:00]] 版) <https://dom.spec.whatwg.org/#canceled-flag>
- [6] [CITE@en-US[DOM Standard]] ([TIME[2015-01-14 18:37:27 +09:00]] 版) <https://dom.spec.whatwg.org/#dom-event-cancelable>
- [8] [CITE@en-US[DOM Standard]] ([TIME[2015-01-14 18:37:27 +09:00]] 版) <https://dom.spec.whatwg.org/#dom-event-preventdefault>
- [11] [CITE@en-US[DOM Standard]] ([TIME[2015-01-14 18:37:27 +09:00]] 版) <https://dom.spec.whatwg.org/#dom-event-defaultprevented>
- [13] [CITE@en-US[DOM Standard]] ([TIME[2015-01-14 18:37:27 +09:00]] 版) <https://dom.spec.whatwg.org/#concept-event-dispatch>
]REFS]

* 取り消し可能性

[7] [[イベントオブジェクト]]は、[[取り消し可能]]かどうかの状態を持ちます。
[CODE(DOMa)@en[[[cancelable]]]] [[IDL属性]]は、初期化時に与えられた値を返さなければ[['''なりません''']] [SRC[>>6]]。

;; 初期化後にこれを変更することはできません。

* 取り消し

[10] [[イベントオブジェクト]]は、[DFN[[RUBYB[[[取り消し済みフラグ]]]@en[canceled flag]]]]なる状態を持ちます [SRC[>>12]]。
初期値は未設定です [SRC[>>12]]。 [DFN[[CODE(DOMa)@en[[[defaultPrevented]]]]]]
[[IDL属性]]は、[[取り消し済みフラグ]]が設定されているか否かを返さなければ[['''なりません''']]
[SRC[>>11]]。

[9] [[イベントオブジェクト]]の [DFN[[CODE(DOMm)@en[[[preventDefault]]]]]] [[メソッド]]は、
[[取り消し可能]]なら、[[取り消し済みフラグ]]を設定しなければ[['''なりません''']]
[SRC[>>8]]。

[15] [[イベントハンドラー]]が[[偽]]を返した時も、
[[取り消し済みフラグ]]が設定されます。

;; [[イベントハンドラー]]を参照。

[14] [[イベント]]の [[dispatch]] は、[[イベントリスナー]]を実行し終えたら、
[[イベント]]の[[取り消し済みフラグ]]が設定されていれば[[偽]]、
設定されていなければ[[真]]を返さなければ[['''なりません''']] [SRC[>>13]]。
つまり、 [[dispatch]] は取り消されなかったかどうかを返します。

* 歴史

[5] [CITE[Bug 127903 &#8211; <a> link tags intercept events meant for form submit buttons]] ([TIME[2007-02-17 21:54:24 +09:00]] 版) <https://bugzilla.mozilla.org/show_bug.cgi?id=127903>
([[名無しさん]] [WEAK[2007-02-17 13:00:51 +00:00]])

[4] [CITE@en[WICD Core 1.0]]
( ([TIME[2010-08-17 16:51:00 +09:00]] 版))
<http://www.w3.org/TR/WICD/#hyperlinking>

[1]
[CITE[Safari の event.stopPropagation() や event.preventDefault() がウソ実装のままである件 ]] <http://www.remus.dti.ne.jp/~a-satomi/nikki/2005/06a.html#d27n03>
([[名無しさん]] [sage] [WEAK[2005-06-26 23:06:31 +00:00]])

[2]
[[WinIE7]] は [CODE(DOMm)@en[[[preventDefault]]]] を実装していません。
代わりに [CODE(DOMa)@en[[[returnValue]]]] があります。

[3] [CITE[XML Events 2]]
( ([TIME[2010-12-18 05:25:20 +09:00]] 版))
<http://www.w3.org/TR/xml-events2/#section-preventDefault-element>