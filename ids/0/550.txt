

* MDN —— Message Disposition Notification

[3]
誤解を恐れずに一言で言ってしまうなら、[[開封通知]]のことです。
実際 [[M$OE]] なんかだと[Q[開封通知]]として実装されてます。
(ちょっと[[アレゲ]]なところもありますが。)

[[RFC 2298]] <urn:ietf:rfc:2298> で定義されています。

[4]
MDN のメッセージの[[媒体型]]には、 [CODE(MIME)[[[multipart/report]]]]
を使います。その [CODE(MIME)[[[report-type]]]]
パラメーターの値は [CODE(MDN)[[[disposition-notification]]]] 
となります。

[CODE(MIME)[multipart/report]] の第一部分は人間可読報告文, 
第二部分が [CODE(MIME)[[[message/disposition-notification]]]] 
による機械可読報告です。第三部分が元メッセージの複製ですが、 
MDN の性質的に、省略するのが普通でしょう。

詳しくは [CODE(MIME)[[[multipart/report]]]] を参照してください。

[5]
[[DSN]] ([CODE(MIME)[[[message/delivery-status]]]])
と似たようなものではありますが、
そっちは [[MTA]] からの報告であるのに対して、こちらは
[[MUA]] からの報告となります。

[6]
MDN の宛先は、元メッセージの 
[CODE(822)[[[Disposition-Notification-To]]:]]
欄に指定されたものです。これが元メッセージの 
[CODE(822)[[[Return-Path]]:]] 欄に一致しない場合などには、
送信時に特に注意が必要です。
[WEAK[(事故や悪意により予期せぬ宛先に MDN が送られたり、循環したりするのを防ぐためです。)]]
詳しくは RFC 2298 を参照して下さい。

MDN の [CODE(822)[[[From]]:]] 欄は、
'''必ず'''元メッセージの宛先になります。封筒送信元 
([[envelope-from]]) は空 ([CODE(SMTP)[<>]]) 
にしておかなければ'''なりません'''。

MDN は MDN を要求しては'''いけません'''。

一つの MDN は元メッセージの一人の受信者に対応します。

- [1] [[RFC 3503]]: Message Disposition Notification (MDN) profile for Internet Message Access Protocol (IMAP)
- [2] [[IANAREG]] ''Message Disposition Notifications (MDN) Parameters'' <http://www.iana.org/assignments/mdn/mdn.htm>

[7]
[[RFC 3798]] が6月に出て [[RFC 2298]] は obsolete になりました。
([[名無しさん]] [WEAK[2004-07-12 08:33:27 +00:00]])

[8]
[[ML]] 宛のメッセージで [[MDN]] を要求するのは[[マナー]]に反するなどと主張する人がいます。
[[RFC]] によれば [[ML]] 宛に 
[CODE(822)@en[[[Disposition-Notification-To]]]]
付きメッセージを送った場合に反応するべきなのは [[ML]]
展開器 (駆動器) です。 [[ML]] 展開器が各参加者に転送する時に
[CODE(822)@en[[[Disposition-Notification-To]]]]
を落とすのが普通は正しい方法で、メッセージの元の送信者が悪いというのはお門違いです。

ただそういう機能を [[ML]] 展開器が実装していないことはよくある
([[MDN]] 仕様の欠陥だよね、ちゃんと [[RFC]]
に書いてあるけど) ので、
送信者は自衛として [[MDN]] 要求付きで [[ML]]
に送らないように心がけるべきだというのは確かです。
[[MUA]] も [[ML]] 経由の [[MDN]] 要求は受け付けないようにするといいかもしれません。
(例えば [CODE(822)@en[[[List-Post]]]] 付きで
[CODE(822)@en[[[Disposition-Notification-To]]]]
の宛先の[[鯖]]が [CODE(822)@en[[[List-Post]]]]
と違っていた時は [[ML]] 経由と判断する、とか。)

[22]
[[RFC 5337]] では、 [[UTF-8]] に対応した拡張された [[MDN]]
が定義されています。

* 定義

[23] 
>
[PRE[
   Disposition Report  |Feedback information to an originator User
                       |Agent by a recipient User Agent about
   Message Disposition |handling of an original message.  This may
      Notification     |include notification that the message was or
                       |was not read, was deleted unread, etc.
]PRE]

;; [24] [CITE@en[RFC 4356 - Mapping Between the Multimedia Messaging Service (MMS) and Internet Mail]] 
<http://tools.ietf.org/html/rfc4356#section-1.3>


[25] [CITE@en[RFC 3801 - Voice Profile for Internet Mail - version 2 (VPIMv2)]]
( ([TIME[2014-09-07 15:46:36 +09:00]] 版))
<http://tools.ietf.org/html/rfc3801#section-4.7>

[26] [CITE@en[RFC 4130 - MIME-Based Secure Peer-to-Peer Business Data Interchange Using HTTP, Applicability Statement 2 (AS2)]]
( ([TIME[2014-09-21 21:13:43 +09:00]] 版))
<http://tools.ietf.org/html/rfc4130>