[39] [DFN[[[SGML]]]] は、[[マーク付け言語]]の共通の構文 (あるいはメタ構文)
を規定したものでした。 [[HTML]] や [[XML]] をはじめ多くの[[マーク付け言語]]が
[[SGML]] から派生しました。また[[一般化マーク付け]] ([[表現と構造の分離]])
や [[DTD]] ([[スキーマ]]) などの思想はその後の[[マーク付け言語]]の設計にも大きな影響を与えました。

* 仕様書

** 本体仕様

[43] [[SGML]] 本体は、 [DFN[[[ISO 8879]]]](:1986) で規定されていました
([[素のSGML]])。

[62] 1996年には Cor.1 で [[ENR]] 拡張が追加されています。

[63] 1999年には Cor.2 で [[Web SGML]] が追加されています。

[64] Cor.1 と Cor.2 は [[SGML]] の改訂版ではあるのですが、以前の版を廃止・変更する形ではなく、
併存する3つのモードという形になっています。

[REFS[
- [10]
''ISO 8879 Review: ISO WG8 N1035'' <http://www.sgmlsource.com/8879/n1035.htm>
]REFS]

[11] >>10 は、 1990年1月19日時点での [[ISO 8879]] を改訂するとしたらの変更予定でした。
定義の明確化などの比較的軽微の変更に加えて、 [[ASN.1]] による[[バイナリー]]表現の追加などの新機能も盛り込まれていました。
しかしここでの変更はその後の拡張には反映されていません。

[REFS[
- [40] [CITE[Amazon.co.jp: The Sgml Handbook: Charles F. Goldfarb: 洋書]] ([TIME[2015-05-13 00:01:16 +09:00]] 版) <https://www.amazon.co.jp/exec/obidos/ASIN/0198537379/wakaba1-22/>
]REFS]

[41] [DFN[The Sgml Handbook]] は、 [[SGML]] の[[中の人]]による詳細な解説書です。
[[ISO 8879]] (と N1035) をベースに解説 (注釈) を加えています。

** 拡張仕様

[65] [[文書体系]]や[[特性集合]]、[[公式システム識別子]]といった
[[SGML]] への追加機能が [[ISO/IEC 10744]] ([[HyTime]]) の[[附属書]]として規定されています。

[47] [[DSSSL]]/[[HyTime]] と [[ENR]] ([[TC]]1) と [[WebSGML]] (TC2) でつぎはぎ規格と化した ISO 8879, 全文改訂したらどうよ?
と素人目には映るんですが、規格の規定はできるだけいじりたくないという [[ISO]] 的事情があるようです。

** 翻訳規格

[44] [[日本]]では、翻訳されて [DFN[[[JIS X 4151]]]] となっていました。

[46] [[台湾]]では、翻訳されて [DFN[[[CNS 13854]]]] となっていました。

[48] 
,*JIS	,*名前	,*[[対応国際規格]]
,JIS X 4151‐1992	,文書記述言語 SGML	,ISO 8879‐1986 + 同 Amendment 1
,JIS X 4151:1998	,文書記述言語 SGML (追補 1)	,ISO 8879:1986/Cor.1:1996
,JIS X 4151:2001	,文書記述言語 SGML (追補 2)	,ISO 8879:1986/Cor.2:1999

[49] 初版 (1992) 以来 JIS は2回の改訂で第3版 (2001)
になってるけど、規格票は 1992 + 2追補という形になっている。

[45] ISO 8879 と [[JIS X 4151]]‐1992 は章立てが異なっています。

[[JIS]] は[[翻訳規格]]化する際に一生懸命 JIS
の体裁になるように頑張っていたわけです。
(当時は今とは違って、直接原国際規格を参照したりする機会はそんなになかったのでして。[WEAK[それ以前に規格なんて読む人自体ごく少数だったのですし。]])

だけど今となっては負の遺産と申しましょうか。
章だけじゃなくて、語定義の番号も (語定義が五十音順になってるので)
一致してません。90年代後半に出た[[追補]]の方は出来るだけ原規格の体裁を残すという方針のために、原規格の本体の体裁を参照しているものだから、
一つの規格の中で首尾一貫していないという最悪の状況。

,ISO 8879                     ,==,JIS X 4151,CNS 13854
,Clause 0,Introduction           ,参考1 SGML の背景
,Clause 1,Scope                  ,1. 適用範囲      ,1. 適用範囲
,Clause 2,Field of Application   ,2. 適用分野
,Clause 3,References             ,1. 備考 2. (引用規格),引用標準・相對國際標準
,Clause 4,Definitions            ,3. 用語の定義    ,2. 用語釋義
,Clause 5,Notation               ,4. 表記法        ,3. 記法
,Clause 6,Entity Structure       ,5. 実体構造      ,5. 実體結構
,Clause 7,Element Structure      ,6. 要素構造      ,6. 元素結構
,Clause 8,Processing Instruction ,7. 処理指令      ,7. 處理指令
,Clause 9,Common Constructs      ,8. 共通の構成要素,8. 共同構造
,Clause 10,Markup Declarations: General,9. マーク宣言—一般,9. 標示宣告 : 通用
,Clause 11,Markup Declarations: Document Type Definition,10. マーク宣言—文書型定義,10. 標示宣告 : 文件型式定義
,Clause 12,Markup Declarations: Link Process Definition,11. マーク宣言—連結処理定義,11. 標示宣告 : 鍵結處理定義
,Clause 13,SGML Declaration      ,12. SGML 宣言   ,12. SGML 宣告
,Clause 14,Reference and Core Concrete Syntaxes,13. 規格参照具象構文・核具象構文,13. 参考與核心具體語法
,Clause 15,Conformance           ,14. 適合        ,4. 符合
,        ,                       ,参考2 一般化マーク付けの導入,附録 1 通用標示的介紹
,        ,                       ,参考3 基本的概念 ,附録 2 基本概念
,        ,                       ,参考4 付加機構   ,附録 3 其它觀念
,Annex D,Public Text             ,参考5 公開文    ,附録 4 公用文字
,Annex E,Application Examples    ,参考6 応用例    ,附録 5 應用範例
,Annex F,Implementation Considerations,参考7 実現についての考察,附録 6 實作上的考慮
,Annex G,Conformance Classification and Certification,参考8 適合性の類別及び検査,附録 7 符合分類與驗證
,Annex H,Theoretical Basis for the SGML Content Model,参考9 SGML 内容モデルの理論的基礎,附録 8 SGML 内容模型的理論基礎
,Annex I,Nonconforming Variations,参考10 規格外の変形,附録 9 非符合的變動
,       ,                        ,参考11 SGML 構文式一覧,附録 10 SGML 生成規則
,Annex J,                        ,附属書 J (規定) 拡張命名規則
,Annex K,Web SGML Adoptation     ,附属書 K (規定) Web SGML 適応
,Annex L,                        ,附属書 L (参考) XML に関する追加要件
,       ,                        ,JIS 解説
,       ,                        ,JIS 追補1 解説
,       ,                        ,JIS 追補2 解説
,       ,                        ,                  ,英中名詞對照
,       ,                        ,                  ,生成規則的符記

[50] (原文にもあるでしょうが) 参考の章は SGML の解説書みたいになってて、そこから読み始めるのがいいかもしれません。 (規格本文は厳密な定義のためにわけわかめになってるから、そこから読み始めるのは理解不能になるかもしれない諸刃の県。)

[REFS[
- [51] ''SGMLindex.html, Latest updated 1998.02.23'' <http://www1.u-netsurf.ne.jp/~7l1rll/SGMLindex.html>: JIS X 4151-1992 の原案 (の [[HTML]] 版)。最終版とは違いがあるらしいので注意。
- [11] <IW:Google:"cache:www.y-adagio.com/public/standards/jis_namerle/nametutr.doc">: Cor.1 の解説。
- [12] ''標準一般化マーク付け言語 (SGML) 追補2 解説'' <http://www.y-adagio.com/public/standards/jis_tc2_sgml/tutr.htm>: Cor.2 の解説。
]REFS]

[52] >>51 この HTML 版より、 [[JISC]] から [[PDF]] 版を入手した方がいいですね。そっちは[[追補]]も載ってるんだし。

[53] [WEAK[2003-04-30 12:21]] ''[[名無しさん]]'': JISC から入手できる PDF, 以前は1つだけだったのにいつの間にか2つになってます。1つ目の文書は [[WebSGML]] だけで、2つ目は全部。2つ目と以前入手できた唯一の文書は内容的には同じようですが、バイナリ的には異なっています。 JISC も謎なことしますね・・・

[54] 規格票、随分誤植多くない?

[55] >>54 必ずしも誤植とはいえないけど、でもってこの規格に限らないけど、 [CODE["]] が丁寧にも (といっても印刷屋には当然なんだろうが) [CODE[“]] と [CODE[”]] に不必要に ([CODE(SGML)[[[LIT]]]] なのに) 直されていたり。 (そのくせそうでないところもあるから、やっぱり誤植だ。)

[56] 1992規格は原国際規格と章の順序が変わっていたり、用語も頑張って訳したりして日本語の規格として完成させようとしてるけど、追補は原国際規格に忠実を目指していて、用語もカタカナ率が高い気がする。規格一般の傾向の変化を反映しているみたいで面白い。

[57] >>56 当時はともかく、今では国際規格と章が対応していないと不便だもんねぇ。

[58] TC2 で急にカタカナが一杯になってわけがわからんくなったわい...

[59] >>58 解説は時代の変化云々とか称して訳を変更したとかいうけど、[[引数]]→[[パラメタ]]とか絶対改悪だよね。あたしゃつい最近まで、[[パラメタ実体参照]]はなにがどうパラメーターなんだい? と疑問だったけど、 SGML 本体規格で[[引数実体参照]]と呼ばれていて、しかも実際[[マーク宣言]]の引数になっているのを見て長年の疑問が氷解したね。

[60] >>59 それとかマーク宣言 (markup declaration) が[[マーク付け宣言]]に変わったり。確かに訳語の整合性 ([[マーク付け]] = [[markup]]) という意味では悪くはないんだけど、わざわざ冗長にする必要はあったのかどうか。使い慣れたマーク宣言, [[マーク区間]]という呼び名の方が良くありません?

[61] CNS 13854‐86 (1992) は、 [[ISO 8878]] に対応する [[CNS]] の規格です。
(ISO 8878‐1986 に対応すると書いてありますが、 1988 年の
Amendement が反映されているように見えます。)

* SGML の機能

[FIG(short list)[ [66] [[SGML]] の機能
- [[SGML宣言]]
- [[文書文字集合]]
- [[抽象構文]]
- [[具象構文]]
- [[文書型定義]]
- [[連結処理定義]]
- [[実体集合]]
- [[実体]]
- [[要素型]]
- [[属性定義]]
- [[文書実現値]]
- [[要素]]
- [[タグ]]
- [[属性]]
- [[記法]]
- [[処理指令]]
- [[文字参照]]
- [[実体参照]]
- [[短縮参照]]
- [[データタグ]]
- [[マーク付け宣言]]
- [[注釈宣言]]
- [[マーク付き区間]]
- [[CONCUR]]
- [[体系的DTD]]
- [[要素形式]]
- [[属性形式]]
- [[記法形式]]
- [[特性集合]]
- [[木立計画]]
- [[木立]]
- [[公式公開識別子]]
- [[公式システム識別子]]
- [[字句型]]
- [[一般体系]]
]FIG]

* SGML 応用

[31] 次の[[マーク付け言語]]は [[SGML]] を使っています。
[FIG(short list)[
- [[DocBook]]
- [[HTML 2.0]]
- [[HTML 2.x]]
- [[HTML 3.2]]
- [[HTML4]]
- [[ISO-HTML]]
- [[TEI]]
- [[Topic Maps]]
- [[AAP]]
]FIG]

;; [42] 現実世界の [[HTML]] は [[SGML応用]]ではありませんが、
[[HTML4]] までの時代の [[HTML]] の仕様書は [[SGML応用]]であると主張していました。

;; [68] [[XML]] は [[SGML]] の[[部分集合]]ないし一部であるというような説明がされることもありますが、
正確には [[XML文書]]が[[SGML文書]]として解釈もできる、という程度のことです。
[[XML]] は [[SGML応用]]ではありません。

* 実装

[22] 
[FIG(short list)[
- [[SP][SP (SGML)]]
- [[SXParser]]
- [[W3C Validator]]
]FIG]

* SGML の構文の部分集合

[15] SGML 文書の[[マーク]]の表現は[[具象構文]]によってある程度制御できますが、
逆に言えばある程度以上の制御はできません。しかし、
場合によっては完全な SGML でない、構文の部分集合のようなものが使われることがあります。

:SGML:基本となる SGML の構文です。
:[[正準グローブ表現]]:正準グローブ表現に必要な範囲で、
単純な文字列としての比較が可能な書式です。
:[[XML]]:使用できる機能と構文を制限した[Q[簡略版]] SGML です。
[[XML 1.0]] と [[XML 1.1]] があります。他にも色々なバリエーションがあります
([[XML]] 参照)。

[24]
[CITE[Formal Grammar for the TEI-Interchange-Format Subset of SGML]] <http://www.tei-c.org/P4X/GR.html#GRIS>

* SGML 記法

[16] [DFN[[CODE(SGML)[SGML]] [[記法]]]]は、
[[SGML文書]]から他の [[SGML文書]]を[[参照]]する時に使う[[記法]]です。

注意: 普通 [[SGML文書実体]]内で他の [[SGML文実体]]を[[参照]]する時は、
わざわざ[[記法]]を指定する必要はありません
[WEAK[(というより指定してはいけません)]]。この記法は[[ハイパーリンク]]などの目的で[[外部非解析対象実体]]として
[[SGML文書]]を扱う時に使います。

[17] 仕様書:
- [[ISO/IEC 10744]]:1997
-- [CSECTION[A.7.1 SGML Notation]]
<http://www.y12.doe.gov/sgml/wg8/docs/n1920/html/clause-A.7.1.html>

[18]
:記法形式名:[CODE(SGML)[SGML]]
:[[公式公開識別子]]:[CODE(SGML)[[[ISO 8879:1986//NOTATION Standard Generalized Markup Language//EN]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明
,[[活性DTD又はLPD]] ([CODE(SGMLa)[[[active]]]]) [[属性]]	,[[文書型名]]か[[連結型名]]	,[[基底DTD]]	,[[活性]]にする[[文書型]]・[[連結型]]
,[[活性体系]] ([CODE(SGMLa)[[[arch]]]])	,[[体系]]名	,(なし)	,[[活性]]にする[[体系]]
,[[代替表現]] ([CODE(SGML)[[[altreps]]]]) [[属性形式]]	,==	,==	,([[共通データ属性]]より)
,[[取込み実体]] ([CODE(SGML)[[[included]]]]) [[属性形式]]	,==	,==	,([[共通データ属性]]より)
,[[記法派生源]] ([CODE(SGML)[[[superdcn]]]]) [[属性形式]]	,==	,==	,([[共通データ属性]]より)


[19] '''活性 DTD 又は LPD 属性''':
[CODE(SGML)[[[SGML]]]] [[記法]]の[DFN[[RUBYB[活性 DTD 又は LPD] [active DTDs or LPDs]] ([CODE(SGMLa)[[[active]]]]) [[データ属性]]]]は、
[[文書実体]]を[[構文解析]]するに当たって使用する[[文書型]][[及び/又は]][[連結型]]の名前を指定します。

:[[完全名]]:[RUBYB[活性 DTD 又は LPD] [active DTDs or LPDs]]
:[[参照具象構文名]]:[CODE(SGMLa)[[[active]]]]
:所属[[記法形式]]:[CODE(SGML)[[[SGML]]]]
:[[属性型]]:[CODE(SGML)[[[CDATA]]]]
(制約: [[DTD]] や [[LPD]] の名前をいくつか)
:[[既定値]]:[[基底DTD]]

複数の値の指定の仕方は [[ISO/IEC 10744]]
に明記されていませんが、他の[[属性]]と同じく[[空白]]区切りでしょう。

[[活性文書型]]を複数指定すると、
[[文書]]は各文書型それぞれについて[[構文解析]]して[[グローブ]]を別個に作成します。
[[活性連結型]]を複数指定すると、各 [[DTD]]
に対して全ての [[LPD]] を適用します。
[SRC[ISO/IEC 10744:1997 A.7.1 NOTE 534]]

[20] '''活性体系属性''':
[CODE(SGML)[[[SGML]]]] [[記法]]の[DFN[[RUBYB[活性体系] [active architecture]] ([CODE(SGMLa)[[[arch]]]]) [[データ属性]]]]は、
[[文書]]を処理する時に使用する[[体系]]の名前を指定します。

:[[完全名]]:[RUBYB[活性体系] [active architecture]]
:[[参照具象構文名]]:[CODE(SGMLa)[[[arch]]]]
:所属[[記法形式]]:[CODE(SGML)[[[SGML]]]]
:[[属性型]]:[CODE(SGML)[[[CDATA]]]]
(制約: [[体系]]の名前 ([[体系記法名]]))
:[[既定値]]:体系処理なし

[[属性値]]には[[体系]]の名前を指定します。
派生元をたどると[[体系]]が幾重にも連なっている場合、
[[クライアント文書]]の[[基底体系]]から順に[[体系記法名]]を指定していきます。
(と本文に書いてありますが、 [[DTD]] の[[注釈]]は
[Q[name]] と単数形になっています。本当に複数指定していいのでしょうか。)
[SRC[ISO/IEC 10744:1997 A.7.1]]

[[体系]]を指定すると、[[参照]]されるのが[[文書]]自体ではなく、
[[文書]]から得た[[体系的実現値]]の[[グローブ]]になります。

* MIME 型

[21] [[SGMLのMIME型]]を参照。

* 歴史

** GML

@@

** ISO

@@

** Web SGML

[32] [[SGML]] の [[Web]] における簡易版として [[XML]] が開発されました。
それと同時に [[XML]] を含む拡張機能を含めた [[SGML]] の改訂版である [[Web SGML]]
が開発されました。

[33] [[XML]] は一時は [[Web]] 関連コミュニティーで大流行しましたし、
その後も [[Java]] など一部の世界では広く使われていますが、あくまでも [[SGML]]
から派生した [[XML]] という特殊形が受け入れられたに過ぎず、元の [[SGML]]
は普及しませんでした。

[34] [[XML]] に対応したツールの整備が進んだことから、 [[DocBook]] など既存の
[[SGML応用]]も [[XML]] へと移行してゆきました。

**

- [2] ''ISO/IEC JTC1/SC34 N0029'' <http://www.ornl.gov/sgml/sc34/document/0029.htm> ([[ISO8879]] TC2 = [[WebSGML]])
- [4] ''intro-ISO-HTML,Latest updated 1997.11.12'' <http://www1.u-netsurf.ne.jp/~7l1rll/intro-ISO-HTML.html>
- [5] ''Miura Jun(SGML,XML,...)'' <http://www.isc.meiji.ac.jp/~miuraj/>
- [6] ''SGML: A Technology for Fulltext Database (Part 1)'' <http://www.ulis.ac.jp/library/Kanpo/Vol10No3/ishizuka.html>: ちょっと不正確なところもあるし古いけど悪くはない。 SGML とは何ぞや? という人におすすめかも。
- [7] ''第2章 「CALS」の理解'' <http://www.juas.or.jp/usc/report/508-2.htm>: [[CALS]], SGML, [[DSSSL]], [[SPDL]], [[HyTime]] 辺りの概観みたいな感じの文書。
- [8] ''SGML用語辞典'' <http://www.jagat.or.jp/sgml/dicsgml/sgml/SGMLDIC.HTM> : SGML そのものに加えて、周辺規格や主要応用までカバーした用語集 (の日本語訳)。 (但し SGML 関連規格用語集だと思っちゃ駄目! あくまで SGML 用語が主。)
- [9] ちなみに >>8 の原文が ''SGML Dictionary'' <http://web.archive.org/web/19980131124652/www.bradley.co.uk/DICT.HTM>。

[12]
''English-Chinese Glossary of XML and SGML Terms'' <http://xml.ascc.net/en/utf-8/gloss.html>

[13]
[Q[SGML]] とか [Q[XML]] とかでぐぐると (日本語)、胡散臭そうなのがいっぱい上位にごろごろ並んでるなあ。
([[名無しさん]] [WEAK[2004-12-14 12:00:22 +00:00]])

[14]
[CITE[Designing document type definition (DTD) in SGML/XML]] <http://www.saiensu.co.jp/ct_resource/199809/On-DTD.htm#S.para>
([[名無しさん]])

[25]
''The Roots of SGML -- A Personal Recollection'' <http://www.sgmlsource.com/history/roots.htm>
([[名無しさん]])

[26]
''A Brief History of the Development of SGML'' <http://www.sgmlsource.com/history/sgmlhist.htm>

- [1] ''水無月ばけらのマニアックな文法論議'' <http://www.ne.jp/asahi/minazuki/bakera/html/sgml/>
- [3] ''SGML から XMLへ - マークの付けかた'' <http://math.oheya.to/markup/sgml/>

[28]
[CITE[SGMLやXML:メモランダム]] ([CODE[2007-06-28 03:28:06 +09:00]] 版) <http://mynotes.jp/blog/2007/06/sgml_and_xml>
([[名無しさん]] [WEAK[2007-06-29 13:25:35 +00:00]])

[29]
>>28 [[HTML 4]] の仕様書はかなり例外的でしょう。

それにしても [[SGML]] の仕様書は難しく、
その難しさは [[SGML]] 自体の難しさに起因しているのではないかと。

;; 仕様書そのものよりも [CITE@en[[[The SGML Handbook]]]] 
を読む方がいいかも。[[英語版]]しかありませんが。


([[名無しさん]] [WEAK[2007-06-29 13:30:01 +00:00]])



[30] [CITE[Re: Freezing the HTML spec Re: Comments in HTML ?]]
( ([TIME[2003-08-18 06:01:38 +09:00]] 版))
<http://lists.w3.org/Archives/Public/www-talk/1992NovDec/0085.html>

** HTML の解放

[35] [[HTML]] は [[HTML4]] まで [[SGML応用]]として定義されていましたが、
それはあくまで [[IETF]]/[[W3C]] の仕様書と [[W3C Validator]] だけの[[机上の空論]]に過ぎず、
現実には [[SGML]] に強く影響を受けた独自の[[マーク付け言語]]としか言えないものでした。

[36] [[HTML]] が現実には [[SGML]] でないことは誰の目にも明らかでしたが、
あくまでも [[SGML]] であると仮定する、あるいは [[XML]] ([[XHTML]]) 
への移行が進むはずなので過去の事項として問題とも考えないことが[[政治的に正しい]]とする風潮が00年代前半にはありました。

[37] [[Web Applications 1.0]] ([[HTML5]]) は [[SGML]] とは関係しない独自の言語である [[HTML]]
の[[構文解析器]]を歴史上初めて[[自然言語]]により記述することに成功し、
王様は裸であると実証しました。これによって最大の“[[SGML応用]]”は消滅しました。

** 終焉

[38] [[XML]] への移行と [[HTML]] 仕様書の発展により、 [[SGML]]
は事実上終焉を迎えました。今後新たに [[SGML応用]]や [[SGML]]
の実装が登場することもないでしょう。

[23] [CITE@en[Re: '''['''xml-dev''']''' SGML DTDs for HTML 5.1]]
([TIME[2016-11-25 11:17:10 +09:00]])
<http://lists.xml.org/archives/xml-dev/201611/msg00078.html>

[67] [CITE[Index]]
([TIME[2016-11-18 23:30:26 +09:00]])
<http://sgmljs.net/>