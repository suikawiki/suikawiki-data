#?SuikaWiki/0.9

[1]
最近妙に重いと思っていましたら、糞 robot の絨毯爆撃中でした。 WinIE を名乗っていますがパッチが1つも当たっていないのは不自然すぎます。それ以上に Referer 無しだし間隔無しだしばればれですが。

その robot 君、素片識別子つきの URI 参照を Request-URI で送ってくるようななので、 401 を返すようにしてみましたが、 SuikaWiki のすべてのリンクが素片識別子つき URI 参照ではないのであまり効果が無い模様。
([[名無しさん]] [WEAK[2004-04-21 11:18:49 +00:00]])

[2]
検索結果の違う頁へのリンクのおかげで robot の餌が増えたみたいですが、 [CODE(HTMLe)[a]] ではなくて [CODE(HTMLe)[form]] を使うような後ろ向きな方法以外になんとかする方法は無いでしょうか。

Robot にはそういうのを吐かないと言う方法は、 >>1 のような [CODE(HTTP)[User-Agent]] でも処理するのが面倒なのですよ。
([[名無しさん]] [WEAK[2004-04-21 11:22:02 +00:00]])

[3]
Referer が正しく無い問題、
どうやら、 SuikaWiki::DB::FileSystem::Count で $key (= [@key]) をそのまま hash の key にしてしまうという初歩的なミスが発覚しました (先日寝る前に思いついた)。

Key にする前に join "\x00" で直列化することにしました。 FS::Count の $key は範囲無制限の文字列なので $key[∃$n] に "\x00" が含まれていると困りますが、 "\x00" なんて使わないでしょう。

(U+FFFF とかを使うと言う手もあったか。)
([[名無しさん]] [WEAK[2004-04-21 12:37:26 +00:00]])


[4]
>>1 実は犯人は真性 WinIE の可能性もあった罠。

どうやら、 WinIE 6 は redirect された時の [CODE(HTTP)[[[Location]]]] URI 参照に素片識別子がついていると直後の再要求時にその素片識別子ごと [CODE(ABNF)[Request-URI]] にして送ってしまうみたいです。
([[名無しさん]] [WEAK[2004-05-03 04:33:04 +00:00]])

