[5] [DFN[[RUBYB[[[媒体素片]]]@en[Media Fragments]]]]は、[[動画]]や[[音声]]の一部を識別するための[[素片識別子]]の構文です。

* 仕様書

[REFS[
- [4] '''[CITE@en-us[Media Fragments URI 1.0 (basic)]] ([TIME[2012-09-27 23:08:40 +09:00]] 版) <http://www.w3.org/TR/media-frags/>'''
-- [9] [CITE@en-us[Media Fragments URI 1.0 (basic)]] ([TIME[2012-09-27 23:08:40 +09:00]] 版) <http://www.w3.org/TR/media-frags/#standardisation-URI-fragments>
-- [11] [CITE@en-us[Media Fragments URI 1.0 (basic)]] ([TIME[2012-09-27 23:08:40 +09:00]] 版) <http://www.w3.org/TR/media-frags/#standardisation-URI-queries>
-- [13] [CITE@en-us[Media Fragments URI 1.0 (basic)]] ([TIME[2012-09-27 23:08:40 +09:00]] 版) <http://www.w3.org/TR/media-frags/#fragment-query>
]REFS]

* MIME 型

[8] [[媒体素片]]が適用される対象となる[[MIME型]]について、
[[媒体素片]]仕様書は、各[[MIME型]]の仕様が採用することを[RUBYB[推奨]@en[recommend]]
[SRC[>>9]] するにとどめており、実際に特定の [[MIME型]]に適用できるとはしていません。

[FIG(corollary)[
[10] [CODE(MIME)@en[[[audio/*]]]], [CODE(MIME)@en[[[image/*]]]], 
[CODE(MIME)@en[[[video/*]]]] の[[MIME型]]は[[媒体素片]]を採用することを[RUBYB[推奨]@en[recommend]]されています
[SRC[>>9]]。
]FIG]

* query での利用

[12] [[媒体素片]]は[[素片識別子]]だけでなく、[[query]] として使うこともできます。
しかし一般に [[HTTP]] や [[RTSP]] では [[query]] は[[鯖]]が任意の方法で解釈することとなっており、
[[媒体素片]]の仕様も [[query]] で用いることを強制はしていません。
[[鯖]]は[[媒体素片]]と既存の [[query]] とを調和させることを[RUBYB[推奨]@en[recommend]]される
[SRC[>>11]] にとどまっています。

[16] [[媒体素片]]によって表される[[資源]]の部分の中には、
[[包含子]]の形式と[[コーデック]]に依存して「[RUBYB[なじむ]@en[fit]]」
ものとそうでないものがあります。ここで「なじむ」とは、
元の[[資源]]の構文要素を変更したり、ビット列を[[転符号化]]したりせずに求める部分を取り出せることをいいます。 [SRC[>>13]]

[17] 「なじむ」ものは[[素片識別子]]によって表すこともできますが、
「なじまない」ものは [[query]] によって表すしかありません [SRC[>>13]]。
[[query]] によって指定された場合は、[[鯖]]が適宜[[符号化]]し直すなどして求める部分を返すことになります。

* 処理

[14] [[媒体素片]]の[[素片識別子]]の適用後の[[素片]]と元の[[資源]]は同じ
[[MIME型]]であるべきです [SRC[>>13]]。

[EG[
[15] 例えば[[動画]]のうちの1つの[[フレーム]]を識別する[[媒体素片]]によって得られるのは[[静止画]]ではなく、
[[フレーム]]が1つの[[動画]]であるべきです [SRC[>>13]]。
]EG]

[18] [[媒体素片]]が[[素片識別子]]として指定された場合、
[[利用者エージェント]]は元の[[資源]]を取得し、
そこから[[媒体素片]]で指定された部分を取り出すこととなります。
[[利用者エージェント]]の機能と[[資源]]の形式次第では、
元の[[資源]]の必要となる範囲を特定してそこだけ[[鯖]]から取得することができるかもしれません。
また、[[媒体素片]]を[[鯖]]に送信して処理を委ねる方法を用意することも想定はされています
[SRC[>>13]] (が実際にはありません)。

[EG[
[19] 例えば[[動画形式]]によっては[[動画]]上の範囲と[[バイト範囲]]との対応関係の索引データが含まれていて、
それに従い[[範囲要求]]を使って必要な部分だけ取得できるかもしれません [SRC[>>13]]。
]EG]

* 歴史

[1]
[CITE@en[W3C Media Fragments Working Group]] ([TIME[2008-08-15 22:39:44 +09:00]] 版) <http://www.w3.org/2008/WebVideo/Fragments/>

[2] [CITE@en-us[Use cases and requirements for Media Fragments]] ([TIME[2009-05-01 02:03:22 +09:00]] 版) <http://www.w3.org/TR/2009/WD-media-frags-reqs-20090430/>

[6] [CITE@en-us[Media Fragments URI 1.0]]
([TIME[2009-12-16 20:09:16 +09:00]] 版)
<http://www.w3.org/TR/2009/WD-media-frags-20091217/>

[20] [CITE[IRC logs: freenode / #whatwg / 20091229]]
([TIME[2010-01-06 07:47:25 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20091229>

[3] [CITE@en-us[Media Fragments URI 1.0 (basic)]] ([TIME[2012-09-27 23:08:40 +09:00]] 版) <http://www.w3.org/TR/2012/REC-media-frags-20120925/>

[21] [CITE@en[Re: is spec complete?]]
( ([[Silvia Pfeiffer]] 著, [TIME[2013-06-11 07:32:04 +09:00]] 版))
<http://lists.w3.org/Archives/Public/public-media-fragment/2013Jun/0002.html>

[7] [CITE@en[Bug 23492 – Linking to a page with a fragment identifier that causes a particular media element to be shown and to seek to a particular position]]
( ([TIME[2013-10-14 22:54:45 +09:00]] 版))
<https://www.w3.org/Bugs/Public/show_bug.cgi?id=23492>
