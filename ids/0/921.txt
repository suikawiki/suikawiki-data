* 仕様書

[REFS[
- [413] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#section-3.3.3>
]REFS]

* 文脈

[412] [[鯖]]は、[[メッセージ本体]]が含まれているにも関わらず [CODE(HTTP)[[[Content-Length:]]]]
が含まれていなければ、 [CODE(HTTP)[[[411]]]] を返して構いません [SRC[>>320]]。

[415] [CODE(HTTP)@en[[[Transfer-Encoding:]]]] があると
[CODE(HTTP)@en[[[Content-Length:]]]] は無視されることになっていて、
[CODE(HTTP)[[[411]]]] を返す必要はないはずですが、明示的に禁止はされていないようです。
[[RFC 7230]] には、 [CODE(HTTP)[[[chunked]]]] であっても
[CODE(HTTP)[[[Content-Length:]]]] がないと [CODE(HTTP)[[[411]]]]
を返す実装がある [SRC[>>413]] 旨が指摘されています。

* 歴史

[FIG[
[FIGCAPTION[
[414] RFC 2068 & 2616 (HTTP/1.1) 10.4.12 411 Length Required
]FIGCAPTION]

> The server refuses to accept the request without a defined Content-Length. The client MAY repeat the request if it adds a valid
Content-Length header field containing the length of the message-body
in the request message.

サーバーは、 [CODE(HTTP)[[[Content-Length]]]] が定義されていない要求を受け入れるのを拒否します。
クライアントは、要求メッセージ中の [CODE(ABNF)[[[message-body]]]]
の長さを含んだ妥当な [CODE(HTTP)[Content-Length]] 頭欄を加えれば要求を繰り返しても'''構いません'''。
]FIG]