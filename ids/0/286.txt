[9] [CODE(822)@en[[[Message-ID:]]]] [[頭欄]]は、 [[RFC 822]] およびその派生仕様において、
当該[[メッセージ]]の固有識別子を記述する[[頭欄]]です。また、
その固有識別子を[DFN[[RUBYB[メッセージ]@en[message]] ID]]と呼び、たまに [DFN[mid]] と略されます。

* 仕様書

- [5] [[RFC 4409]] ([[IETF]] [[提案標準]])
<urn:ietf:rfc:4409>
-- [CSECTION@en[8.3.  Add 'Message-ID']]
- [8] [CITE@en[RFC 4356 - Mapping Between the Multimedia Messaging Service (MMS) and Internet Mail]] 
<http://tools.ietf.org/html/rfc4356#page-9>
- [7] [CITE@en[RFC 5598 - Internet Mail Architecture]]
<http://tools.ietf.org/html/rfc5598#section-3.4.1>

* MSA との関係

[6] [[MSA]] は、[[メッセージ]]に
[CODE(822)@en[[[Message-ID]]:]] [[欄]]に含まれない場合や
[[RFC 2822]] に照らして[[妥当]]な[[構文]]ではない場合、
[CODE(822)@en[[[Message-ID]]:]] [[欄]]を追加または置換[['''して構いません''']]。
[SRC@en[[[RFC 4409]] 8.3]]

* 各仕様における定義

- [[電子メイル記事仕様におけるMessage-IDの定義]]
- [[電子ニュース記事仕様におけるMessage-IDの定義]]
-- [[電子ニュース記事使用におけるMessage-IDの定義]]

typo スマソ


* Message-ID の生成

Message-ID を定義する各仕様にそれぞれいかに固有の識別子を生成するか
についての説明があります。

次の Internet-Draft は各方法を紹介したり推奨される方法を
定義したりしています。

- [[draft-ietf-usefor-message-id-01]]
- [[draft-ietf-usefor-msg-id-alt-00]]


** 主題変更を示す「_-_」記法


** son-of-RFC1036 6.5. References 抜粋

The  followup  agent MUST not delete any message ID whose local part
ends with "_-_" (underscore (ASCII 95), hyphen  (ASCII  45),
underscore);  followup  agents are urged to use this form to
mark subject changes, and to avoid using it otherwise.

返信代理者は地域部分が「_-_」 (下線 (ASCII 95), ハイフン (ASCII 45), 下線)
で終わるメッセイジ ID を削除しては''いけません''。
返信代理者はこの形式を主題 subject が変更された印として使い、
他の用途で使うのを避けることを推奨します。

NOTE:  Subject changes are difficult to determine,
but they are significant as possible beginnings of
new  threads.  The "_-_" convention is provided so
that posting agents (which have  more  information
about  subjects)  can  flag  articles containing a
subject change in a way that followup  agents  can
detect  without access to the articles themselves.
The sequence is  chosen  as  one  that  is  fairly
unlikely to occur by accident.

参考: 主題変更は決定が難しいですが、新スレッドの始まりの可能性がある
重要なものです。「_-_」慣習があるので (主題についてより情報を持っている)
投稿代理者は返信代理者が記事自身に接続無しに主題が変更されたことが
分かるように記事に印をつけることが出来ます。

NOTE: Is "_-_" really worth having?

参考: 「_-_」は本当に意味があるのでしょうか?

** RFC の部分の LICENSE

See [[RFCのライセンス]]

* 関門での Message-ID 書き換え

- [[son-of-RFC1036の関門でのMessage-ID対応]]

違プロトコル間でのメッセージ交換はそう稀なことでもありませんが、
各プロトコル間で Message-ID またはそれに相当するものの
書式が一致していることは稀なことでしょう:-) そのような場合に、
Message-ID を書き換える必要が出てきます。

もっとも身近なところでは、電子メイルと電子ニュースで
メッセージ交換する場合、電子メイルの方が Message-ID の自由度が
高いので、電子メイル→電子ニュース関門では Message-ID を
書き換えなければならないかもしれません。

** MMS との変換

[10] [[MMS]] から[[インターネット・メール]]への変換時には、 [CODE(822)@en[[[Message-ID:]]]]
[[頭欄]]はそのまま残さなければ[['''なりません''']]。元々存在しなかった場合には [[RFC 2822]]
にのっとり生成しなければ[['''なりません''']]。 [SRC[>>8]]

* 歴史

** HTTP

[1] [HTTP92] では、値は [[URI]] でした。この URI は資源を取り寄せるために使うものではなく、ニュースのメッセージ ID のように意味の無い文字列でした。 (HTTP だから WWW っぽく、メイル・アドレスではなく URI を構文に選んだのでしょう。)

[2] >>1 結局無くなったわけですが、案外 [[ETag:]] 欄あたりに引き継がれたのかもしれません。

[14] [[RFC 4229]] は [[HTTP92]] を出典に状態「[[provisional]]」で[[IANA登録簿]]に登録しています
[SRC[>>13]]。

[REFS[
- [4] [CITE[Object Header lines in HTTP]] ([TIME[2002-04-11 00:31:17 +09:00]] 版) <http://www.w3.org/Protocols/HTTP/Object_Headers.html#message-id>
- [13] [CITE@en[RFC 4229 - HTTP Header Field Registrations]] ([TIME[2014-11-02 18:53:20 +09:00]] 版) <http://tools.ietf.org/html/rfc4229#section-2.2.4>
]REFS]

* 関連

[11] [[MMS]] には [CODE(822)@en[[[Message-ID:]]]] の他に [CODE(822)@en[[[X-Mms-Message-Id:]]]]
もあります。

* メモ

- [1] [WEAK[2003-01-25 16:04]] ''[[名無しさん]]'': [[qmail]] の error message mail の [[Message-ID]] は元メッセージの Message-ID と同じことがあるそうです。困ったもんです。

[3]
[CODE(ABNF)[%x0D]] の入った Message-ID なんて実際にあるのか...
([[名無しさん]] [WEAK[2004-04-20 08:48:20 +00:00]])


[12] [CITE@en[RFC 4975 - The Message Session Relay Protocol (MSRP)]]
( ([TIME[2012-02-26 13:20:50 +09:00]] 版))
<http://tools.ietf.org/html/rfc4975#page-37>

[15] [CITE@en[draft-goland-http-reliability-00 - SOA-Reliability (SOA-Rity) for HTTP]]
( ([TIME[2014-11-18 19:43:49 +09:00]] 版))
<https://tools.ietf.org/html/draft-goland-http-reliability-00#section-3>

[16] [CITE@en[RFC 4130 - MIME-Based Secure Peer-to-Peer Business Data Interchange Using HTTP, Applicability Statement 2 (AS2)]]
( ([TIME[2014-09-21 21:13:43 +09:00]] 版))
<http://tools.ietf.org/html/rfc4130#appendix-A.1>

[17] [CITE@en[RFC 5536 - Netnews Article Format]]
( ([TIME[2014-09-21 18:14:06 +09:00]] 版))
<http://tools.ietf.org/html/rfc5536#section-1.5>

[18] [CITE@en[RFC 5536 - Netnews Article Format]]
( ([TIME[2014-09-21 18:14:06 +09:00]] 版))
<http://tools.ietf.org/html/rfc5536#section-3.1.3>

[19] [CITE@en[RFC 2392 - Content-ID and Message-ID Uniform Resource Locators]]
( ([TIME[2014-12-22 15:20:11 +09:00]] 版))
<https://tools.ietf.org/html/rfc2392>