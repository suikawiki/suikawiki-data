[20] [DFN[[[HTTP/0.9]]]] は、1991年以来使われている [[HTTP]] の最初の版です。現在ではあまり使われなくなっていますが、
[[HTTP]] [[プロトコル]]の一部として依然として広く実装されています。

* 仕様書

[REFS[
- [10] [CITE@en[RFC 1945 - Hypertext Transfer Protocol -- HTTP/1.0]] ([TIME[2014-09-07 13:12:32 +09:00]] 版) <http://tools.ietf.org/html/rfc1945#section-3.1>
- [13] [CITE@en[RFC 1945 - Hypertext Transfer Protocol -- HTTP/1.0]] ([TIME[2014-09-07 13:12:32 +09:00]] 版) <http://tools.ietf.org/html/rfc1945#section-4.1>
- [15] [CITE@en[RFC 1945 - Hypertext Transfer Protocol -- HTTP/1.0]] ([TIME[2014-09-07 13:12:32 +09:00]] 版) <http://tools.ietf.org/html/rfc1945#section-5>
- [18] [CITE@en[RFC 1945 - Hypertext Transfer Protocol -- HTTP/1.0]] ([TIME[2014-09-07 13:12:32 +09:00]] 版) <http://tools.ietf.org/html/rfc1945#section-6.1>
- [21] [CITE@en[RFC 1945 - Hypertext Transfer Protocol -- HTTP/1.0]] ([TIME[2014-09-07 13:12:32 +09:00]] 版) <http://tools.ietf.org/html/rfc1945#section-7.2.1>
]REFS]

* プロトコル

[22] [[HTTP/0.9]] の詳細については [[HTTP]] や、各[[プロトコル要素]]の項を参照してください。

[FIG(short list)[
- [[HTTPメッセージ]]
- [[要求]]
-- [[要求行]]
-- [CODE(HTTP)@en[[[GET]]]]
- [[応答]]
]FIG]

[14] [[HTTP/0.9]] [[応答]]は [[MIME型]]を示せないため、
[[HTTP/0.9]] [[要求]]は[[非推奨]] [SRC[>>13]] とされています。

[25] [[HTTP/0.9]] には[[ヘッダー]]はありません。 [CODE(HTTP)@en[[[Host:]]]]
[[ヘッダー]]も含められないため、 ([[要求URL]]に[[絶対URL]]を指定して無理に明示するのでなければ)
[[仮想ホスト]]に対応できません。この意味で [[HTTP/0.9]] は最早 [[Web互換]]とはいえません。

[23] [[MIME型]]は [CODE(HTTP)@en[[[Content-Type:]]]] [[ヘッダー]]が無い場合のように
[[Content-Type sniffing]] によって決定されるものと思われます。
元々は [[HTML]] のみが使われることが想定されていました。

;; [37] [[平文]]の転送のために [[HTML]] の [CODE(HTMLre)@en[[[plaintext]]]]
[[タグ]]が用意されています。

;; [29] [[Chrome]] と [[IE]] は [[sniffing]] しているようですが、
[[Firefox]] は [CODE(MIME)@en[[[text/plain]]]] として扱っているようです。 [TIME[2015-06-13T14:23:50.00Z]]

[24] [[状態符号]]はありません。

;; [30] [[Chrome]] で [[XHR]] で取得すると、 [CODE(HTTP)[[[200]]]] 扱いになっているようです。

[26] [[HTTP/0.9]] [[応答]]は[[キャッシュ不可能]]なものとして処理するべきと思われます。

;; [38] [[IE]] は[[キャッシュ]]するようです。 [TIME[2015-06-14T09:10:28.700Z]]

* HTTP/1.0 との関係

[12] [[HTTP/1.0]] [[鯖]]は [[HTTP/0.9]] [[要求]]を処理できなければなりません [SRC[>>10]]。
[[HTTP/1.0]] [[鯖]]は [[HTTP/0.9]] [[要求]]を受信したら、
[[HTTP/0.9]] [[応答]]を返さなければなりません [SRC[>>10, >>15]]。

[11] [[HTTP/1.0]] [[クライアント]]は [[HTTP/0.9]] [[応答]]を処理できなければなりません [SRC[>>10]]。

;; [17] [[HTTP/0.9]] [[鯖]]だった場合、 [[HTTP/1.0]] [[要求]]に [[HTTP/0.9]] 
[[応答]]が返されることとなります [SRC[>>18]] から、 [[HTTP/0.9]] [[要求]]でなくても 
[[HTTP/0.9]] [[応答]]に対応できる必要があるようです。

[16] [[HTTP/1.0]] [[応答]]を処理できる[[クライアント]]は [[HTTP/0.9]] [[要求]]を送信するべきではありません [SRC[>>15]]。

* 要求の解釈

[32] [[nginx]] は、[CODE(HTTP)@en[[[GET]]]]、1文字[[以上]]の[[空白]]、
[[絶対パス]]か[[絶対URL]]、[[改行]]となっていなければ、 [CODE(HTTP)[[[400]]]]
[[応答]]に相当する[[応答本体]]を返します。[[要求メソッド]]は[[大文字]]でなければなりません。
[TIME[2015-06-14T08:52:57.800Z]]

[33] [[Apache]] は、任意の[[要求メソッド]]を認めています。 (もちろん当該[[資源]]で対応していなければ、
[CODE(HTTP)[[[405]]]] や [CODE(HTTP)[[[501]]]] が返されたり
(ただし[[応答本体]]のみ)、 [CODE(HTTP)@en[[[GET]]]] にフォールバックしたりします。
[CODE(HTTP)@en[[[HEAD]]]] も [CODE(HTTP)[[[400]]]] となります。
[TIME[2015-06-14T08:55:02.000Z]]

;; [34] [[Apache]] は [CODE(HTTP)@en[[[TRACE]]]] にも対応しているので、
[CODE(HTTP)@en[[[TRACE]]]] CRLF と書くと [CODE(HTTP)[[[TRACE]]]] が帰ってきます。

* 応答の解釈

[19] [[HTTP/1.0]] や [[HTTP/1.1]] の[[要求]]であっても、[[応答]]の先頭を[[状態行]]として解釈できなければ、
[[HTTP/0.9]] [[応答]]と解釈することとなります。

[28] [[応答]]の最初の行に、 [[Chrome]] は [CODE[HTTP]]、 [[IE]] は [CODE[HTTP/]]、
[[Firefox]] は [CODE[HTTP/1.]] が含まれていれば、 [[HTTP/0.9]] では無いとみなすようです。
[[HTTP]] は大文字でも小文字でも構いません。行頭でなくても構いません。
[[行]]は、 [[LF]] までです。 [TIME[2015-06-13T14:21:44.300Z]]

[7] [[Firefox]] と [[Chrome]] は [CODE(HTTP)@en[[[PUT]]]] への[[応答]]が
[[HTTP/0.9]] だと、エラーとみなすようです。

[31] [[応答]]として何も返さないと (長さが0だと) [[ネットワークエラー]]とみなされるようです。
[[Firefox]] と [[Chrome]] では ([[XHR]] の) [[状態符号]] 0、
[[理由句]]が[[空文字列]]となります。 [[IE]] では [CODE[[[12152]]]]、
[CODE[[[Unknown]]]] となります。 [TIME[2015-06-14T08:46:47.800Z]]

[REFS[
- [5] [CITE@en[193921 – unable to http publish because not prompted for a password]]
( ([TIME[2014-07-15 07:03:01 +09:00]] 版))
<https://bugzilla.mozilla.org/show_bug.cgi?id=193921>
- [6] [CITE[chromium chromium/src/net/http/http_network_transaction.cc]]
( ([TIME[2014-07-14 05:04:37 +09:00]] 版))
<http://mxr.mozilla.org/chromium/source/src/net/http/http_network_transaction.cc#1028>
]REFS]

* 実装

[1] [[Apache]] に [KBD[[[GET]] / HTTP/0.9]] とかやってみたら、ほんとに HTTP/0.9 になりましたよ:−)

[8] >>1 現在の [[Apache]] は[[プロトコルの版]]に [[HTTP/0.9]]
を指定しても、 [[HTTP/1.0]] のように処理するようです。
[TIME[2014-08-28T12:55:31.400Z]]

[9] [[nginx]] は[[プロトコルの版]]に [[HTTP/0.9]] を指定すると、
[[要求行]]を受信した段階で [CODE(HTTP)[[[400]]]] を返します。

[27] [[nginx]] は [[HTTP/0.9]] [[応答]]に対して[[状態符号]]によらず[[応答本体]]のみ返しますが、
[[リダイレクト]]の場合 [[URL]] を[[応答本体]]には含めないため、
[[HTTP/0.9]] [[クライアント]]は[[リダイレクト]]先 [[URL]] を知ることができません。

[2] [CITE[HTTP0.9 Summary -- /DesignIssues]]
([TIME[2009-08-28 06:38:06 +09:00]] 版)
<http://www.w3.org/DesignIssues/HTTP0.9Summary.html>

[3] [CITE[IRC logs: freenode / #whatwg / 20140107]]
( ([TIME[2014-01-08 20:47:22 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140107#l-537>


[4] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]]
( ([TIME[2014-06-07 01:59:35 +09:00]] 版))
<https://tools.ietf.org/html/rfc7230#page-82>

[FIG(quote)[
[FIGCAPTION[
[35] [CITE@ja[HTTP/0.9にハマル | Livingdeadの日記 | スラド]]
([TIME[2015-06-14 18:02:16 +09:00]] 版)
<http://srad.jp/~Livingdead/journal/492941/>
]FIGCAPTION]

> ライブドア・データホテル・パトロールというサービスを使っている.これはなかなかのすぐれもので,ウェブサーバの監視をはじめ証明書の期限切れ検知などにも使えるのだが,最近lighttpdを使っているウェブサービスの死活監視に使ってみてHTTP/0.9のリクエストになっているのかなと思った.
> というのはlighttpdにtelnetで接続して「GET / 」と打つと400 Bad Requestになるのだが,データホテル・パトロールでも確かに400を検出して異常が検知されたことになる.

]FIG]


[36] [CITE[The HTTP Protocol As Implemented In W3]]
([TIME[1999-10-27 03:45:32 +09:00]] 版)
<http://www.w3.org/Protocols/HTTP/AsImplemented.html>