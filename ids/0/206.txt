[14] [[RFC 3339]] は [[IETF]] の新しい仕様で使われることが多い[[日時]]の表記方法を規定しています。

* 代替

[31] [[RFC 3339の日時形式]]は近年の [[IETF]] の仕様ではよく使われていますが、
それ以外ではあまり使われていません。 [[IETF]] 
内でも細かなバリエーションがあって統一しきれていません。
[[IETF]] が規定する仕様を利用する場合を除き、本[[日時形式]]は使うべきではなさそうです。
類似した[[日時形式]]の中では [[HTMLの日時形式]]がより厳密に規定されており、
利用しやすくなっています。

* 仕様書

[REFS[
- [24] [CITE@en[RFC 3339 - Date and Time on the Internet: Timestamps]] ([TIME[2014-09-29 15:50:28 +09:00]] 版) <http://tools.ietf.org/html/rfc3339>
- [25] [CITE[RFC Errata Report]] ([TIME[2014-11-13 04:10:16 +09:00]] 版) <http://www.rfc-editor.org/errata_search.php?rfc=3339>
]REFS]

* BNF

[PRE[
   date-time       = full-date "T" full-time
]PRE]

[PRE[
   full-date       = date-fullyear "-" date-month "-" date-mday
   full-time       = partial-time time-offset
]PRE]

[PRE[
   date-fullyear   = 4DIGIT
   date-month      = 2DIGIT  ; 01-12
   date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
   month/year
   time-hour       = 2DIGIT  ; 00-23
   time-minute     = 2DIGIT  ; 00-59
   time-second     = 2DIGIT  ; 00-59, 00-60 based on leap second rules
   time-secfrac    = "." 1*DIGIT
   time-numoffset  = ("+" / "-") time-hour ":" time-minute
   time-offset     = "Z" / time-numoffset
]PRE]

[PRE[
   partial-time    = time-hour ":" time-minute ":" time-second
                    [time-secfrac]
]PRE]

* 年

[19] [[ISO 8601]] (の当時の版) に従い、年号は4桁でなければなりません。1万年以降や0年よりも前は記述できません。

[1] この日付形式は[[2000年問題]]には対応していますが,[[10000年問題]]には対応出来ません。実装は [CODE(ABNF)[full-year = 4*DIGIT]] と読み替えるのが良いでしょう。但しこの場合固定長であるという特徴が失われるので注意する必要があります。

[2] なお、西暦1年〜999年を表す時には0を補わなければならないことに注意が必要です。 (但しそれ以前に[[暦]]が違うことにもっと注意が必要です。)

* 指示子

[17] [[指示子]]として [CODE[[[T]]]] と [CODE[[[Z]]]] があります。どちらも[[大文字]]と[[小文字]]のいずれでも良いことになっています。
ただし、[[大文字]]で生成する[['''べき''']]とされています [SRC[[[RFC 3339]]]]。

[26] 日時の区切りは [CODE[[[T]]]] と ([[ABNF]] 構文上は) されていますが、
[[NOTE]] において可読性のために[[空白]]など他の文字に置き換えても良い
[SRC[>>24]] となっています。単に「[[RFC 3339]] に従う」
というとき、何を区切りとして使う (認識する) べきなのかは明らかではありません。

* 閏秒

[18] [[RFC 3339]] は[[閏秒]]に対応しています。[[正閏秒]]として60秒を使うことができ、
[[負閏秒]]では59秒を使いません [SRC[[[RFC 3339]]]]。

;; [32] 実装がこれを正しく扱えるのかどうかは定かではありません。

* 文脈

[28] [CODE[[[report-uri]]]] で指定された [[URL]] に送信される [[JSON]]
では、本形式が採用されています。

* IETF の XML 系仕様の日付形式

[15] [[IETF]] の [[XML]] 系仕様では [[XML Schema]] や [[RELAX NG]] のデータ型としては [CODE(XML)@en[[[xs:dateTime]]]]
([[XML Schemaの日付形式]]) を採用しつつ、本文で [[RFC 3339の日付形式]]の制約を課していることが多いです。
詳しくは[[IETFのXML日付形式]]を参照。

* Syslog の日時

[20] [[Syslog]] の [CODE[[[TIMESTAMP]]]] は [[RFC 3339の日時形式]]を採用していますが、
次の制約を加えています [SRC[>>13]]。
[FIG(list)[
- [21] [[大文字]]を使わなければ[['''なりません''']]。
- [22] [CODE[[[T]]]] を使わなければ[['''なりません''']]。
- [23] [[閏秒]]を使っては[['''なりません''']]。
]FIG]

[REFS[
- [13] [CITE@en[RFC 5424 - The Syslog Protocol]] ([TIME[2014-09-14 04:23:15 +09:00]] 版) <https://tools.ietf.org/html/rfc5424#section-6.2.3>
]REFS]

* 関連

[7] RFC 3339 の日付・時刻形式は、 [[ISO 8601の日付形式]]の[[部分集合]]です。

[8] [[RFC 2518]] <urn:ietf:rfc:2518> 23.2 附属書2 にも簡単な説明があります。
これは Chris Newman の Internet Draft から採ったものとされていますが、
この draft の最終的に RFC になったものが RFC 3339 です。

[3] [[RFC2518]] (WebDAV) 規定時には RFC 3339 がまだ [[I-D]] だったので、 2518 23.2 (附属書2) で 3339 と同じものを規定しています。

[27] [[RFC 2518]] の改訂版である [[RFC 4918]] では [[RFC 3339]]
が参照されています。

[FIG(short list)[
- [CODE(URI)@en[[[DAV:creationdate]]]]
]FIG]

[6] 
この形式を採用した規格には、
[[IETF]] [[CPIM]] などがあります。

[9] [[HTMLの日付形式]] ([[大域日時]]) と似ていますが、 [[HTML]]
では [[T]] や [[Z]] に[[大文字]]を使わなければなりませんし、
[[HTML]] は[[閏秒]]にも対応していません。

[16] [[ISO 8601の日付形式]>>25]に、類似形式との比較があります。

[4]
この[[日付形式]]は[[時間帯]]を記述することが可能です。
[[受信者]]は、[[時間帯]]から[[送信者]]のおおよその位置を推定できます
(精度は余り高くないと考えられますが)。
これが便利なこともあれば、情報の漏洩といえることもあります。
そのような場合には、 [CODE[[[-00:00]]]]
([[時間帯]]不明) としてもよいと [[RFC 3341]]
は述べています。

([[名無しさん]])

[5]
[[RFC 4646]] は、 [[IANA]] 登録簿の[[日付形式]]として [[RFC 3339]]
の [CODE(ABNF)@en[[[full-date]]]] を採用しています。

[10] [CITE@en[Web Applications 1.0 r5474   disallow -00:00 in a global date and time stringFixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10370]]
( ([TIME[2010-09-24 09:55:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5473&to=5474>

[11] [CITE[Common Alerting Protocol]]
( ([TIME[2010-07-02 01:02:47 +09:00]] 版))
<http://docs.oasis-open.org/emergency/cap/v1.2/CAP-v1.2-os.html>

[12] [CITE@en[RFC 6021 - Common YANG Data Types]]
([TIME[2010-10-07 04:53:03 +09:00]] 版)
<http://tools.ietf.org/html/rfc6021>

[FIG(quote)[
[FIGCAPTION[
[29] [CITE@en[RFC 5070 - The Incident Object Description Exchange Format]]
([TIME[2015-07-11 22:59:28 +09:00]] 版)
<https://tools.ietf.org/html/rfc5070#section-2.8>
]FIGCAPTION]

> 
>    Date-time strings are formatted according to a subset of ISO 8601:
>    2000 '''['''13''']''' documented in RFC 3339 '''['''12''']'''.
>    The DATETIME data type is implemented as an "xs:dateTime" '''['''3''']''' in the
>    schema.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[30] [CITE@en[RFC 7493 - The I-JSON Message Format]]
([TIME[2015-11-29 21:37:53 +09:00]] 版)
<https://tools.ietf.org/html/rfc7493#section-4.3>
]FIGCAPTION]

> It is RECOMMENDED that all such data
>    items be expressed as string values in ISO 8601 format, as specified
>    in '''['''RFC3339''']''', with the additional restrictions that uppercase rather
>    than lowercase letters be used, that the timezone be included not
>    defaulted, and that optional trailing seconds be included even when
>    their value is "00".  It is also RECOMMENDED that all data items
>    containing time durations conform to the "duration" production in
>    Appendix A of RFC 3339, with the same additional restrictions.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[33] ([TIME[2015-10-04 21:50:44 +09:00]] 版)
<http://www.houjin-bangou.nta.go.jp/documents/k-resource-dl.pdf>
]FIGCAPTION]

>
,*凡例,*凡例の説明
,YYYY-MM-DD,インターネットの技術標準を議論するIETFによる、RFC3339に則った形式。平成27年10月5日(2015年10月5日)の場合は、「2015-10-05」と設定する。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[34] [CITE@ja[ScalaでRSSフィードの処理を書いてみたら思ったより大変でした - argius note]]
([TIME[2016-01-07 17:36:27 +09:00]] 版)
<http://argius.hatenablog.jp/entry/20130830/1377867921>
]FIGCAPTION]

> RSS2.0の日付もRFC 3339になっているケースが割とありました。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[35] [CITE[JSON Mail Access Protocol Specification (JMAP)]]
([TIME[2016-03-11 14:55:42 +09:00]] 版)
<http://jmap.io/spec.html>
]FIGCAPTION]

> Where the API specifies Date as a type, it means a string in RFC3339 date-time format, with the time-offset component always Z (i.e. the date-time MUST be in UTC time) and time-secfrac always omitted. The “T” and “Z” MUST always be upper-case. For example, "2014-10-30T14:12:00Z".
> Where the API specifies LocalDate as a type, it means a string in the same format as Date, but with the Z omitted from the end. This only occurs in relation to calendar events. The interpretation in absolute time depends upon the time zone for the event, which MAY not be a fixed offset (for example when daylight saving time occurs).

]FIG]


[FIG(quote)[
[FIGCAPTION[
[36] ([TIME[2016-06-27 15:00:30 +09:00]])
<http://www.houjin-bangou.nta.go.jp/documents/k-resource-dl.pdf>
]FIGCAPTION]

> YYYY-MM-DD インターネットの技術標準を議論するIETFによる、RFC3339に則った形式。
> 平成27年10月5日(2015年10月5日)の場合は、「2015-10-05」と設定する。

]FIG]

[37] 確かに[[日時形式]]の構文定義の一部として[[日付形式]]も [[RFC 3339]]
で定義されていると言えなくはないですが... [[RFC 3339]] を読んでも[[日時]]単体の構文を規定することを目的とした[[仕様書]]には見えないんですよねぇ...