[6] [DFN[[[ISO 8601]]]] は、日付と時刻の表現形式についての [[ISO]] [[国際標準]]です。

* 仕様書

[REFS[
- [7] '''[[ISO 8601]]'''
-- [38] [CITE@en[Home]]
([TIME[2013-12-10 08:40:33 +09:00]] 版))
<http://www.iso.org/iso/iso8601>
- [27] [[JIS X 0301]]: ISO 8601 に対応 ([[MOD]]) する [[JIS]]
]REFS]

[37] [[ISO 8601]] は >>38 から入手できますが、有料です。

* 表記法

[45] [[ISO 8601]] では[[地の文]]と[[日時表現]]や[[日時書式表現]]を区別するために、
[RUBYB[表現]@en[representation]]を「[」と「]」で括っています。この括弧は仕様書の表現上のもので、
表現の一部ではないとされています。 [SRC[>>7 Introduction]]

* 自由度と合意

[66] [[ISO 8601]] は[[日時表現]]や[[日時書式表現]]について、ある程度の自由度を認めています。

[67] そのような場合は、[[情報交換の当事者間の合意]]によって利用を認めるなどと規定されています。

[68] この場合、当該表現と他の表現が曖昧無く区別できるように注意する必要があります [SRC[>>7 3.7]]。

* 日時書式表現

[28] [DFN[[RUBYB[[[日時書式表現]]]@en[date and time format representation]]]]は、
[[日時表現]]の群の書式を説明する[RUBYB[表現]@en[representation]]です [SRC[>>7 2.3.2]]。

[46] [[ISO 8601]] は[[日時書式]]として認められるものを定義するために、
[[日時書式表現]]を用いています [SRC[>>7 3.3]]。

[47] [[情報交換の当事者間の合意]]により、[[日時書式表現]]を転送しても構いません。
その場合 [[ISO 8601]] により認められた[[日時書式表現]]のみを用いなければなりません。 [SRC[>>7 3.3]]

[51] [[ITU-T S.1]] [[レパートリ]] ([[telex]] など) を用いる環境では、
[[日時書式表現]]を用いてはなりません。 [SRC[>>7 3.4.1]]

[54] [[日時書式表現]]では、次の[[文字]]を使います [SRC[>>7 3.4.2]]。

,[[文字]],意味
,[CODE[[[Y]]]],[[年]]の[[数字]]
,[CODE[[[M]]]],[[月]]の[[数字]]
,[CODE[[[D]]]],[[日]]の[[数字]]
,[CODE[[[w]]]],[[週]]の[[数字]]
,[CODE[[[h]]]],[[時]]の[[数字]]
,[CODE[[[m]]]],[[分]]の[[数字]]
,[CODE[[[s]]]],[[秒]]の[[数字]]
,[CODE[[[n]]]],[[正数]]または[[0]]の[[数字]]

[55] [CODE[[[±]]]] は、[[正数]]または[[0]]の [CODE[[[+]]]] または[[負数]]の [CODE[[[-]]]] ([[マイナス]])
を表します [SRC[>>7 3.4.2]]。[CODE[[[±]]]] を使えない環境では、[[日時書式表現]]に
[CODE[[[±]]]] を含められません [SRC[>>7 3.4.1]]。

[48] [[下線]]は、[[日時表現]]においてそれに相当する部分が複数文字に展開され得ることを表します [SRC[>>7 3.3]]。
>>54 の[[数字]]を表す[[文字]]に[[下線]]があると、それが0[[文字]]以上であることを表します [SRC[>>7 3.4.2]]。
[[日時表現]]の[[情報交換]]の時点で文字数がわかっている時には、[[下線]]を用いてはなりません [SRC[>>7 3.3]]。 
[[文字]]に[[下線]]を付けられない環境では、[[文字]]の前に[[下線]]を置かなければなりません [SRC[>>7 3.4.1]]。

[56] その他の[[文字]]は、[[日時表現]]でも同じ[[文字]]を表します [SRC[>>7 3.4.2]]。

* 日時表現

[26] [DFN[[RUBYB[[[日時表現]]]@en[date and time representation]]]]は、
[[時間点]]や[[time interval]]、[[recurring time interval]] を示す[RUBYB[表現]@en[representation]]です
[SRC[>>7 2.3.1]]。

[52] [[日時表現]]では、[[大文字]]が使えない場合、[[小文字]]を使って構いません。
[SRC[>>7 3.4.1 NOTE 1]]

;; [60] [[日時書式表現]]では[[大文字]]と[[小文字]]の違いによって意味が変わることがあります。

** 先導0

[65] [[時刻]]要素で長さが決まっている場合には、必要なら[[先導0]]を用いなければなりません
[SRC[>>7 3.6]]。

** 指示子

[57] [[日時表現]] (や[[日時書式表現]]) では、次の[RUBYB[[[指示子]]]@en[designators]]
[SRC[>>7 3.4.3]] が使われます。

,[CODE[[[P]]]],[[時間]]指示子
,[CODE[[[R]]]],[[recurring time interval]] 指示子
,[CODE[[[T]]]],[[時刻]]指示子
,[CODE[[[W]]]],[[週]]指示子
,[CODE[[[Z]]]],[[UTC]] 指示子

[58] [[時間]]の表現では、次の[[指示子]]が使われます [SRC[>>7 3.4.3]]。
,[CODE[[[Y]]]]
,[CODE[[[M]]]],[[月]]や[[分]]
,[CODE[[[W]]]]
,[CODE[[[D]]]]
,[CODE[[[H]]]]
,[CODE[[[S]]]]

;; [59] [CODE[[[Y]]]], [CODE[[[M]]]], [CODE[[[D]]]] は[[日時書式表現]] (>>54) では違う意味になっています。

* 記号

[63] [CODE[[[:]]]] は、[[時]]、[[分]]、[[秒]]の区切りに使います [SRC[>>7 3.4.4]]。

[64] [CODE[[[/]]]] は、[[time interval]] や [[recurring time interval]] の区切りに使います
[SRC[>>7 3.4.4]]。

** ハイフンとマイナス

[61] [[マイナス]]は、[[日時書式表現]]の [CODE[[[±]]]] に相当する[[日時表現]]の部分で使って、
[[負数]]を表します。

[62] [[ハイフン]]は、[[年]]、[[月]]、[[週]]、[[日]]の間の区切りとして使います [SRC[>>7 3.4.4]]。

[49] [[ハイフン]]や[[マイナス]]は、 [[ISO/IEC 646]] を元にした[[文字レパートリ]]にあっては、
[CODE(charname)@en[[[HYPHEN-MINUS]]]] を用います。 [SRC[>>7 3.4.1]]

;; [50] [[ISO/IEC 10646]] や [[Unicode]] がそのような[[文字レパートリ]]と言えるのかは不明です...

** 空白

[53] [RUBYB[[[空白]]]@en[space]]は、明示的に認められた場合を除き、使ってはなりません。
[SRC[>>7 3.4.1]]

* 表現の種類

[36] [[日時表現]]の精度や値域によって、次のような分類があります。

- [32] [DFN[[RUBYB[[[完全表現]]]@en[complete representation]]]]は、
書式に関連付けられている日時部品すべてを含む表現です。
[[暦年]]を表す時刻要素は4桁に限られます。 [SRC[>>7 2.3.5]]
- [33] [DFN[[RUBYB[[[十進表現]]]@en[decimal representation]]]]は、
表現の最下位部品に[[小数]]を加えて表現を拡大したものです。 [SRC[>>7 2.3.6]]
- [34] [DFN[[RUBYB[[[精度を削減した表現]]]@en[representation with reduced accuracy]]]]は、
最下位部品を省略した表現です。 [SRC[>>7 2.3.7]]
- [35] [RUBYB[[[展開表現]]]@en[expanded representation]]は、
0年から9999年までの外側の[[暦年]]の[[日付]]を表せるように[[表現]]を拡大したものです
[SRC[>>7 2.3.8]]。

[69] また記号の有無によって次の分類があります。

- [29] [DFN[[RUBYB[[[基本書式]]]@en[basic format]]]]は、
要求される精度に必要なだけの最小の時刻要素により構成される[[日時表現]]または[[日時書式表現]]の書式です
[SRC[>>7 2.3.3]]。
- [31] [DFN[[RUBYB[[[拡張書式]]]@en[extended format]]]]は、
[[基本書式]]に追加の[[分離子]]を含めて拡張したものです [SRC[>>7 2.3.4]]。

;; [30] [[基本書式]]は、[[平文]]では避けるべきです [SRC[>>7 2.3.3 NOTE]]。

* プロファイル

- [[ISO 8601の時間形式]]

[9]
[[RFC 3339の日付形式]]は、特定の日時を表す[[部分集合]]で、
新しい [[IETF]] ではこれを採用することが推奨されています。

[10] [[XML Schema]] の仕様書第2部ではいろいろな基本的な[[データ型]]を規定していますが、
その中には RFC 3339 の日付形式に極めてよく似たものを含め、
いくつかの日付や時刻や時間の表現のための形式が定義されています。

[23] [[HTMLの日付形式]]のいくつかは、 [[ISO 8601]] をもとに定義されています。

[24] [[JavaScriptの日付形式]]には、 [[ISO 8601の日付形式]]の[[プロファイル]]が含まれています。

[11]
[[W3C]] [[Member Submission]] [[Note]] である [CITE[Date and Time Formats]]
<http://www.w3.org/TR/1998/NOTE-datetime> は、
RFC 3339 の日付形式を同じものや、それよりも精度が低いもの
[WEAK[(時刻を省略したものなど)]] など数種類の形式
(通称 [[W3C-DTF]]) を提案しています。
[[HTML 4]] などが採用していますが、 XML Schema 
データ型の登場により現在では時代遅れであると考えられています。

[4] [[RFC 2326の時刻形式]]の1つ、 [CODE(ABNF)[[[npt-range]]]] は、 
ISO 8601 に従った書式で、演奏時間範囲を指定するのに使われます。

[5] [[PICSの日付形式]]は2種類あり、そのうちの新しい方は
ISO 8601 に基づく書式です。 XML Schema のデータ型のものと似ていますが、
微妙に異なります。

[14]
[CITE@en-us[XLIFF 1.1 Specification]] ([CODE[2006-07-08 02:30:08 +09:00]] 版) <http://www.oasis-open.org/committees/xliff/documents/cs-xliff-core-1.1-20031031.htm#date>

[22] [CITE[XLIFF 1.2 Specification]] ([TIME[2008-02-05 00:30:42 +09:00]] 版) <http://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html#date>

[15]
[CITE[Global Information Management eXchange Metrics Volume 1.0 Specification]] ([CODE[2007-02-24 17:44:10 +09:00]] 版) <http://www.lisa.org/standards/gmx/GMX-V.html#Attr_date>

>>14 の関連規格だけど日付形式は違う
([[名無しさん]])

[16]
[CITE@en-us[TMX Specification]] ([CODE[2007-02-24 17:51:20 +09:00]] 版) <http://www.lisa.org/standards/tmx/tmx.html#changedate>
([[名無しさん]])

[17]
[CITE@en-us[TMX Specification]] ([CODE[2007-02-24 17:51:20 +09:00]] 版) <http://www.lisa.org/standards/tmx/tmx.html#creationdate>
([[名無しさん]])

[18]
[CITE@en-us[TMX Specification]] ([CODE[2007-02-24 17:51:20 +09:00]] 版) <http://www.lisa.org/standards/tmx/tmx.html#lastusagedate>
([[名無しさん]])

[19]
[CITE[XML Text Memory Namespace 1.0 Specification]] ([CODE[2007-02-24 17:56:51 +09:00]] 版) <http://www.lisa.org/standards/xmltm/xml-tm.html#Attr_date>
([[名無しさん]])


[20]
[CITE@en[TermBase eXchange Link (TBX Link) Specification]] ([TIME[2007-02-24 18:05:26 +09:00]] 版) <http://www.lisa.org/standards/tbxlink/tbxlink.html#Attr_date>

[[#comment]]


* 変種

[12] [[PICSの日付形式]]は2種類あり、そのうちの古い方は
ISO 8601 に基づいた書式であることを意図していましたが、
日付の部分の区切子に誤って [CODE(char)[[[HYPHEN-MINUS]]]]
ではなく [CODE(char)[[[FULL STOP]]]] を使っていました。
(新しい方の書式では修正されています。)

[13] ISO 8601 の日本版規格である [[JIS X 0301]] は、 ISO 8601 
に加えて[[元号]]を使った[[和暦]]の[[年号]]を表現するための書式を規定しています。


[21] [[HTMLの日付形式]]は実質的に [[ISO 8601]] の[[プロファイル]]ですが、
[[ISO 8601]] を[[引用]]せずに定義されています。 [[HTML]] は[[閏秒]]に対応していないなどの違いもあります。

* 主要プロファイルの比較

[25] 主要なプロファイルの違いは次のようになっています。

, ,[[HTML]]: [[妥当な大域日時文字列]],[[HTML]]: [[妥当な地方日時文字列]] ,[CODE[[[xs:dateTime]]]] (1.1),[CODE[[[xs:dateTimeStamp]]]] (1.1) ,[[RFC 3339の日付形式]] ,[[W3C-DTF]]
,年のみ                      ,×,× ,×,× ,× ,○
,年月のみ                    ,×,× ,×,× ,× ,○
,年月日のみ                  ,×,× ,×,× ,× ,○
,負の年                      ,×,× ,○,○ ,× ,×
,0年                         ,×,× ,○,○ ,○ ,○
,5桁以上の年                 ,○,○ ,[[先導0]]禁止,[[先導0]]禁止 ,× ,×
,日時区切り                  ,[CODE[T]]/[CODE[[[U+0020]]]],[CODE[T]]/[CODE[[[U+0020]]]] ,[CODE[T]],[CODE[T]] ,[CODE[T]]/[CODE[t]], [CODE[T]]
,24時                        ,×,× ,○,○ ,× ,×
,秒の省略                    ,○,○ ,×,× ,× ,○
,秒の小数部                  ,指定可,指定可 ,指定可,指定可 ,指定可 ,指定可
,[[閏秒]]                    ,なし,なし ,なし,なし ,60まで ,なし
,[[時間帯]]                  ,必須,禁止 ,指定可,必須 ,必須 ,時刻ありなら必須
,[[UTC]]                     ,[CODE[Z]],- ,[CODE[Z]],[CODE[Z]] ,[CODE[Z]]/[CODE[z]] ,[CODE[Z]]
,[[時間帯]]の[[時]]の範囲    ,0-23,- ,0-14,0-14 ,0-23 ,記載なし
,[[-00:00]]                  ,禁止,- ,特記なし,特記なし ,「不明」の意 ,特記なし

* JIS X 0301

[39] [[JIS]] では [DFN[[[JIS X 0301]]]] が対応します。
([DFN[[[JIS X 0302]]]] (時刻形式) は X0301 に吸収されて廃止。)

[40] >>39 但し [[JIS X 0301]] では[[元号]]の表現についても規定しています。
そのため対応度は [[MOD]]。

[44] :2002 5.1.3 で、文字に [CODE[平]] とかを追加してるけど、 4.4 を修正してないのは初歩的なミス。 4.4 は 
[[JIS X 0201]] で規定する文字を使うといっているが、 [CODE[平]] とかは 0201 にはない。

[41] [TIME[2002-12-14 15:38]] JIS X 0301 は 2002年に新版が出たらしいのですが、 [[JISC]] Web site からはまだ入手出来ないどころか、旧版も見れない状態が続いています。

[42] [TIME[2003-04-30 12:33]] >>41 今は :2002 が入手できるようです。

* 歴史

[9] 1988年に初版 [DFN[[[ISO 8601:1988]]]] が、1991年に[[技術訂正票]]
[DFN[[[ISO 8691:1988]]/Cor.1:1991]] が、 2000年に改訂版 [DFN[[[ISO 8601:2000]]]] が、
2004年に大改訂版 [DFN[[[ISO 8601:2004]]]] が出版されています。

*メモ

[43] ''Index of ftp://elsie.nci.nih.gov/pub'' <ftp://elsie.nci.nih.gov/pub>

[1] ''日付および時刻の国際標準表記法'' 
<http://www.geocities.co.jp/CollegeLife-Cafe/1646/roomazi/date-time.html>: 
例の[[まーくん]]の、 ISO 8601 推進のための入門的紹介文の翻訳。

[2] >>1 まあさすがに原文がまーくんだけあって中々まーくん風味のまーくん的文章ですね(謎)

[3] >>1−2 なんだかんだ言ってまーくんって英語圏では有名人で影響力ある人だし、
実際 >>1 の原文も英語の技術系 ML とか Web とかでよく参照されてるよねぇ。