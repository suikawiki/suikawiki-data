[1] 【[[SGML]]・[[XML]]】 物理的に他の[[実体]]に含まれていない実体。
普通[[ファイル]]などの形で保管されており、他の実体からは[[外部識別子]]により参照される。

[2] XML の外部実体の種類と、その満たさないといけない構文規則:
,[[文書実体]]      ,[CODE(XML)[[[document]]]]
,[[外部部分集合]]  ,[CODE(XML)[extSubset]]
,[[宣言]]間で参照される[[外部引数実体]],[CODE(XML)[extSubsetDecl]]
,宣言中で参照される外部引数実体
,[[実体値]]中で参照される外部引数実体
,[[文書実現値]]内で参照される[[外部解析実体]],[CODE(XML)[extParsedEnt]]
,[[外部非解析実体]],(無制限)

[3] なんとなく、
[PRE[
<!ENTITY % ent SYSTEM "data:,%22EntityValue%22">
<!ENTITY entity %ent;>
]PRE]
みたいのはありかなあ? って気がしますが、 XML 仕様書にはダメとは書いてないので、いいんでしょう。
- [4] >>3 [[外部引数実体]>>1] へ。

* スケーラビリティー

[11] [[DTD]] など[[外部実体]]が [[HTTP URL]] で指定されている場合、
[[外部実体]]を取得する[[処理器]]でそのような[[文書]]を読み込むとその [[HTTP鯖]]へとアクセスが発生します。
[[キャッシュ]]や[[型録]]の仕組みがあるとはいえ、広く使われている[[外部実体]]には大量のアクセスが集中します。

[12] これは[[スケーラビリティー]]上の問題と指摘されている [SRC[>>9]]
のみならず、実際に [[HTML]] などの [[DTD]] がある [[W3C]] や [[RSS]]
の [[DTD]] があった [[Netscape]] の [[Webサイト]]には [[DDoS攻撃]]とも言えるほどのアクセスがあり、
苦慮しているようです。

* セキュリティー

[13] [[外部実体]]がその参照元と異なる場合など、[[外部実体]]を信用できない可能性がある場合には、
[[利用者]]や参照元の[[著者]]が想定していない悪意ある情報や指示が混入させられることがありますから、
配慮が必要です [SRC[>>9]]。

[14] [[外部実体]]による混入だけでなく、例えば[[外部実体]]へのアクセスの有無によって[[利用者]]が[[文書]]を開いたかどうかを判断するなどの[[プライバシー]]や[[セキュリティー]]に関わる想定外の利用方法もあり得ますから、注意しないといけません。

[15] [[Webブラウザー]]における [[XML]] の実装が[[外部実体]]を[[展開]]しないのは、
このような問題も一因だったと思われます。

* 事前条件符号 [CODE(XMLe)@en[no-external-entities]] (WebDAV)

[5] [CODE(URI)@en[[[DAV:]]]] [[名前空間]]の [DFN[[CODE(XMLe)@en[[[no-external-entities]]]]]]
[[要素]]は、[[外部実体]]が[[参照]]されていることを示す[[事前条件符号]]です。

[7] [[鯖]]が [[payload body]] に[[外部実体]]が含まれることを理由に[[要求]]を拒絶するなら、
[[状態符号]] [CODE(HTTP)[[[403]]]] と[[事前条件符号]]
[CODE(XMLe)@en[[[no-external-entities]]]] を使う[['''べきです''']] [SRC[>>6, >>9]]。

;; [10] [[WebDAV]] は[[外部実体]]は信頼出来ないもので注意するべき [SRC[>>9]]
としながらも、利用や対応を禁止まではしていないようです。

[8] この[[要素]]の[[内容]]は[[空]]です [SRC[>>6]]。

[REFS[
- [6] '''[CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#page-100>'''
- [9] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-20.6>
]REFS]