#?SuikaWikiImage/0.9 image-alt="DocumentFragment を子供に appendChild" image-type="image/png"
[1] [CODE(DOM)[[[DocumentFragment]]]] 節をその子供の節に 
[CODE(DOMm)[[[appendChild]]]] しようとした場合の図。

青色の節が追加先の ([CODE(DOMm)[appendChild]] を実行する) 節です。
灰色の節が追加する ([CODE(DOMm)[appendChild]] の引数とする)
節です。この例では青色が灰色の子供の1つです。
赤色・赤丸の節は、実際に追加されるべき節です。 [CODE(DOM)[DocumentFragment]]
節なので、灰色の節自体ではなく、[[子節]]が追加されます。
このうちの一つ (赤丸かつ青色) の節は、追加先でもあります。

この図のような場合は、そのまま実行してしまうと木構造が壊れてしまいます。
DOM では先祖節を追加しようとした場合には例外 [CODE(DOM)[[[DOMException]]]] 
[CODE(DOM)[[[HIERARCHY_REQUEST_ERR]]]] が発生することとされており、
この図の場合もそれに該当します。

__IMAGE__
iVBORw0KGgoAAAANSUhEUgAAAGwAAABlCAIAAAAnC5FSAAAAA3NCSVQICAjb4U/gAAAAB3RJ
TUUH1AoCDQcmMFak2gAAABR0RVh0U29mdHdhcmUAR1YgVmVyIDAuODX5Ndk8AAAADnRFWHRD
cmVhdGlvbiBUaW1lAPQ2IA0AAARkSURBVHic7ZzbEtsgDESh0//G/nL6QEIxN3NZISDsdDqZ
1DFwvBII25Vaa3HUpz/cHdhBByJAByJAByJAByJAf1Enuu/SI5VCtTmLJGSJYwiW0LGsd0IJ
gHjf1URc225Asx0ixFN7GLMRYnn8lp/NaEWaLRAb4rf8zFYL0ayGSEcw2+j73K/4qMOWOHQy
BJVS9kP0mPu+uTjWLbZZbCie4KwrXXuaA0oMS6EFnBiV4eVx5IJY4UQuG4byYDFmQ6M1ameT
8sLveaPYqhTiPDYUQiilXHzHiaXySLnuW8aJ8yjlu9mXONxX2vQhsrJxxRjURRULb0L0Ep8H
8bou7/jx9y/fIWL3GtokpQxhiZj7pJTmw0iURRC5Zz8hZV2NPxjlqhVLXpZdLf02LTY7W4tV
/aThV1V6gThDLPdIa22cSIpyASf2h6SLEtSph3IQZ7AhMKnRWXJqJ8KnBSJLzgsxRbB//HCO
k0JMjRA1fje0+8+WjBfGhGhGlQlkbJi/Nveq6ZxoAI0s2vrdPRfEcothZ4ZOjnGI4/e+TG4q
JEjh0x6OSSeOTIhtIQxf7jVz5A/ntlmCKGm2ceSEWBXCw9TAMQJxTEKEzMJEtXAtx7gTqRMi
xICkFq46OUM4TxjCKRXWM6MhwgOQbpewPNsMhQivRgZsuIqC60R5jyVoW3tfImgS7bZ6JwzP
71qBDKKULqNIkS/lBygOJUp+1n6ORQRMacL52+pzr+mSng1Nz4jvItXqP0HTMbd79sI/RQDR
ISjE9U2Cl+3i4+AmjjIrxBjquoSGGHG+u3a/Ij+pL5l1WvU9jrfhfxA5rFCIiWakvLWmWb6b
+LJ/gPKuRzZ9o50Ya0Zr5fjxenqzQ+FEj+CozdnCU0W/FEIg9xPTA4BRyzSHs6G0idsa4u0K
RSC2F86BDbVWNpCBEe0PEqrPwvPbinT+wfwdlq3JcKbcy7l6fqy/g/G+jXzZ0cRnmrKT1TeW
o4U/+S6OjWXzAeXHhxnNCGmM6S6dUvE8onbWWn3dd0WKgfrxP0pm5yk6iv2hklVU7r6zqLJk
W2rvGLO3rmbcXstdOtSDxv13xydXLpzZHwlbRe+7ON7zJK+z9g+ix7w9YI8JDzbJfu+Ifp+d
S5xlj0kdvCs+o4oXJI9SKoJo/NXA0Vu4kd4JYVTp7QGT73r8aDPjfqq4x1I77S50f7lTJGVf
xrBbmhEPMWPYXY1JtQHxO7EsuJ7FGd8oqaj8knHifiblf1J2A5FA3M9refE4cbO0yABxP5Pi
If5aLAvGiWWniOaBSPRkJpfAEMu57BTyeCdW0dnDjJyL7W2CGgmxYV7egyN/2bcBR/7/5sri
y7/mMLNgENuslN/s6evROPVCjL40g3LQKsUPwIneOO17EJ3jX+juYNfEEnUK9u29JTjyz84Z
LRHLYnKIq+hABOhABIgZ4kJTcEbHiQDxl32hGVeZlK0wFUu43q4CEf68s1eDhamr1t07gGiN
4nRynYkFoAMRoH8m3JiCTNl7JwAAAABJRU5ErkJggg==