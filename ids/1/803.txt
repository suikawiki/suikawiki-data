[1] [[HTML]] の [DFN[[CODE(HTMLe)@en[[[script]]]]]] [[要素]]は、動的な[[スクリプト]]や、
[[スクリプト]]が使うデータを[[文書]]に埋め込むものです。

[9] 
:[[開始タグ]]:必須
:[[終了タグ]]:必須
:出現できる文脈:[CODE(HTMLe)[[[head]]]] の子として、または [CODE(HTMLe)[[[body]]]]
子孫の大抵の場所で
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,出典
,[[大域属性]]
,[CODE(HTMLa)[[[archive]]]]	,	,	,[NC4]
,[CODE(HTMLa)@en[[[async]]]]
,[CODE(HTMLa)[[[charset]]]]	,[CODE(SGML)[%[[Charset]]]]	,	,charset ヒント	,[HTML 4]
,[CODE(HTMLa)[[[classname]]]]	,[[逆ドメイン名]]	,	,級名	,[ECMA-290]
,[CODE(HTMLa)@en[[[crossorigin]]]]
,[CODE(HTMLa)[[[defer]]]]	,([[真偽値属性]])	,(偽)	,遅延評価	,[HTML 4]
,[CODE(HTMLa)[[[event]]]]	,	,	,[[事象]]	,[HTML 4] 予約
,[CODE(HTMLa)[[[for]]]]	,[CODE(SGML)[[[IDREF]]]]	,	,対象	,[HTML 4] 予約
,[CODE(HTMLa)[[[id]]]]	,[CODE(SGML)[[[ID]]]]	,(なし)	,固有識別子
,[CODE(HTMLa)[[[language]]]]	,	,	,スクリプト言語	,[HTML 4] 非推奨
,[CODE(HTMLa)@en[[[x-mojo-version]]]]
,[CODE(HTMLa)[[[name]]]]	,	,	,	,非標準
,[CODE(HTMLa)[[[purpose]]]]	,	,	,実行目的	,[ECMA-290]
,[CODE(HTMLa)[[[src]]]]	,[CODE(SGML)[%[[URI]]]]	,(内容)	,外部スクリプト	,[HTML 4]
,[CODE(HTMLa)[[[type]]]]	,[CODE(SGML)[%[[ContentType]]]]	,(必須)	,[[スクリプト言語]]	,[HTML 4]
,[CODE(XMLa)[[VAR[ev:]][[event]]]]	,[CODE(ABNF)[[[QName]]]]	,(なし)	,[[事象名]]
,[CODE(XMLa)[[VAR[ev:]][[observer]]]]	,[CODE(XML)[[[IDREF]]]]	,	,[[事象観察器]]
,[CODE(XMLa)[[VAR[ev:]][[phase]]]]	,	,	,
,[CODE(XMLa)[[VAR[ev:]][[propagate]]]]	,	,	,[[伝播]]制御
,[CODE(XMLa)[[VAR[ev:]][[target]]]]	,[CODE(XML)[IDREF]]	,	,事象対象

* 仕様書

[REFS[
- [130] [CITE@en-US-x-hixie[HTML Standard]] ([TIME[2013-12-19 00:10:55 +09:00]] 版) <http://www.whatwg.org/specs/web-apps/current-work/#the-script-element>
]REFS]

* 意味

[131] [CODE(HTMLe)@en[[[script]]]] [[要素]]は、動的な[[スクリプト]]や、データブロックを[[文書]]に含めるために使うことができます。
[SRC[>>130]]

;; [134] どちらであるかは [CODE(HTMLa)@en[[[type]]]] [[属性]]や [CODE(HTMLa)@en[[[language]]]]
[[属性]]によって決まります。

[132] [CODE(HTMLe)@en[[[script]]]] [[要素]]は[[利用者]]に対する[[内容]]を[[表現]]していません。 [SRC[>>130]]

* 動的なスクリプト

[133] 動的な[[スクリプト]]として [CODE(HTMLe)@en[[[script]]]] [[要素]]を使う時は、
- [[スクリプト]]を[[要素]]の[[内容]]として直接埋め込むか、
- 外部の[[スクリプト]]を [CODE(HTMLa)@en[[[src]]]] [[属性]]によって参照するか

... のどちらかの方法となります [SRC[>>130]]。

[135] [CODE(MIME)@en[[[text/javascript]]]] 以外の[[スクリプト言語]]の時は、
[CODE(HTMLa)@en[[[type]]]] [[属性]]は[['''必須''']]です [SRC[>>130]]。

[136] [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]は、
[[スクリプト言語]]の仕様により定められた要件に従わなければ[['''なりません''']] [SRC[>>130]]。

* データブロック

[137] データブロックとして [CODE(HTMLe)@en[[[script]]]] [[要素]]を使う時は、
[[要素]]の[[内容]]として直接埋め込まなければ[['''なりません''']] [SRC[>>130]]。 

[138] [CODE(HTMLa)@en[[[type]]]] [[属性]]は[['''必須''']]であり、
[CODE(HTMLa)@en[[[src]]]] [[属性]]は使っては[['''なりません''']] [SRC[>>130]]。

[139] [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]は、
[CODE(HTMLa)@en[[[type]]]] [[属性]]で指定された書式の要件に従わなければ[['''なりません''']] [SRC[>>130]]。

* 構文

** タグ

[68] [CITE[Bug 6357 – <script> start tag parsing]] ([TIME[2009-01-06 14:41:59 +09:00]] 版) <http://www.w3.org/Bugs/Public/show_bug.cgi?id=6357>

[69] [[Presto]] と [[WebKit]] は [CODE(HTMLe)@en[[[script]]]] [[開始タグ]]で[[認められている斜線]]を認識し、
[[void要素]]と同じような挙動をします。この挙動は既存の [[Widget]] ([[Opera Widget]]、[[Dashboard]])
との互換性のために必要です。

[70] [[Ian Hickson]] は、特定の非 [[Web]] 環境で必要という理由だけで [[HTML5]]
仕様を変更するつもりはないと >>68 で述べています。 (かなり前にもこの問題が取り上げられたときに同じことを言っていた気がします。)

* 文脈

[14] [CODE(HTMLe)[script]] 要素は、 [CODE(HTMLe)[[[head]]]] 要素や
[CODE(HTMLe)[[[body]]]] 要素の中の大抵の場所に出現できます
[SRC[HTML 4 18.2.1]]。

* 内容

** 共通の制約

[140] [CODE(HTMLe)@en[[[script]]]] [[要素]]の [CODE(DOMa)@en[[[textContent]]]] は次の要件を満たさなければ[['''なりません''']]
[SRC[>>130]]。
[FIG[
- [143] [CODE[[[<!--]]]] があると、それに対応する [CODE[[[-->]]]] が必要です。
- [144] [CODE[[[<!--]]]] と [CODE[[[-->]]]] の間には他の [CODE[[[-->]]]] や
[CODE[<script]] ([[大文字]]または[[小文字]]) の後に[[空白文字]]や [CODE[[[/]]]] や [CODE[[[>]]]]
が続く文字列が入ってはいけません。
]FIG]

[141] [[HTML]] の[[構文解析器]]は [CODE(HTMLe)@en[[[script]]]] [[要素]]内において [CODE[[[<!--]]]]
と [CODE[[[-->]]]] の対応関係や [CODE[<script>]] と [CODE[</script>]]
の対応関係を考慮して複雑な解釈を行います。それに反して [[HTML]] として[[直列化]]できない値や混乱を招くものを禁止するために
>>140 のような規定があります。

** 外部スクリプトについてのドキュメントの制約

[142] [CODE(HTMLa)@en[[[src]]]] [[属性]]が指定されている場合、 [CODE(HTMLe)@en[[[script]]]]
[[要素]]の[[内容]]は外部の[[スクリプト]]についての[[ドキュメント]]とみなされます。
[[スクリプト]]として実行はされません。この場合には、 ([[スクリプト言語]]に関わらず) 
次のものだけを使わなければならないという制約が課されます (空でも構いません) [SRC[>>130]]。
[FIG[
- [145] [CODE(charname)@en[[[SPACE]]]]
- [146] [CODE(char)@en[[[U+0009]]]]
- [147] [CODE(charname)@en[[[LF]]]]
- [148] [[JavaScript]] の行内コメント [CODE[/* ... */]]
- [149] [[JavaScript]] の一行コメント [CODE[[[//]] ... [[LF]]]]
-- 末尾に[[改行]]が必要です。
]FIG]

** 言語依存の制約

[150] [[HTML Standard]] は共通の制約以外には [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]について制約を課しておらず、
[CODE(HTMLa)@en[[[type]]]] (と [CODE(HTMLa)@en[[[language]]]]) によって決定される[[言語]]の仕様による制限に適合しなければならないとしています。

[151] ただし実際にはそのような制約を明示している仕様はありません。

[152] [[HTML Standard]] によれば、 [CODE(HTMLe)@en[[[script]]]] [[要素]]で [CODE(HTMLa)@en[[[src]]]]
[[属性]]がない場合、 [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]は
- [153] [[XML]] ベースの[[言語]]であれば[[子供]]を
- [154] テキストベースの[[言語]]であれば[[子供]]の[[テキスト節点]]を

... 使うことになっています。ここから推測すると、
- [155] [[XML]] ベースの[[言語]]であれば、 [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]がその [[XML]]
[[言語]]の[[要素]]や[[テキスト]]
- [156] テキストベースの[[言語]]であればその[[言語]]によって記述された[[テキスト]]のみで、
[[要素]]は使用してはいけない

... という風に解釈するのが妥当でしょう。

[157] ただし [[HTML]] 構文では [CODE(HTMLe)@en[[[script]]]] 
[[要素]]の構文解析直後の状態は常に[[テキスト節点]]を高々1つだけ含んだ状態になります。[[要素]]を[[子供]]にするためには
[[XML]] 構文を使うか[[スクリプト]]で挿入するしかありません。そのため、データブロックとして [[XML]]
ベースのデータが [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[内容]]に埋め込まれることがありますが、
[[XML]] のソースを[[テキスト節点]]として含んだ状態になってしまいます。

** 擬似注釈宣言の使用

[18] [CODE(HTMLe)[script]] 要素に対応していない古い WWW ブラウザは、
[CODE(HTMLe)[script]] 要素内の[[文字データ]]も構わず解釈してしまいます。
そこで、 [CODE(HTMLe)[script]] 要素の内容としてスクリプトを記述するときには、
HTML の[[注釈宣言]]のように最初に [CODE(HTML)[<!--]] を、
最後に [CODE(HTML)[-->]] をつけることが慣習となっています。

HTML 4 によれば、これは HTML の機能ではなく、[[スクリプト機関]]の機能とされています。
この機能に対応している言語には [[JavaScript]], [[VBScript]], [[Tcl]]
があるようです。 [SRC[HTML 4 18.3.2]] より正確には、この3つの言語は
[CODE(HTMLe)[script]] 要素の内容の一番最初の非[[空白]]文字列が
[CODE[<!--]] であるとき、これを無視するらしいです。
最後の [CODE[-->]] は、3つの言語のいずれも、それだけで書くことはできず、
それぞれの言語の注釈の内容として (JavaScript の場合は [SAMP(JS)[// -->]] 
のようにして) 書くことが必要らしいです。

[Q[らしい]]というのは、正確にこれを規定した仕様がないからです。
HTML 4 は[Q[スクリプト機関]]によるものだと言っていますから、
スクリプト言語の言語仕様かなにかに規定があってもよさそうなものですが、
そのようなものは見たことがありません。また、 HTML
に直接埋め込まれていない [[ECMAScript]] のスクリプトのソース・コードに
[CODE[<!--]] という文字列があってもよいという話も聞きません。
([CODE(HTMLe)[[[style]]]] 要素も同じような事情ですが、こちらは
[[CSS2]] で言語仕様の一部としてきちんと定義されています。)

[42] 少なくても [[JavaScript]] では、
最初の [SAMP[<!--]] が含まれる行の行末までを無視するのが
Web ブラウザの普通の実装のようです。

[27] このような注釈宣言 (のようなもの) の中では、 (SGML
的には [CODE(SGML)[CDATA]] なので注釈宣言ではないとはいえ、
古い UA の立場からしても SGML 的に正当であるために) [CODE(SGML)[[[COM]]]]
([CODE(HTML)[--]]) を含めるべきではないと考える人もいます。

[19] なお、 XHTML 1 の [CODE(HTMLe)[script]] 要素は、 [CODE(SGML)[CDATA]]
ではありませんので、注釈宣言 (のようなもの) を書くと、
本当に XML の注釈宣言と解釈されてしまいます。当然、
スクリプトとして解釈・実行されることはありません。

[40] [CODE(HTMLe)[script]] 要素が使われ始めたばかりの1996年ごろまでは、
注釈宣言 (のようなもの) の閉じの前に
[PRE(HTML)[
<script language="javascript">
<!-- hide script from old browsers
[VAR[...]]
// hide script from old browsers -->
</script>
]PRE]

のように自然言語の注釈を入れておくことがよく行われていました 
(初期の使用例にそう載っていたからみんなで真似したのでしょう)。
(この例のように開き (のようなもの) の後に書くこともできましたが、
閉じの前に書くのが普通だったと記憶しております。)
後にこのような冗長なことはせず、
[PRE(HTML)[
<script language="javascript">
<!--
[VAR[...]]
//-->
</script>
]PRE]

のように簡単に書くようになりました。

[35] また、[Q[裏技]]的なものとして、
[PRE(HTML)[
<script language="javascript">
<!--
[VAR[...]]
// -->スクリプトに対応していません。<!--
[VAR[...]]
// -->
</script>
]PRE]

のような書き方が紹介されることもありました。
(この例のようになぜかスクリプトの途中に書いているものもあれば、
注釈宣言 (のようなもの) の前後に書いているものもありました。
どこに入れるにせよ、書く内容は一行にするか、
うまくして行頭にスクリプト言語の注釈導入子が来るように調整することが重要です。
また、 [CODE(SGML)[[[etago]]]] が使えないことにも注意が必要です。)

[38] スクリプト言語の演算子として [CODE[>]] を使うことが良くありますが、
古いブラウザの中には注釈宣言を [CODE[>]] で終えてしまうものがあることが知られています。
[SAMP(JS)[[VAR[x]] > [VAR[y]]]] のような式は [SAMP(JS)[[VAR[y]] < [VAR[x]]]]
と書くことで回避できます。 [SRC[HTML 4 18.3.2 Note]]
もっとも、そのようなブラウザは HTML 4 の時点でも骨董品ですし、
HTML 4 も特にそうするべきだなどとは言っていません。

参考文献:
- [16] [CITE[<SCRIPT>〜</SCRIPT> 内の要素はすべてコメントで囲んだ方が安全です。]]
<http://openlab.ring.gr.jp/k16/htmllint/explain.html#comment-element>

誤って「[CODE(JS)@en[//->]]」のようなもので終わることもあるみたいです。

* 状態

[HISTORY[
[183] 
[FIG(short list)[
- [F[[[スクリプトブロックの型]]]]
]FIG]
]HISTORY]

* 処理

[28] [CODE(HTMLe)[script]] 要素によるスクリプトは、
文書の読込み時に実行されます [SRC[HTML 4 18.1]]。

[CODE(HTMLa)[src]] 属性による外部スクリプトは優先的に実行されるという説を唱える人がいますが、
根拠は不明です。特定の UA ではそうなのかもしれませんが、
少なくても HTML 4 は何も規定していません。
但し、 [CODE(HTMLa)[[[defer]]]] 属性や [CODE(HTMLa)[[[event]]]]
属性は実行時機に影響するのかもしれません。

** 構文解析との関係

[63] 
[CODE(HTMLa)@en[[[defer]]]]、[CODE(HTMLa)@en[[[async]]]] なしの場合で、
[CODE(HTMLa)@en[[[src]]]] ありの場合に、外部[[スクリプト]]が実行されるまで[[構文解析]]は停止するか?

[CITE[Index of /~wakaba/-temp/test/html/script/src]] ([TIME[2008-12-16 11:37:00 +09:00]] 版) <http://suika.fam.cx/~wakaba/-temp/test/html/script/src/>

[64] [[HTML]] として記述された [CODE(HTMLe)@en[[[script]]]] [[要素]]の場合 (nodefer-1)、
どのブラウザも[[構文解析]]が停止します。

[65] [[DOM]] によって作成された [CODE(HTMLe)@en[[[script]]]] [[要素]]の場合 (nodefer-script-1)、
[[Opera]] 以外は[[構文解析]]を続行し、外部[[スクリプト]]は準備が出来次第実行します
([[HTML5]] に従った動作)。 [[Opera]] 9.61 は >>64 同様、[[構文解析]]を停止します。

** 実行タイミング

[164] [CODE(HTMLe)@en[[[script]]]] [[要素]]から作成された[[スクリプト]]の実行のタイミングは、
[[構文解析器]]によって作られた [CODE(HTMLe)@en[[[script]]]]
[[要素]]か否かや、[[属性]]の有無により、何種類かあります。

[FIG(list)[
- [169] その場
-- その他の場合
-- その場 (挿入や[[終了タグ]]の時点) で実行されます。
[[スクリプト]]内から呼ばれている場合も、再帰的に[[スクリプト]]を実行します。
- [165] [[pending parsing-blocking script]]
-- ([CODE(HTMLa)@en[[[src]]]] & [["parser-inserted"]]) or [[has a style sheet that is blocking scripts]] の場合
-- [[構文解析器]]によって[[スクリプト]]を実行中ならすべて完了させてから、
必要な[[スクリプト]]や[[スタイルシート]]が読み込まれるまで[[構文解析]]を中断し、
読み込まれた時点で実行され、[[構文解析]]も再開されます。
- [166] [[list of scripts that will execute when the document has finished parsing]]
-- [CODE(HTMLa)@en[[[src]]]] & [CODE(HTMLa)@en[[[defer]]]] & [["parser-inserted"]] の場合
-- [[stop parsing]] が実行します。
- [167] [[list of scripts that will execute in order as soon as possible]]
-- [CODE(HTMLa)@en[[[src]]]] の場合
-- [[fetch]] 完了時の[[タスク]]で実行します。
-- [[構文解析]]実行中に登録された場合、実行完了まで [CODE(DOMe)@en[[[load]]]] を遅延させます。
- [168] [[set of scripts that will execute as soon as possible]]
-- [CODE(HTMLa)@en[[[src]]]] & [CODE(HTMLa)@en[[[async]]]] の場合
-- [[fetch]] 完了時の[[タスク]]で実行します。
-- [[構文解析]]実行中に登録された場合、実行完了まで [CODE(DOMe)@en[[[load]]]] を遅延させます。
]FIG]

[170] >>169、>>165、>>166 は、[[構文解析器]]を呼び出した[[タスク]]の中で直接[[スクリプト]]が同期的に実行されます。
いずれにせよ[[構文解析器]]内部で[[スクリプト]]が実行されるのは、 [[HTML]] または [[SVG]]
の [CODE(HTMLe)@en[[[script]]]] [[終了タグ]] (または
[[SVG]] [CODE(HTMLe)@en[[[script]]]] [[空要素タグ]]) の処理中に限られます。

[171] >>167 と >>168 は、[[構文解析器]]とは別の[[タスク]]で[[スクリプト]]が実行されます。

[172] [[タスク]]は[[イベントループ]]によって処理されるので、
>>171 の場合[[構文解析器]]と[[スクリプト]]が同時に実行されることはありません。
また [[UIイベント]]や [CODE(DOMm)@en[[[setTimeout]]]] の[[コールバック]]などが[[構文解析器]]の動作期間中に実行されることもありますが、
やはり別の[[タスク]]として処理されるので、[[構文解析器]]や他の[[スクリプト]]と同時に実行されることはありません。

[173] なお [CODE(HTMLe)@en[[[script]]]] [[要素]]の[[スクリプト]]は、
それ自体のコードの実行の他に、前後に各種[[イベント]]が[[dispatch]]されたり、
[[エラーの報告]]が行われたりすることがあり、[[同期的]]に複数の[[スクリプト]]が同[[タスク]]内で実行されることがあります
[WEAK[(が、やはり同時にではありません)]]。

[174] [CODE(HTMLe)@en[[[script]]]] [[タグ]]の処理前には[[マイクロタスクチェックポイント]]があり、
[[マイクロタスク]]があればそのタイミングで、つまり[[構文解析器]]と同じ[[タスク]]の内部で同期的に実行されます。

* 安全性

[43]
'''Web メイルにおける HTML メイル''':
[[HTML]] を[[利用者界面]]として利用した [[MUA]]
(いわゆる [[Webメイル]]) で [[HTML]]
[[文書]]が含まれる[[メイル]]・[[メッセージ]]を表示する時には特に注意が必要です。
[CODE(HTMLe)@en[[[script]]]] [[要素]]など[[スクリプト]]が実行され得るものをそのまま
[[HTML]] に含めると、 [[Webブラウザ]]側でその [[HTML]] [[文書]]全体 
[WEAK[([[HTMLメイル]]自体とその周りの[[利用者界面]]を含む全体)]]
の権限で[[スクリプト]]が実行されることになります。

[[Webブラウザ]]外に被害が及ぶかという点では通常の鯖側の[[スクリプト]]の安全上の脅威と変わりませんが、
[[利用者界面]]の部分を介して[[利用者]]の意図せぬ (削除などの)
操作を行ったり、受信したメッセージや個人情報が流出したりする危険性があります。

* 歴史

[2] [CODE(HTMLe)[script]] 要素は、 [[NN2]] が [[LiveScript]]
と共に実装したのがはじめであると考えられています。

[20] [CODE(HTMLe)[script]] 要素がはじめて公式な仕様書に入ったのは
1997年1月の [[HTML 3.2]] でした。しかし、
このときの最終的な勧告では詳細が決まらず、
将来の版のために予約すると述べるに留まっていました。

> <!ELEMENT SCRIPT - - CDATA -- placeholder for script statements -->
[SRC[HTML 3.2 DTD]]

** HTML4

[12] その後1997年12月の [[HTML 4]] で、 [CODE(HTMLe)[script]]
要素型はようやく正式な仕様の一部となりました。
当時 [[WinIE]] や [[NN]] が実装していた [CODE(HTMLe)[script]]
の基本的な機能が仕様に入りましたが、 WinIE だけが実装していた
[CODE(HTMLa)[event]] 属性と [CODE(HTMLa)[for]] 属性は、
将来のために予約とされました。

[24] 1998年に勧告された [[DOM 1]] やその後の [[DOM 2]] では、
[CODE(HTMLe)[script]] 要素型に対応する [CODE(DOMi)[[[HTMLScriptElement]]]]
界面が定義されています。ここでは、標準の属性の他、
[CODE(HTMLa)[for]] 属性と [CODE(HTMLa)[event]] 属性も[Q[将来の使用のために予約]]
として定義だけされています。

[25] >>24 そんな将来くるのかな〜。来たら嫌だな〜

[26] >>24-25 将来の使用は M$ の仕様の間違いじゃないのかな。

[32]
>>24-26 
その後 [[XHTML 1]] が標準化されましたが、予約2属性はやはり正式な仕様には昇格せず、
このまま忘れ去られようとしています。しかし、両属性の機能は拡張して汎用化されて
[[XML事象]]仕様の一部として標準化されました (2002年)。

[REFS[
- [29] [[HTML 4]]
-- [CITE[18 Scripts in HTML documents]]
<IW:HTML4:"interact/scripts.html#edef-SCRIPT">
-- [CITE[Element content]]
<IW:HTML4:"appendix/notes.html#h-B.3.2.1">
- [[ECMA-290]] 
- [[XHTML 1.0]]
-- [CSECTION[4.8. Script and Style elements]]
(参考) <IW:XHTML10:"h-4.8">
]REFS]


[4] [CODE(HTMLa)[[[src]]]] 属性が指定されている場合、
スクリプトはその外部資源で定義されます。 
[ABBR[[[UA]]] [利用者エージェント]]
は[[内容]]を無視し、指定された 
[ABBR[URI] [統一資源識別子]] のスクリプトを取り寄せなければなりません。
[CODE(HTMLa)[src]] 属性が指定されていない場合、
[VAR[UA][利用者エージェント]] 
は内容をスクリプトとして解釈しなければなりません。
[SRC[HTML 4 18.2.1]]

[30] [ABBR[[[XHTML]]] [拡張可能ハイパーテキスト・マーク付け言語]] 
より前の [ABBR[HTML] [ハイパーテキスト・マーク付け言語]] では、 
[CODE(HTMLe)[script]]
要素の内容は [CODE(HTMLe)[[[style]]]] 要素の内容同様[[文字データ]]
([CODE(SGML)[[[CDATA]]]]) 宣言内容とされていました。
つまり、 [CODE(HTMLe)[script]] 要素内ではほとんどの[[マーク]]は認知されず、
[ABBR[[CODE(SGML)[[[etago]]]]] [終了タグ開き]] ([CODE(HTML)[</]]) の
直後に[[名前開始文字]] [WEAK[([[ラテン文字]]など)]] または 
[ABBR[[CODE(SGML)[[[tagc]]]]] [タグ閉じ]] ([CODE(HTML)[>]])
が来たらそこで [CODE(HTMLe)[script]] 要素が終わることになっていました。

ですから、スクリプト言語の[[演算子]]などとして 
[ABBR[HTML] [ハイパーテキスト・マーク付け言語]]
の[[マーク文字]]が登場することがよくありますが、
そのような場合にもほとんど[[文字参照]]化する必要がありませんでした。

[36] 
[ABBR[[CODE(SGML)[[[ETAGO]]]]] [終了タグ閉じ]] がかけないのは 
[CODE(JS)[[CODE(DOMa)[[[document]]]].[CODE(DOMm)[[[write]]]]]]
のデータを作る時などにしばしば問題となり、その最盛期には、
これが原因でうまく動かないことに悩む人もよく見受けられました。
回避するためには、そのスクリプト言語の文字列連結を使ったり
([SAMP(JS)['<' + '/a>']])、 escape (quote) 機能を使ったり
([SAMP(JS)['<\/a>']])、文字生成関数を使ったり 
([SAMP(VB)["<" & [[Chr]] (47) & "a>"]])
する方法がよく紹介されました。

[33] しかし、 [ABBR[[[XML]]] [拡張可能マーク付け言語]] では 
[ABBR[[CODE(SGML)[CDATA]]] [文字データ]] 宣言内容は使えないので、
[ABBR[[[XHTML 1]]] [拡張可能ハイパーテキスト・マーク付け言語 1]] では 
[ABBR[[CODE(XML)[[[PCDATA]]]]] [解析可能文字データ]] 
と宣言されています。
ですから、 [ABBR[[CODE(SGML)[STAGO]]] [開始タグ開き]] 
([CODE(XML)[<]]) は必ず [[escape]]
して [CODE(XML)[&lt;]] としなければならないなどの制限があります。
これを回避するために [[[CODE(XML)[CDATA]]区間]]を使う方法がよく紹介されますが、
そうすると多くの既存の [ABBR[WWW] [World Wide Web]] 
ブラウザとの互換性が失われてしまいます。
ですから、 [ABBR[XHTML] [拡張可能ハイパーテキスト・マーク付け言語]] で 
[CODE(HTMLe)[script]] 要素を使う時は [CODE(HTMLa)[src]]
属性を使った外部スクリプトとするのが良いと言われています。

[41]
[CODE(HTMLa)[src]] で指定された資源が取得できない時に内容を使うとする説があります。

[CITE[SCRIPT - Client-side Script(jp)]] <http://www.htmlhelp.com/ja/reference/html40/special/script.html>

しかし、 [ABBR[HTML] [ハイパーテキスト・マーク付け言語]] 4 
の規定と矛盾します。
[WEAK[(この文書はほんとうに [ABBR[HTML] [ハイパーテキスト・マーク付け言語]] 4 に基づいているのでしょうか?)]]

[47]
[CITE[Working with the WebKit Nightly Builds]] <http://developer.apple.com/opensource/internet/nightlywebkit.html>
([[名無しさん]] [WEAK[2006-11-05 02:47:22 +00:00]])

[48]
[CITE[Surfin’ Safari - Blog Archive &#187; Understanding HTML, XML and XHTML]] <http://webkit.org/blog/?p=68>

** XHTML2

[73] [[XHTML2]] 第6次案までは [CODE(HTMLe)@en[[[script]]]] [[要素]]がありましたが、
第7次案で [CODE(HTMLe)@en[[[handler]]]] に改名されました。

** HTML5

[79]
図にしましたwwww

[REFS[
- <http://suika.fam.cx/regexp/visualizer/regexp?s=%28not+%3C!--%29*%28%28%28%3C!--%29%28not+--%3E%2C+%3Cscript%3E%29*%28%28%3Cscript\%28%3E%20or%20space\%29%29%28not+--%3E%2C+%3C%2Fscript%3E%29*%28%3C%2Fscript\%28%3E%20or%20space\%29%29%28not+--%3E%2C+%3Cscript%3E%29*%29*%29%3F%28--%3E%29%28not+%3C!--%29*%29*%28%28%3C!--%29%28not+--%3E%2C+%3Cscript%3E%29*%28%28%3Cscript\%28%3E%20or%20space\%29%29%28not+--%3E%2C+%3C%2Fscript%3E%29*%28%3C%2Fscript\%28%3E%20or%20space\%29%29%28not+--%3E%2C+%3Cscript%3E%29*%29*%29%3F&l=perl58>
- <data:image/svg+xml,%0A%0A%3Csvg%20width=%222652.8%22%20height=%22675%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20xmlns:xlink=%22http://www.w3.org/1999/xlink%22%20toc:type=%22container%22%20xmlns:toc=%22http://suika.fam.cx/~wakaba/archive/2005/3/toc%23%22%3E%0A%3C!--%20Generated%20at%20Sun%20Dec%2027%2014:42:16%202009%20by:%0A%20%20Graph::Easy%20v0.64%0A%20%20Graph::Easy::As_svg%20v0.23%0A--%3E%0A%0A%3Ctitle%20toc:type=%22container%22%3EUntitled%20graph%3C/title%3E%0A%3Cdefs%20toc:type=%22container%22%3E%0A%20%3C!--%20open%20arrow%20--%3E%0A%20%3Cg%20id=%22ah%22%20stroke-linecap=%22round%22%20stroke-width=%221%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22-8%22%20y1=%22-4%22%20x2=%221%22%20y2=%220%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%221%22%20y1=%220%22%20x2=%22-8%22%20y2=%224%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20class%20definitions%20--%3E%0A%20%3Cstyle%20type=%22text/css%22%20toc:type=%22container%22%3E%3C!%5BCDATA%5B%0A%20.edge,.edge_fail%20%7B%0A%20%20font-size:%2013px;%0A%20%20stroke:%20black;%0A%20%20text-align:%20center;%0A%20%7D%0A%20.graph%20%7B%0A%20%20font-size:%2016px;%0A%20%20text-align:%20center;%0A%20%7D%0A%20.node,.node_fail,.node_start,.node_success%20%7B%0A%20%20font-size:%2016px;%0A%20%20text-align:%20center;%0A%20%7D%0A%20.node_fail%20%7B%0A%20%20fill:%20%23ff0000;%0A%20%7D%0A%20.node_start%20%7B%0A%20%20fill:%20%230000ff;%0A%20%7D%0A%20.node_success%20%7B%0A%20%20fill:%20%23008000;%0A%20%7D%0A%20%5D%5D%3E%3C/style%3E%0A%3C/defs%3E%0A%0A%3C!--%20graph%20background%20with%20border%20%28mainly%20for%20printing%29%20--%3E%0A%3Crect%20x=%220.5%22%20y=%220.5%22%20width=%222650.8%22%20height=%22673%22%20fill=%22white%22%20stroke=%22white%22%20toc:type=%22container%22/%3E%0A%0A%3Cg%20id=%2233%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090247384%20to%2082986048%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22444.5%22%20y1=%22401%22%20x2=%22444.5%22%20y2=%22451.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28444.5,%20452.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2232%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090247384%20to%2083014936%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22665.44%22%20y1=%22154.6%22%20x2=%22720.76%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22721.76%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2263%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090331664%20to%20SUCCESS%20--%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22968.7%22%20y1=%22554.6%22%20x2=%22968.7%22%20y2=%22604.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28968.7,%20605.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2221%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082989192%20to%2090288184%20--%3E%0A%20%3C!--%20north/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%222247.9%22%20y1=%22183.4%22%20x2=%222247.9%22%20y2=%22199.9%22%20toc:type=%22container%22/%3E%0A%0A%20%20%3Cline%20x1=%222134.4%22%20y1=%22199.4%22%20x2=%222248.4%22%20y2=%22199.4%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222064%22%20y1=%22199.4%22%20x2=%222134.4%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221837%22%20y1=%22199.4%22%20x2=%222064%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%221766.6%22%20y1=%22199.4%22%20x2=%221837%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221549.6%22%20y1=%22199.4%22%20x2=%221766.6%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221487.24%22%20y1=%22199.4%22%20x2=%221549.6%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281486.24,%20199.4%29%20rotate%28180%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%227%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%0A%20%3C!--%20from%2083042040%20to%2083042040%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M1057.4%20125.8L1057.4%20113L880%20113L880%20125.8%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28880,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2217%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082987728%20to%2082987728%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M2622%20125.8L2622%20113L2444.6%20113L2444.6%20125.8%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%282444.6,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2218%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082989192%20to%2082987728%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222368.44%22%20y1=%22154.6%22%20x2=%222423.76%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%222424.76%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2230%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082986048%20to%2082969136%20--%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22483.04%22%20y1=%22481%22%20x2=%22538.36%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22539.36%22%20y=%22481%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2255%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082917720%20to%2090331664%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%222247.9%22%20y1=%22465%22%20x2=%222247.9%22%20y2=%22503.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/west%20corner%20--%3E%0A%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%222247.9%22%20y1=%22503.4%22%20x2=%222247.9%22%20y2=%22526.3%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%222134.4%22%20y1=%22525.8%22%20x2=%222248.4%22%20y2=%22525.8%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222064%22%20y1=%22525.8%22%20x2=%222134.4%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221837%22%20y1=%22525.8%22%20x2=%222064%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221766.6%22%20y1=%22525.8%22%20x2=%221837%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221549.6%22%20y1=%22525.8%22%20x2=%221766.6%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221479.2%22%20y1=%22525.8%22%20x2=%221549.6%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%221262.2%22%20y1=%22525.8%22%20x2=%221479.2%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221199.84%22%20y1=%22525.8%22%20x2=%221262.2%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281198.84,%20525.8%29%20rotate%28180%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2225%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083042040%20to%2090288184%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221077.24%22%20y1=%22154.6%22%20x2=%221132.56%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221133.56%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2227%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090288184%20to%2082986048%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%221227%22%20y1=%2268.2%22%20x2=%221227%22%20y2=%22125.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%221227%22%20y1=%2254.9%22%20x2=%221227%22%20y2=%2268.2%22%20toc:type=%22container%22/%3E%0A%0A%20%20%3Cline%20x1=%221191.8%22%20y1=%2255.4%22%20x2=%221227.5%22%20y2=%2255.4%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221140.6%22%20y1=%2255.4%22%20x2=%221191.8%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221070.2%22%20y1=%2255.4%22%20x2=%221140.6%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22867.2%22%20y1=%2255.4%22%20x2=%221070.2%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22796.8%22%20y1=%2255.4%22%20x2=%22867.2%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22728.8%22%20y1=%2255.4%22%20x2=%22796.8%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22658.4%22%20y1=%2255.4%22%20x2=%22728.8%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22546.4%22%20y1=%2255.4%22%20x2=%22658.4%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20crossing%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22476%22%20y1=%2255.4%22%20x2=%22546.4%22%20y2=%2255.4%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22511.2%22%20y1=%2242.6%22%20x2=%22511.2%22%20y2=%2268.2%22%20stroke=%22%23000000%22%20stroke-dasharray=%221%200%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22413%22%20y1=%2255.4%22%20x2=%22476%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22342.6%22%20y1=%2255.4%22%20x2=%22413%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22230.6%22%20y1=%2255.4%22%20x2=%22342.6%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22160.2%22%20y1=%2255.4%22%20x2=%22230.6%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2268.2%22%20y1=%2255.4%22%20x2=%22160.2%22%20y2=%2255.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%2255.4%22%20y1=%2254.9%22%20x2=%2255.4%22%20y2=%2268.2%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%2254.9%22%20y1=%2255.4%22%20x2=%2268.2%22%20y2=%2255.4%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%2268.2%22%20x2=%2255.4%22%20y2=%22132.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%22132.2%22%20x2=%2255.4%22%20y2=%22177%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%22177%22%20x2=%2255.4%22%20y2=%22221.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%0A%20%3Cline%20x1=%2255.4%22%20y1=%22221.8%22%20x2=%2255.4%22%20y2=%22285.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%22285.8%22%20x2=%2255.4%22%20y2=%22330.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%22330.6%22%20x2=%2255.4%22%20y2=%22394.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2255.4%22%20y1=%22394.6%22%20x2=%2255.4%22%20y2=%22458.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%2255.4%22%20y1=%22458.6%22%20x2=%2255.4%22%20y2=%22481.5%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%2254.9%22%20y1=%22481%22%20x2=%2268.2%22%20y2=%22481%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2268.2%22%20y1=%22481%22%20x2=%22160.2%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22160.2%22%20y1=%22481%22%20x2=%22230.6%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20crossing%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22230.6%22%20y1=%22481%22%20x2=%22342.6%22%20y2=%22481%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22286.6%22%20y1=%22458.6%22%20x2=%22286.6%22%20y2=%22503.4%22%20stroke=%22%23000000%22%20stroke-dasharray=%221%200%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22342.6%22%20y1=%22481%22%20x2=%22404.96%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22405.96%22%20y=%22481%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2257%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082967624%20to%2090331664%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22762.8%22%20y1=%22337%22%20x2=%22762.8%22%20y2=%22394.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%0A%20%20%3Cline%20x1=%22762.8%22%20y1=%22394.6%22%20x2=%22762.8%22%20y2=%22427.1%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22762.3%22%20y1=%22426.6%22%20x2=%22796.8%22%20y2=%22426.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22796.8%22%20y1=%22426.6%22%20x2=%22859.16%22%20y2=%22426.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22860.16%22%20y=%22426.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2240%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082966928%20to%2082966928%20--%3E%0A%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M1057.4%20279.4L1057.4%20266.6L880%20266.6L880%20279.4%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28880,%20279.4%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2261%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%20START%20to%2090247384%20--%3E%0A%20%3C!--%20north/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22114.2%22%20y1=%22183.4%22%20x2=%22114.2%22%20y2=%22199.9%22%20toc:type=%22container%22/%3E%0A%0A%20%20%3Cline%20x1=%22113.7%22%20y1=%22199.4%22%20x2=%22160.2%22%20y2=%22199.4%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22160.2%22%20y1=%22199.4%22%20x2=%22230.6%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22230.6%22%20y1=%22199.4%22%20x2=%22342.6%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22342.6%22%20y1=%22199.4%22%20x2=%22404.96%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22405.96%22%20y=%22199.4%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2214%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083013976%20to%2082989192%20--%3E%0A%20%3C!--%20south/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%221658.1%22%20y1=%2299.7%22%20x2=%221658.1%22%20y2=%22125.8%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%221657.6%22%20y1=%22100.2%22%20x2=%221766.6%22%20y2=%22100.2%22%20toc:type=%22container%22/%3E%0A%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221766.6%22%20y1=%22100.2%22%20x2=%221837%22%20y2=%22100.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221837%22%20y1=%22100.2%22%20x2=%222064%22%20y2=%22100.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222064%22%20y1=%22100.2%22%20x2=%222134.4%22%20y2=%22100.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%222247.9%22%20y1=%2299.7%22%20x2=%222247.9%22%20y2=%22124.8%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%222134.4%22%20y1=%22100.2%22%20x2=%222248.4%22%20y2=%22100.2%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%282247.9,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2220%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090288184%20to%2083013976%20--%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221486.24%22%20y1=%22154.6%22%20x2=%221541.56%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221542.56%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2259%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090247384%20to%2082967624%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22665.44%22%20y1=%22308.2%22%20x2=%22720.76%22%20y2=%22308.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22721.76%22%20y=%22308.2%22%20toc:type=%22container%22/%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2224%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083014936%20to%2090288184%20--%3E%0A%20%3C!--%20north/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22762.8%22%20y1=%22183.4%22%20x2=%22762.8%22%20y2=%22199.9%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22762.3%22%20y1=%22199.4%22%20x2=%22796.8%22%20y2=%22199.4%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22796.8%22%20y1=%22199.4%22%20x2=%22867.2%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22867.2%22%20y1=%22199.4%22%20x2=%221070.2%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221070.2%22%20y1=%22199.4%22%20x2=%221132.56%22%20y2=%22199.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221133.56%22%20y=%22199.4%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2235%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%0A%20%3C!--%20from%2082969136%20to%2090247384%20--%3E%0A%20%3C!--%20north/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22693.6%22%20y1=%22458.6%22%20x2=%22693.6%22%20y2=%22481.5%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22665.44%22%20y1=%22481%22%20x2=%22694.1%22%20y2=%22481%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22693.6%22%20y1=%22394.6%22%20x2=%22693.6%22%20y2=%22458.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22693.6%22%20y1=%22362.1%22%20x2=%22693.6%22%20y2=%22394.6%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22666.44%22%20y1=%22362.6%22%20x2=%22694.1%22%20y2=%22362.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28665.44,%20362.6%29%20rotate%28180%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2253%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090331664%20to%2082944480%20--%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221198.84%22%20y1=%22426.6%22%20x2=%221254.16%22%20y2=%22426.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221255.16%22%20y=%22426.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2248%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082943064%20to%2082941528%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221773.64%22%20y1=%22426.6%22%20x2=%221828.96%22%20y2=%22426.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221829.96%22%20y=%22426.6%22%20toc:type=%22container%22/%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2222%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082987728%20to%2090288184%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%222533.3%22%20y1=%22183.4%22%20x2=%222533.3%22%20y2=%22221.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%222533.3%22%20y1=%22221.8%22%20x2=%222533.3%22%20y2=%22254.3%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%222431.8%22%20y1=%22253.8%22%20x2=%222533.8%22%20y2=%22253.8%22%20toc:type=%22container%22/%3E%0A%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222361.4%22%20y1=%22253.8%22%20x2=%222431.8%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222134.4%22%20y1=%22253.8%22%20x2=%222361.4%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222064%22%20y1=%22253.8%22%20x2=%222134.4%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221837%22%20y1=%22253.8%22%20x2=%222064%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221766.6%22%20y1=%22253.8%22%20x2=%221837%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221549.6%22%20y1=%22253.8%22%20x2=%221766.6%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%221487.24%22%20y1=%22253.8%22%20x2=%221549.6%22%20y2=%22253.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281486.24,%20253.8%29%20rotate%28180%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2223%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090288184%20to%2090288184%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M1179%20125.8L1179%20113L1153.4%20113L1153.4%20125.8%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281153.4,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2229%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082969136%20to%2082969136%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M645.6%20452.2L645.6%20439.4L559.2%20439.4L559.2%20452.2%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28559.2,%20452.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2250%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082917720%20to%2082917720%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M2348.6%20388.2L2348.6%20375.4L2147.2%20375.4L2147.2%20388.2%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%282147.2,%20388.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2236%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090247384%20to%2090247384%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M463.2%20125.8L463.2%20113L425.8%20113L425.8%20125.8%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28425.8,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2251%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082941528%20to%2082917720%20--%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222071.04%22%20y1=%22426.6%22%20x2=%222126.36%22%20y2=%22426.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%222127.36%22%20y=%22426.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2258%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082966928%20to%2090331664%20--%3E%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22968.7%22%20y1=%22337%22%20x2=%22968.7%22%20y2=%22387.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28968.7,%20388.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2212%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083013976%20to%2083012560%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221773.64%22%20y1=%22154.6%22%20x2=%221828.96%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221829.96%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2241%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082967624%20to%2082966928%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22803.84%22%20y1=%22308.2%22%20x2=%22859.16%22%20y2=%22308.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22860.16%22%20y=%22308.2%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2215%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083012560%20to%2082989192%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%222071.04%22%20y1=%22154.6%22%20x2=%222126.36%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%222127.36%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2247%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082944480%20to%2082941528%20--%3E%0A%20%3C!--%20south/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%221370.7%22%20y1=%22362.1%22%20x2=%221370.7%22%20y2=%22388.2%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%221370.2%22%20y1=%22362.6%22%20x2=%221479.2%22%20y2=%22362.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221479.2%22%20y1=%22362.6%22%20x2=%221549.6%22%20y2=%22362.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221549.6%22%20y1=%22362.6%22%20x2=%221766.6%22%20y2=%22362.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221766.6%22%20y1=%22362.6%22%20x2=%221837%22%20y2=%22362.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%221950.5%22%20y1=%22362.1%22%20x2=%221950.5%22%20y2=%22387.2%22%20toc:type=%22container%22/%3E%0A%0A%20%20%3Cline%20x1=%221837%22%20y1=%22362.6%22%20x2=%221951%22%20y2=%22362.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281950.5,%20388.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%228%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083014936%20to%2083042040%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22803.84%22%20y1=%22154.6%22%20x2=%22859.16%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22860.16%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2260%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%20START%20to%2083062112%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22167.24%22%20y1=%22154.6%22%20x2=%22222.56%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22223.56%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%224%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083062112%20to%2083062112%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%0A%20%3Cpath%20d=%22M329.8%20125.8L329.8%20113L243.4%20113L243.4%20125.8%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28243.4,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2234%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082986048%20to%2090247384%20--%3E%0A%20%3C!--%20north/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22444.5%22%20y1=%22509.8%22%20x2=%22444.5%22%20y2=%22526.3%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22413%22%20y1=%22525.8%22%20x2=%22445%22%20y2=%22525.8%22%20toc:type=%22container%22/%3E%0A%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22342.6%22%20y1=%22525.8%22%20x2=%22413%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20crossing%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22230.6%22%20y1=%22525.8%22%20x2=%22342.6%22%20y2=%22525.8%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22286.6%22%20y1=%22503.4%22%20x2=%22286.6%22%20y2=%22548.2%22%20stroke=%22%23000000%22%20stroke-dasharray=%221%200%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22160.2%22%20y1=%22525.8%22%20x2=%22230.6%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2268.2%22%20y1=%22525.8%22%20x2=%22160.2%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2242.6%22%20y1=%22525.8%22%20x2=%2268.2%22%20y2=%22525.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/east%20corner%20--%3E%0A%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%2229.8%22%20y1=%22503.4%22%20x2=%2229.8%22%20y2=%22526.3%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%2229.3%22%20y1=%22525.8%22%20x2=%2242.6%22%20y2=%22525.8%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22458.6%22%20x2=%2229.8%22%20y2=%22503.4%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22394.6%22%20x2=%2229.8%22%20y2=%22458.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22330.6%22%20x2=%2229.8%22%20y2=%22394.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22285.8%22%20x2=%2229.8%22%20y2=%22330.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22221.8%22%20x2=%2229.8%22%20y2=%22285.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%0A%20%3Cline%20x1=%2229.8%22%20y1=%22177%22%20x2=%2229.8%22%20y2=%22221.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%22132.2%22%20x2=%2229.8%22%20y2=%22177%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%2268.2%22%20x2=%2229.8%22%20y2=%22132.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%2229.8%22%20y1=%2242.6%22%20x2=%2229.8%22%20y2=%2268.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%2229.8%22%20y1=%2229.3%22%20x2=%2229.8%22%20y2=%2242.6%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%2229.3%22%20y1=%2229.8%22%20x2=%2242.6%22%20y2=%2229.8%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2242.6%22%20y1=%2229.8%22%20x2=%2268.2%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%2268.2%22%20y1=%2229.8%22%20x2=%22160.2%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22160.2%22%20y1=%2229.8%22%20x2=%22230.6%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22230.6%22%20y1=%2229.8%22%20x2=%22342.6%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22342.6%22%20y1=%2229.8%22%20x2=%22413%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22413%22%20y1=%2229.8%22%20x2=%22476%22%20y2=%2229.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22511.2%22%20y1=%2229.3%22%20x2=%22511.2%22%20y2=%2242.6%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22476%22%20y1=%2229.8%22%20x2=%22511.7%22%20y2=%2229.8%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22511.2%22%20y1=%2268.2%22%20x2=%22511.2%22%20y2=%22124.8%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%28511.2,%20125.8%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2256%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090331664%20to%2090331664%20--%3E%0A%20%3C!--%20selfloop,%20northwards%20--%3E%0A%20%3Cpath%20d=%22M1127.8%20388.2L1127.8%20375.4L1083%20375.4L1083%20388.2%22%20fill=%22none%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281083,%20388.2%29%20rotate%2890%29%22%20toc:type=%22container%22/%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2237%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2083062112%20to%2090247384%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22349.64%22%20y1=%22154.6%22%20x2=%22404.96%22%20y2=%22154.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22405.96%22%20y=%22154.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2245%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082944480%20to%2082943064%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%221486.24%22%20y1=%22426.6%22%20x2=%221541.56%22%20y2=%22426.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%221542.56%22%20y=%22426.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2262%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2090247384%20to%20SUCCESS%20--%3E%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22342.6%22%20y1=%22362.6%22%20x2=%22405.96%22%20y2=%22362.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20south/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%0A%20%20%3Cline%20x1=%22286.6%22%20y1=%22362.1%22%20x2=%22286.6%22%20y2=%22394.6%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22286.1%22%20y1=%22362.6%22%20x2=%22342.6%22%20y2=%22362.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22286.6%22%20y1=%22394.6%22%20x2=%22286.6%22%20y2=%22458.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20vertical%20--%3E%0A%20%3Cline%20x1=%22286.6%22%20y1=%22548.2%22%20x2=%22286.6%22%20y2=%22612.2%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20north/east%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%22286.6%22%20y1=%22612.2%22%20x2=%22286.6%22%20y2=%22635.1%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%22286.1%22%20y1=%22634.6%22%20x2=%22342.6%22%20y2=%22634.6%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22342.6%22%20y1=%22634.6%22%20x2=%22413%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%22413%22%20y1=%22634.6%22%20x2=%22476%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22476%22%20y1=%22634.6%22%20x2=%22546.4%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22546.4%22%20y1=%22634.6%22%20x2=%22658.4%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22658.4%22%20y1=%22634.6%22%20x2=%22728.8%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22728.8%22%20y1=%22634.6%22%20x2=%22796.8%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%22796.8%22%20y1=%22634.6%22%20x2=%22859.16%22%20y2=%22634.6%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20x=%22860.16%22%20y=%22634.6%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2254%22%20class=%22edge%22%20toc:type=%22container%22%3E%0A%20%3C!--%20from%2082941528%20to%2090331664%20--%3E%0A%0A%20%3C!--%20north/west%20corner%20--%3E%0A%20%3Cg%20stroke=%22%23000000%22%20toc:type=%22container%22%3E%0A%20%20%3Cline%20x1=%221950.5%22%20y1=%22465%22%20x2=%221950.5%22%20y2=%22481.5%22%20toc:type=%22container%22/%3E%0A%20%20%3Cline%20x1=%221837%22%20y1=%22481%22%20x2=%221951%22%20y2=%22481%22%20toc:type=%22container%22/%3E%0A%20%3C/g%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221766.6%22%20y1=%22481%22%20x2=%221837%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%0A%20%3Cline%20x1=%221549.6%22%20y1=%22481%22%20x2=%221766.6%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221479.2%22%20y1=%22481%22%20x2=%221549.6%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221262.2%22%20y1=%22481%22%20x2=%221479.2%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3C!--%20horizontal%20--%3E%0A%20%3Cline%20x1=%221199.84%22%20y1=%22481%22%20x2=%221262.2%22%20y2=%22481%22%20stroke=%22%23000000%22%20toc:type=%22container%22/%3E%0A%0A%20%3Cuse%20stroke=%22%23000000%22%20xlink:href=%22%23ah%22%20transform=%22translate%281198.84,%20481%29%20rotate%28180%29%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%220%22%20class=%22node_start%22%20toc:type=%22container%22%3E%0A%20%3C!--%20START,%20rect%20--%3E%0A%20%3Crect%20fill=%22%230000ff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%2291%22%20x=%2268.7%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22114%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23ffffff%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3ESTART%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%221%22%20class=%22node_success%22%20toc:type=%22container%22%3E%0A%20%3C!--%20SUCCESS,%20rect%20--%3E%0A%0A%20%3Crect%20fill=%22%23008000%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22202%22%20x=%22867.7%22%20y=%22612.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22968%22%20y=%22640%22%20style=%22font-family:%20serif;%22%20fill=%22%23ffffff%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3ESUCCESS%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%223%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20%26lt;!-%20-%20%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22111%22%20x=%22231.1%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22286%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20%26lt;!--%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%225%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;!-%20-%20%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%2267%22%20x=%22729.3%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22762%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;!--%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%226%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;script%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22202%22%20x=%22867.7%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%0A%20%3Ctext%20x=%22968%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;script%26gt;%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%229%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;script%28%26gt;%20or%20space%29%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22216%22%20x=%221550.1%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221658%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;script%28%26gt;%20or%20space%29%22%3C/text%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2210%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;/script%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22226%22%20x=%221837.5%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221950%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;/script%26gt;%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2213%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;/script%28%26gt;%20or%20space%29%22%20,%20rect%20--%3E%0A%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22226%22%20x=%222134.9%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%222247%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;/script%28%26gt;%20or%20space%29%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2216%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;script%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22202%22%20x=%222432.3%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%222533%22%20y=%22160%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;script%26gt;%22%3C/text%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2219%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%22152.6%22%20stroke=%22%23000000%22%20width=%22337.6%22%20x=%221141.1%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221309%22%20y=%22224%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2226%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22-%20-%20%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%2262%22%20x=%22413.5%22%20y=%22459.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22444%22%20y=%22487%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22--%26gt;%22%3C/text%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2228%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20%26lt;!-%20-%20%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22111%22%20x=%22546.9%22%20y=%22459.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22602%22%20y=%22487%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20%26lt;!--%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2231%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%22261.4%22%20stroke=%22%23000000%22%20width=%22244.4%22%20x=%22413.5%22%20y=%22132.7%22%20toc:type=%22container%22/%3E%0A%0A%20%3Ctext%20x=%22535%22%20y=%22278%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2238%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;!-%20-%20%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%2267%22%20x=%22729.3%22%20y=%22286.3%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22762%22%20y=%22314%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;!--%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2239%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;script%26gt;%22%20,%20rect%20--%3E%0A%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2243.8%22%20stroke=%22%23000000%22%20width=%22202%22%20x=%22867.7%22%20y=%22286.3%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%22968%22%20y=%22314%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;script%26gt;%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2242%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;script%28%26gt;%20or%20space%29%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2263%22%20stroke=%22%23000000%22%20width=%22216%22%20x=%221262.7%22%20y=%22395.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221370%22%20y=%22432%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;script%28%26gt;%20or%20space%29%22%3C/text%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2243%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;/script%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2263%22%20stroke=%22%23000000%22%20width=%22216%22%20x=%221550.1%22%20y=%22395.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221658%22%20y=%22432%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;/script%26gt;%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2246%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22%26lt;/script%28%26gt;%20or%20space%29%22%20,%20rect%20--%3E%0A%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2263%22%20stroke=%22%23000000%22%20width=%22226%22%20x=%221837.5%22%20y=%22395.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221950%22%20y=%22432%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22%26lt;/script%28%26gt;%20or%20space%29%22%3C/text%3E%0A%3C/g%3E%0A%0A%3Cg%20id=%2249%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20%20%22not%20-%20-%20%26gt;,%20%26lt;script%26gt;%22%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%2263%22%20stroke=%22%23000000%22%20width=%22226%22%20x=%222134.9%22%20y=%22395.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%222247%22%20y=%22432%22%20style=%22font-family:%20serif;%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22%3E%22not%20--%26gt;,%20%26lt;script%26gt;%22%3C/text%3E%0A%0A%3C/g%3E%0A%0A%3Cg%20id=%2252%22%20class=%22node%22%20toc:type=%22container%22%3E%0A%20%3C!--%20,%20rect%20--%3E%0A%20%3Crect%20fill=%22%23ffffff%22%20height=%22152.6%22%20stroke=%22%23000000%22%20width=%22323.6%22%20x=%22867.7%22%20y=%22395.1%22%20toc:type=%22container%22/%3E%0A%20%3Ctext%20x=%221029%22%20y=%22486%22%20fill=%22%23000000%22%20text-anchor=%22middle%22%20toc:type=%22container%22/%3E%0A%3C/g%3E%0A%0A%3C/svg%3E>
]REFS]

* 実装

[31] [CODE(file)[[[CGI.pm]]]] は、 XHTML 出力 mode だと、
[[注釈宣言]]内に [[[CODE(XML)[CDATA]]区間]]宣言という素晴らしい出力をしてくれます(w

[50]
[CITE[Bug 60724 &#8211; <script> tag inside <applet> tag executes if Java enabled]] ([CODE[2007-02-10 13:51:33 +09:00]] 版) <https://bugzilla.mozilla.org/show_bug.cgi?id=60724>
([[名無しさん]])

[[#comment]]


** 不思議解釈

[34]
[CODE(HTMLa)[src]] 属性のある [CODE(HTMLe)[script]] の中に 
[CODE(HTMLe)[noscript]] を書く困った人がいます。。。

([[名無しさん]] [WEAK[2004-09-14 07:54:57 +00:00]])

[17] 仕様によれば (>>4)、 [CODE(HTMLa)[src]] 属性があるとき UA
は内容を無視しなければなりません。この規定に特に条件は無いようなので、
スクリプト未対応の UA であっても同様でしょう。
ですから、 [CODE(HTMLe)[script]] の中に [CODE(HTMLe)[noscript]]
を書くと、 HTML 4 対応の [CODE(HTMLe)[script]] 未対応 UA
には無視されてしまうはずです。

[15]
しかし、[[不思議マーク付け]]の世界や多くの [[WWWブラウザ]]の実装では、
[CODE(HTMLe)[[[html]]]] タグの前後や [CODE(HTMLe)[head]] 要素と
[CODE(HTMLe)[body]] 要素の間を含めて、あらゆる場所に出現できるようです。

[CITE[ダイナミックHTML入門]]
(Bruce Campbell + Rick Darnell 著, 安藤慶一訳) という入門書では、
[Q[スクリプトの場所に関しては標準規格は必要ないようです]<urn:isbn:4-89471-048-X>]
などと電波を飛ばしているそうです。
[SRC[[CITE[いくつかの書籍のあらさがし]] <http://openlab.ring.gr.jp/k16/htmllint/findfault.html#dynamic-html>]]

** 他との関係

[3] [[ASP]] などの鯖側で HTML 文書 (もどき) を前処理する類のシステムの一部では、
[CODE(HTMLe)[script]] 要素 (のようなもの) を拡張して、
[CODE[[[runat]]]] 属性などを付与して鯖側で実行するものと [CODE(HTMLe)[script]]
要素としてクライアントに送信するものを区別していることがあります。

(そのような実現方法は開発者がスクリプトの実行を正しく把握しづらくなるのではないかとの懸念はあります。
その点、 [[NES]] のように [CODE[[[server]]]] 要素型という別の要素型を用意するのは一つの考えではありますが、
どんぐりのせいくらべといったところでしょう。)

[13] スクリプトによって HTML 文書を動的に扱う方法として、 [[JavaScript]]
の [CODE(js)[[[document]].[[write]]]] がよく使われました。
([CODE(js)[document.write]] は後に [[DOM 1]] で [CODE(DOMi)[[[HTMLDocument]]]]
界面の [CODE(DOMm)[[[write]]]] method として標準化されています。)

HTML 4 仕様書は読み込み時のスクリプトによる文書に書き換えについても規定していますが、
その内容は [CODE(js)[document.write]] (と同様なもの) 
を想定しているようです。実際に使われていたのも [CODE(js)[document.write]]
(と同様なもの) だけでしょう。というわけで、 [CODE(DOMm)[[[write]]]]
method の説明もご覧ください。

[39] スクリプトに対応していなかったり、実行しないことにしていたりするときの[[代替内容]]を提供する
[CODE(HTMLe)[[[noscript]]]] が用意されています。アクセス可能性の確保のために、
重要な情報を提供する [CODE(HTMLe)[script]] は、
対応する [CODE(HTMLe)[noscript]] 要素を用意しておくことが極めて望ましいと考えられます。

[45]
[[XML事象]]の仕様書には[[事象取扱器]]として
[CODE(HTMLe)@en[[[script]]]] を使う例があり、
[[Opera]] 9 でも [CODE(HTMLe)@en[[[script]]]]
を[[事象取扱器]]にできるように実装されています。

が、 [[XML事象]]の[[属性]]がある
[CODE(HTMLe)@en[[[script]]]] [[要素]]も、
[[文書]]読込み時には[[属性]]がないときと同じように実行されてしまうので、
あまり使いやすくありません。
([[名無しさん]])

[[#comment]]


** 例

[37] 二乗した結果を書き出す例 [SRC[HTML 4 18.3.2 改]]

[[JavaScript]] による例
[PRE(HTML)[
<SCRIPT type="text/javascript">
<!--  to hide script contents from old browsers
  function square(i) {
    document.write("The call passed ", i ," to the function.","<BR>");
    return i * i;
  }
  document.write("The function returned ",square(5),".");
// end hiding contents from old browsers  -->
</SCRIPT>
]PRE]

[[VBScript]] による例
[PRE(HTML)[
<SCRIPT type="text/vbscript">
<!--
  Function Square(i)
    Call Document.Write("The call passed ",i," to the function.","<BR>")
    Square = i * i
  End Function
  Document.Write("The function returned ",Square(5),".")
' -->
</SCRIPT>
]PRE]

[[Tcl]] による例
[PRE(HTML)[
<SCRIPT type="text/tcl">
<!--  to hide script contents from old browsers
  proc square {i} {
    document write "The call passed $i to the function.<BR>"
    return [expr $i * $i]
  }
  document write "The function returned [square 5]."
# end hiding contents from old browsers  -->
</SCRIPT>
]PRE]

[[#comment]]


** メモ

[44]
[CITE[XHTML Frequently Answered Questions]] <http://www.w3.org/MarkUp/2004/xhtml-faq#docwrite>

[[HTML 4]] は [[SGML]] [[応用]]なのに
[CODE(JS)@en[[[document]].[[write]]]]
が使えて、
[[XHTML 1]] は [[XML]] [[応用]]だから
[CODE(JS)@en[[[document]].[[write]]]]
が使えないというのはよくわからない。
([[名無しさん]] [WEAK[2006-08-05 06:53:16 +00:00]])

[46]
[CITE[404 Blog Not Found:javascript - scriptタグによる通信が特許侵害!?]] <http://blog.livedoor.jp/dankogai/archives/50677817.html>
([[名無しさん]] [WEAK[2006-11-04 02:20:29 +00:00]])

[49]
[CITE[Bug 178258 &#8211; document.forms has no properties on a page without <body> (JavaScript error)]] ([CODE[2007-01-29 17:04:28 +09:00]] 版) <https://bugzilla.mozilla.org/show_bug.cgi?id=178258>
([[名無しさん]])

[51]
[CITE@en[HTML5 script start tag should select appropriate content model according  to src]] ([[David Woolley]] 著, [CODE[2007-04-21 22:52:46 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/2007Apr/0053.html>
([[名無しさん]] [WEAK[2007-04-28 03:58:40 +00:00]])

[52]
[CITE[HTML5 IRC logs: w3c / #html-wg / 20070423]] ([CODE[2007-06-30 15:38:51 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/html-wg/20070423#l-144>

> [03:47] <mjs> Lachy: since you were discussing Safari's handling of <script /> earlier, we might make that a Dashboard-only quirk - we foolishly did it for Firefox compatibility, and then a huge number of Dashboard widgets started relying on it, and now Firefox no longer handles it as empty in HTML  

([[名無しさん]])

[53]
[CITE@en[http charset, <script> and IE]] ([[tex]] 著, [CODE[2007-07-30 06:33:36 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-international/2007JulSep/0040.html>
([[名無しさん]])

[54]
[CITE[“消えた初音ミク”問題 ヤフーとGoogle「原因を調査中」 - ITmedia News]] ([CODE[2007-10-18 22:03:18 +09:00]] 版) <http://www.itmedia.co.jp/news/articles/0710/18/news065.html>

>
[PRE(HTML example code)[
<script language="JavaScript" type="text/javascript">
<!--
var pid="784200073";
var locs="ITOT1";
var random=new Date();
var js_url='http://dlv.itmedia.co.jp/adsv/v1?posall='+locs+'&id='+pid+'&rnd='+random.getTime();
document.write('<sc'+'ript language="JavaScript" type="text/javascript" src="'+js_url+'">');
document.write('</sc'+'ript>');
//-->
</script>
]PRE]

([[名無しさん]])

[55]
[CITE@en[Re: <script> for non-script content]] ([[Ian Hickson]] 著, [CODE[2008-05-14 16:53:44 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-html/2008May/0291.html>
([[名無しさん]])

[56]
[CITE@ja[冬様もすなる☆日記というもの (2008年7月)]] ([[わかば]] 著, [CODE[2008-07-21 17:28:49 +09:00]] 版) <http://suika.fam.cx/~wakaba/d/d200807#d21-1>
([[名無しさん]])

[57]
[CITE@ja[Kanasan.JS JavaScript 第 5 版読書会 #5: Days on the Moon]] ([CODE[2008-07-26 22:46:16 +09:00]] 版) <http://nanto.asablo.jp/blog/2008/07/25/3648120>
([[名無しさん]])

[58]
[CITE@en[OpenSocial Data Pipelining - OpenSocial Specifications]] ([CODE[2008-09-04 06:00:40 +09:00]] 版) <http://wiki.opensocial-templates.org/index.php?title=OpenSocial_Data_Pipelining>
([[名無しさん]])

[60]
[CITE[High Performance Web Sites :: “Delayed Script Execution” in Opera]] ([CODE[2008-09-17 13:31:22 +09:00]] 版) <http://www.stevesouders.com/blog/2008/09/11/delayed-script-execution-in-opera/>

[62] [CITE[John Resig - JavaScript Micro-Templating]] ([TIME[2008-12-13 10:11:52 +09:00]] 版) <http://ejohn.org/blog/javascript-micro-templating/>


* script 要素 (ASP)

[[#comment]]


** 属性

,HTML (>>9) に加えて、	,==	,==	,==
,runat	,server	,なし	,動作場所 >>5

[5] [CODE[runat]] は、 [[M$]] の [[ASP]] で使われて、値が [CODE["server"]]
である場合に、その要素のスクリプトはサーバーで処理されます。
(クライアントには送られません。) この属性は [[W3C]]
の規格では規定されていません。サーバーで処理される以外で使ってはいけません。

- [6] >>2-3,>>5 [CODE[language]] 属性や [CODE[type]] 属性を省略しても [CODE[<%@ Page Language="VB" %>]] みたいのが書いてあれば、それ以降の部分で解釈されるサーバー側スクリプトはその言語で解釈されるそうです。
- [7] >>5-6 それから、 [CODE[runat]] 属性はどんな要素にも? 使えて、サーバー側スクリプトからアクセス可能なことを表す?らしいです。全くもって理解不能な世界ですが。。。
- [8] >>2 ASP での既定値は (設定ファイルで変更しない限り) [CODE[VB]] (= [[VBScript]]) だそうです。
[[#comment]]


* script 要素型 (CSP)

- [10] CSP の script 要素では runat="server"/"compiler" の属性があります。 ''Introduction to Cache Server Pages - The CSP Compiler'' <http://www.cacheinfo.com/document/V401/cpi/cpitagbased.html>
- [11] このほか CSP の script 要素には色んな独自拡張属性 (もしかして自由に作れる?) があります。 ''技術サポート'' <http://www.cacheinfo.com/techinfo.htm>

[[#comment]]


* msxsl:script 要素 (M$XML の XSLT 実装)

[21] [CODE(XML)[{urn:schemas-microsoft-com:xslt}:script]]
要素を使うと、 [[XSLT]] (の [[XPath]] を使う文脈)
で利用者定義の関数を使用することが可能となります。

親要素は xslt:[[stylesheet]] 要素又は xslt:[[transform]]
要素です。内容は #[[PCDATA]] です (たぶん)。

,implements-prefix	,名前空間接頭辞	,必須	,関数の名前空間
,language	,html:[[language]] と同じ	,不明	,スクリプト言語

[[language]] 属性には [CODE(HTML)[html:script]] 
要素の場合と同じ値を指定できるそうです。
[CODE(XML)[implements-prefix]] 属性には、 XSLT
側で関数を呼ぶ際の [[XML名前空間]]接頭辞を与えます。
この値は自分以上の要素の [[xmlns]] 
属性を使って宣言されていなければならないはずです。

[22] 言葉で説明するより実例を見たほうが分かりやすいでしょう。

[PRE[
  <xslt:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:msxsl="urn:schemas-microsoft-com:xslt"
        xmlns:foo="http://foo.example/">
    <msxsl:script language="JScript" implements-prefix="foo">
      function bar (baz) {
        return baz;
      }
    </msxsl:script>
    <xslt:template select="element1">
      <xslt:apply-templates select="foo:bar(element2)"/>
    </xslt:template>
  </xslt:stylesheet>
]PRE]

この場合は関数 [CODE(XPath)[foo:bar(baz)]] は引数 [CODE(JS)[baz]]
をただ返すだけの何の面白味もないものですが、
雰囲気はつかめるでしょう。

- ''XSLT Elements'' <http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/htm/xsl_elm_qz_4s50.asp>
[[#comment]]
- ''XSLT 1.0で正規表現を使う(MSXML限定)'' <http://members.jcom.home.ne.jp/jintrick/Personal/d20031l.html#d22_4>
[[#comment]]


* xalan:script 要素 (Xalan-Java XSLT 実装)

[23] [[Xalan]] では [[XSLT]] [[スタイル・シート]]で
[[JavaScript]] などを使うのに [CODE(XML)[xalan:script]]
要素を使います。

親要素は xalan:[[component]] 要素です。

,lang	,CDATA	,必須	,スクリプト言語
,src	,[[URI]]	,(指定なし)	,外部スクリプト参照

[[HTML]] や MSXML での書き方と互換性はありません。

- ''Xalan-Java Extensions'' <http://xml.apache.org/xalan-j/extensions.html>
[[#comment]]


* メモ

[59]
[[OSML]] で[[鯖]]側で処理される [[HTML]] 片の [CODE(HTMLe)@en[[[script]]]]
[[要素]]
([CODE(HTML)@en[[[type]]="[[text/os-data]]"]] や
[CODE(HTML)@en[[[type]]="[[text/os-template]}"]] には、]]
[CODE(HTMLa)@en[[[beforeData]]]]
や [CODE(HTMLa)@en[[[requireData]]]] のような[[属性]]を更に指定できます。
([[名無しさん]])

[61]
[CITE[Bug 304786 &#8211; dynamically inserting/adding xul:script via DOM doesn't work]] ([TIME[2008-10-09 11:53:54 +09:00]] 版) <https://bugzilla.mozilla.org/show_bug.cgi?id=304786>


[66] [CITE['''['''JavaScript''']''' とてもシンプルに自分自身が属する script 要素を取得 - IT戦記]] ([TIME[2008-12-27 15:22:12 +09:00]] 版) <http://d.hatena.ne.jp/amachang/20061201/1164986067>

[67] [CITE[Scripting – SVG Tiny 1.2]] ([TIME[2008-12-20 02:31:29 +09:00]] 版) <http://www.w3.org/TR/2008/REC-SVGTiny12-20081222/script.html#ScriptElement>

[71] [CITE[Index of /script-execution]] ([TIME[2009-02-03 10:44:50 +09:00]] 版) <http://testsuites.opera.com/script-execution/>

[72] [CITE[SVGを直接HTMLに埋め込む方法(プラグインを使わない) - dhrnameの開発日誌]] ([TIME[2009-01-31 21:23:50 +09:00]] 版) <http://d.hatena.ne.jp/dhrname/20080105/1199534939>

[74] [CITE@en[Re: '''['''HTML5''']''' DOMContentLoaded fires before CSS resources loaded?]]
([[Ian Hickson]] 著, [TIME[2009-08-02 19:04:59 +09:00]] 版)
<http://lists.w3.org/Archives/Public/public-html/2009Aug/0064.html>

[75] [CITE@en[(X)HTML5 Tracking]]
([TIME[2009-10-11 19:13:48 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=4102&to=4103>

[76] [CITE@en[(X)HTML5 Tracking]]
([TIME[2009-10-20 21:51:45 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=4177&to=4178>

[77] [CITE@en[(X)HTML5 Tracking]]
([TIME[2009-10-20 21:53:34 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=4178&to=4179>

[78] [CITE[IRC logs: freenode / #whatwg / 20091026]]
([TIME[2009-12-14 01:01:55 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20091026#l-421>

[80] [CITE[Forum Nokia - Driving innovation for mobile application developers]]
([TIME[2010-01-23 15:04:02 +09:00]] 版)
<http://www.forum.nokia.com/>

[81] [CITE@en[HTML5 Revision Tracker]]
([TIME[2010-07-14 22:43:50 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=5156&to=5157>

[82] [CITE['''['''whatwg''']''' The choice of script global object to use when the script element is moved]]
([TIME[2010-09-09 06:50:19 +09:00]] 版)
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2010-September/028457.html>

[83] [CITE@en[Web Applications 1.0 r5449 Make the 'already started' flag actually work. Also, reorder things in the 'run' algorithm so that we check things in order of cost to check, instead of doing the work up front and then the checks afterwards.Fixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10240]]
( ([TIME[2010-09-09 07:17:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5448&to=5449>

[84] [CITE@en[Web Applications 1.0 r5496     Allow parser-inserted scripts to rerun if they failed to be run by the parser.Fixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10519]]
( ([TIME[2010-09-26 04:26:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5495&to=5496>

[85] [CITE@en[Web Applications 1.0 r5499     Make policy checks for <script> happen after the flag is set that prevents the script from being run again, so that if somehow an attacker causes a document to be reinserted somewhere that has scripts enabled, the scripts still won't run.Fixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10523]]
( ([TIME[2010-09-26 04:59:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5498&to=5499>

[86] [CITE@en[Web Applications 1.0 r5545     Match Gecko for character encoding processing for <script>Fixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10656]]
( ([TIME[2010-09-29 10:04:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5544&to=5545>

[87] [CITE@en[Web Applications 1.0 r5597 add a note about script executionFixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10539]]
( ([TIME[2010-10-12 07:02:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5596&to=5597>

[88] [CITE@en[Web Applications 1.0 r5663     Make style sheets block scripts even in descendant documentsFixing http://www.w3.org/Bugs/Public/show_bug.cgi?id=10575]]
( ([TIME[2010-11-02 08:30:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5662&to=5663>

[89] [CITE@en-us[Using Inline XAML]]
( ([TIME[2011-01-04 20:58:07 +09:00]] 版))
<http://msdn.microsoft.com/en-us/library/cc189016%28v=vs.95%29.aspx>

[90] [CITE@en[Data Binding - Ample SDK]]
( ([TIME[2011-01-04 20:58:05 +09:00]] 版))
<http://www.amplesdk.com/examples/core/aml/databinding/>

[91] [CITE[''''''[''''''whatwg'''''']'''''' Re: rel="script"]]
( ([TIME[2011-01-19 23:51:17 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2005-July/004503.html>

[92] [CITE[''''''[''''''whatwg'''''']'''''' The choice of script global object to use when the script element is moved]]
( ([TIME[2011-02-02 22:51:39 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-February/030170.html>

[93] [CITE@en[Web Applications 1.0 r5817      Make script-inserted external scripts that have .async=false execute in the insertion order, default to true]]
( ([TIME[2011-02-03 14:34:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5816&to=5817>

[94] [CITE@en-GB-x-Hixie[Hixie's Natural Log: Script execution order post-mortem]]
( ([TIME[2011-02-08 23:07:35 +09:00]] 版))
<http://ln.hixie.ch/?start=1296711456&count=1>

[95] [CITE@en[Web Applications 1.0 r5883     Make a parser-inserted script not run if it is moved to another document before it executes (and not even fetch if it is parsed into another document than its parser's document).]]
( ([TIME[2011-02-15 05:47:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5882&to=5883>

[96] [CITE@en[Web Applications 1.0 r5891  Continue the conformance chain for inline <script> elements. Somehow I'd missed that case.]]
( ([TIME[2011-02-15 09:56:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5890&to=5891>

[97] [CITE@en[Web Applications 1.0 r5905     Make sure that all synchronous sections run before <script> elements, so that a <script> following a <video> has a state that doesn't depend on whether the browser splits up its parser tasks.]]
( ([TIME[2011-02-19 07:36:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5904&to=5905>

[98] [CITE[IRC logs: freenode / #whatwg / 20110203]]
( ([TIME[2011-03-19 11:46:31 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20110203>

[99] [CITE@en[Web Applications 1.0 r6049 Try to warn implementors about XSLT.]]
( ([TIME[2011-05-03 10:10:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=6048&to=6049>

[100] [CITE[''''''[''''''whatwg'''''']'''''' Proposal for separating script downloads and execution]]
( ([TIME[2011-05-25 00:33:14 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-May/031768.html>

[101] [CITE[IRC logs: freenode / #whatwg / 20110529]]
( ([TIME[2011-06-01 23:07:01 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20110529>

[102] [CITE['''['''whatwg''']''' Should script run if it comes from a HTML fragment?]]
([TIME[2011-06-07 09:15:22 +09:00]] 版)
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-June/031941.html>

[103] [CITE@en[Voice Browser Call Control: CCXML Version 1.0]]
( ([TIME[2011-06-28 19:48:47 +09:00]] 版))
<http://www.w3.org/TR/2011/REC-ccxml-20110705/#Script>

[104] [CITE[''''''[''''''whatwg'''''']'''''' Feedback regarding script execution]]
( ([TIME[2011-09-08 08:47:56 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-September/033132.html>

[105] [CITE@en[Web Applications 1.0 r4103     Define how <script> gets blocked while <style>@import</style>, and a general rewrite of how <script>s are executed and interact with the parsers.]] ([TIME[2009-10-11 17:02:00 +09:00]] 版) <http://html5.org/tools/web-apps-tracker?from=4102&to=4103>

[106] [[IE7]] も [[IE8]] も、[[文書中]]にない[[要素]]に [CODE(HTMLe)@en[[[script]]]]
を [CODE(DOMm)@en[[[appendChild]]]] しただけで実行してしまいます。
これはひどい・・・・。

[REFS[
- [CITE[appendChild (<script>)]] ([TIME[2011-09-27 23:28:57 +09:00]] 版) <http://suika.fam.cx/~wakaba/-temp/test/dom/node/child-methods/appendchild-script-2.html>
]REFS]


[107] [CITE[''''''[''''''whatwg'''''']'''''' <script> features]]
( ([TIME[2012-02-04 15:39:11 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2012-February/034629.html>

[108] [CITE[IRC logs: freenode / #whatwg / 20120206]]
( ([TIME[2012-02-09 21:33:22 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20120206>

[109] [CITE[IRC logs: freenode / #whatwg / 20120427]]
( ([TIME[2012-05-06 12:41:01 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20120427#l-514>

[110] [CITE[''''''[''''''whatwg'''''']'''''' script-related feedback]]
( ([TIME[2012-05-08 08:28:29 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2012-May/035713.html>

[111] [CITE[IRC logs: freenode / #whatwg / 20120620]]
( ([TIME[2012-07-04 21:39:52 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20120620#l-620>

[112] [CITE[IRC logs: freenode / #whatwg / 20120621]]
( ([TIME[2012-07-05 20:53:47 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20120621>

[113] [CITE@en[Web Applications 1.0 r7239     Make <script/> in SVG in text/html execute.]]
( ([TIME[2012-08-10 08:40:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7238&to=7239>

[114] [CITE[XMLのWebAPIを爆速で使いこなせるフレームワーク - Yahoo! JAPAN Tech Blog]]
( ([TIME[2012-09-11 11:17:08 +09:00]] 版))
<http://techblog.yahoo.co.jp/programming/bakusoku-yql/>

[115] [CITE@en[Web Applications 1.0 r7420       Make the parser match the implementations (and not be more even more crazy than necessary).]]
( ([TIME[2012-09-28 09:03:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7419&to=7420>

[116] [CITE[''''''[''''''whatwg'''''']'''''' Proposal: Loading and executing script as quickly as possible using multipart/mixed]]
( ([TIME[2012-12-04 00:39:17 +09:00]] 版))
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2012-December/038223.html>

[117] [CITE[''''''[''''''whatwg'''''']'''''' Script-related feedback]]
( ([TIME[2012-12-19 22:27:47 +09:00]] 版))
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2012-December/038429.html>

[118] [CITE@en-US[XBL 2.0]]
( ([TIME[2012-05-03 02:23:03 +09:00]] 版))
<http://dev.w3.org/2006/xbl2/Overview.html#script-blocks>

[119] [CITE@en[Web Applications 1.0 r8022  Make <script> be accepted in most places <template> is now accepted, e.g. inside <table>s. Doesn't affect parsing.]]
( ([TIME[2013-07-04 03:26:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8021&to=8022>

[120] [CITE[''''''[''''''whatwg'''''']'''''' Script preloading]]
( ([TIME[2013-07-10 05:41:59 +09:00]] 版))
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2013-July/039960.html>

[121] [CITE[IRC logs: freenode / #whatwg / 20130709]]
( ([TIME[2013-07-11 08:15:25 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130709>

[122] [CITE@en[Web Applications 1.0 r8124 Rejigger how scripts are described. Work in progress.]]
( ([TIME[2013-08-03 06:48:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8123&to=8124>

[123] [CITE@en[Web Applications 1.0 r2529        MAJOR CHANGES: Revamp the way scripts are specified, along with their interaction with resolving relative URLs, etc. Give enough detail to justify objects in the DOM not being garbage collected randomly when still in use. Define script groups, to handle scripts going away during document.open() and session history navigation. Define why and how setTimeout(), database transactions, etc, handle page transitions. Drop the terms 'with' and 'without' script, use script is 'enabled'/'disabled' instead. Define 'unload' and 'beforeunload'. Rework how onfoo='' and .onfoo event handler attributes are defined. Rework how the content model of <noscript> is defined. Reword the way javascript: is defined to use the new terminology. Add a few notes of things that came up while I was doing all that.]]
( ([TIME[2008-12-12 17:46:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=2528&to=2529>

[124] [CITE[IRC logs: freenode / #whatwg / 20130817]]
( ([TIME[2013-08-18 18:51:22 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130817>

[125] [CITE@en[Web Applications 1.0 r8247     The bulk of this is editorial: refactoring how scripts are defined so that all the common stuff is in a shared 'settings object' rather than being duplicated per script. But this also cleans up how postMessage() interacts with the event loop and a few other things I've since forgotten.]]
( ([TIME[2013-10-31 08:18:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8246&to=8247>

[126] [CITE[テンプレートエンジンでJavaScriptを動的生成する際のアンチパターン - 金利0無利息キャッシング – キャッシングできます - subtech]]
( ([TIME[2013-11-08 09:39:38 +09:00]] 版))
<http://subtech.g.hatena.ne.jp/mala/20131108/1383887454>

[127] [CITE@en[Web Applications 1.0 r8299  Remove the parts of the script content model that could lead to unbalanced crazy]]
( ([TIME[2013-11-20 06:35:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8298&to=8299>

[128] [CITE@en[Web Applications 1.0 r8313  Another attempt at redefining <script> content rules to make zcorpan happy]]
( ([TIME[2013-11-26 03:38:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8312&to=8313>

[129] [CITE@en[Web Applications 1.0 r8313  Another attempt at redefining <script> content rules to make zcorpan happy]]
( ([TIME[2013-11-26 03:38:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8312&to=8313>

[158] [CITE@en-US[XML Binding Language (XBL) 2.0]]
( ([TIME[2007-03-16 22:20:16 +09:00]] 版))
<http://www.w3.org/TR/2007/CR-xbl-20070316/#the-script>

[159] [CITE[Issue 329531 - chromium - Speculative parser fetches <script src> with unsupported type="" - An open-source project to help move the web forward. - Google Project Hosting]]
( ([TIME[2014-01-08 20:48:14 +09:00]] 版))
<https://code.google.com/p/chromium/issues/detail?id=329531>

[160] [CITE[SVG2 Requirements Input - SVG]]
( ([TIME[2013-06-13 12:01:58 +09:00]] 版))
<http://www.w3.org/Graphics/SVG/WG/wiki/SVG2_Requirements_Input#Consider_allowing_async.2Fdefer_on_.3Csvg%3Ascript.3E>

[161] [CITE@en-US[XML Binding Language (XBL) 2.0]]
( ([TIME[2007-03-16 22:20:16 +09:00]] 版))
<http://www.w3.org/TR/2007/CR-xbl-20070316/#loading0>

[162] [CITE[IRC logs: freenode / #whatwg / 20140604]]
( ([TIME[2014-06-05 17:35:50 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140604>

[163] [CITE[The "initialization" steps for Web browsers]]
( ([TIME[2014-06-10 22:00:51 +09:00]] 版))
<https://mail.mozilla.org/pipermail/es-discuss/2014-June/037544.html>

[175] [CITE[IRC logs: freenode / #whatwg / 20140721]]
( ([TIME[2014-07-22 11:22:12 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140721>

[176] [CITE[XML Events 2]]
( ([TIME[2010-12-18 05:25:20 +09:00]] 版))
<http://www.w3.org/TR/xml-events2/#s_script_module>

[FIG(quote)[
[FIGCAPTION[
[177] [CITE[Java SE 7 Supported Locales]]
([TIME[2015-04-25 17:31:30 +09:00]] 版)
<http://www.oracle.com/technetwork/java/javase/javase7locales-334809.html>
]FIGCAPTION]

>   <script id="ssInfo" type="text/xml" warning="DO NOT MODIFY!">
>   <ssinfo >
>     <fragmentinstance  id="fragment14" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
>     </fragmentinstance>
> [INS[...]]
>       <fragmentinstance  id="fragment44" fragmentid="ocom-commonassets" library="server:OCOM-FRAGMENT-LIBRARAY">
>         
>       </fragmentinstance>
>   </ssinfo>
>   </script>
> 

]FIG]


[178] [CITE@en[Add async/defer script loading diagram · whatwg/html@940b7f7]]
([TIME[2015-09-24 20:06:42 +09:00]] 版)
<https://github.com/whatwg/html/commit/940b7f70d002e01685f913e2fc9350c5208e5927>

[FIG(quote)[
[FIGCAPTION[
[179] [CITE[RDF in HTML: Approaches]]
([TIME[2004-03-25 08:00:00 +09:00]] 版)
<http://infomesh.net/2002/rdfinhtml/>
]FIGCAPTION]

> On the other hand, we have the script element with which to wrap some embedded XML RDF. 

]FIG]


[180] [CITE@en[Call out to CSP's inline element hooks · whatwg/html@ee3486e]]
([TIME[2015-11-08 16:31:28 +09:00]] 版)
<https://github.com/whatwg/html/commit/ee3486eb129bc350b5ca684d0c91dff23453ac1a>

[181] [CITE@en[Report 'inline' when inline violations occur. · w3c/webappsec-csp@eeb5227]]
([TIME[2015-12-01 11:47:26 +09:00]] 版)
<https://github.com/w3c/webappsec-csp/commit/eeb5227a76dab059002778e95575aed16ca4c2c4>

[182] [CITE@en[Close #384: add CSP hooks to handle inline events and style · whatwg/html@920c918]]
([TIME[2015-12-15 20:08:16 +09:00]] 版)
<https://github.com/whatwg/html/commit/920c9183a7990968ecac1aeedae22391f3438791>