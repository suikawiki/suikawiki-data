
* テスト・ケース

[REFS[
- [1] [CITE[Index of /~wakaba/test/web/dom/element/set-attr]] ([TIME[2012-12-20 15:07:45 +09:00]] 版) <http://suika.fam.cx/~wakaba/test/web/dom/element/set-attr/>
]REFS]

* 歴史

[2]
[[DOM水準3]]で、自分自身を置換しようとしても効果はないと明記されました。

しかし、その場合何が返されるのかは不明です。

* 実装

[3] [[DOM3]] は他の[[文書]]の[[節点]]を指定したら [CODE(DOMe)@en[[[WRONG_DOCUMENT_ERR]]]] になるとしていますが、
実際には自動的に [[adopt]] されます。

[4] >>2 の場合には自分自身が返されます。

[5] [[Chrome]] ではおそらく [CODE(DOMm)@en[[[setAttributeNode]]]] と [CODE(DOMm)@en[[[setAttributeNodeNS]]]]
は同じで、 [CODE(DOMa)@en[[[namespaceURI]]]] と [CODE(DOMa)@en[[[localName]]]]
でどれが置き換えられるか決まります。 [[Firefox]] では [CODE(DOMm)@en[[[setAttributeNode]]]]
は [CODE(DOMm)@en[[[setAttribute]]]]] と同じように [[QName]] が最初に一致した[[節点]]を置き換えるようで、
その結果不整合が生じることもあるようです。 [TIME[2012-12-20T15:12:49.500Z]]

[6] [[Firefox]] では[[非推奨]]との警告が出ます。

[7] [CITE@en[Define getAttributeNode''''''[''''''NS'''''']'''''' and removeAttributeNode · 5a881d9 · whatwg/dom]]
( ([TIME[2014-08-21 12:51:51 +09:00]] 版))
<https://github.com/whatwg/dom/commit/5a881d9b5f328f8e32f0fa8e73b4e8799772cb0c>

[8] [CITE@en[Define Element.prototype.setAttributeNode''''''[''''''NS'''''']'''''', removeAttributeNode, Name... · 12d0114 · whatwg/dom]]
( ([TIME[2014-08-21 13:32:48 +09:00]] 版))
<https://github.com/whatwg/dom/commit/12d011437faef5ada7b816c94aab39b10cdb2f4b>

[9] [CITE@en[Define Element.prototype.setAttributeNode''''''[''''''NS'''''']'''''', removeAttributeNode, Name... · 12d0114 · whatwg/dom]]
( ([TIME[2014-08-21 13:32:56 +09:00]] 版))
<https://github.com/whatwg/dom/commit/12d011437faef5ada7b816c94aab39b10cdb2f4b>