
[12] [DFN[HTML 4]] は、 [[HTML3.2]] に続いて [[W3C]]
が標準化した一連の [[HTML]] 規格群、あるいはそれによって定義される[[要素型]]等の規則 (プロトコル要素) の集合体です。

HTML 4 は、 [[HTML+]], [[HTML3.0]] から [[Cougar]] の流れと
[[HTML3.2]] を併合し、更に洗練した [[SGML]] base の HTML
の集大成と [WEAK[(結果的には)]] みることができます。

[26] [[HTML4]] には [DFN[[[HTML 4.0]]]] と [DFN[[[HTML 4.01]]]] の2つの版がありました。
[[HTML 4.0]] は1997年と1998年に計2回、[[HTML 4.01]] は1999年に1回 [[W3C]] [[勧告]]となりました。

[FIG(important)[
[22] 本項は過去の[[仕様書]]について説明しています。 [[HTML4]]
に含まれていた機能は現在は [[HTML Standard]] で規定されています。

本項で説明するのは [[HTML4]] 時代の事項であり、現状とは異なることがあります。
]FIG]

* HTML 4 仕様書

[13] W3C の正式な[[勧告]]としての HTML 4 は、三種類あります。

= [14] 1997年12月18日版 HTML 4.0 <http://www.w3.org/TR/REC-html40-971218>
= [15] 1998年4月24日版 HTML 4.0 <http://www.w3.org/TR/1998/REC-html40-19980424>
= [16] 1999年12月24日版 HTML 4.01 <http://www.w3.org/TR/1999/REC-html401-19991224>

>>15 は >>14 の改訂版ですが、編集上の修正のみを含んでいます。
(最近の W3C 仕様なら [CODE[Second Edition]] と呼ばれるでしょう。)

HTML 4.01 は HTML 4.0 の改訂版ですが、技術的な変更も含まれています。
[WEAK[厳密には 4.0 と 4.01 は互換でないのです。]]
HTML 4.0 は HTML 4.01 により廃止されています。

[17] HTML 4.01 仕様書にも幾つかの誤りが見つかっています。
- <http://www.w3.org/MarkUp/html4-updates/errata>

[18] [[ISO-HTML]] は、最終的には HTML 4.01 の部分集合となっています。
広義には HTML 4 の一種とみることもできますが、
少々毛色が異なるところがありましてねぇ。

[[XHTML1]] は、 HTML 4 の語彙をほぼそのまま [[XML]] にしたものですから、
これもより広義には HTML 4 の一種と言えますが、それもちょっとなんとなく。

[19] W3C [[Note]] として HTML 4.0 Guidelines for Mobile
Access <http://www.w3.org/TR/NOTE-html40-mobile>
があります。

[[#comment]]


* HTML 4 DTD

[1] 仕様書の本文中の [[DTD]] 片は [[Strict]] DTD の属性しか載ってないから要注意。

[10] >>1 Transitional (loose) DTD と Frameset DTD はおまけですからね。[WEAK[ちなみに Transitional と Frameset が別々なのは、技術的に ([[DTD]] の能力的に) 統一することができなかったからです。だから、 Strict Frameset DTD 的なものはありません。]]

[[#comment]]


** REC-html4

[2] HTML4 の文書型定義 ([[DTD]]) の [[URI]] を間違って示しているサイトが大量にあります。

- × http://www.w3.org/TR/REC-html4/loose.dtd
- × http://www.w3.org/TR/REC-html4/strict.dtd
- × http://www.w3.org/TR/REC-html4/frameset.dtd
- ○ <http://www.w3.org/TR/html4/loose.dtd>
- ○ <http://www.w3.org/TR/html4/strict.dtd>
- ○ <http://www.w3.org/TR/html4/frameset.dtd>

間違った方の URI には DTD は存在しません。
検索で探した限りでは、 [[W3C]] 文書で間違った方の URI
は登場せず、間違いが蔓延した理由は不明です。

[3] >>2 HTML 4.0 の DTD <http://www.w3.org/TR/REC-html40/loose.dtd>
から類推した可能性があります。

[4] >>2-3 W3C の ML の記録を見ると、1998年・1999年には
<http://www.w3.org/TR/REC-html4/> 以下が存在していたらしいです。
(現在は Not Found で、 Internet Archive にもないので、実在していたかは分からないんですが、複数の
W3C の list の記録に登場するので、あったのかも。)

[5] ''Strict-HTML スレッド10'' <http://pc2.2ch.net/test/read.cgi/hp/1045493217/75-86>

[20]
HTML 4.0 仕様書に、一箇所誤って [Q[/TR/REC-html4/]] と書いている場所があります。 DTD の URI ではありませんが・・・。
もしかすると、当時は本当にあったのかもしれません。でもその間違った部分の直前は正しい URI になってるしなー。

参考: <IW:HTML4:"intro/intro.html#h-2.1.1">
<IW:HTML4:"appendix/changes.html#h-A.1.3">

* HTML 4.01 vs HTML 4.1

[27] [[HTML 4.01]] はしばしば「[[HTML 4.1]]」とも表記されますが、'''誤り'''です。

* XHTML1

[41] [[HTML4]] は [[SGML]] に基づく[[マーク付け言語]]ですが、
これを [[XML]] に移植したものが [[XHTML1]] ([[XHTML 1.0]] や [[XHTML m12n]])
でした。

;; [[XHTML1]] を参照。

[42] なお [[XHTML1]] は [[XML]] に基づく構文や[[モジュール]]の構成のみ規定する[[差分仕様書]]で、
[[要素]]や[[属性]]の意味は [[HTML4]] を (曖昧に) 参照する不完全なものでした。

* HTML4 世代の仕様一覧

[46] [[HTML4]] 世代の仕様には次のものがあります。
[FIG(short list)[
- [[HTML 4.0]]
- [[HTML 4.01]]
- [[HTML 4.02]]
- [[HTML 4.0 Guidelines for Mobile Access]]
- [[CHTML]]
- [[ISO-HTML]]
- [[HTML+RDFa]]
- [[Web Applications 1.0]] (初期)
- [[Web Forms 2.0]]
- [[Web Controls 1.0]]
]FIG]

;; [[XHTML1]] 系の仕様は [[XHTML1]] を参照。

* 歴史

** Cougar

[28] [[HTML4]] は当初 [[Cougar]] という[[コード名]]で開発されていました。

** 00年代

[43] [[HTML4]]/[[XHTML1]] は90年代後半から00年代中頃まで長く使われていましたが、
これは [[HTML4]] の完成度が高かったからというよりは、 [[W3C]] が [[HTML]]
の開発を放棄して [[XHTML2]] や [[XForms]] など [[XML]] ベースの言語に注力していたことや、
[[IE]] が市場を占有し [[Netscape]] が力を失ったことで [[Webブラウザー]]の進化が停滞したことに原因があります。

[44] この時代にも [[HTML4]]/[[XHTML1]] の仕様の不備やそれに対する [[W3C]] [[HTML WG]]
の無関心さ、あるいは [[HTML]] と互換性のない [[XHTML2]] の是非、
仕様と現実の乖離など様々な議論がありました。その中から、当時の仕様の枠内で、
あるいは当時の仕様への素直な拡張によって不足する機能を追加したり曖昧な規定を明確化したり、
乖離を解消しようと試みたりする動きが次のようにいくつも現れました。

[FIG(short list)[
- [[WaSP]]
- [[Acid Tests]]
- [[DOCTYPEスイッチ]]
- [[XMDP]]
- [[XFN]]
- [[マイクロフォーマット]]
- [[Sending XHTML as text/html Considered Harmful]]
- [[Web Forms 2.0]]
- [[Web Applications 1.0]]
- [CODE(HTMLe)@en[[[canvas]]]]
]FIG]

[45] こうした動きの中から [[WHATWG]] が設立され、 [[HTML5]] へとつながります。

;; [[WHATWG]]、[[Web Applications 1.0]]、[[HTML5]] を参照。

* 関連

[29] [[ISO-HTML]] は [[HTML4]] の[[部分集合]]となっています。

[30] [[XHTML 1.0]] は元々 [[HTML4]] の [[XML]] 移植版という位置付けで作られました。

[31] [[HTML4]] に対してはいくつもの拡張が提案されました。 [[Web Forms 2.0]]
や [[Web Applications 1.0]] もそうで、後に [[HTML5]] となりました。

* メモ

- [6] 質問: HTML 4 は [[HTML3.2]] から [[XHTML]] への移行のために作られたって本当ですか?
- [7] >>6 嘘です。どこをどう見たらそういう話になるのやら。
- [8] HTML 4 までの流れを超簡単に説明すると、ほぼ当時の慣習を記述した [[HTML2.0]] の標準化にはなんとか成功した [[ietf-html]] [[WG]] は、大幅な機能拡張を含む [[HTML3.0]] の標準化を目指すも失敗。 (結果的にそのまま ietf-html は閉鎖されます。) [[W3C]] は HTML 3.0 を一旦捨てて、再びその当時の慣習 ([[NN]]/[[IE]] 3 世代) を記述した [[HTML3.2]] をまとめます。その後、 HTML 3.0 の多くの部分と新しい慣習 ([[NC]]/IE 4 世代) を纏め上げた HTML 4 が完成したのです。
- [9] HTML 4 が完成した頃に、ようやく [[XML]] が完成しまして、 XML で薔薇色の未来が見えました。そこで HTML と XML を融和させるのが新たな課題となったのです。 [CODE(HTML)[[[xml]]]] 要素型を使って XML を HTML に埋め込む短期的解法と XML base に HTML を移行することの2つがありましたが、前者は結局は実現しませんでした。後者が [[XHTML1]] となります。

[11] HTML 3.0 と HTML 4.0 をつなぐ規格案 (DTD) は [[Cougar]] と呼ばれていました。もっとも、 Cougar の時点では、まだ HTML 3.3 になるのか 3.5 になるのか 4.0 になるのか (そもそも規格化されるのかすら) 未定でした。

[21]
[CITE[IRC Log for #whatwg on irc.freenode.net, collected by WhatBot]] ([CODE[2007-01-27 01:58:34 +09:00]] 版) <http://whatbot.charlvn.za.net/index.php?date=2007-01-25>

たしかにこれ: <IW:HTML4:"conform.html#conformance">
は面白いなw

> A [DFN@en[conforming user agent]] for HTML 4 is one that ''observes the mandatory conditions ("must")'' set forth in this specification, ''including the following points'':
- A user agent ''should'' avoid [VAR[...]]
- A user agent ''must'' ensure [VAR[...]]
- For reasons of backwards compatibility, we ''recommend'' [VAR[...]]


[23]
[[HTML 4]] の要素索引、属性索引で [CODE(HTMLe)@en[[[iframe]]]]
は[[フレーム集合DTD]]にだけ存在するかのように書かれていますが、
実際には[[移行用DTD]]にも存在します。


[24]
[CITE@en[HTML4 Implementation Requirements from Ian Hickson on 1999-02-05 (www-html@w3.org from February 1999)]] ([[Ian Hickson (py8ieh@bath.ac.uk)]] 著, [TIME[2007-10-05 17:42:17 +09:00]] 版) <http://lists.w3.org/Archives/Public/www-html/1999Feb/0010.html>

* 最小の HTML4 文書

[25] [CITE@ja[冬様もすなる☆日記というもの (2009年1月)]] ([[わかば]] 著, [TIME[2009-01-27 11:35:11 +09:00]] 版) <http://suika.fam.cx/~wakaba/d/d200901#d27>

* HTML4 のバグ

[32] まあ枚挙に暇がないけど。

[33] 
<http://www.w3.org/TR/html4/types.html#type-links>
>
:Alternate:    Designates substitute versions for the document in which the link occurs. When used together with the lang attribute, it implies a translated version of the document. When used together with the media attribute, it implies a version designed for a different medium (or media).

[34] 
<http://www.w3.org/TR/html4/struct/links.html#search>
>In the following example, we use the hreflang attribute to tell search engines where to find Dutch, Portuguese, and Arabic versions of a document. Note the use of the charset attribute for the Arabic manual. Note also the use of the lang attribute to indicate that the value of the title attribute for the LINK element designating the French manual is in French.


[35] [CITE[IRC logs: freenode / #whatwg / 20090909]]
([TIME[2009-10-18 18:18:41 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090909#l-362>

[36] [CITE[IRC logs: freenode / #whatwg / 20090909]]
([TIME[2009-10-18 18:18:41 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20090909#l-406>

[37] [CITE[HTML4 Testable Assertions: Prologue]]
([TIME[2003-01-23 17:00:50 +09:00]] 版)
<http://www.w3.org/MarkUp/Test/HTML401/current/assertions/prologue.html>

[38] [CITE[IRC logs: freenode / #whatwg / 20110722]]
( ([TIME[2011-08-06 16:16:23 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20110722>

[39] [CITE@en[Fwd: note: HTML 4.01 analysis for conformance]]
( ([[Karl Dubost]] 著, [TIME[2014-01-21 19:26:43 +09:00]] 版))
<http://lists.w3.org/Archives/Public/www-archive/2014Jan/0007.html>

[40] [CITE[IRC logs: freenode / #whatwg / 20140627]]
( ([TIME[2014-06-30 17:18:29 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20140627#l-893>