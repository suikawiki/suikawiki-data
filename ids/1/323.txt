* 概念

[FIG(short list)[
- [[時差]]
- [[標準時]]
- [[夏時刻]]
- [[地方時]]
- [[太陽時]]
- [[天文時]]
- [[世界時]]
- [[グリニッジ標準時]]
- [[UT]]
- [[UT0]]
- [[協定世界時]] [[UTC]]
- [[本初子午線]]
- [[MET]]
]FIG]

* 各地の時間帯

[FIG(short list)[
- [[日本の時間帯]]
- [[台湾の時間帯]]
- [[満州の時間帯]]
- [[モンゴルの時間帯]]
- [[中国大陸の時間帯]]
- [[朝鮮半島の時間帯]]
- [[フィリピンの時間帯]]
- [[東南アジアの時間帯]]
- [[南アジアの時間帯]]
- [[欧州の時間帯]]
- [[ロシアの時間帯]]
- [[中東の時間帯]]
- [[北米の時間帯]]
- [[中南米の時間帯]]
- [[アフリカの時間帯]]
- [[大洋州の時間帯]]
- [[南極の時間帯]]
- [[国際便の時間帯]]
- [[アジア大陸の鉄道標準時]]
- [[フィクションの時間帯]]
]FIG]

* 適用の範囲

[24] [[標準時]]や[[夏時刻]]は、各国の[[法令]]によって定められています。
その適用範囲も、各国[[法令]]の規定するところとその効力の及ぶ範囲によります。

[25] 各国政府の主張する領域と実効支配の及ぶ領域に差がある場合には、
実際に当地で用いられているのは実効支配勢力の定める時刻と考えるのが自然です。
複数勢力が混在する場合には、用いられる時刻も混在していることがあります。
基本となる[[標準時]]が同じでも、[[夏時刻]]の実施期間が支配勢力によって異なることもあります。

;; [[中東の時間帯]]参照。

[27] 普通は[[法令]]の効力が及ぶのは[[領土]]、[[領空]]、[[領海]]と思われます。
[[接続水域]]や[[EEZ]]に[[標準時]]法制の効力が及ぶのかは定かではありません。

;; [[船舶]]や[[宇宙空間]]での時刻運用については、[[国際便の時間帯]]を参照。

[28] 国内であっても、[[在外公館]]や外国軍基地、[[租界]]など[[治外法権]]的性格を持つ地域がある場合があります。
そうした地域では独自の時刻を定めている可能性もありますが、
普通は便宜上、周辺地域と同じ時刻を採用しているものと思われます。

;; [33] 時刻制度が未発達だった時代には、周辺地域では[[標準時]]が制定されておらず、
[[租界]]でのみ[[標準時]]が存在した事例もありました。

;; [35] [[中国大陸の標準時]]参照。

[26] 国際的な交通機関や通信などについては、[[国際便の時間帯]]を参照。

* 時間帯の表記

[10] 名前による表記は、多くの場合、[[時間帯]]を表しています。
- [[tzdata]]
- [[電子メールの時間帯表記]]
- [[米軍時間帯]]
- [CODE[[[Z]]]]

[11] 数値による表記は、[[時差]]を表しています。
- [[HTMLの時間帯表記]]
- [[RFC 822の日付形式]]
- [[RFC 3339の日付形式]]
- [CODE(XML)@en[[[xs:dateTime]]]]
- [CODE[[[TZ]]]] ([[環境変数]])

[18] [[時間帯]]不明を表す表記があることもあります。
- [CODE[[[-00:00]]]]
- [CODE[[[float]]]]

* プロトコル

[29] [[時間帯]]自体を特に扱う[[プロトコル]]:
[FIG(short list)[
- [[TZDIST]]
- [[VTIMEZONE]]
]FIG]

* 編暦との関係

[20] [[天体]]の動きにより定まる[[暦]]では、どの[[時刻]]を用いて計算するかが重要になります。
同じ[[暦法]]を用いても、適用する[[時刻]]が異なると、[[日付]]や[[暦注]]が異なる場合があります。

[36] [[中国式太陰太陽暦]]は、[[農暦]]、[[旧暦]]、[[越南暦]]で計算上の[[標準時]]の違いから生じる[[日付]]のずれがあります。

[37] [[ヒジュラ暦]]は、観測上の[[標準時]]の違いから生じる[[日付]]のずれがあります。

[FIG(quote)[
[FIGCAPTION[
[19] [CITE[イスラム諸国よ、条約を守り、同日に犠牲祭を祝おう]]
([TIME[2012-11-02 11:11:16 +09:00]] 版)
<http://www.el.tufs.ac.jp/prmeis/html/pc/News20121028_084032.html>
]FIGCAPTION]

> この会議は、それぞれの国で別々の時に新月が出るため、固定されたタイムゾーンを明らかにし、ムスリムが共通して行動できるようにする目的で、1978年11月27日から30日にかけて行われた。この会議では、「あるイスラム国家で新月が確認される時を待つべきなのか、それとも新たな月の始まりを決めるためには、世界のどこかで新月が確認されれば十分なのか」という問いの答えが模索された。

> 3日間の集中的な会談と議論を経て、「ヒジュラ暦における月の始まりのためには、世界のどこかで新月が初見されれば十分である」という指針にしたがって合意が得られた。トルコは、宗務庁とともにこの合意を受け入れた。しかしサウジアラビアは、イスラム世界におけるこの論争を終わらせる合意にもかかわらず、断食月とバイラムも含め、犠牲祭を別の日に定めることを続けた。

]FIG]

* メモ

- [1] ''Sources for Time Zone and Daylight Saving Time Data'' <http://www.twinsun.com/tz/tz-link.htm>
- [2] ''src/share/zoneinfo/datfiles/'' <http://www.openbsd.org/cgi-bin/cvsweb/src/share/zoneinfo/datfiles/>
- [3] ''src/share/zoneinfo/'' <http://www.jp.freebsd.org/cgi/cvsweb.cgi/src/share/zoneinfo/>
- [4] ''ISS FAQ スペースシャトル: スペースシャトルでの時刻は何を使用しているのですか'' <http://jem.tksc.nasda.go.jp/iss_faq/faq_shuttle.html#q25>: [ABBR[MET] [Mission Elapsed Time]] (打ち上げからの経過時刻) と [[GMT]] を使うそうです。

[5]
[CITE@en[Working with Time Zones]] <http://www.w3.org/TR/timezone/>

時間帯の扱いに関するメモです。
[WEAK[まとめみたいなものなので新しい情報はありません。]]

[[日付]]の処理で時間帯に注意するように促すことと、
[[時差]]の表示だけでは処理できない局面があることの問題提起が目的のようです。

([[夏時刻制]]が実施されている時でも、
[[標準時]]と[[夏時刻]]の2種類を分けるのではなく、
[Q[ある地点の時刻]]を扱いたいときに[[時差]]だけでは処理できないという話。)

([[名無しさん]] [WEAK[2005-10-14 00:30:56 +00:00]])


[6]
[CITE[Greenland Time Zones]] <http://www.statoids.com/tgl.html>
([[名無しさん]] [WEAK[2006-06-18 02:26:58 +00:00]])

[7] [CITE[IANA — Time Zone Database]]
( ([TIME[2011-11-04 01:30:45 +09:00]] 版))
<http://www.iana.org/time-zones>

[8] [CITE@ja[Google カレンダーのタイムゾーンの仕組み - Google カレンダー ヘルプ]]
( ([TIME[2013-02-07 01:22:01 +09:00]] 版))
<http://support.google.com/calendar/bin/answer.py?hl=ja&answer=2367918>

[9] [CITE@EN[XPath and XQuery Functions and Operators 3.0]]
( ([TIME[2014-04-08 07:02:07 +09:00]] 版))
<http://www.w3.org/TR/xpath-functions-3/#formatting-timezones>

[12] [CITE@ja[tz database - Wikipedia]]
([TIME[2011-08-31 16:07:19 +09:00]] 版)
<http://ja.wikipedia.org/wiki/Tz_database>


[13] [CITE@en[Time Zone Codes]]
([TIME[2015-04-24 19:44:49 +09:00]] 版)
<https://technet.microsoft.com/en-us/library/aa226764(v=sql.80).aspx>

[FIG(quote)[
[FIGCAPTION[
[14] [CITE@en[RFC 5070 - The Incident Object Description Exchange Format]]
([TIME[2015-07-11 22:59:28 +09:00]] 版)
<https://tools.ietf.org/html/rfc5070#section-2.9>
]FIGCAPTION]

> 
>    A timezone offset from UTC is represented by the TIMEZONE data type.
>    It is formatted according to the following regular expression:
>    "Z|'''['''\+\-''']'''(0'''['''0-9''']'''|1'''['''0-4''']'''):'''['''0-5''']''''''['''0-9''']'''".
>    The TIMEZONE data type is implemented as an "xs:string" with a
>    regular expression constraint in the schema.  This regular expression
>    is identical to the timezone representation implemented in an "xs:
>    dateTime".

]FIG]

[15] [CITE@en[draft-lear-iana-timezone-database-04 - IANA Procedures for Maintaining the Timezone Database]]
( ([TIME[2011-08-21 01:16:01 +09:00]] 版))
<http://tools.ietf.org/html/draft-lear-iana-timezone-database-04>

[16] [CITE@en[Web Services Internationalization (WS-I18N)]]
( ([TIME[2012-05-17 23:07:50 +09:00]] 版))
<http://www.w3.org/TR/2012/NOTE-ws-i18n-20120522/#sec-tz>

[17] ([TIME[2015-08-11 11:02:03 +09:00]] 版)
<https://www.ietf.org/timezones/data/Theory>

[21] [CITE@ja[タイムゾーンに関するニュースから]]
([TIME[2015-11-28 02:53:01 +09:00]] 版)
<http://www.time-j.net/uc/news/>

[FIG(quote)[
[FIGCAPTION[
[22] [CITE@en[Web Services Internationalization (WS-I18N)]]
([TIME[2008-07-16 01:06:50 +09:00]] 版)
<https://www.w3.org/International/core/ws-i18n/ws-i18n#sec-tz>
]FIGCAPTION]

> The i18n:tz element information item MAY appear at most one time in the children property of the i18n:international information item. If present, it MUST follow the i18n:locale element information item.
> (01) <i18n:tz> ('''['''RFC 822''']''' value) | 
> (02) (Olson ID '''['''OLSON ID''']''') </i18n:tz>
> The i18n:tz element information item represents the local time zone of the requester or provider. The value of the element MUST be either RFC 822-formatted zone offset '''['''RFC 822''']''' or an Olson ID '''['''OLSON ID''']''' from the 'olsonid' database. Note that RFC 822 zone offsets are not complete time zone identifiers and Olson identifiers are preferred. It is implementation-defined whether an RFC 822-formatted zone offset or an OLson ID is given, and how a choice between these two kinds of values is indicated.
> An example of the i18n:tz element information item using an RFC 822 zone offset is given below:
> Example: The tz element information item
> (01) <i18n:tz>GMT-0300</i18n:tz>
> (02) <i18n:tz>America/Los_Angeles</i18n:tz>

]FIG]


[23] [CITE@en[Welcome - History of Time]]
([TIME[2016-03-16 01:15:17 +09:00]] 版)
<http://timedb.co.uk/>

[30] [CITE[WTZ DST News - countries Daylight Saving Time news 2015-2016]]
( ([TIME[2016-05-03 12:14:51 +09:00]]))
<http://www.worldtimezone.com/dst_news/>

[31] [CITE[WTZ DST News - countries Daylight Saving Time news 2015-2016]]
( ([TIME[2016-05-03 12:14:51 +09:00]]))
<http://www.worldtimezone.com/dst_news/>

[32] [CITE@en[Time Zone News - countries that change their clocks]]
( ([TIME[2016-05-03 12:15:14 +09:00]]))
<http://www.timeanddate.com/news/time/>

[34] [CITE@en-US[Microsoft Daylight Saving Time & Time Zone Blog | This is the blog maintained by staff at Microsoft to provide general information, announcements and provide answers to Frequently Asked Questions (FAQs) related to daylight saving time (DST) and time zone (TZ) changes around the world. * Important Notice]]
( ([TIME[2016-05-03 12:32:21 +09:00]]))
<https://blogs.technet.microsoft.com/dst2007/>

[FIG(quote)[
[FIGCAPTION[
[38] [CITE[Aurora on Amazon RDS - Amazon Relational Database Service]]
( ([TIME[2016-05-20 17:17:35 +09:00]]))
<https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Aurora.html#Aurora.Overview.LocalTimeZone>
]FIGCAPTION]

> You can set your local time zone to one of the values listed in the following table. For some time zones, time values for certain date ranges can be reported incorrectly as noted in the table. For Australia time zones, the time zone abbreviation returned is an outdated value as noted in the table.

> Atlantic/Azores
> This time zone setting can return incorrect values from 24 May 1911 01:54:32 GMT to 01 Jan 1912 01:54:32 GMT.
> Australia/Adelaide
> The abbreviation for this time zone is returned as CST instead of ACDT/ACST.
> Australia/Brisbane
> The abbreviation for this time zone is returned as EST instead of AEDT/AEST.
> Australia/Darwin
> The abbreviation for this time zone is returned as CST instead of ACDT/ACST.
> Australia/Hobart
> The abbreviation for this time zone is returned as EST instead of AEDT/AEST.
> Australia/Perth
> The abbreviation for this time zone is returned as WST instead of AWDT/AWST.
> Australia/Sydney
> The abbreviation for this time zone is returned as EST instead of AEDT/AEST.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[40] [CITE['''['''新機能''']'''Amazon Auroraで日本時間が使用可能になりました! | Developers.IO]]
( ([TIME[2016-05-22 12:56:24 +09:00]]))
<http://dev.classmethod.jp/cloud/aws/amazon-aurora-local-timezone/>
]FIGCAPTION]

>> This time zone setting can return incorrect values from 30 Sep 1937 15:00:00 GMT to 31 Dec 1937 15:00:00 GMT.
>> (このタイムゾーンの設定は、1937年9月30日15時00分00秒 GMT から1937年12月31日15時00分00秒 GM Tまで誤った値を返すことがあります。)
> これだけ読むと実装にバグが有るように思えますが、「1937年9月30日15時00分00秒 GMT」つまり「1937年10月01日00時00分00秒 JST」に日本の標準時に関する法律が変わっています。日本に「西部標準時」があったのですが無くなって「中央標準時」に統一されています。年の途中で標準時の変更があったので地政学的に正しい時刻が返せないと言うことだと自分は認識しました。
> 他のタイムゾーンでも「This time zone setting can return incorrect values from 〜 to 〜」という記述が散見されますが、同様の問題だと思います。

]FIG]

[39] >>38 は年の途中で[[標準時]]が変更されたり[[夏時刻]]が実施されたりすると適切に扱えないケースがあるのかと思いきや、
該当しそうでも注記がない例も多く、法則性が見えてきません。
>>40 のように言う人もいますが、それならむしろ1937年9月以前が正しくなく、
10月以降正しい値になるはずで、あまり納得感がある説明ではありません。

;; 問題が発生する理由は謎ですが、理由はともかく、何らかの実装上の都合による[[バグ]]ではあるが、
古い日付にしか影響しないので仕様として処理することにした、というのが適切な解釈のように思えます。
少なくても [CODE[Asia/Tokyo]] に関しては[[日本]]の[[法令]]と [[tzdata]]
の定義から挙動は明確で、曖昧性はありません。

[41] [CITE[LEGAL TIME 2014]]
( ([TIME[2014-04-01 21:42:16 +09:00]]))
<http://www.itu.int/dms_pub/itu-t/opb/sp/T-SP-LT.1-2014-PDF-E.pdf>