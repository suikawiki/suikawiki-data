[12] [DFN[TRON 仕様コード]]は、 [[BTRON]]
で使われている[[符号化文字集合]]です。

[13]
符号化方式は特別な符号列によって符号平面を切り替える
[[ISO/IEC 2022]] のような戦略を採用しています。
もっとも [[ISO/IEC 2022]] は情報交換用の[[符号]]ですが、
TRON コードはそうではありません。

各符号平面は16ビットで、[[制御文字]]と同じ[[バイト]]を避けて
4つの領域に分けられています。
[[四分区]]から成る平面を切り替えて使うというアイデアはまさに今はなき
[[DIS 10646]] とそっくりです。

TRON コードは [[文字コード]]の一種ですが、 [[BTRON]] 
には[RUBY[[[平文]]] [プレイン・テキスト]]に相当する概念が無いので、
[[可変長セグメント]]のようなものが含まれていたりもします。
[WEAK[とはいっても、 [[ISO/IEC 2022]] や [[ISO/IEC 10646]] の体系でも [[ISO/IEC 6429]] の[[制御シーケンス]]などは[[文字コード]]とはいえないものです。]]

[14] TRON コードを設計した[[坂村健]]氏らは、
[[言語]]が異なれば[[文字]]も別に符号化した方がよいと考えていました。
また、 [[JIS]] の[[包摂規準]]や [[UCS]] の 
[[CJK統合漢字]]のように異なる[[字形]]を1つの[[符号位置]]にまとめるよりも、
できるだけ細かく分けて符号化して、
検索などで必要に応じて同一視するのが望ましいと考えていました。
その他色々な経緯から、既存の [[JIS]] の[[文字コード]]や [[UCS]]
や[[大漢和辞典]]などの[[文字集合]]をそのまま取り入れたり、
独自に制作した[[GT書体]]の[[文字集合]]を取り入れたりしています。

TRON (コード) の売りの1つは[[外字]]が必要ないこととされていましたが、
[[文字]]とそれ以外の敷居が低い TRON コード ([[TAD]])
では[[画像]]を[[文字]]とほとんど同じように扱えました。
ですから、 TRON コードには外字領域のようなものは用意されていません。


* 符号化方式

[3] 8ビット空間又は16ビット空間を[DFN[[[面]]]]と呼び、
同時に使用する[[文字]]群の1単位とします。
[[面]]は[[言語指定コード]]によって切り替えます。

[4] 8ビットの面は仕様上存在するだけで実際には使われていないそうです。

[5] 16ビットの面は、あらゆる[[ビット組合せ]]を使うのではなく、
[[制御文字]]に相当する部分 ([[CL]] など) を避けています。

[PRE[
上\下 00   20       7E 80 A0    FD FE FF
00  +-------+--------+-+--+-+--------+
01  +-------+        +-+  +-+        |
    |                                |
20  |       +--------+  +---------+  |
    |       |A       |  |C        |  |
    |       |        |  |         |  |
    |       |        |  |         |  |
7E  |       +--------+  +---------+  |
80  |       +--------+  +---------+  |
    |       |B       |  |D        |  |
    |       |        |  |         |  |
FD  |       |        |  |         |  |
FE  |       +--------+  +---------+--+
FF  +-------+--------+--+------------+
]PRE]

[6] どこかで聞いたことがある話だと思ったあなた! そう、
[[DIS 10646]] そっくりです。
[WEAK[([[DIS 10646]] は [[CR]] も避けていますが、 TRON は [[CR]] も使っています。)]]

[7]
- '''[CODE(char)[0x0000]]〜[CODE(char)[0x0020]], [CODE(char)[0x007F]], [CODE(char)[0x00A0]]''':
[[制御コード]] (>>8)
- '''[CODE(char)[0x2121]]〜[CODE(char)[0xFDFD]]''' (抜けあり):
[[文字コード]] (>>10)
- '''[CODE(char)[0xFE21]]〜[CODE(char)[0xFE7E]], [CODE(char)[0xFE80]]〜[CODE(char)[0xFEFD]], [CODE(char)[0xFEFE]]''':
[[言語指定コード]]
- '''[CODE(char)[0xFF21]]〜[CODE(char)[0xFF7E]]''':
[[TRON仕様特殊コード]]
- '''[CODE(char)[0xFF80]]〜[CODE(char)[0xFFFE]]''':
[[TRON仕様エスケープ]]
- '''[CODE(char)[0xFFFF]]''': [CODE(charname)[[[EOF]]]]

[10] [DFN[文字コード]]の領域 ([[図形文字]]が割当てられ得る領域)
は16ビットの1面に4つあり、合計で48400符号位置/面あります。
,領域	,名称	,符号位置数
,[CODE(char)[0x2121]]〜[CODE(char)[0x7E7E]]	,Aゾーン	,8836 ([CODE(math)[94 × 94]])
,[CODE(char)[0x8021]]〜[CODE(char)[0xFD7E]]	,Bゾーン	,11844 ([CODE(math)[126 × 94]])
,[CODE(char)[0x2180]]〜[CODE(char)[0x7EFD]]	,Cゾーン	,11844 ([CODE(math)[94 × 126]])
,[CODE(char)[0x8080]]〜[CODE(char)[0xFDFD]]	,Dゾーン	,15876 ([CODE(math)[126 × 126]])

[[#comment]]


* 制御コード

[8] 16ビットの[[面]]の [CODE(char)[0x0000]]〜[CODE(char)[0x0020]],
[CODE(char)[0x007F]], [CODE(char)[0x00A0]]
は[DFN[制御コード]]とされ、次のものが定義されています。

,符号位置	,名前	,説明
,[CODE(char)[0x0000]]	,無効	,文字列終端。
,[CODE(char)[0x0009]]	,"タブ ([CODE(charname)[[[HT]]]], [CODE(charname)[[[TAB]]]])"	,次の[[タブ位置]]または[[フィールド]]への[[遷移]]。[[タブ書式]]や[[フィールド書式]]が未設定なら無視。
,[CODE(char)[0x000A]]	,改段落 ([CODE(charname)[[[NL]]]])	,[[改行]]または[[改段落]]。
,[CODE(char)[0x000B]]	,改コラム	,[[改コラム]]。[[コラム指定]]されていないなら改ページと同じ。
,[CODE(char)[0x000C]]	,改ページ	,[[改頁]]。[[図形]]内埋込み[[文章データ]]なら[[改行]]と同じ。
,[CODE(char)[0x000D]]	,改行	,[[フィールド]]内または[[段落]]内の[[改行]]。
,[CODE(char)[0x0020]]	,"セパレータ, プロポーショナル[CODE(charname)[[[SP]]]] (英語モード)"	,[[語]]や[[文節]]の区切れ。
,[CODE(char)[0x00A0]]	,英字固定ピッチ[CODE(charname)[[[SP]]]] (英語モード)

以上の8つを使用し、残りの[[符号位置]]は使用しません
[SRC[BTRON3]]。

[[#comment]]


* 符号化文字集合

[25] 第1面 (FE21) [[とりあえず多言語面]] / [[システムスクリプト]]

- 1-2121 [[JIS X 0208]] + [[JIS X 0213]] 第1面 [SRC[>>23]]
- 1-8021 [[六点点字]] [SRC[>>23]]
- 1-8121 [[八点点字]] [SRC[>>23]]
- 1-8721 [[JIS X 0213]] 第2面 [SRC[>>23]]
- 1-A121 [[JIS X 0212]]
- 1-2180 [[GB 2312]]
- 1-B780 [[KS X 1001]]

[26] 第2面 (FE22)、第3面 (FE23)、第4面 (FE24) [[GT書体]] [SRC[>>35]]

- 2-2121 GT書体フォント2000 1-48400 [SRC[>>23]]
- 3-2121 GT書体フォント2000 48401-69263 [SRC[>>23]]
- 3-22B9 GT書体フォント2000 69264-78774 [SRC[>>23]]

[27] 第6面 (FE26) [[Big5]] [SRC[>>22]]

[36] 第7面 (FE27) [[中国語]][[伝統字]]に予約 [SRC[>>35]]

[11] 大漢和辞典収録文字 (FE28, FE29)、記号類 (FE29)

[PRE[
	8-2121〜8-FDFD	大漢和辞典修訂二版 00001〜48055	[C3] [BRV]
	9-2121〜9-353A	大漢和辞典修訂二版 48056〜49964	[C3] [BRV]
	9-353B〜9-3D6E	大漢和辞典修訂二版補巻001〜804	[C3] [BRV]
	9-3D6F〜9-7E7E	reserved	[BRV]
]PRE]

- [DEL[9-8021〜9-907E	reserved	[SRC[BRV]] ]]
- 9-8021	濁点付きひらがな・カタカナ [SRC[>>23]]
- 9-8321	住民基本台帳収録変体仮名 [SRC[>>23]]
- 9-8521	変体仮名 [SRC[>>23]]

[PRE[
	9-9121〜9-937E          iモード絵文字 (166+105)	[C3] [BRV]
		9-922B〜9-9247	(追加)	[2002/07/23]
		9-9333〜9-937E	(追加)	[2002/07/23]
		9-922B〜9-9247 の29文字: 途中で移動 [R4.100B]
	9-9421〜9-955F	ホツマ文字 (154)	[2001/05/24] [BRV]
	9-9621〜9-9377	陰陽五行文字 (86)	[2001/05/24] [BRV]
	9-9721〜9-977A	序数記号 (90)	[2001/09/14] [BRV]
	9-9821〜9-987E	アーヴ文字 (39)	[2001/10/31] [BRV]
	9-9921〜9-FDFD	reserved	[BRV]
]PRE]

[28] 中国伝承文字、少数民族文字類 (FD10)
[PRE[
	10-2121〜10-2F7E	トンパ文字 (1362)	[2001/05/24] [BRV]
	10-3021〜10-FDFD	reserved	[BRV]
]PRE]

[32] 第11面-第15面 [[黒歴史]]

[30] 第16面、第17面 [[Unicode]] ([[漢字]]、[[ハングル]]を除く [[BMP]]) [SRC[>>22]]

[29] 第22面、第23面 [[GB 18030]]

[PRE[
	22-2121〜22-C25F	0x8140〜0xFE9F
	23-624C〜23-C321	0x8431A439〜0x81308130
]PRE]

[15] [[GB 18030]] 領域は634文字だけ割当てられており、
抜けがあります。 [[GSDP]] [[メーリングリスト]]での質問に対する
[[PMC]] 担当者の回答によると、割当て ([[GB 18030]] との対応?)
は決まっていて、将来 (時期未定) [[フォント]]を追加することになっているようです。
[REFS[
- [31] [CITE@en[Re: GB18030対応部分のTRONコードについて]],
[TIME[2003-11-05]]
<mid:200311050047.JAA24475@sparc18.personal-media.co.jp>
]REFS]

* TAD における TRON コード

[44] [CITE[第3章 TAD 詳細仕様書]], [TIME[2011-01-26T00:45:16.000Z]], [TIME[2022-08-25T14:10:29.901Z]] <http://www.chokanji.com/developer/doc/btron3/shared_data/tad1.html#abq>

[45] [CITE[第4章 フロッピーディスク形式]], [TIME[2011-01-26T00:45:12.000Z]], [TIME[2022-08-25T14:18:25.304Z]] <http://www.chokanji.com/developer/doc/btron3/shared_data/fd_format.html#afd>

[47] [CITE[3.6 図形描画セグメント]], [TIME[2011-01-26T00:45:20.000Z]], [TIME[2022-08-25T14:21:53.982Z]] <http://www.chokanji.com/developer/doc/btron3/shared_data/tad3.html#aev>

> 準TAD規格は、TAD規格に対して以下に示す変更/制限を行なったものである。
=    使用する文字コードは2バイトの固定長とし、 かつ第2バイトが先にくる形式とする。 1バイトの制御コードの直後には、常に値 "0" のバイトを詰めるものとする。 すなわち、 文字コードはリトルエンディアンの16ビットデータとみなす。
=    各セグメントのデータ構造として記述されている、 H, UH, W, UW, COLOR, UNITS, CHSIZE, SCALE, RATIO のデータタイプのバイトオーダーは、 下位バイトが先にくるリトルエンディアン形式とする。 UB タイプのデータには、 1.で記述した2バイト固定長の文字コードのみを使用する。 
=[SNIP[]]


[46] [CITE[第4章 フロッピーディスク形式]], [TIME[2011-01-26T00:45:12.000Z]], [TIME[2022-08-25T14:21:08.039Z]] <http://www.chokanji.com/developer/doc/btron3/shared_data/fd_format.html#agh>

> 準標準フロッピーディスク形式は、 TRON 標準フロッピーディスク形式に対して以下に示す変更 / 制限を行なったものである。
=    使用する文字コードは2バイトの固定長とし、 かつ第2バイトが先にくる形式とする。 すなわち、文字コードはリトルエンディアンの 16 ビットデータとみなす。
=    2バイト以上のデータのバイトオーダーは、 下位バイトが先にくるリトルエンディアン形式とする。 文字列データには、1.で記述した2バイト固定長の文字コードのみを使用する。 


* エスケープ

[38] [[SGML]] の[[文字参照]]風に表現した[[テキスト形式TRONコード]]がありました。

* RTF + フォント

[48] 
[CITE[[[超漢字]]]]のデータは
[[GT書体]] / [[Tフォント]]を使った [[RTF]] と相互変換できました。
[SEE[ [[Tフォント]] ]]



* メモ

- [BTRON3] [CITE[BTRON3仕様書 Ver 3.20.00]], [[TRON協会]], 1999年,
<http://www.sakamura-lab.org/TRON/BTRON/BTRON3/>。
[[TRONコード]]に関しては
<http://www.sakamura-lab.org/TRON/BTRON/BTRON3/shared_data/tron_code.html>
を参照。[[準TAD]] に関しては付録Bを参照。
- [BTRON-DIFF] [CITE[超漢字(B-right/V R2)仕様書]]
[CSECTION[第1編 BTRON3 仕様書に対する制限・補足]], [[Personal Media Corporation]],
2000年10月20日, 
<http://www.personal-media.co.jp/btron/developer/doc/brightv.r2/index.html>。
[[TRONコード]]に関しては
<http://www.personal-media.co.jp/btron/developer/doc/brightv.r2/diff/diff.html>
を参照。
- [BRV-R4] [CITE[超漢字(B-right/V R4)仕様書]], 2001年,
<http://www.personal-media.co.jp/tron/developer/doc/brightv.r4/index.html>。
[[TRONコード]]に関しては
[CITE[第1編 BTRON3 仕様書に対する制限・補足]] 
<http://www.personal-media.co.jp/tron/developer/doc/brightv.r4/diff/diff.html>
を参照。
- [GT] <http://www.l.u-tokyo.ac.jp/GT/>。
- [GT-CHO2] [CITE[GT書体セット・利用方法【BTRON仕様OS編】]], 
2000年12月13日, <http://www.l.u-tokyo.ac.jp/GT/FONTS/TRON/>。
- [R4.100B] [CITE[超漢字4 R4.100B バージョンアップ版]], 2003年9月17日,
<http://www.chokanji.com/download/ck4_100.html>。

[41] [CITE[第1編 共有データ 目次]], [TIME[2022-05-05T14:21:38.000Z]], [TIME[2004-10-31T12:56:19.388Z]] <https://web.archive.org/web/20041031125545/http://www.personal-media.co.jp/tron/developer/doc/btron3/shared_data/index.html>

[42] [CITE[第1編 BTRON3 仕様書に対する制限・補足]], [TIME[2022-05-05T14:22:27.000Z]], [TIME[2004-10-31T15:16:01.541Z]] <https://web.archive.org/web/20041031151557/http://www.personal-media.co.jp/tron/developer/doc/brightv.r4/diff/index.html>

- [1] ''TRON文字収録センター'' <http://www2.tron.org/>
- [2] [[iモード絵文字]]で間違いの修正と称して非互換変更が行われたようです。使ってた人は困ってるみたい。[[文字コード]]の連中は懲りないなあ。

[16] [CITE@ja[TRONコードとは? - 超漢字ウェブサイト]]
( ([TIME[2010-11-10 00:15:12 +09:00]] 版))
<http://www.chokanji.com/ckv/manual/01-07-01.html>

[17] [CITE@ja[TRONコード | 超漢字検索ウェブサイト]]
( ([[パーソナルメディア株式会社]] 著, [TIME[2013-05-29 11:35:12 +09:00]] 版))
<http://www.chokanji.com/ckk/manual/troncode.html>

[18] [CITE@ja[TRONコードとは? - 超漢字ウェブサイト]]
( ([TIME[2010-11-10 09:15:12 +09:00]] 版))
<http://www.chokanji.com/ckv/manual/01-07-01.html>

[35] [CITE@ja[超漢字V FAQ集 - 超漢字ウェブサイト]], [TIME[2018-01-15T07:00:09.000Z]], [TIME[2022-09-03T06:32:05.077Z]] <http://www.chokanji.com/ckv/faqans/moji.html>

[19] [CITE[TRON文字収録センター]]
( ([TIME[2011-02-01 18:52:58 +09:00]] 版))
<http://charcenter.t-engine.org/>

[9] [CITE@ja[TRON Code Utility]] ([TIME[2012-08-05 18:11:08 +09:00]] 版) <http://metanest.jp/tcu/tcu.xhtml>


[20] [CITE[TRONコードと ruby 1.9 M17n]]
( ([TIME[2011-11-15 18:54:37 +09:00]] 版))
<http://metanest.jp/btronclub/20110122/presen.html>

[21] [CITE[TRON多文字応用グループ]]
( ([TIME[2010-02-24 17:01:37 +09:00]] 版))
<http://www.assoc.tron.org/jpn/tronproject/tp_p-05.html>

[22] [CITE@ja[TRONコード - Wikipedia]]
([TIME[2015-12-06 17:02:31 +09:00]] 版)
<https://ja.wikipedia.org/wiki/TRON%E3%82%B3%E3%83%BC%E3%83%89>

[23] [CITE@ja-jp[TRONコード ‐ 通信用語の基礎知識]]
([TIME[2015-12-18 10:18:49 +09:00]] 版)
<http://www.wdic.org/w/WDIC/TRON%E3%82%B3%E3%83%BC%E3%83%89>

[24] [CITE[第2章 TRON コード体系]] ([TIME[2011-01-26 09:45:21 +09:00]] 版) <http://www.chokanji.com/developer/doc/btron3/shared_data/tron_code.html>

[33] [CITE[グループ:TRONコード濁点付きひらがな・カタカナ - GlyphWiki]]
([TIME[2015-12-18 10:32:03 +09:00]] 版)
<http://glyphwiki.org/wiki/Group:TRON%E3%82%B3%E3%83%BC%E3%83%89%E6%BF%81%E7%82%B9%E4%BB%98%E3%81%8D%E3%81%B2%E3%82%89%E3%81%8C%E3%81%AA%E3%83%BB%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A>

[34] [CITE@ja[利用できる文字セット - 超漢字ウェブサイト]]
([TIME[2012-11-07 09:17:14 +09:00]] 版)
<http://www.chokanji.com/ckv/manual/01-07-04.html>


[43] [CITE[レパートリー一覧]], [TIME[2022-05-05T14:23:34.000Z]], [TIME[2004-10-23T20:36:16.536Z]] <https://web.archive.org/web/20041023203227/http://www2.tron.org/repertoire.html>

[FIG(quote)[
[FIGCAPTION[
[37] [CITE[文字セット改定のお知らせ]]
([TIME[2015-12-18 10:38:04 +09:00]] 版)
<http://web.archive.org/web/20071226003334/www2.tron.org/set10.html>
]FIGCAPTION]

> TRONプロジェクトでは、2006年10月27日付けでTRONコードに下記の文字セットを更新いたしました。文字セット一覧を画像でご覧いただけます。
> 追加された文字セット
> 変体仮名
> 収録コード範囲   9面Bゾーン 8521〜8D7E
> →文字一覧 1/2/3
> ※文字一覧2の表に誤りがありましたので修正しました。(2007年6月22日)
> 濁点付きひらがな・カタカナ (略称:濁点仮名)
> 収録コード範囲   9面Bゾーン 8021〜8230
> →文字一覧 1
> 住民基本台帳収録変体仮名 (略称:住基仮名)
> 収録コード範囲   9面Bゾーン 8321〜846A
> →文字一覧 1
> 

]FIG]

[FIG(amazon)[
TRON
]FIG]


[40] [CITE@ja[超漢字Vで扱える文字 - 超漢字ウェブサイト]], [TIME[2012-12-10T08:35:24.000Z]], [TIME[2020-12-13T12:26:26.168Z]] <http://www.chokanji.com/features/moji.html>


[39] [CITE[TRON多国語言語環境]]
([TIME[2015-05-18T05:50:38.000Z]], [TIME[2020-10-28T09:46:36.941Z]])
<http://umdb.um.u-tokyo.ac.jp/DKankoub/Publish_db/2000dm2k/japanese/01/01-07.html>