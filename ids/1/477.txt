

* 要素と属性の使い分け

[2]
[[XML]] の[[語彙]]の定義にあたり、しばしば、
[[子要素]]とするか[[属性]]とするか迷うことがあります。
本稿では、両者の使い分け方について検討します。


** 意味的な観点から

[1]
'''構成部分か、付帯情報か'''

その情報が、[[親要素]]に対して、その一部を構成するといえるなら[[子要素]]、
それを説明するものといえるなら[[属性]]を使うのが、
本来の[[要素]]と[[属性]]の意味と考えられます。

もちろん、この2つの性質は相反するものではありませんから、
個々の事例毎にどちらがより[Q[それらしい]]か考えることになります。

[2]
'''レンダリングされる内容か、それ以外の情報か'''

対象となる情報群が[[レンダリング]]されるとする時、
[[レンダリング]]される[[内容]]となるべき[[内容]]は[[子要素]]、
[[レンダリング]]の向上のために使われる補助情報や[[レンダリング]]と直接関係しない情報は[[属性]]とするべきです。

;; これは [[SGML]] の時代から[[要素]]と[[属性]]の使い分けの指針とされてきました。

[[#comment]]


** 構造的な観点から

[3]
'''構造を持つか否か'''

[[SGML]] や [[XML]] の[[属性]]は構造を持てないという制限があります。
[[データ型]]のようなものがあるとはいえ、基本的に[[文字列]]です。

従って、構造がある場合、それがごく簡単な構造の場合を除いて、
[[子要素]]とせざるを得ません。

[4]
'''人間可読文か否か'''

扱いたい情報が[[人間]]が理解することを目的とした[[文章]]の一部又は全部であるなら、
[[属性]]では''なく''[[子要素]]とするべきです。
[[人間可読]]な[[文]]を、実用的なレベルで記述するためには、
[[自然言語]]や[[書字方向]]や[[上付き]]や[[ルビ]]の情報など、
[[平文]]では不十分です。[[多言語化]]や[[地域化]]のために、
構造を持ち得る[[子要素]]を使う必要があります。

[5]
'''付属情報があるか否か'''

扱いたい情報が更にそれに関する付属情報を必要としているなら、
[[属性]]ではなく[[子要素]]とするべきです。

例えば、あるデータと、そのデータの[[データ型]]を記述したいなら、
データは[[子要素]]、[[データ型]]はその[[要素]]の[[属性]]とするべきです。

[PRE(XML bad example code)[
<ファイル 日付="2005-11-22T01:02:03Z" 日付の書式="RFC 3339"/>
]PRE]

[PRE(XML example code)[
<ファイル>
  <日付 書式="RFC 3339">2005-11-22T01:02:03Z</日付>
</ファイル>
]PRE]

@@ 例が良くない

[7]
'''複数個あるか否か'''

扱いたい情報が2個以上になり得るなら、
[[属性]]ではなく[[子要素]]とするべきです。

例えば、[[文献]]の[[著者]]名は、
2人以上の[[著者]]が存在し得るので、[[子要素]]で表すべきです。

[PRE(XML bad example code)[
<文献 著者="間空付毛尾">
  <題名>よいマークの付け方</題名>
</文献>
]PRE]

[PRE(XML example code)[
<文献>
  <題名>よいマークの付け方</題名>
  <著者>間空付毛尾</著者>
  <著者>多具各子</著者>
</文献>
]PRE]

[[#comment]]


** 実運用的な観点から

[6]
'''名前でアクセスしたいか否か'''

[[属性]]を使う場合、 [[DOM]] の [CODE(DOMm)@en[[[getAttributeNS]]]]
[[メソッド]]である[[名前]]の[[属性]]を即座に取得したり、
[CODE(DOMm)@en[[[setAttributeNS]]]] で簡単に値を設定したりできます。
[[子要素]]の場合はそうはいきません。

[8]
dfgdsg
([[fdgdfs]] [fgsdg] [WEAK[2006-10-26 07:18:27 +00:00]])

[9]
dfgdsg
([[fdgdfs]] [fgsdg] [WEAK[2006-10-26 07:18:29 +00:00]])

[[#comment]]


** その他

[10]
[CITE[Attributes vs. Elements]] ([[Maciej Stachowiak <mjs@...>]] 著, [CODE[2007-03-12 18:25:07 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/9329>
([[名無しさん]] [WEAK[2007-03-15 13:42:29 +00:00]])


[11]
>>10 は[[要素型]]か[[大域属性]]かという話ですけれども、
一件関係内容に見える[[文書体系]]とか [[CONCUR]] とかと根は同じなのかなあと。
([[名無しさん]])


[[#comment]]


* メモ