[1] [DFN[[CODE(XML)[[VAR[xs:]]dateTime]]]] は [[XML Schema]]
で定義されている[[日付]]と[[時刻]]を表す[[データ型]]・[[書式]]です。

* 仕様書

[REFS[
- [17] [CITE@EN[W3C XML Schema Definition Language (XSD) 1.1 Part 2: Datatypes]] ([TIME[2012-04-04 21:34:51 +09:00]] 版) <http://www.w3.org/TR/xmlschema11-2/#dateTime>
]REFS]

* 値空間

[18] [[date/timeSevenPropertyModel]] のうち、[[·timezoneOffset·]] のみが省略可能です [SRC[>>17]]。

[23] [[日の数]]の制約も課されています [SRC[>>17]]。

* 字句空間

[24] 次のような[[文字列]]が[[字句空間]]に含まれます [SRC[>>17]]。
[FIG[
= [25] 省略可能: [CODE[[[-]]]]
= [26] [[ASCII数字]]4桁以上 ([[年]]): 4桁に満たない場合を除き、[[先導0]]禁止
= [27] [CODE[[[-]]]]
= [28] [[ASCII数字]]2桁 ([[月]]): 01~12
= [29] [CODE[[[-]]]]
= [30] [[ASCII数字]]2桁 ([[日]]): 01~[[日の数]]
= [31] [CODE[[[T]]]]
= [32] [[ASCII数字]]2桁 ([[時]]): 00~24
= [33] [CODE[[[:]]]]
= [34] [[ASCII数字]]2桁 ([[分]]): 00~59
= [35] [CODE[[[:]]]]
= [36] [[ASCII数字]]2桁 ([[秒]]): 00~59
= [37] 省略可能: [CODE[[[.]]]] の後 [[ASCII数字]]1桁以上
= [38] 省略可能: 次のいずれか ([[時差]])
=- [39] [CODE[[[Z]]]]
=- [40] 次の列
=-= [41] [CODE[[[+]]]] または [CODE[[[-]]]]
=-= [42] [[ASCII数字]]2桁 ([[時]]): 00~14
=-= [43] [CODE[[[:]]]]
=-= [44] [[ASCII数字]]2桁 ([[分]]): 00~59
]FIG]

[45] ただし、 >>32 が 24 のときは、 >>34、>>36、>>37 は 0 でなければいけません [SRC[>>17]]。

[46] ただし、 >>42 が 14 のときは、 >>44 は 0 でなければいけません [SRC[>>17]]。

* 暦

[20] [[先発グレゴリオ暦]]が用いられています。

[19] [[XML Schema 1.0]] では、[[0]]年は認められておらず、1年の前は-1年で、[[紀元前]]1年を表していました。

[21] [[XML Schema 1.1]] では、[[0]]年が認められ、1年の前は0年 ([[紀元前]]1年) で、その前が-1年
([[紀元前]]2年) を表すように変更されました [SRC[>>17]]。

;; [22] さらっと非互換変更していますね...

* IETF の変種

[8] [[IETF]] の多くの仕様書は、 [[RFC 3339の日付形式]]と [CODE(XML)@en[[[xs:dateTime]]]]
の両方の要件を満たすことを求めています。 (詳しくは[[RFC 3339の日付形式]]の項を参照。)

* Date construct (Atom 1.0)

[12] [[Atom]] では、[[日時]]の指定は [DFN[[[Date construct]]]] と呼ばれています。

** 仕様書

[REFS[
- [11] [CITE@en[RFC 4287 - The Atom Syndication Format]] ([TIME[2008-08-30 23:12:03 +09:00]] 版) <http://tools.ietf.org/html/rfc4287#section-3>
]REFS]

** 内容

[13] [[Date construct]] 中には[[空白]]を含めては[['''なりません''']]
[SRC@en[[[Atom 1.0]] 3.]]。

[14] [[RFC 3339]] の [CODE[[[date-time]]]] ([[RFC 3339の日付形式]]) でなければなりません。
記号 [CODE[[[T]]]] と [CODE[[[Z]]]] は[[大文字]]でなければ[['''なりません''']]。 [SRC[>>3]]

** 歴史

[15] [[Atom 0.3]] では [[W3C-DTF]] が用いられていました。 [[Atom 1.0]]
の定義とほとんど変わりませんが、厳密には多少の違いがあります。

* UTC 固定の変種

[2] [[RFC 3982]] は[[時間帯]]を [[UTC]] ([CODE[Z]])
に固定しています。 ([[XML Schema]] 定義では
[CODE(XML)[[VAR[xs:]]dateTime]] を使用。)

[3] 仕様書:
- [[RFC 3982]] [CITE[IRIS:  A Domain Registry (dreg) Type for the Internet Registry Information Service (IRIS)]]
<urn:ietf:rfc:3982>
-- [CSECTION[3.2.1.  Privacy Labels]]

[4] [[EPPの日付形式]]は [CODE(XML)[[VAR[xs:]]dataTime]]
と [[RFC 3339の日付形式]]の両方の部分集合で、
時間帯を [CODE[Z]] に固定した上で [CODE[T]] と [CODE[Z]]
を[[大文字]]で記述すると規定しています。
([[XML Schema]] 定義では [CODE(XML)[[VAR[xs:]]dateTime]] を使用。)


[5]
[[WS-BaseFaults]] 1.2 は、[[時間帯]]が省略された場合には [[UTC]]
と解釈[['''しなければなりません''']]と規定しています。

* 関連

[9] [[W3C-DTF]]、[[RFC 3339の日付形式]]や[[HTMLの日付形式]]
([[大域日時文字列]]または[[地方日時文字列]]) と似ていますが、細部が異なります。

* メモ

[6] [CITE@en[XQuery 1.0 and XPath 2.0 Data Model (XDM) (Second Edition)]]
( ([TIME[2010-12-17 00:06:35 +09:00]] 版))
<http://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/#dates-and-times>

[7] [CITE@EN[W3C XML Schema Definition Language (XSD) 1.1 Part 2: Datatypes]]
( ([TIME[2012-04-05 06:34:51 +09:00]] 版))
<http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime>

[10] [[OpenDocument]] は [[XML Schema]] [[データ型]]で定義された[[日付形式]]を用いています。

[16] [CITE@EN[XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)]]
( ([TIME[2010-12-17 00:06:54 +09:00]] 版))
<http://www.w3.org/TR/2010/REC-xpath-functions-20101214/#durations-dates-times>