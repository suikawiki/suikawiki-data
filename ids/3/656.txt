[2] [[透過内容折衝]]に対応した[[資源]]を[DFN[[RUBYB[[[透過的折衝可能資源]]]@en[transparently negotiable resource]]]]といいます。

[3] [[RFC 2295]] はしばしば[RUBYB[[[折衝可能資源]]]@en[negotiable resource]]という
(未定義の) 用語を使っていますが、これも同義と思われます。

* 仕様書

[REFS[
- [4] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-8.5>
- [22] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-10>
- [5] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-11.2>
]REFS]

* 応答

[14] [[透過的折衝可能資源]]では、 [CODE(HTTP)[[[2xx]]]] と [CODE(HTTP)[[[3xx]]]]
の[[応答]]には [CODE(HTTP)@en[[[TCN:]]]] [[ヘッダー]]と
[CODE(HTTP)@en[[[list]]]]、[CODE(HTTP)@en[[[choice]]]]、[CODE(HTTP)@en[[[adhoc]]]]
のいずれかを含めなければ[['''なりません''']] [SRC[>>4, >>22]]。ただし
[CODE(HTTP)[[[304]]]] には含めても含めなくても構いません [SRC[>>4, >>22]]。

[15] [[透過的折衝可能資源]]の他の[[応答]]には、 >>14 の3つの値以外の
[CODE(HTTP)@en[[[TCN:]]]] [[ヘッダー]]を含めて構いません [SRC[>>4, >>22]]。

* レンダリング

[6] [[利用者エージェント]]は、[[透過内容折衝]]の結果得られた[[異体]]であって[[埋め込まれ]]たオブジェクトでないものを[[表示]]する時は、次のようにします。
埋め込まれたオブジェクトでも同様とすることを[RUBYB[推奨]@en[encouraged]]しますが、必須ではありません。 [SRC[>>5]]

[7] [[利用者]]が[[折衝可能資源]]に束縛されたすべての[[異体]]の一覧を表示し、
手動で[[異体]]を選択できるようにする[['''べきです''']]。
これは[[折衝可能資源]]の [CODE(HTTP)@en[[[Alternates:]]]]
[[ヘッダー]]の情報から[[メニュー]]を生成する形でも構いませんし、
[CODE(HTTP)@en[[[Negotiate:]] [[trans]]]] 付きの [CODE(HTTP)@en[[[GET]]]]
[[要求]]を送信して[[リスト応答]]を取得し、その [[payload body]]
を表示する形でも構いません。 [SRC[>>5]]

[8] [[利用者インターフェイス]]上に通常の[[資源]]ではなく[[内容折衝]]された[[資源]]であることを提示すると共に、
[CODE(HTTP)@en[[[Alternates:]]]] [[ヘッダー]]の[[異体リスト]]を[[利用者]]が調べられるようにする[['''べきです''']]。 [SRC[>>5]]

[9] [[利用者]]には[[異体]]の [[URL]] ではなく、[[折衝可能資源]]の [[URL]]
を示す[['''べきです''']]。しかし[[表示]]中の[[異体]]の [[URL]]
を調べる方法も用意する[['''べきです''']]。 [SRC[>>5]]

[10] [[利用者]]が後から参照できるように[[利用者エージェント]]が [[URL]]
を保存する場合には、[[異体]]の [[URL]] ではなく、[[折衝可能資源]]の [[URL]]
を保存する[['''べきです''']] [SRC[>>5]]。

* 歴史

[FIG(quote)[
[FIGCAPTION[
[1] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-2.2>
]FIGCAPTION]

>
:transparently negotiable resource: 
A resource, identified by a single URI, which has multiple
representations (variants) associated with it.  When servicing a
request on its URI, it allows selection of the best representation
using the transparent content negotiation mechanism.  A
transparently negotiable resource always has a [[variant list]] bound
to it, which can be represented as an Alternates header (defined in section 8.3).

>
:透過折衝可能資源:
単一の [[URI]] で識別され、関連付けられた複数の[[表現]]
([[変種]]) を持った[[資源]]。
その URI で要求を service するときは、
[[透過内容折衝]]機構を使って最善の表現を選択することができる。
透過折衝可能資源は常にそれに束縛された[[変種一覧]]を持っていて、
この一覧は [CODE(HTTP)[[[Alternates]]]] 頭として表現できる。
]FIG]