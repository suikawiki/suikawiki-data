

* option 要素型 (HTML, XHTML 1)

[1] [[HTML]] の [DFN[[CODE(HTMLe)[option]] 要素]]は、
メニュー制御子 ([CODE(HTMLe)[[[select]]]]) の選択肢を表します。

[2] 仕様書:
- [[HTML 4]] ([[Web Forms 1.0]])
-- [CITE[menus]]
<IW:HTML4:"interact/forms.html#menu">
-- [CITE[17.6 The [CODE(HTMLe)[SELECT]], [CODE(HTMLe)[OPTGROUP]], and [CODE(HTMLe)[OPTION]] elements]]
<IW:HTML4:"interact/forms.html#edef-OPTGROUP">
- [[Web Forms 2.0]]
-- [CSECTION@en[2.18. Handling unexpected elements and values]]
<IW:WF2:"#handling">

[3] 
:[[開始タグ]]:必須
:[[終了タグ]] (HTML 4):省略可能
:終了タグ (XHTML 1):必須
:出現できる文脈:[CODE(HTMLe)[[[select]]]] 要素や
[CODE(HTMLe)[[[optgroup]]]] の子供として任意個
:[[内容模型]]:[CODE(SGML)[#[[PCDATA]]]]
:[[属性]]:
,属性名	,属性値	,既定値	,説明	,出典
,[CODE(HTMLa)[[[class]]]]	,	,(なし)	,[[級]]	,"[HTML 4] %[[coreattrs]] ⊂ %[[attrs]], [XHTML 1] [[Core]] ⊂ [[Common]]"
,[CODE(HTMLa)[[[dir]]]]	,	,	,[[書字方向]]	,"[HTML 4] %[[i18n]] ⊂ %attrs, [XHTML 1] [[I18N]] ⊂ Common"
,[CODE(HTMLa)[[[disabled]]]]	,([[真偽値属性]])	,(偽)	,無効	,[HTML 4]
,[CODE(HTMLa)[[[id]]]]	,[CODE(SGML)[[[ID]]]]	,(なし)	,一意識別子	,"[HTML 4] %coreattrs ⊂ %attrs, [XHTML 1] Core ⊂ Common"
,[CODE(HTMLa)[[[label]]]]	,[CODE(SGML)[%[[Text]]]]	,(内容)	,階層名	,[HTML 4]
,[CODE(HTMLa)[[[lang]]]]	,	,	,[[自然言語]]	,[HTML 4] %i18n ⊂ %attrs
,[CODE(HTMLa)[[[xml]]:lang]]	,	,	,自然言語	,[XHTML 1] I18N ⊂ Common
,[CODE(HTMLa)[[[onclick]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %[[events]] ⊂ %attrs, [XHTML 1] [[Events]] ⊂ Common"
,[CODE(HTMLa)[[[ondblclick]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onkeydown]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onkeypress]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onkeyup]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onmousedown]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onmousemove]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onmouseout]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onmouseover]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[onmouseup]]]]	,[CODE(SGML)[%[[Script]]]]	,(なし)	,	,"[HTML 4] %events ⊂ %attrs, [XHTML 1] Events ⊂ Common"
,[CODE(HTMLa)[[[selected]]]]	,(真偽値属性)	,(偽)	,初期選択	,[HTML 4]
,[CODE(HTMLa)[[[style]]]]	,	,	,スタイル情報	,"[HTML 4] %coreattrs ⊂ %attrs, [XHTML 1] [[Style]] ⊂ Common"
,[CODE(HTMLa)[[[title]]]]	,	,	,注釈的題	,"[HTML 4] %coreattrs ⊂ %attrs, [XHTML 1] Core ⊂ Common"
,[CODE(HTMLa)[[[value]]]]	,	,(内容)	,値	,[HTML 4]

** フォーム

[4] '''誤り処理'''

[[フォーム制御子]]としての[[値]]は、
明示的に指定されない場合 ([[内容]]が用いられる場合)
は、 [CODE(DOMa)@en[[[textContent]]]] [[DOM属性]]の値により初期化[['''しなければなりません''']]。
[SRC@en[WF2 2.18]]

[[#comment]]


** レンダリング

[5] '''誤り処理'''

[[テキスト節点]]以外が含まれる場合、
どう[[レンダリング]]されるべきかは未定義です。
実用上、2つの可能性があります:
- [6] [[フォーム制御子]]外の場合と同じように、
通常通り[[レンダリング]]する
- [7] [[初期値]] ([CODE(DOMa)@en[[[defaultValue]]]])
のみを[[レンダリング]]し、他の内容は
([[CSS]] により特に指定されない限り) 
[[レンダリング]]しない

[SRC@en[WF2 2.18]]

[6] '''[CODE(HTMLe)@en[select]] 外'''

[CODE(HTMLe)@en[[[select]]]] [[要素]]外の
[CODE(HTMLe)@en[[[option]]]] は、
[CODE(HTMLe)@en[[[span]]]] と同じように[[レンダリング]][['''するべきです''']]。
[SRC@en[WF2 2.18]]

* メモ

[172] [CITE[IRC logs: freenode / #whatwg / 20100926]]
( ([TIME[2010-10-10 13:13:29 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20100926>

[173] [CITE[IRC logs: freenode / #whatwg / 20110803]]
( ([TIME[2011-08-14 00:58:16 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20110803>

[174] [CITE@en[Web Applications 1.0 r7786 fix mistake in previous checkin; and fix mistake in much earlier checkin...]]
( ([TIME[2013-04-02 03:02:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7785&to=7786>

[175] [CITE[HTML - IE と <option> - Qiita ''''''[''''''キータ'''''']'''''']]
( ([TIME[2013-07-01 03:45:08 +09:00]] 版))
<http://qiita.com/wakaba@github/items/c62fba79cbc5cec42251>

[176] [CITE@en[Web Applications 1.0 r8147  Change how the content models of <title> and <option> are defined (move from prose additions to more formal content model descriptions, and tighten up the requirements)]]
( ([TIME[2013-08-20 10:35:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8146&to=8147>

[177] [CITE@en[Web Applications 1.0 r8297     Move more towards the browsers for <option> selectedness vs dirtiness. This doesn't quite match any browser exactly, so all browsers would have to change to match it. If there's a reason (e.g. backcompat) to prefer a different model, please reopen the bug and let me know.]]
( ([TIME[2013-11-20 05:20:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8296&to=8297>

[178] [CITE@en[Web Applications 1.0 r8341     Updates for r8297, fixing <option> to treat 'dirtiness' correctly, and r8336, fixing 'error' events sent to MessagePort objects to not race messages sent from those ports (or, worse, the event that the port is delivered on...).]]
( ([TIME[2013-12-12 02:41:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8340&to=8341>

[179] [CITE[ncsa-mosaic/CHANGES at master · alandipert/ncsa-mosaic]]
( ([TIME[2014-04-07 05:27:34 +09:00]] 版))
<https://github.com/alandipert/ncsa-mosaic/blob/master/CHANGES#L114>

[8] [CITE@en[''''''[''''''giow'''''']'''''' (3) option.text needs to exclude script nodes, for compat reasons · whatwg/html@b1adc35]]
([TIME[2016-03-10 10:28:54 +09:00]] 版)
<https://github.com/whatwg/html/commit/b1adc35035eff05e6177d11cc5e564934a0cc977>

[9] [CITE@en[19549 – option.text should skip script elements]]
([TIME[2016-03-10 10:29:28 +09:00]] 版)
<https://www.w3.org/Bugs/Public/show_bug.cgi?id=19549>

[10] [CITE@en[Make label-less empty option OK if datalist child · whatwg/html@3885f11]]
([TIME[2016-03-13 21:12:58 +09:00]] 版)
<https://github.com/whatwg/html/commit/3885f11503431c1bb33c3bb4bf1b9d5d9bcdae61>