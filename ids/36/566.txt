* 仕様書

[REFS[
- [1] [CITE@en[RFC 8030 - Generic Event Delivery Using HTTP Push]], [TIME[2020-03-09 00:13:33 +09:00]] <https://tools.ietf.org/html/rfc8030#section-5.2>
]REFS]

* 意味

[4] 
[CODE[TTL:]] [[ヘッダー値]]は、
[[プッシュサービス]]が[[プッシュメッセージ]]を保持するべき[[秒数]]を指定します。
[SRC[>>1 5.2.]]

* 文脈

[2] [[プッシュメッセージ]]は、
短期間しか有意義でないこともありますし、
保管や転送の資源節約のこともあり、
有効期限が設けられています。
[SRC[>>1 5.2.]]

[3] [[Web Push]] [[アプリケーションサーバー]]は、
[[プッシュ資源]]への[[要求]]に
[CODE[TTL:]]
[[ヘッダー]]を含めなければ[MUST[なりません]]。
[SRC[>>1 5.2.]]

[10] 
[[プッシュサービス]]は、
要求されたより保持期間を短くする場合、
これを[[応答]]の
[CODE[TTL:]]
[[ヘッダー]]で示さなければ[MUST[なりません]]。
この場合値は要求された値[[以下]]でなければ[MUST[なりません]]。
[SRC[>>1 5.2.]]


* 構文

[5] 
[[ヘッダー値]]は、
1つ[[以上]]の[[ASCII数字]]です。
[SRC[>>1 5.2.]]

[FIG(railroad)[
= +
== [[ASCII数字]]
]FIG]

* 処理

[8] 
[[プッシュサービス]]は、
[[プッシュ資源]]への[[要求]]に
[CODE[TTL:]]
[[ヘッダー]]がないとき、
[CODE[400]]
[[応答]]を返さなければ[MUST[なりません]]。
[SRC[>>1 5.2.]]


[6] [[ヘッダー値]]は、
[[秒]]単位の[[時間]]を[[非負整数]]で指定したものです。
受信者は、[[2進数]]で保持する場合、
最低31ビットの[[非負整数]]を扱える[[算術型]]を使う[SHOULD[べきです]]。
[SRC[>>1 5.2.]]

[7] 
受信者は、扱える値より大きな値が指定されたときや、
以後の計算で[[桁溢れ]]するなら、
2[SUP[31]]
とみなさなければ[MUST[なりません]]。
[SRC[>>1 5.2.]]

[9] 
[[プッシュサービス]]は、
[[プッシュメッセージ]]の保持期間を指定よりも短くしても[MAY[構いません]]。
[SRC[>>1 5.2.]]


* メモ