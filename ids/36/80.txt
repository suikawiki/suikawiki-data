[SEE[ 一般的事項は[[祝日]]、[[ロケールの更新]] ]]

[227] [[プログラミング言語]]の標準ライブラリーや [[OS]] の [[API]]
などの形で[[休日]]のデータが提供されることは、残念ながらほとんどありません。
各[[プログラム]]で独自に実装する必要があります。

[217] その実装方法は、 ([[日曜日]]を除く) すべての[[休日]]の一覧表を保持する方法と、
[[祝日]]の条件のみを保持し、計算により[[休日]]を求める方法に大きく分けられます。

-*-*-

[218] 日本の休日・祝日の場合、法改正による歴史的な変遷が複雑であること、
現在の計算機の性能を考えると祝日の日数は十分少ないことから、
すべての[[休日]]の一覧表を保持する方法が良さそうに思われます。

[219] 今後も法改正により新たな祝日の追加や変更が予想されること、
[[ハッピーマンデー]]や[[振替休日]]のような休日の決定規則が何度も改められた前例があることから、
休日の変更に対応できる実装方法とする必要がありますし、
休日の計算方法を記述したプログラムをその度に更新するよりは、
休日の一覧表を更新するだけで済む方が手間が少ないとも思われます。
(実際複雑な規則の[[プログラム]]化の誤りで誤判定する実装例が見られます。)

[220] 日本の祝日一覧データファイルは、[[日本の祝日]]にあります。

[223] 現在[[日本]]である地域の過去も含めた[[休日]]を扱いたい時は、
日本本土の祝日データの他に、[[琉球の祝祭日]]のデータが必要です。


[226] 将来の[[休日]]は、法改正により変化する可能性がありますから、
確実ではありません。通常はその時点での最新の法に基づき将来に延長して考えますが、
そのまま実施されるとは限りません。

[236] [[休日]]・[[祝日]]データは、それなりの頻度で、最低でも1年に1度は更新する必要があります。
臨時の[[休日]]の実施の可能性を考えると、本当はそれよりも高頻度で更新できるべきです。
[[プログラム]]の配布方法 ([[OS]] や[[プログラミング言語]]の[[パッケージマネージャー]]や、
[[パッケージ]]管理コミュニティーの運営方針) 次第では、適切な頻度でのデータ更新ができないかもしれません。
その場合には別の更新方法を検討する必要があります。

[EG[
[237] [[プログラム]]に[[休日]]データが直接埋め込まれていると、
更新時に再[[コンパイル]]が必要となって不便かもしれません。
]EG]

[EG[
[281] [[OS]] が「[[安定版]]」の[[パッケージ]]を滅多に更新しない方針でパッケージ管理していると、
その[[パッケージ]]に[[休日]]データを含めるのは不適切かもしれません。
]EG]

* 注意

[72] 既存の[[休日]]データファイルを利用する際は、次の点に注意が必要です。

- [73] 継続的にメンテナンスされているかどうか。
更新データが安定した方法で入手できるかどうか。
- [74] 内容が正確かどうか。目的にあったものかどうか。
-- [75] 例えば[[日本の祝日]]とされていながら、
[[クリスマス]]などが含まれていた事例もありました。
-- [76] [[祝日]]に加えて[[銀行休業日]]や[[正月休暇]]が含まれていることがあります。
-- [80] 古い時代の[[改暦]]前の[[休日]]が適切に扱われていないことがあります。
- [77] データファイルから除外されているものがないかどうか。
-- [78] 例えば[[日曜日]]をすべて含めると膨大になるので、
[[祝日]]以外の[[日曜日]]は省略されていることがあります。
- [79] カバーしている期間が適切かどうか。

[81] 定義に基づき独自に計算する際は、次の点に注意が必要です。

- [82] [[祝日]]と[[日曜日]]が重なる場合など、
決定規則の優先順位を正しく扱うこと。
- [83] [[第[VAR[何]][VAR[何]]曜日]]のような規則を正しく扱うこと。
[[第[VAR[何]]週]][VAR[何]]曜日など紛らわしいものと混同する事例がありました。
- [86] 規則の決定・公表・[[公布]]と[[施行]]とを混同しないこと。
- [84] 規則の変更に追随しやすい実装方法とすること。
-- [85] 変更に伴い過去の判定まで誤って変更してしまわないようチェックすること。

* トラブル

[SEE[ [[令和元年の平成の天皇誕生日]] ]]

* メモ