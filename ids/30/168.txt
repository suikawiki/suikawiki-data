[3] [DFN[[RUBYB[サービスワーカー登録]@en[service worker registration]]]]

* 仕様書

[REFS[
- [1] [CITE@en[Service Workers Nightly]] ([TIME[2017-02-16 20:10:49 +09:00]]) <https://w3c.github.io/ServiceWorker/#dfn-containing-service-worker-registration>
- [2] '''[CITE@en[Service Workers Nightly]] ([TIME[2017-02-16 20:10:49 +09:00]]) <https://w3c.github.io/ServiceWorker/#service-worker-registration-concept>'''
]REFS]

* 状態

[8] [[サービスワーカー登録]]は、次の状態を持ちます。

[FIG(list members)[
: [F[適用範囲URL]] :
: [F[インストール中ワーカー]] :
: [F[待機中ワーカー]] :
: [F[活性ワーカー]] :
: [DFN[[F[last update check time]]]] :
初期値は [CODE[null]] [SRC[>>2]]。
: [DFN[[F[use cache]]]] :
[[ブール型]]。初期値は[[偽]]。 [SRC[>>2]]
: [DFN[[F[uninstalling flag]]]] :
初期値は[[未設定]]。 [SRC[>>2]]
: [F[タスクキュー群]] :
: [F[[CODE(DOMi)@en[NavigationPreloadManager]]]] :
: [F[navigation preload enabled flag]] :
: [F[navigation preload header value]] :
]FIG]

* 処理

[9] [[利用者エージェント]]は、
登録されてまだ登録解除されていない[[サービスワーカー登録]]のリストを保持しなければ[MUST[なりません]]。
[[利用者エージェント]]の [DFN[[F[scope to registration map]]]] は、
[[サービスワーカー登録]]の[F[適用範囲URL]]から[[サービスワーカー登録]]への[[写像]]です。
[SRC[>>2]]

;; [10] [[サービスワーカー登録]]の[[寿命]]は、 [CODE(DOMi)@en[ServiceWorkerRegistration]]
[[オブジェクト]]の[[寿命]]より長いです。 [SRC[>>2]]

[5] [F[適用範囲URL]]が同じ[[サービスワーカー登録]]が既にあれば、新しいもので置き換えられます。
[SRC[>>2]]

[4] [[利用者エージェント]]は、[F[適用範囲URL]]が異なる限り、
同じ[[起源]]の複数の[[サービスワーカー登録]]を有効化して構いません。
[SRC[>>2]]

* 文脈

[6] [[サービスワーカー]]は、[DFN[[F[containing service worker registration]]]]
を持ちます。値は[[サービスワーカー登録]]です。 [SRC[>>1]]

[7] [[サービスワーカー]]の[F[containing service worker registration]]は、
その[[サービスワーカー]]を含むものです。 [SRC[>>1]]
