* 公式情報

[6] 
[CITE@en[49.2.4 Local Variables in Files | Emacs Docs]], [TIME[2025-10-22T05:50:03.000Z]], [TIME[2025-11-03T14:55:39.803Z]] <https://emacsdocs.org/docs/emacs/File-Variables>

* 局所変数

[2] [[Emacs]] には [DFN[local variable]] なる機構があります。
[SRC[>>6]]

[4] [[local variable]] は[[ファイル]]ごとに [DFN[file local variable]]
([DFN[file variable]])
として記述できます。
[SRC[>>6]]
[[file local variable]] は
[CODE[-*-]] 行や [[local variables list]]
によって設定できます。

[5] [[local variable]] は[[ディレクトリー]]ごとに [[directory variable]]
として記述できます。
[SRC[>>6]]
[[directory variable]] は[[ディレクトリー]]内に特定の[[ファイル名]]の[[ファイル]]を配置することによって設定できます。
[SEE[ [[directory variable]] ]]

* [CODE[-*-]] 行

[7] [DFN[[CODE[-*-]]]] [[行]]は、 [CODE[-*-]] ではじまり [CODE[-*-]]
で終わる記述を含めたものです。
[SRC[>>6]]

[8] 
[CODE[-*-]] の前や [CODE[-*-]] の後は無視されるようです。

;; [15] 従って[[プログラミング言語]]等の[[注釈]]として配置できます。

[9] 
[CODE[-*-]] が3つ[[以上]]含まれる場合の挙動はドキュメント上明らかではありません。

[10] 
[CODE[-*-]] の間は、 [CODE[;]] 区切りのリストと解釈されます。  [SRC[>>6]]

[12] 
末尾が [CODE[;]] でも構わないようです。 [SRC[>>6]]
あるいは空の項目があっても構わないのかもしれません。

[11] 
[CODE[;]] で区切られた各リスト項目は、名前と値を [CODE[:]]
で区切ったものです。 [SRC[>>6]]

[13] 
ドキュメント上は [CODE[:]] の後に1つ [CODE[ ]] ([[空白]]) が置かれています。
[CODE[;]] の後にも1つ [CODE[ ]] が置かれています。
先頭にも1つ [CODE[ ]] が置かれています。
[SRC[>>6]] どこまでが要件なのか明らかではありませんが、
名前と値と [CODE[:]] と [CODE[;]] の前後の[[空白]]の個数は任意であるようにも思われます。

[14] 
リスト項目に [CODE[:]] が2つ以上含まれる場合の挙動はドキュメント上明らかではありません。
最初のものが区切りで、それ以後は値の一部になるのでしょうか、
それともエラーとして無視されるのでしょうか。

[17] 
[CODE[-*-]] [[行]]は、原則としてファイルの最初の[[行]]とします。
[SRC[>>6]]

[18] 
[[改行]]がないファイルの挙動はドキュメント上明らかではありません。

[19] 
[[shebang]] がある場合、第2行とできます。 [SRC[>>6]]

[20] 
[[man page]] の [CODE['\"]] [[行]]がある場合、第2行とできます。 [SRC[>>6]]

[16] この構文はかなり古く、 [CITE[Emacs]] の歴史の始まりの頃からあるらしいです。

* メモ

[1] [CITE@en[PEP 263 -- Defining Python Source Code Encodings | Python.org]]
([TIME[2017-02-22 15:06:02 +09:00]])
<https://www.python.org/dev/peps/pep-0263/>

[3] 関連: [[sniffing]]