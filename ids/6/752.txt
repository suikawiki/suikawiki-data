[13] [DFN[[CODE(DOMi)@en[[[EventSource]]]]]] は、[[遠隔DOM事象]]を受信するための[[物体]]が実装する
[[DOM]] [[界面]]です。

* 仕様書

[REFS[
- [48] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2014-12-04 10:25:09 +09:00]] 版) <https://html.spec.whatwg.org/#server-sent-events>
]REFS]

* 歴史

** [CODE(HTMLe)@en[event-source]] 要素の登場

[14] はじめ、 [CODE(HTMLe)@en[[[event-source]]]] [[要素]]として [[Ian Hickson]]
により提案されていました。この提案は後に [[Web Applications 1.0]] 仕様書
([[HTML5]]) に組み入れられました。

;; [23] [CITE@en-GB-x-Hixie[Hixie's Natural Log: Server-sent DOM events]] ([TIME[2004-04-28 15:45]] 版) <http://ln.hixie.ch/?start=1083167110&count=1>

;; [22] 
[CITE@en-GB-hixie[Server Sent Events 1.0]] ([TIME[2006-07-31 15:51:28 +09:00]] 版) <http://hixie.ch/specs/html/server-sent-events/server-sent-events-1>

>Working Draft 8 June 2004

[DEL[
[1]
[CITE[Web Applications 1.0]] <http://www.whatwg.org/specs/web-apps/current-work/#scs-server-sent>
]DEL]

[27] 2008年2月に大改訂がありましたが、その前の仕様は >>28 のような感じでした。

[28] [CITE@en-GB-hixie[HTML 5]] ([TIME[2007-10-29 06:22:51 +09:00]] 版) <http://www.whatwg.org/specs/web-apps/2007-10-26/#server-sent-events>

[21] [[Opera]] 9 以降で実装されています。 [[ニンテンドーDSiブラウザー]]でも使えます。

[2]
[CITE[Opera Web Chat]] <http://oxzone.opera.com/webchat/>
([[名無しさん]])

[3]
[CITE[Event Streaming to Web Browsers - Web Applications Blog - by Web Applications]] <http://my.opera.com/WebApplications/blog/show.dml/438711>

[19] [CITE@en[Event Streaming to Web Browsers]]
([[Opera Software ASA]] 著, [TIME[2011-02-03 10:59:19 +09:00]] 版)
<http://labs.opera.com/news/2006/09/01/>

[4]
[CITE[EarthQuakes Map Widget - Opera Widgets]] <http://widgets.opera.com/widget/5178>
([[名無しさん]] [WEAK[2006-09-09 03:28:34 +00:00]])

[5]
[CITE[Bug 338583 &#8211; Add support for Server-Sent DOM Events (Remote Events)]] ([CODE[2007-08-17 13:54:47 +09:00]] 版) <https://bugzilla.mozilla.org/show_bug.cgi?id=338583>

** [CODE(MIME)@en[application/x-dom-event-stream]] から [CODE(MIME)@en[text/event-stream]] へ

[6]
[[Hixie]] が Status を [Q@en[Being considered for removal]] に設定しているみたいです。
([[名無しさん]] [WEAK[2007-12-09 05:50:04 +00:00]])

[7]
>>6 大改訂があった結果、[CODE(HTMLe)@en[[[event-source]]]]
は [Q@en[Last call for comments]]、
[[鯖送信DOM事象]]の章は [Q@en[Working draft]]
になっています。
([[名無しさん]] [WEAK[2008-02-23 10:28:51 +00:00]])

[8]
>>7 さっきの [[Ian Hickson]] の [['''#'''whatwg]] での発言によると、
削ろうと思ったけど残すべきという意見があって、
それがもっともだと思ったから削るのはやめたと。
([[名無しさん]] [WEAK[2008-02-23 10:41:26 +00:00]])

[9] 
[CITE[Re: several messages about <event-source> and related	subjects]] ([[Ian Hickson <ian@...>]] 著, [TIME[2008-02-22 10:16:51 +09:00]] 版) <http://permalink.gmane.org/gmane.org.w3c.whatwg.discuss/13321>

[24] [CITE@en[HTML5 Tracker]] ([TIME[2008-02-22 09:43Z]] 版) <http://html5.org/tools/web-apps-tracker?from=1236&to=1238>

[25] >>24 では大規模な変更があり、 [[MIME型]]も [CODE(MIME)@en[[[application/x-dom-event-stream]]]]
から [CODE(MIME)@en[[[text/event-stream]]]] に変更されました。

** [CODE(HTMLe)@en[event-source]] から [CODE(HTMLe)@en[eventsource]] へ

[10] [[HTML5]] で定義されていた [CODE(HTMLe)@en[[[event-source]]]] [[要素]]は、
[CODE(HTMLe)@en[[[eventsource]]]] に改名されました。

;; [26] [CITE@en[Web Applications 1.0 r1863  Rename <event-source> to <eventsource> for consistency, while we sill can]] ([TIME[2008-07-11 18:40:00 +09:00]] 版) <http://html5.org/tools/web-apps-tracker?from=1862&to=1863>

** [CODE(HTMLe)@en[eventsource]] 要素から [CODE(DOMi)@en[EventSource]] 界面へ

[11] 以前から [CODE(HTMLe)@en[[[eventsource]]]] [[要素]]は[[要素]]である意味があるのか疑問視する意見がありましたが、
2009年2月に[[要素]]としては削除され、 [CODE(DOMi)@en[[[EventSource]]]] [[DOM]] [[界面]]となりました。

[12] [CITE[IRC logs: freenode / #whatwg / 20090226]] ([TIME[2009-03-09 18:58:46 +09:00]] 版) <http://krijnhoetmer.nl/irc-logs/whatwg/20090226#l-250>

>17:40 (hsivonen) Hixie: so what's the remaining selling point over Web Sockets? that you can feed EventSource from a regular HTTP server?
>17:40 (Hixie) the only selling point over websocket that it's ever had is that it is compatible with CGI scripts

[15] [CITE@en-US-x-Hixie[Server-Sent Events]] ([TIME[2009-03-27 10:09:23 +09:00]] 版) <http://dev.w3.org/cvsweb/~checkout~/html5/eventsource/Overview.html?content-type=text/html;%20charset=utf-8>

[16] [CITE@en-US-x-Hixie[Server-Sent Events]] ([TIME[2009-04-23 13:50:52 +09:00]] 版) <http://www.w3.org/TR/2009/WD-eventsource-20090423/>

[17] [CITE@en[(X)HTML5 Tracking]]
([TIME[2009-09-06 10:20:51 +09:00]] 版)
<http://html5.org/tools/web-apps-tracker?from=2869&to=2870>

[18] [CITE[IRC logs: freenode / #whatwg / 20100427]]
([TIME[2010-05-16 19:00:37 +09:00]] 版)
<http://krijnhoetmer.nl/irc-logs/whatwg/20100427#l-174>

* テスト・ケース

[20] [CITE[Index of /~wakaba/-temp/test/dom/eventsource]]
([TIME[2011-02-03 11:02:37 +09:00]] 版)
<http://suika.fam.cx/~wakaba/-temp/test/dom/eventsource/>

* メモ

[29] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2011-02-09 06:05:52 +09:00]] 版))
<http://www.w3.org/TR/2011/WD-eventsource-20110208/>

[30] [CITE[''''''[''''''whatwg'''''']'''''' EventSource - Handling a charset in the content-type header]]
( ([TIME[2011-06-18 08:37:41 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-June/032120.html>

[31] [CITE[''''''[''''''whatwg'''''']'''''' Enhancement request: change EventSource to allow cross-domain access]]
( ([TIME[2011-06-18 08:38:12 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-June/032152.html>

[32] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2011-10-19 02:35:51 +09:00]] 版))
<http://www.w3.org/TR/2011/WD-eventsource-20111020/>

[33] [CITE@ja[Opera Desktop Team - Web Sockets enter the Opera House]]
( ([TIME[2010-10-23 00:19:44 +09:00]] 版))
<http://my.opera.com/desktopteam/blog/2010/10/11/websockets>

[34] [CITE@en[Web Applications 1.0 r6848     Require implementations to ignore all MIME type parameters on text/event-stream resourcesAffected topics: Server-Sent Events]]
( ([TIME[2011-12-07 08:52:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=6847&to=6848>

[35] [CITE@en-US-x-Hixie[Server-Sent Events]]
([TIME[2009-10-29 03:44:26 +09:00]] 版)
<http://www.w3.org/TR/2009/WD-eventsource-20091029/>

[36] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2012-04-25 05:35:01 +09:00]] 版))
<http://www.w3.org/TR/2012/WD-eventsource-20120426/>

[37] [CITE[''''''[''''''ietf-types'''''']'''''' Registration for text/event-stream]]
( ([TIME[2012-08-07 11:52:20 +09:00]] 版))
<http://www.ietf.org/mail-archive/web/ietf-types/current/msg01713.html>

[38] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2012-10-22 21:35:04 +09:00]] 版))
<http://www.w3.org/TR/2012/WD-eventsource-20121023/>

[39] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2012-12-10 08:07:34 +09:00]] 版))
<http://www.w3.org/TR/2012/CR-eventsource-20121211/>

[40] [CITE@en-US-x-Hixie[Server-Sent Events]]
([TIME[2009-12-18 01:36:25 +09:00]] 版)
<http://www.w3.org/TR/2009/WD-eventsource-20091222/>

[41] [CITE@en-US-x-Hixie[Server-Sent Events]]
( ([TIME[2011-03-10 02:22:44 +09:00]] 版))
<http://www.w3.org/TR/2011/WD-eventsource-20110310/>


[42] [CITE[IRC logs: freenode / #whatwg / 20130917]]
( ([TIME[2013-09-20 00:01:06 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130917>

[43] [CITE@en[Web Applications 1.0 r3552 Include MIME type registration sections.]]
( ([TIME[2009-08-07 18:44:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=3551&to=3552>

[44] [CITE@en[Web Applications 1.0 r8475 Make the EventSource processing model a mite more generic to allow other user agent types to implement this spec.]]
( ([TIME[2014-02-08 09:31:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8474&to=8475>

[45] [CITE@en[MIX: Dropping exceptions for XHR and EventSource. · aac819b · w3c/webappsec]]
( ([TIME[2014-11-04 03:25:13 +09:00]] 版))
<https://github.com/w3c/webappsec/commit/aac819b28287e8fd3a9ebad2666336e2bc77a24b>

[46] [CITE@en[RE: ''''''[''''''eventsource'''''']'''''' Seeking status and plans]]
( ([[Zhang, Zhiqiang]] 著, [TIME[2014-10-15 18:10:48 +09:00]] 版))
<http://lists.w3.org/Archives/Public/public-test-infra/2014OctDec/0009.html>

[47] [CITE@en-US[Server-Sent Events]]
( ([TIME[2014-12-05 04:46:25 +09:00]] 版))
<http://www.w3.org/TR/2014/PR-eventsource-20141209/>

[49] [CITE@en[Streaming | Flowdock API]]
( ([TIME[2015-01-05 20:57:48 +09:00]] 版))
<https://www.flowdock.com/api/streaming>

[50] [CITE@en-US[Server-Sent Events]]
( ([TIME[2015-01-29 18:17:14 +09:00]] 版))
<http://www.w3.org/TR/2015/REC-eventsource-20150203/>

[FIG(quote)[
[FIGCAPTION[
[51] [CITE@en[Streaming | Flowdock API]]
([TIME[2015-03-29 18:05:37 +09:00]] 版)
<https://www.flowdock.com/api/streaming>
]FIGCAPTION]

> Event-Stream follows the HTML5 Server-Sent Events specification. Each event contains a JSON-encoded message.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[52] [CITE[REST API - Firebase]]
([TIME[2015-03-29 19:06:44 +09:00]] 版)
<https://www.firebase.com/docs/rest/api/#section-streaming>
]FIGCAPTION]

> Firebase REST endpoints support the EventSource / Server-Sent Events protocol as well.

]FIG]


[53] [CITE@en[1156137 – EventSource only works with HTTP channels]]
([TIME[2015-04-27 23:09:59 +09:00]] 版)
<https://bugzilla.mozilla.org/show_bug.cgi?id=1156137>

[54] [CITE[''''''[''''''whatwg'''''']'''''' Server-sent events feedback]]
( ([TIME[2011-02-05 09:56:18 +09:00]] 版))
<http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-February/030205.html>

[55] [CITE@en[25984 – EventSource should support RequestInfo]]
([TIME[2015-09-16 11:39:00 +09:00]] 版)
<https://www.w3.org/Bugs/Public/show_bug.cgi?id=25984>