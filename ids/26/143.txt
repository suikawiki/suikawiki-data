* 仕様書

[REFS[
- [1] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2016-02-16 01:30:20 +09:00]] 版) <https://html.spec.whatwg.org/#hostresolveimportedmodule(referencingmodule,-specifier)>
]REFS]

* Web ブラウザーの処理

[2] [[Web]] の[[利用者エージェント]]は、 [[JavaScript]]
の[[抽象操作]] [CODE[[DFN[[[HostResolveImportedModule]]]]([VAR[referencingModule]], [VAR[specifier]])]]
を次のように処理しなければ[['''なりません''']] [SRC[>>1]]。

[FIG(steps)[
= [3] [VAR[参照元モジュールスクリプト]]を、 [CODE[[VAR[referencingModule]].[F(ss)[HostDefined]]]]
に設定します。
= [5] [VAR[URL]] を、[VAR[参照元モジュールスクリプト]]と[VAR[指定子]]について[[モジュール指定子を解決]]した結果に設定します。
= [4] [VAR[参照元モジュールスクリプト]]の[F[設定群オブジェクト]]の[F[モジュール写像]] [ [VAR[URL]] ] の[F[モジュール記録]]を返します。
]FIG]

[13] つまり、与えられた[[モジュール指定子]]を解決して得られた [[URL]]
が、既に読み込み済みの[[モジュールスクリプト]]の [[URL]] であれば、
その[[モジュールスクリプト]]が使われます。

* 歴史

[14] [CITE@en[Handle error cases during module script tree fetching/running better]]
([[domenic]]著, [TIME[2016-08-09 12:06:32 +09:00]])
<https://github.com/whatwg/html/commit/e1af86747f591e33fd0f3f21f301dc866868c9d4>

[17] [CITE@en[Fix bad assert in HostResolveImportedModule]]
([[domenic]]著, [TIME[2017-04-29 05:16:21 +09:00]])
<https://github.com/whatwg/html/commit/e7041402890076aaf7095a3f8931ba0a00393b72>

[18] [CITE@en[Fix error cases of <script type=module>]]
([[domenic]]著, [TIME[2017-05-13 01:50:49 +09:00]])
<https://github.com/whatwg/html/commit/115763124a641e8814665c5014d28155f95ff441>

[19] [CITE@en[Don't handle impossible errors in HostResolveImportedModule]]
([[domenic]]著, [TIME[2017-05-13 01:59:57 +09:00]])
<https://github.com/whatwg/html/commit/616df18cd9e6c17878db5167909c69ca9f9d2906>

[7] [CITE@en[Improve module instantiation/evaluation, especially around errors]]
([[domenic]]著, [TIME[2017-08-04 05:13:45 +09:00]])
<https://github.com/whatwg/html/commit/2b408b65a11fe76b6588b744e0ae74d30ff29b43>