[1] To [DFN[process a feed resoonse]] [VAR[res]], run these steps:
[FIG(steps)[
= [9] If [VAR[res]] is a [[network error]] or
[VAR[res]]'s [F[status][status code]] is not [CODE(HTTP)[200]],
return [[null]] and abort these steps.
= [2] Let [VAR[type]] be [VAR[res]]'s [F[computed MIME type]].
= [3] If [VAR[type]] is an [[XML MIME type]]:
== [7] Let [VAR[doc]] be a [CODE(DOMi)@en[Document]].
== [6] Let [VAR[parser]] be an [[XML parser]] associated with [VAR[doc]].
The [[XML parser]] [MUST[MUST]] implement [[XML5]].
It [MUST[MUST NOT]] [[fetch]] and process [[external entities][external entity]].
== [8] Parse [VAR[res]]'s [F[body]] using [VAR[parser]].
The [CODE(MIME)@en[charset]] parameter value in the 
[CODE(HTTP)@en[Content-Type]] [[header value]] of [VAR[res]], if any, is used as
the [[encoding label]] provided by the underlying transport.
== [11] Set [VAR[doc]]'s [F[address][document's address]] to
[VAR[res]]'s [F[url][response's URL]].
== [27] Set [VAR[doc]]'s [F[character encoding][document's character encoding]]
to the [[character encoding]] used by [VAR[parser]].
== [5] Return the result of [[processing a feed document][process a feed document]] [VAR[doc]].
= [4] Otherwise, return [[null]].
]FIG]

[15] A [DFN[feed]] has
[DFN[entries][feed's entries]], which is a list of [[entries][entry]], and
[DFN[authors][feed's authors]], which is a list of [[persons][person]].
They are initially empty.

[10] To [DFN[process a feed document]] [VAR[doc]], run these steps:
[FIG(steps)[
= [12] Let [VAR[root]] be [VAR[doc]]'s [F[root element]].
= [17] Switch by [VAR[root]]:
[FIG(switch)[
: [16] If it is a [CODE(XMLe)@en[feed]] element in the [[Atom namespace]] :
Return the result of [[processing an Atom feed element][process a Atom feed element]] [VAR[root]].
: [23] If it is a [CODE(XMLe)@en[feed]] element in the [[Atom 0.3 namespace]] :
Return the result of [[processing an Atom 0.3 feed element][process a Atom 0.3 feed element]] [VAR[root]].
: [19] If it is an [CODE(XMLe)@en[rss]] element in the [[null namespace]] :
@@
: [18] If it is an [CODE(XMLe)@en[RDF]] element in the [[RDF namespace]] :
@@
: [13] Otherwise : Return [[null]].
]FIG]
]FIG]

[20] To [DFN[process an Atom feed element]] [VAR[element]], run these steps:
[FIG(steps)[
= [14] Let [VAR[feed]] be a [[feed]].
= [21] For each [[element]] [VAR[child]] in [VAR[element]]'s [F[children]], in order,
run these substeps:
== [22] Switch by [VAR[child]]'s [F[namespace name]] and [F[local name]]:
[FIG(switch)[
: [CODE(XMLe)@en[author]] element in the [[Atom namespace]] :
Append the result of [[processing an Atom person][process an Atom person]] [VAR[child]]
to [VAR[feed]]'s [F[authors][feed's author]].
: [CODE(XMLe)@en[category]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[icon]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[link]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[logo]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[rights]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[subtitle]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[title]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[updated]] element in the [[Atom namespace]] :
@@
: [CODE(XMLe)@en[entry]] element in the [[Atom namespace]] :
@@
]FIG]
= [25] Return [VAR[feed]].
]FIG]

@@
[24] To [DFN[process an Atom person]] [VAR[element]], run these steps:

@@
[26] To [DFN[process an Atom 0.3 feed element]] [VAR[element]], run these steps:
