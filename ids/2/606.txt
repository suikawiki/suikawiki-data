

* [CODE(HTML)@en[add]] ボタン型 (HTML)

[1]  
[[HTML]] の [DFN[[CODE(HTML)@en[add]]]] [[ボタン型]]は、
新しい[[反復ブロック]]を追加します。
[SRC@en[WF2 3.3]]

[2] 仕様書:
- [[Web Forms 2.0]]
-- [CSECTION@en[3.3. New form controls]]
<IW:WF2:"#new-form">
-- [CSECTION@en[3.6.1. Addition]]
<IW:WF2:"#addition">
-- <http://www.whatwg.org/specs/web-forms/current-work/#addition>

** フォーム

[3] '''成功'''

この[[フォーム制御子]]は、決して[[成功]]しません。
[SRC@en[WF2 3.3]]

[8] '''無効化'''

[[利用者エージェント]]は、次の場合、
[CODE(DOMa)@en[[[disabled]]]] [[DOM属性]]に関わらず、
[CODE(HTML)@en[[[add]]]] [[ボタン]]を自動的に無効化[['''しなければなりません''']]。
([CODE(DOMa)@en[[[disabled]]]] [[DOM属性]]には影響しません。)
[SRC@en[WF2 3.6.1]]

- [9] [[ボタン]]が次のような[[反復ブロック]]中にないとき
-- [10] [[反復雛形]]に関連付けられていて、かつ
-- [11] その [CODE(HTMLa)@en[[[template]]]] [[属性]]が
--- 与えられていないか、または
--- [[反復雛形]]を指す[[識別子]]が[[属性値]]ではない
- [12] [[反復雛形]]の [CODE(HTMLa)@en[[[repeat-max]]]]
[[属性]]が、[[反復雛形]]の[[兄弟]]の[[反復ブロック]]の数と同じか小さいとき

** レンダリング

[4] '''見出し'''

[CODE(HTMLe)@en[[[input]]]] [[要素]]で使われる場合、
[CODE(HTMLa)@en[[[value]]]] [[属性]]が与えられていれば、
([[スタイル・シート]]で上書きされていない限り)
その値を[[ボタン]]の[RUBYB[[[見出し]]] @en[[[caption]]]]と[['''しなければなりません''']]。
[CODE(HTMLa)@en[[[value]]]] [[属性]]が与えられていなければ、
[[ロケール]]依存の[[既定]]の[[名札]]を使用[['''するべきです''']]。
[SRC@en[WF2 3.3]]

[5] '''環境との整合性'''

[[利用者エージェント]]は、
>>4 の代わりに、使用している[[環境]]における同等の機能と整合するように[[ボタン]]を[[レンダリング]][['''して構いません''']]。
ですから、[[著者]]は、[[反復ブロック]]を[[入れ子]]にする場合、
[[ボタン]]がどの[[反復ブロック]]に適用されるのかが明確になるように注意して配置[['''するべきです''']]。
[SRC@en[WF2 3.3]]

[[#comment]]


** 事象

[6] '''呼び出し'''

[[ボタン]]を[[呼び出し]]すると、
[CODE(DOMe)@en[[[click]]]] などの[[事象]]が通常通り生成されます。
[SRC@en[WF2 3.3]]

[7] '''既定動作'''

>>6 の[[既定動作]]は次の通りです。
[SRC@en[WF2 3.6.1]]

- [CODE(HTMLa)@en[[[template]]]] [[属性]]が与えられた
[CODE(HTML)@en[[[add]]]] [[ボタン]]が[[活性化]]された場合
-- [CODE(HTMLa)@en[[[template]]]] [[属性値]]が[[反復雛形]]の[[識別子]]である場合
--- 指定された[[反復雛形]]の [CODE(DOMm)@en[[[addRepetitionBlock]] ()]]
[[メソッド]]を[[引数]]なしで呼び出します。
--- なお、同じ[[識別子]]が[[文書]]中で使われている場合は、
[CODE(DOMm)@en[[[getElementById]]]] 同様に動作[['''するべきです''']]。
- [CODE(HTMLa)@en[[[template]]]] [[属性]]のない
[CODE(HTML)@en[[[add]]]] [[ボタン]]が[[活性化]]された場合
-- [[祖先]]に[[孤児反復ブロック]]では''ない''[[反復ブロック]]がある場合
--- その[[反復雛形]]の [CODE(DOMm)@en[[[addRepetitionBlock]] ()]]
[[メソッド]]を[[引数]]なしで呼び出します。

* [CODE(DOMm)@en[add]] メソッド ([CODE(DOMi)@en[HTMLSelectElement]], [CODE(DOMi)@en[HTMLOptionsCollection]])

[14] [[Firefox]]3 と [[HTML5]] は1引数の [CODE(DOMm)@en[[[add]]]]
を認めていません。 [[Opera]]、[[WinIE7]]、[[WebKit]]
は1引数の [CODE(DOMm)@en[[[add]]]] に対応しています。
