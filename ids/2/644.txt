* URL の利用者への提示

[117] [[Webブラウザー]]の[[アドレスバー]]における [[URL]]
の表示は、[[利用者]]が[[Webサイト]]の提供元を確認するための重要な情報と考えられています。

[116] [[Webブラウザー]]や任意の[[起源]]を表示できる[[埋め込みブラウザー]]などでは、
[[URL]] を表示できないとしたら[[セキュリティー]]上の致命的な不具合であると考えられています。

[113] 
>
:[[Martin]]:URI は元々人間が見るものじゃなかったんすよ。
<mid:6.0.0.20.2.20051107184759.06dd4750@localhost>
:[[RoyF]]:んな阿呆な。
<mid:2f1b97034b715561e35a2b370ec13d19@gbiv.com>
:[[Martin]]:いやね、 [[TimBL]] の旦那がそう言っとりましたよ。
1990年とかそこらの話だと思いやすけど。
<mid:6.0.0.20.2.20051108185959.06a21ec0@localhost>

([[名無しさん]] [WEAK[2005-11-10 08:39:02 +00:00]])

[114] 確かにそんなこと Tim が言ってたのを [[www-talk]] かどこかで見た記憶がある。

[115] [CITE[スラッシュドット ジャパン | ユーザーの意識からURLが消滅する日は近い?]] <http://slashdot.jp/article.pl?sid=06/10/17/1950226&from=rss>
([[名無しさん]] [WEAK[2006-10-20 00:27:03 +00:00]])

* service identity

@@


[9] [[service identity]], [[EV]] も参照。

* 利用者による [[navigate]] の指示

[11] 普通、[[アドレスバー]]は[[利用者]]が編集可能で、[[利用者]]が入力して指示すると、
その入力に従い [[navigate]] が開始されます。

[12] 現在の多くの [[Webブラウザー]]は、 [KBD[Enter]] を指示の手段として採用しています。
[[Webブラウザー]]によっては、別途移動を指示するボタンが用意されています。

[13] 多くの [[Webブラウザー]]は、入力と同時に[[自動補完]]候補が表示され、
そちらの選択によっても [[navigate]] が開始されます。

[14] 多くの [[Webブラウザー]]は、実装依存の方法により、入力を
[FIG(list)[
- [[素片識別子付き絶対URL]]
- [[素片識別子付き絶対URL]]から [[URL scheme]] や [CODE[://]] を除去したもの
- 何らかの[[検索エンジン]]に与えるべき検索語
- [[プラットフォーム]]依存の[[ファイル名]]
]FIG]
... のいずれかと判断します。判断のために[[名前解決]]が成功するか調べたり、
[[履歴]]を探したりするものもあります。

[15] これまでの [[Webブラウザー]]は、 [[URL scheme]] が省略された時、
[CODE[http:]] [[URL]] と仮定していました。 (あるいは[[ドメイン名]]が [CODE[ftp.]]
から始まると [CODE(URI)@en[ftp:]]、といったような推測を行っていました。)
[[HTTPS]] 化が進む現状を鑑みると、これからはまず [CODE(URI)@en[https:]] 
への接続を試み、失敗した場合に [CODE(URI)@en[http:]] を試すのが良さそうです。

[16] [[利用者]]を騙して悪意ある [[JavaScript]] コードを実行させる指示に[[利用者]]が従った場合に備えて、
[CODE(URI)@en[javascript:]] など特定の [[URL]] の入力や[[コピペ]]を制限する
[[Webブラウザー]]もあります。

[17] [[アドレスバー]]からの [[navigate]] は、[[ハイパーリンクをたどる]]場合などとは異なり、
[[閲覧文脈]]で現在表示中の[[Webページ]]とは独立に実行されるものですから、
[CODE(HTTP)@en[Referer:]] などは送信されません。しかし現在表示中の [[Webページ]]で
[CODE(DOMe)@en[beforeunload]] が実行されるなど、通常の [[navigate]]
発生時の処理は行われますから、まったく無関係というわけでもありません。

[19] 特に、新しい [[URL]] が[[素片識別子]]を除いて現在の[[閲覧文脈]]の[F[活性文書]]の[F[URL][文書の番地]]と同じ場合には、
[[素片識別子へのnavigate]]となります。 ([[Webブラウザー]]によっては、
そうではなく完全に新しい [[navigate]] となることもありますが。)

;; 詳細は [[navigate]] を参照。

[18] 新しい [[URL]] が現在の[[閲覧文脈]]の[F[活性文書]]の[F[URL][文書の番地]]とまったく同じ場合には、
[[Webブラウザー]]により、普通の [[navigate]] となることもあれば、
[[再読込]]相当の処理となることもあります。

* navigate による更新

[20] 普通、 [[navigate]] で[[アドレスバー]]は最新の [[URL]] へと更新されます。

[21] ただし、[[利用者]]が[[アドレスバー]]を編集中の場合、
[[利用者]]の編集を破棄して新しい [[URL]] に変えてしまうと、
[[利用者]]は困るかもしれません。

;; [25] 特に [CODE(HTTP)@en[Refresh]] や [CODE(JS)@en[location.href]]
で[[著者]]が勝手に [[navigate]] すると大変です。

[22] とはいえ、[[利用者]]が編集した後取り止めて放置してから、
何度 [[navigate]] しても表示が変わらないのでは、これもかえって[[利用者]]を困惑させるかもしれません。

[23] 各[[Webブラウザー]]はそれぞれ、[[利用者]]が変更した内容にまだ興味を持っているかを適当な基準で推定したり、
編集が入ったら表示を少し変更したりと、工夫しているようです。
それでも[[利用者]]が困惑することはたまにあります。

[24] 新しい [[URL]] に書き換わった場合でも、 [KBD[Ctrl]] + [KBD[Z]] などの[[元に戻す]]操作で、
編集中だった元の状態に戻せることがあります。

* 歴史

[4]
>[DFN[Location Bar]] is a [[widget]] in a [[Web user agent]]'s user interface which displays (and often allows input of) the textual location (entered as a [[URI]]) of the [[resource]] being requested (or displayed - after the response is received).

;; [CITE[Web Security Context: User Interface Guidelines]] ([TIME[2010-08-04 20:09:50 +09:00]] 版) <http://www.w3.org/TR/2010/REC-wsc-ui-20100812/#def-locationbar>

[1]
[CITE[Hacking for Christ: Location Bar Proposal]] ([CODE[2007-02-17 12:04:48 +09:00]] 版) <http://weblogs.mozillazine.org/gerv/archives/2007/02/location_bar_proposal.html>
([[名無しさん]] [WEAK[2007-02-17 03:07:22 +00:00]])

[2]
[CITE@ja[Taken SPC : 翻訳: ロケーションバーの提案]] ([CODE[2007-02-17 12:05:20 +09:00]] 版) <http://taken.s101.xrea.com/blog/article.php?id=722>
([[名無しさん]] [WEAK[2007-02-17 03:13:16 +00:00]])

[3]
[CITE[IT戦記 - ロケーションバーに直入力するとブクマを見に行って補完してくれるコンポーネント作った]] ([TIME[2007-09-02 05:44:19 +09:00]] 版) <http://d.hatena.ne.jp/amachang/20070827/1188237639>



[FIG(quote)[
[FIGCAPTION[
[5] [CITE[Web Security Context: User Interface Guidelines]]
([TIME[2010-08-04 20:09:50 +09:00]] 版)
<http://www.w3.org/TR/wsc-ui/#IdentitySignal>
]FIGCAPTION]

> User agents MUST make information about the identity of the Web site that a user interacts with available. This '''['''Definition: identity signal ''']''' SHOULD be part of primary user interface during usage modes which entail the presence of signaling to the user beyond only presenting page content. Otherwise, it MUST be available through secondary user interface. 

]FIG]

[6] [[EV SSL]] も参照。

[FIG(quote)[
[FIGCAPTION[
[7] [CITE[cURL - How To Use]]
( ([TIME[2016-05-31 06:05:05 +09:00]]))
<https://curl.haxx.se/docs/manpage.html>
]FIGCAPTION]

> If you specify URL without protocol:// prefix, curl will attempt to guess what protocol you might want. It will then default to HTTP but try other protocols based on often-used host name prefixes. For example, for host names starting with "ftp." curl will assume you want to speak FTP.
> curl will do its best to use what you pass to it as a URL. It is not trying to validate it as a syntactically correct URL by any means but is instead very liberal with what it accepts.

]FIG]

[8] [[Chrome]] で[[アドレスバー]]を無編集のまま [KBD[Enter]] すると、
[[再読み込み]]とみなされるのか、 [CODE(HTTP)[[[Cache-Control:]] [[max-age]]=0]]
が付くようです。 [TIME[2016-07-13T07:08:39.400Z]]

[FIG(quote)[
[FIGCAPTION[
[10] [CITE@en[Chromium Blog: Moving Towards a More Secure Web]]
( ([TIME[2016-09-17 08:54:54 +09:00]]))
<http://blog.chromium.org/2016/09/moving-towards-more-secure-web.html>
]FIGCAPTION]

> Historically, Chrome has not explicitly labelled HTTP connections as non-secure. Beginning in January 2017 (Chrome 56), we’ll mark HTTP sites that transmit passwords or credit cards as non-secure, as part of a long-term plan to mark all HTTP sites as non-secure. 

]FIG]


[26] [CITE@en[Avoiding the Not Secure Warning in Chrome  |  Web  |  Google Developers]]
([TIME[2016-12-22 00:35:57 +09:00]])
<https://developers.google.com/web/updates/2016/10/avoid-not-secure-warn>