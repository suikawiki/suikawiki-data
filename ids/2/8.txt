[6] [[URL]] における [DFN[[CODE[[[port]]]]]] は、[[ポート番号]]を表します。

;; [15] [[ポート (TCP/IP)]] も参照。

* 文脈

[13] [CODE(ABNF)@en[[[port]]]] は、 [[URL]] の [[authority]] のうち、
[CODE(ABNF)@en[[[host]]]] の後の [CODE(URI)[[[:]]]] よりも後の部分です。

[14] ただし [CODE(URI)[[[:]]]] と [CODE(ABNF)@en[[[port]]]] は省略できます。

* 構文

[9] [[ポート]]は、零文字以上の[[ASCII数字]]です。

[FIG(railroad)[
= *
== [[ASCII数字]]
]FIG]

[10] [[空文字列]]もなぜか認められています。

[11] [[先導0]]も認められています。

[12] [[TCP]] や [[UDP]] で認められていない[[ポート番号]]も使えます。

* 既定のポート

[5] [[既定のポート]]

[3] [CITE[Bug 54090 – KURL should remove default port numbers when canonicalizing urls]]
( ([TIME[2011-02-20 17:42:24 +09:00]] 版))
<https://bugs.webkit.org/show_bug.cgi?id=54090>

* TCP/IP ポート番号以外を使う URL scheme

- [4] [CODE(URI)@en[[[git+ssh:]]]]

* 歴史

[2]
[CODE(URI)@en[[[http]]:]] [[URI]]で[[ポート番号]]を含められるようになったのは[[Line Mode Browser]]では1991年11月の0.12からのようです。

;; [CITE@en[Change History of Line Mode Browser]] 
<http://www.w3.org/LineMode/User/Features.html>

* 実装

[1]
[CODE(URI)[[[about:]]]] とか[[ポート]]のない [[URI]]
を開いている時に [CODE(JS)[[CODE(DOMa)[[[location]]]].[CODE(DOMa)[port]]]]
を見ると、 [CODE[''134946048'']] とか変な値になります。
[[DOM Inspector]] で見ると [SAMP[1]] になっています。
([[Firefox]] 1.0.4)

[7] [CITE@en[RFC 6943 - Issues in Identifier Comparison for Security Purposes]]
( ([TIME[2013-11-19 01:20:54 +09:00]] 版))
<http://tools.ietf.org/html/rfc6943#section-3.2>

[8] [CITE@en[RFC 6335 - Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry]]
([TIME[2015-03-15 10:21:32 +09:00]] 版)
<https://tools.ietf.org/html/rfc6335>

[FIG(quote)[
[FIGCAPTION[
[16] [CITE@en-US[I can't bind to a port – Help Center]]
([TIME[2014-11-05 00:59:51 +09:00]] 版)
<https://help.openshift.com/hc/en-us/articles/202185874-I-can-t-bind-to-a-port>
]FIGCAPTION]

> It is possible to bind to the internal IP with port range: 15000 - 35530. All other ports are reserved for specific processes to avoid conflicts. 

]FIG]

[17] >>16 0.0.0.0 や 127.0.0.1 では bind できなくて、 OPENSHIFT_DIY_IP など適当な[[環境変数]]を使う必要があるようです。

[18] [CITE@en[RFC 7605 - Recommendations on Using Assigned Transport Port Numbers]]
([TIME[2015-08-08 05:18:27 +09:00]] 版)
<https://tools.ietf.org/html/rfc7605>

[19] [CITE@en[Make port either null or a 16-bit integer. Fixes https://www.w3.org/B… · whatwg/url@c3a454c]]
([TIME[2015-08-15 11:49:19 +09:00]] 版)
<https://github.com/whatwg/url/commit/c3a454c073d6bf9f24d8ee2b5c3e6e006b943777>

[20] [CITE@en[Fix #76: a URL's port is a 16-bit _unsigned_ integer · whatwg/url@ce81868]]
([TIME[2016-01-15 18:59:56 +09:00]] 版)
<https://github.com/whatwg/url/commit/ce81868076997e749a4cc749b3fe3754068de7a8>