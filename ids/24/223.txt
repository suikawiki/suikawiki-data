[5] [[素片識別子]]付きの [[URL]] へ [[navigate]] すると、
[DFN[[RUBYB[素片識別子へのスクロール]@en[scroll to the fragment identifier]]]]が実行され、
その[[素片識別子]]により表される[[要素]]を [[viewport]] に表示した状態となります。

* 仕様書

[REFS[
- [1] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-04-25 04:40:19 +09:00]] 版) <https://html.spec.whatwg.org/#scroll-to-the-fragment-identifier>
]REFS]

* 処理

[2] [DFN[[RUBYB[素片識別子へのスクロール]@en[scroll to the fragment identifier]]]]は、
次のように行わなければ[['''なりません''']] [SRC[>>1]]。

[FIG(steps)[
= [7] [[文書の示された部分]]があってそれが[[レンダリング中]]である場合を除き、ここで停止します。
= 次の処理を実行するか:
== [VAR[対象]]を、[[文書の示された部分]]とします。
== [VAR[対象]]が[[文書]]の[RUBYB[先頭]@en[top]]であれば、
=== [[文書のはじめにスクロール]]します。
== それ以外なら、
=== [VAR[対象]]について [[scroll an element into view]] を実行します。 
ただし、 [VAR[align to top flag]] を設定します。
=== [VAR[対象]]について [[focusing steps]] を実行します。
ただし [VAR[fallback target]] は[[文書]]の [[viewport]] とします。
=== [[sequential focus navigation starting point]] を[VAR[対象]]へと移動します。
= またはその他何らかの方法で[[文書の示された部分]]へ[[利用者]]の注意を惹きつけます。
]FIG]

;; [3] その他何らかの方法とは具体的に何なのかは不明です。

;; [6] [VAR[対象]]は、 [[HTML文書]]では[[文書]]の先頭か、[[文書]]中のいずれかの[[要素]]です。
理論上は[[HTML文書]]以外ならそれ以外のもの ([[範囲]]や[[テキスト節点]]など)
を指すこともあり得ますが、現時点では実際上はそのようなことはありません。

* 文脈

[4] [[navigate]] や[[履歴の探索]]から呼び出されます。

* 歴史

[8] [CITE@en[Fix #559: require focus movement on scrolling to a fragment ID · whatwg/html@414bee7]] ([TIME[2016-02-25 11:39:23 +09:00]] 版) <https://github.com/whatwg/html/commit/414bee7380eef0aa4487c44e2008eef6dcfb9ee4>