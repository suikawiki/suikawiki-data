* 仕様書

[REFS[
- [1] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-04-25 04:40:19 +09:00]] 版) <https://html.spec.whatwg.org/#joint-session-history>
- [6] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-04-25 04:40:19 +09:00]] 版) <https://html.spec.whatwg.org/#dom-history-length>
]REFS]

* 定義

[3] [DFN[[RUBYB[[[結合セッション履歴]]]@en[joint session history]]]]は、
同じ[[最上位閲覧文脈]]を共有する[[完全に活性]]な [CODE(DOMi)@en[[[Document]]]]
オブジェクトすべての[[閲覧文脈]]の[[セッション履歴]]すべての[[論理和]]です [SRC[>>1]]。

[4] ただし各[[セッション履歴]]の[[現在エントリー]]は、
[[結合セッション履歴の現在エントリー]]以外、含めません [SRC[>>1]]。

[5] [[結合セッション履歴]]中の[[エントリー]]は、[[セッション履歴]]に追加されたのが古い順に[[整列]]されており、その[RUBYB[索引]@en[index]]は 0 から始まります [SRC[>>1]]。

* 文脈

[2] [[最上位閲覧文脈]]は、[[結合セッション履歴]]を持ちます [SRC[>>1]]。

* [CODE(JS)@en[history.length]] (DOM)

[7] [CODE(DOMi)@en[[[History]]]] [[オブジェクト]]の
[DFN[[CODE(DOMa)@en[[[length]]]]]] [[IDL属性]]は、
次のようにしなければ[['''なりません''']] [SRC[>>6]]。
[FIG(steps)[
= [8] [[文脈オブジェクト]]の関連付けられた[[文書]]が[[完全に活性]]でなければ、
[CODE(DOMe)@en[[[SecurityError]]]] [[例外]]を投げます。
= [9] そうでなければ、[[文脈オブジェクト]]の関連付けられた[[文書]]の[[閲覧文脈]]の[[最上位閲覧文脈]]の[[結合セッション履歴]]の[[エントリー]]の数を返します。
]FIG]

[10] この [[IDL属性]]の[[型]]は、 [CODE(IDL)@en[[[long]]]] です [SRC[>>6]]。

[11] [[Chrome]] では、 [CODE(JS)[[[window.open]] ("").history.length]] は 0 
になります。[[初期[CODE(URI)@en[about:blank]]文書]]の[[セッション履歴エントリー]]は数に入っていないようです。 [TIME[2015-07-19T02:14:51.800Z]]