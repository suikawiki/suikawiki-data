「F
[FIG(flow)[
:handshake:Handshake
:->:failed
:->:abort
:v:
:>>:1

:normal:送受信
:->:failed
:>>:2

:close method:[CODE(DOMm)@en[[[close]]]]
:->:start closing

:gc:[[ごみ収集]]
:->:start closing
:>>:2

:make disappear:[[make disappear]]
:->:failed
:->:abort
:>>:3

:disconnected:下位層の切断
:->:failed
:>>:4

:misc:その他閉じたい時
:->:start closing
:>>:5

:failed:接続失敗
:->:send Close 1
:v:
:>>:1

:abort:Abort
:->:close
:>>:3


:start closing:Closing Handshake
:->:send Close 1
:v:
:>>:2

:send Close 1:[CODE[[[Close]]]] 送信
:->:close

:Close received:[CODE[[[Close]]]] 受信
:->:send Close 2
:>>:1

:send Close 2:[CODE[[[Close]]]] 送信
:v:
:>>:2

:close:接続を閉じる
:v:
:>>:3

]FIG]