* 仕様書

[REFS[
- [6] [CITE@en[RFC 7239 - Forwarded HTTP Extension]] ([TIME[2014-09-07 05:21:07 +09:00]] 版) <https://tools.ietf.org/html/rfc7239#section-5.4>
]REFS]

* [CODE(HTTP)@en[Forwarded:]] ヘッダー [CODE(HTTP)@en[proto]] 引数

[7] [CODE(HTTP)@en[[[Forwarded:]]]] [[ヘッダー]]の
[DFN[[CODE(HTTP)@en[[[proto]]]]]] [[引数]]は、
用いられている[[プロトコル]]の種類を表します [SRC[>>6]]。

** 値

[8] 値の構文は、 [[URL scheme]] です [SRC[>>6]]。

[FIG(railroad)[
= [[URL scheme]]
]FIG]

[EG[
[9] 典型的な値は [CODE(URI)@en[[[http]]]] や [CODE(URI)@en[[[https]]]] です [SRC[>>6]]。
]EG]

;; [10] 正規形であることは要求されていませんから、[[大文字]]で指定されていても良いことになります。

* 実装

[3] [CODE(HTTP)@en[[[X-Forwarded-Proto:]]]] [SRC[>>1, >>2]]

[5] [CODE(HTTP)@en[[[X-Forwarded-Scheme:]]]] [SRC[>>1, >>4]]

[REFS[
- [1] [CITE['''['''#JETTY-628''']''' The scheme is not forwarded when the matching connector is configured with "forwarded=true". - jira.codehaus.org]]
([TIME[2011-08-16 17:57:36 +09:00]] 版)
<http://jira.codehaus.org/browse/JETTY-628>
- [2] [CITE[Amazon Web Services Blog: Keeping Customers Happy - Another New Elastic Load Balancer Feature]]
( ([TIME[2013-06-06 09:46:25 +09:00]] 版))
<http://aws.typepad.com/aws/2010/10/keeping-customers-happy-another-new-elastic-load-balancer-feature.html>
- [4] [CITE[Code Documentation — WSGIProxy v0.1 documentation]]
([TIME[2010-06-11 06:52:19 +09:00]] 版)
<http://pythonpaste.org/wsgiproxy/code.html>
]REFS]

[11] [CITE@en[Read X-Forwarded-Proto header if trustProxy flag set by stongo · Pull Request #1747 · hapijs/hapi]]
( ([TIME[2014-10-26 06:22:11 +09:00]] 版))
<https://github.com/hapijs/hapi/pull/1747/files>

[12] [CITE[Support X-Forwarded-Proto HTTP header ''''''[''''''#313145'''''']'''''' | Drupal.org]]
( ([TIME[2014-10-26 06:24:05 +09:00]] 版))
<https://www.drupal.org/node/313145>