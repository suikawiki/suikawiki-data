[16] [DFN[元号コード]]とは、[[計算機システム]]の処理などで、
[[元号]]に[[符号]]を割り振って識別するものです。
[[元号]]の名前自体がある種の[[符号]]とも言えますが、
[[元号コード]]はそれを更に扱いやすい値に置き換えたものです。

[38] いくつかの流儀がありますが、標準となっているものは無さそうです。

;; [23] [[元号]]自体については、[[元号]]を参照。

* 数値符号

[17] [[明治]]を [N[1]] とし、順に割り振っていくものが主流のようです。
[[平成]]は [N[4]] となります。

[FIG(table)[ [41] [[元号]]のよく使われる数値コード

:元号: [[元号]]
:符号: [[符号]]

:元号: [[明治]]
:符号: [N[1]]

:元号: [[大正]]
:符号: [N[2]]

:元号: [[昭和]]
:符号: [N[3]]

:元号: [[平成]]
:符号: [N[4]]

:元号: [[平成31年新元号]]
:符号: [N[5]]

]FIG]

[34] [[平成]]より後も、[[改元]]があるたびに自然な順序で追加されていくことが期待されます。

[25] 不明を [N[9]] で表す場合もあります
[SRC[>>13, >>14]]。

[30] [[西暦]]を [N[0]] で表す場合もあります [SRC[>>28]]。

[35] [[元号コード]]が[[十進数]]1桁となっている実装では、 [N[10]] 以降
([N[9]] に特別な意味を持たせる場合、 [N[9]] 以降) の[[改元]]があっても対応できません。
[[十六進数]]1桁となっている実装では、 [N[16]] 以降の[[改元]]に対応できません。
それらがいったい何年後に訪れるかはまったく予測できませんが、それまでに改修が必要となります。

[39] その頃には[[明治]]も遥か昔の[[元号]]となっているでしょうから、
[N[1]] から再利用することも可能かもしれませんが、混乱は避けられなそうです。
古い時代の記録が残っているとデータが滅茶苦茶になりますし、
[[元号コード]]による[[整列]]を[[数値]]としての大小で行っていると破綻します。

-*-*-

[18] 他の方式もあります (例えば >>10、>>11)。

* 英字符号

[19] [[明治]]を [CODE[M]] などと[[ローマ字]]化して[[頭文字]]を取るものです。[[平成]]は [CODE[H]]
となります。この方式は機械処理のみならず、[[人間]]による略記でもしばしば用いられます。

[FIG(table)[ [42] [[ローマ字]]先頭文字による[[元号コード]]

:元号: [[元号]]
:符号: [[符号]]

:元号: [[明治]]
:符号: [CODE[M][明治]]

:元号: [[大正]]
:符号: [CODE[T][大正]]

:元号: [[昭和]]
:符号: [CODE[S][昭和]]

:元号: [[平成]]
:符号: [CODE[H][平成]]

]FIG]

[36] 先頭1文字で自動的に決まるので、揺れは見られません。将来的に衝突が生じた場合や、
「ち」 (chi / ti)、「じ」「ぢ」 (ji / zi / di)、「づ」 (du / zu) などから始まる[[元号]]の場合に、
揺れが生じる可能性はあります。

[37] おそらく数代前の[[元号]]との衝突は避けるように制定時に配慮されるでしょうが、
バリエーションが少ないのでいつまでも避け続けるのは不可能です。

[22] この方式は[[人間]]が関わる場合の入出力などには適していますが、
将来的な衝突の可能性や[[整列]]の便宜などを考えると数値符号の方が便利そうです。

* カバー範囲

[20] 多くの方式は、実用上必要な範囲のみ定義されています。最も多いものは[[明治]]以後のみ対応していて、
[[昭和]]以後のみ対応のものもあります。

[21] [[改元]]時にすぐに新[[元号]]に対応できるような割り振り方、システムとしておく必要もあります。

[24] 多くの方式は、[[日本の元号]]のみ対応しています。現在公式に用いられている[[元号]]は、
[[日本の元号]]のみです。

* 文字コード

[186] [[明治]]以後の4[[元号]]は、[[ワープロ]]等の便宜のため[[全角文字]]1つ分で表現するための専用の[[符号位置]]が与えられました。
[[シフトJIS]]への [[NEC]] の拡張は[[マイクロソフト標準キャラクタセット]]に取り入れられ[[事実上の標準]]となり、
[[Unicode Standard]] にも含まれています ([CODE(char)[[[U+337B]]]],
[CODE(char)[[[U+337C]]]], [CODE(char)[[[U+337D]]]], [CODE(char)[[[U+337E]]]])。
[[JIS X 0213]] も[[マイクロソフト標準キャラクタセット]]と同じ[[符号位置]]にこれらを割り当てました。

;; [338] 当然ながら[[昭和]]時代の製品は[[平成]]の[[文字]]を実装していませんでした。

[328] これらは現在では需要もなくなり、ほとんど見かけなくなりました。
次に[[改元]]があっても、新たな[[文字]]が追加される可能性は低いとも思われていました。
しかし[[平成]]から[[次の元号][平成31年新元号]]への[[改元]]において、
依然として[[元号]]を[[符号位置]]1つで表現する古いシステムが残存していることから、
[[Unicode]] に新しい[[符号位置]]が割り当てられることとなりました。

;; [[平成31年新元号]]参照。

* データファイル

[REFS[
- [31] ([TIME[2016-10-29 12:57:59 +09:00]] 版) <https://raw.githubusercontent.com/manakai/data-locale/master/data/calendar/era-defs.json>
-- [32] [[ドキュメント]] [CITE@en[data-locale/calendar-era-defs.txt at master · manakai/data-locale]] ([TIME[2016-10-29 12:58:43 +09:00]] 版) <https://github.com/manakai/data-locale/blob/master/doc/calendar-era-defs.txt>
]REFS]

[33] この [[JSON]] データファイルでは、[[古今東西]]の ([[日本]]以外も含む)
[[元号]]に固有の[[正]]の[[整数]]の数値識別子 [CODE[id]] が割り当てられています。
[[明治]]以後は [N[1]] から順に割り当てられ、 [N[19]] まで予約されています。
[N[20]] には[[西暦]]が、 [N[21]] 以降には色々な[[元号]]と[[紀年法]]が割り当てられています。

* メモ

[FIG(quote)[
[FIGCAPTION[
[1] [CITE@ja[入力方式による納税手続|e-Tax]]
([[国税庁]] 著, [TIME[2015-05-22 16:55:20 +09:00]] 版)
<http://www.e-tax.nta.go.jp/tetsuzuki/tetsuzuki4_3.htm>
]FIGCAPTION]

> (C)元号コード
> 元号	元号コード
> 昭和	3
> 平成	4

]FIG]


[FIG(quote)[
[FIGCAPTION[
[2] [CITE[9号:VB.NETデータベースプログラミング(バックナンバー)]]
([TIME[2009-08-02 19:46:31 +09:00]] 版)
<http://park5.wakwak.com/~weblab/mailMagazine/mag009.html>
]FIGCAPTION]

>   元号コード 元号名
>  ---------------------
>      1        明治
>      2        大正
>      3        昭和
>      4        平成

]FIG]


[FIG(quote)[
[FIGCAPTION[
[3] ([TIME[2016-01-20 22:12:04 +09:00]] 版)
<http://webcache.googleusercontent.com/search?q=cache:s3-rMbN70NoJ:www.jinjika.jim.titech.ac.jp/fuk/apply/forms/cyouki-henkou.pdf>
]FIGCAPTION]

> @ 生年月日欄 (39~45カラム) 組合員の生年月日を元号コード (大正二 2、 昭和 二 3、 平成エ 4) を含めて記入します。 また、 生年月 日は右詰めで記入し丶 空きマスには0を記入します。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[4] [CITE@ja[元号が変わったら、今使用しているパソコンやその他コンピューターシステム... - Yahoo!知恵袋]]
([TIME[2016-01-20 22:12:41 +09:00]] 版)
<http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1282739017>
]FIGCAPTION]

> 元号を扱うシステムのほとんどで、元号コードを1:明治,2:大正,3:昭和,4:平成と定めているので、新たに5:新元号を作ることとなります。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[5] [CITE@ja[新しい元号(年号)への対応方法について(.NET製品) - .NET 製品共通 - ナレッジベースの詳細 | GrapeCity Developer Tools]]
([[グレープシティ株式会社,GrapeCity inc.]] 著, [TIME[2016-01-20 22:13:54 +09:00]] 版)
<https://www.grapecity.com/tools/support/technical/knowledge_detail.asp?id=36721>
]FIGCAPTION]

> 和暦が新しい元号(「平成」の次の年号)へ変更された場合の対応方法は、製品によって異なります。
> 1. 外部ファイル(構成ファイル)による年号の設定
> 以下の.NET製品には、アプリケーションの構成ファイル(app.config、web.config、app.xaml)を使用して、コントロールが出力する和暦の年号を独自に定義できる機能が用意されています。年号が変更された場合は、構成ファイルに新しい年号の情報を記載することで、対応が可能です。
> 2. .NET Frameworkの和暦機能を使用している製品
> 前述1.以外の.NET製品(ActiveReports for .NETなど)は、独自の和暦機能を持っていません。.NET FrameworkのJapaneseCalendarクラスなどを利用して、和暦を出力します。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[6] [CITE[B0010]]
([TIME[2016-01-20 22:14:41 +09:00]] 版)
<http://webcache.googleusercontent.com/search?q=cache:XcWpjevAtbIJ:www.inpit.go.jp/content/100030176.pdf>
]FIGCAPTION]

> N1     : 元号コード  1;明治                 2;大正                 3;昭和                4;平成

]FIG]


[FIG(quote)[
[FIGCAPTION[
[7] [CITE[備 考]]
([[鹿児島県]] 著, [TIME[2016-01-20 22:18:02 +09:00]] 版)
<https://webcache.googleusercontent.com/search?q=cache:mPa8hIVKNN8J:https://www.pref.kagoshima.jp/ah12/infra/kentiku/shidou/torihiki/syunin/documents/syuninsyatourokukisaiyouryo.pdf>
]FIGCAPTION]

> 3 「変更年月日」の欄は、最初の□には元号のコードとして「H」を記入するとともに、□に数字を記入するに当た って、空位の□に「0」を記入すること。 (記入例) H 0 5 年 1 1 月 3 0 [平成5年11月30日の場合]

]FIG]


[FIG(quote)[
[FIGCAPTION[
[8] [CITE@ja[宅地建物取引主任者関係申請・届出使用コード一覧表 - 神奈川県ホームページ]]
([TIME[2016-01-20 03:26:39 +09:00]] 版)
<http://www.pref.kanagawa.jp/cnt/f191/p15671.html>
]FIGCAPTION]

> 表
> 印刷用ページを表示
> 掲載日:2015年5月1日
> 都道府県コード | 元号コード | 市区町村コード | 認定コード | 
> 都道府県コード
> 神奈川県コードは14となります
> 00 国土交通大臣	02 青森県知事	03 岩手県知事	04 宮城県知事	05 秋田県知事
> 06 山形県知事	07 福島県知事	08 茨城県知事	09 栃木県知事	10 群馬県知事
> 11 埼玉県知事	12 千葉県知事	13 東京都知事	14 神奈川県知事	15 新潟県知事
> 16 富山県知事	17 石川県知事	18 福井県知事	19 山梨県知事	20 長野県知事
> 21 岐阜県知事	22 静岡県知事	23 愛知県知事	24 三重県知事	25 滋賀県知事
> 26 京都府知事	27 大阪府知事	28 兵庫県知事	29 奈良県知事	30 和歌山県知事
> 31 鳥取県知事	32 島根県知事	33 岡山県知事	34 広島県知事	35 山口県知事
> 36 徳島県知事	37 香川県知事	38 愛媛県知事	39 高知県知事	40 福岡県知事
> 45 宮崎県知事	46 鹿児島県知事	47 沖縄県知事		
> 51 北海道知事(石狩)	52 北海道知事(渡島)	53 北海道知事(檜山)	54 北海道知事(後志)	55 北海道知事(空知)
> 56 北海道知事(上川)	57 北海道知事(留萌)	58 北海道知事(宗谷)	59 北海道知事(網走)	60 北海道知事(胆振)
> 61 北海道知事(日高)	62 北海道知事(十勝)	63 北海道知事(釧路)	64 北海道知事(根室)	99 国土交通大臣届出
> 元号コード
> M 明治	T 大正	S 昭和	H 平成

]FIG]


[FIG(quote)[
[FIGCAPTION[
[9] [CITE[備 考 ・]]
([TIME[2016-01-20 22:19:48 +09:00]] 版)
<https://webcache.googleusercontent.com/search?q=cache:D7eaN43fKRUJ:https://www.pref.saga.lg.jp/web/var/rev0/0189/7184/kisaigaiyou.pdf>
]FIGCAPTION]

> 「生年月 日」、 「認定年月 日J 及び 「合格年月~日」 の欄は、 最初の口には下表より該当す る元号のコードを記入すると ともに、 口に数字を記入するに当たっては、 空位の口に 「。J を記入すること『 ' (記入例) 回一0篇エ 年 0量8 月 2量3旦 M 明 治 S 昭 和 〔平成元年8月23日の場合''']''' T 大 正 H 平 成

]FIG]


[FIG(quote)[
[FIGCAPTION[
[10] [CITE@ja[請求内訳書記載要領]]
([TIME[2016-01-20 22:20:42 +09:00]] 版)
<http://www.rousai-ric.or.jp/tabid/212/Default.aspx>
]FIGCAPTION]

> なお、「元号」欄には、明治は「1」、大正は「3」、昭和は「5」、平成は「7」のいずれかの該当するコード番号を記入して下さい。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[11] [CITE[NEC MedicalSystems-トピックス]]
([TIME[2000-04-29 23:10:36 +09:00]] 版)
<http://www.kenn.co.jp/topics/tp97021.htm>
]FIGCAPTION]

> ア:承認した年(数字3桁)
>    昭和・・・1 
>    平成・・・2
>    これに元号の年数(2桁)を組み合わせる。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[12] [CITE[給与支払報告書(総務省通達形式CSV) 平成24年以降分]]
([[田中 裕明]] 著, [TIME[2016-01-20 22:27:41 +09:00]] 版)
<https://webcache.googleusercontent.com/search?q=cache:FKI9OdeEgZAJ:www.city.kyotango.lg.jp/kurashi/oshirase/zaimu/zeimu/documents/csv_layout_h24.pdf>
]FIGCAPTION]

> 受給者の生年月日の元号、年、月及び日を記録する。この場合、元 号については、昭和は「1」、大正は「2」、明治は「3」、平成 は「4」を記録し、また「年」、「月」及び「日」については、そ れぞれ別項目で2桁を使用する。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[13] [CITE[1 レコード 項目番号 項   目   名 記録要領 1 法定資料の種類  「331」を記録する。]]
([[densan]] 著, [TIME[2016-01-20 22:28:43 +09:00]] 版)
<https://webcache.googleusercontent.com/search?q=cache:ZhVhlDB_aLsJ:https://www.city.meguro.tokyo.jp/shinseisho/zeikin/teishutsu.files/5.pdf>
]FIGCAPTION]

> 元号については、昭和は「1」、大正は「2」、 明治は「3」、平成は「4」、その他は「9」を記録 し、また、「年」、「月」及び「日」は、それぞ れ別項目で2桁を使用すること。  (例)「平成17年8月19日 → 4.17.08.19」

]FIG]


[FIG(quote)[
[FIGCAPTION[
[14] [CITE[個人の住民税の給与支払報告書及び公的年金等支払報告書の  光ディスク等化について(通知)]]
([[総務省自治税務局長]]著、総税市第49号 平成25年11月21日、[TIME[2014-02-18 13:00:07 +09:00]] 版)
<http://www.soumu.go.jp/main_sosiki/jichi_zeisei/czaisei/czaisei_seido/ichiran13/pdf/ichiran13_02-04.pdf>
]FIGCAPTION]

> 受給者の生年月日の元号、年、月及び日を記録する。この場合、元
> 号については、昭和は「1」、大正は「2」、明治は「3」、平成は「4」、
> その他は「9」を記録し、また「年」、「月」及び「日」については、
> それぞれ 2 けたを使用し、1 けたの場合は後づめ(前ゼロ)で記録す
> る。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[15] [CITE@ja[公立学校施設台帳作成提要:文部科学省]]
([TIME[2015-10-01 22:19:02 +09:00]] 版)
<http://www.mext.go.jp/b_menu/hakusho/nc/t20020401009/t20020401009.html>
]FIGCAPTION]

> 元号は下記の略号で記入する。
> 平成…H
> 昭和…S
> 大正…T
> 明治…M

]FIG]


[FIG(quote)[
[FIGCAPTION[
[26] [CITE@ja[法務省:1 申請データに関する変更]]
( ([TIME[2015-02-24 14:31:41 +09:00]]))
<http://www.moj.go.jp/MINJI/henkou/01.html>
]FIGCAPTION]

> 
,*変更点	,*変更前	,*変更後
,*年月日の入力方法	,"西暦の年を示す4桁の数字,月を示す2桁の数字及び日を示す2桁の数字をこの順に並べて入力する(例:20080901)。	","元号を使用し,元号を示す元号コード,年を示す2桁の数字,月を示す2桁の数字及び日を示す2桁の数字をそれぞれの項目ごとに入力する。"

]FIG]


[FIG(quote)[
[FIGCAPTION[
[27] ( ([TIME[2015-02-24 14:31:48 +09:00]]))
<http://www.moj.go.jp/content/000001895.pdf>
]FIGCAPTION]

> 表7-3.元号コード一覧
> コード名称 桁数 コード 内 容
> 01 昭和
> 02 平成

]FIG]


[FIG(quote)[
[FIGCAPTION[
[28] ( ([TIME[2015-03-19 15:01:57 +09:00]]))
<http://www.pref.shiga.lg.jp/police/seikatu/seikatsukankyou/kobutu/files/23_kisaiyouryou.pdf>
]FIGCAPTION]

> 昭和30年1月2日
> 生年月日
> 西暦 明治 大正 昭和 平成 年 月 日
> 0 1 2 '3'' 4 0 0 3 0 0 1 0 2
> 西暦1955年10月23日
> 生年月日
> 西暦 明治 大正 昭和 平成 年 月 日
> ''0'' 1 2 3 4 1 9 5 5 1 0 2 3

]FIG]


[FIG(quote)[
[FIGCAPTION[
[29] [CITE@en[UDF詳細 5.日付関数 · hiromasah/charsiu Wiki]]
( ([TIME[2016-10-29 12:55:28 +09:00]]))
<https://github.com/hiromasah/charsiu/wiki/UDF%E8%A9%B3%E7%B4%B0-5.%E6%97%A5%E4%BB%98%E9%96%A2%E6%95%B0>
]FIGCAPTION]

> 元号コードは以下のようになります。
> 元号	元号コード
> 明治	1
> 大正	2
> 昭和	3
> 平成	4

]FIG]


[FIG(quote)[
[FIGCAPTION[
[40] [CITE@en[UDF詳細 5.日付関数 · hiromasah/charsiu Wiki]]
([TIME[2017-05-14 13:45:25 +09:00]])
<https://github.com/hiromasah/charsiu/wiki/UDF%E8%A9%B3%E7%B4%B0-5.%E6%97%A5%E4%BB%98%E9%96%A2%E6%95%B0>
]FIGCAPTION]

> 和暦の元号と年、月日で構成される日付文字列です。 
> 元号コードは以下のようになります。
> 元号	元号コード
> 明治	1
> 大正	2
> 昭和	3
> 平成	4
> 平成23年7月25日は 4230725 と表記されます。

]FIG]


[FIG(quote)[
[FIGCAPTION[
[43] [CITE[新元号は? 昭和最後の日へタイムスリップ|NHK NEWS WEB]]
([[日本放送協会]]著, [TIME[2017-12-11 22:50:56 +09:00]])
<http://www3.nhk.or.jp/news/web_tokushu/2017_1211.html?utm_int=detail_contents_tokushu_001>
]FIGCAPTION]

> NHKはその後、元号の選定手続きでは、政府原案として「平成」のほかに、「修文(しゅうぶん)」と「正化(せいか)」という2つの案もあったと伝えています。
> さらに、コンピューターなどで、明治は「M」、大正は「T」、昭和は「S」とアルファベットの頭文字で処理もされているため、全閣僚会議では、「『修文』や『正化』では、頭文字が、昭和と同じ『S』となり、不都合なのではないか」という意見が出されたと紹介しています。

]FIG]
