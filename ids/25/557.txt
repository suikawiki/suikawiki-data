[12] [CODE[[[History]]]] [[インターフェイス]]の [DFN[[CODE[[[scrollRestoration]]]]]]
[[IDL属性]]は、[[履歴]]操作の後[[スクロール位置]]を[[利用者エージェント]]が自動的に復元するべきか、
[[著者]]の[[スクリプト]]に任せるべきかを表すものです。

[13] 通常はページ遷移が発生すると、その時点での[[スクロール位置]]が保存され、
次に履歴移動で戻ってきた際にそれが復元されます。しかしこの[[属性]]を
[CODE[[[manual]]]] に設定しておくことで、この復元を抑制できます。
複雑な表示処理を伴う[[Webアプリケーション]]では、
[[利用者エージェント]]に任せるよりも[[著者]]の[[スクリプト]]で復元作業を行った方が良いことがあります。

* 仕様書

[REFS[
- [1] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-11-17 17:58:32 +09:00]] 版) <https://html.spec.whatwg.org/#scroll-restoration-mode>
- [9] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-11-17 17:58:32 +09:00]] 版) <https://html.spec.whatwg.org/#scrollrestoration>
- [3] '''[CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-11-17 17:58:32 +09:00]] 版) <https://html.spec.whatwg.org/#dom-history-scroll-restoration>'''
]REFS]

* 意味

[2] [[セッション履歴エントリー]]の[DFN[[RUBYB[スクロール復元モード]@en[scroll restoration mode]]]]は、
当該[[セッション履歴エントリー]]へと[[履歴を探索]]した際に、
(あれば) 保存していた[[スクロール位置]]を[[利用者エージェント]]が自動的に復元するべきかどうかを表します
[SRC[>>1]]。

[5] [[スクロール復元モード]]は、 [CODE[[[auto]]]] または [CODE[[[manual]]]] です [SRC[>>3]]。
これは[[列挙型]] [DFN[[CODE[[[ScrollRestoration]]]]]] [SRC[>>9]] です。

[6] [DFN[[CODE[[[auto]]]]]] は、[[スクロール位置]]の復元を[[利用者エージェント]]が行うべきことを表します
[SRC[>>3]]。

[7] [DFN[[CODE[[[manual]]]]]] は、[[スクロール位置]]の復元を[[ページ]]が行い[[利用者エージェント]]が行うべきではないことを表します [SRC[>>3]]。

[4] [[スクロール復元モード]]の既定値は、 [CODE[[[auto]]]] です [SRC[>>3]]。

[14] [[利用者エージェント]]による[[スクロール位置]]の復元は、
[[利用者]]の利便性を向上させるための機能です。[[著者]]は、
[[スクロール復元モード]]を濫用して[[スクロール位置]]の復元を無効化したり、
意図的に異なる位置を表示したりするべきではありません。

* 取得器

[8] [CODE[[[History]]]] [[インターフェイス]]の [CODE[[[scrollRestoration]]]]
[[属性]]は、[[取得時]]、[[セッション履歴]]の[[現在エントリー]]の[[スクロール復元モード]]を返さなければ[['''なりません''']]
[SRC[>>3]]。

* 設定器

[11] [CODE[[[History]]]] [[インターフェイス]]の [CODE[[[scrollRestoration]]]]
[[属性]]は、[[設定時]]、[[現在エントリー]]の[[スクロール復元モード]]を新しい値に設定しなければ[['''なりません''']]
[SRC[>>3]]。

[10] この[[属性]]の [[WebIDL]] の[[型]]は、 [CODE[[[ScrollRestoration]]]] です [SRC[>>9]]。
従って [CODE[[[manual]]]] または [CODE[[[auto]]]] を新しい値として指定できます。

* 歴史

[REFS[
- [15] [CITE@en[Add scroll restoration preference to history traversal · whatwg/html@dd6a34e]] ([TIME[2015-11-17 21:03:22 +09:00]] 版) <https://github.com/whatwg/html/commit/dd6a34ec3c191ee1968a0fc8d174b4ce3b615916>
]REFS]