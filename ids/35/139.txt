[1] 
[DFN[[CODE[TM_Order]]]]
は、
[CODE[TM_Primitive]] が[[利用][«use»]]する[[インターフェイス]]です。
[SRC[>>2]]

* 仕様書

[REFS[
- [2] [[JIS X 7108:2004]]
]REFS]

* 操作

[3] 
[CODE[TM_Order]] は唯一操作 [DFN[[CODE[relativePosition]]]]
を定義しています。 [SRC[>>2 5.2.3.4]]

[4] 
[CODE[relativePosition]] は、当該オブジェクト [VAR[A]] と引数で与えられたオブジェクト
[VAR[B]] の
2つの [CODE[TM_Primitive]] について、 [CODE[TM_RelativePosition]]
を返すものです。
[SRC[>>2 5.2,3,4]]

[5] 
[CODE[TM_RelativePosition]] は、 Allen (1983) の13種類の時間関係の分類に基づく列挙データ型です。
[SRC[>>2 5.2.3.5]]

[6] 
返す値は次のように決定しなければなりません。

[FIG(steps)[
= [7] [VAR[A]] と [VAR[B]] が [CODE[TM_Instant]] の場合、
次の条件を満たす値を返します。
[SRC[>>2 5.2.3.5]]
,* 条件 ,* 値
, [VAR[A]] の [F[position]] [[<]] [VAR[B]] の [F[position]] , Before
, [VAR[A]] の [F[position]] [[=]] [VAR[B]] の [F[position]] , Equals
, [VAR[A]] の [F[position]] [[>]] [VAR[B]] の [F[position]] , After
= [8] [VAR[A]] が [CODE[TM_Period]] で [VAR[B]] が [CODE[TM_Instant]] の場合、
次の条件を満たす値を返します。
[SRC[>>2 5.2.3.5]]
,* 条件 ,* 値
, [VAR[A]] の [F[end]] の [F[position]] [[<]] [VAR[B]] の [F[position]] , Before
, [VAR[A]] の [F[end]] の [F[position]] [[=]] [VAR[B]] の [F[position]] , EndedBy
, [VAR[A]] の [F[begin]] の [F[position]] [[<]] [VAR[B]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[>]] [VAR[B]] の [F[position]] , Contains
, [VAR[A]] の [F[begin]] の [F[position]] [[=]] [VAR[B]] の [F[position]] , BegunBy
, [VAR[A]] の [F[begin]] の [F[position]] [[>]] [VAR[B]] の [F[position]] , After
= [9] [VAR[A]] が [CODE[TM_Instant]] で [VAR[B]] が [CODE[TM_Period]] の場合、
次の条件を満たす値を返します。
[SRC[>>2 5.2.3.5]]
,* 条件 ,* 値
, [VAR[A]] の [F[position]] [[<]] [VAR[B]] の [F[begin]] の [F[position]] , Before
, [VAR[A]] の [F[position]] [[=]] [VAR[B]] の [F[begin]] の [F[position]] , Begins
, [VAR[A]] の [F[position]] [[>]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[position]] [[<]] [VAR[B]] の [F[end]] の [F[position]] , During
, [VAR[A]] の [F[position]] [[=]] [VAR[B]] の [F[end]] の [F[position]] , BegunBy
, [VAR[A]] の [F[position]] [[>]] [VAR[B]] の [F[end]] の [F[position]] , After
= [10] [VAR[A]] と [VAR[B]] が [CODE[TM_Period]] の場合、
次の条件を満たす値を返します。
[SRC[>>2 5.2.3.5]]
,* 条件 ,* 値
, [VAR[A]] の [F[end]] の [F[position]] [[<]] [VAR[B]] の [F[begin]] の [F[position]] , Before
, [VAR[A]] の [F[end]] の [F[position]] [[=]] [VAR[B]] の [F[begin]] の [F[position]] , Meets
, [VAR[A]] の [F[begin]] の [F[position]] [[<]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[>]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[<]] [VAR[B]] の [F[end]] の [F[position]] , Overlaps
, [VAR[A]] の [VAR[begin]] の [F[position]] [[=]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[<]] [VAR[B]] の [F[end]] の [F[position]] , Begins
, [VAR[A]] の [F[begin]] の [F[position]] [[=]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[>]] [VAR[B]] の [F[end]] の [F[position]], BegunBy
, [VAR[A]] の [F[begin]] の [F[position]] [[>]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[<]] [VAR[B]] の [F[end]] の [F[position]], During
, [VAR[A]] の [F[begin]] の [F[position]] [[<]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[>]] [VAR[B]] の [F[end]] の [F[position]], Contains
, [VAR[A]] の [F[begin]] の [F[position]] [[=]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[=]] [VAR[B]] の [F[end]] の [F[position]], Equals
, [VAR[A]] の [F[begin]] の [F[position]] [[>]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[begin]] の [F[position]] [[<]] [VAR[B]] の [F[end]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[>]] [VAR[B]] の [F[end]] の [F[position]], OverlappedBy
, [VAR[A]] の [F[begin]] の [F[position]] [[>]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[=]] [VAR[B]] の [F[end]] の [F[position]], Ends
, [VAR[A]] の [F[begin]] の [F[position]] [[<]] [VAR[B]] の [F[begin]] の [F[position]] かつ [VAR[A]] の [F[end]] の [F[position]] [[=]] [VAR[B]] の [F[end]] の [F[position]], EndedBy
, [VAR[A]] の [F[begin]] の [F[position]] [[=]] [VAR[B]] の [F[end]] の [F[position]], MetBy
, [VAR[A]] の [F[begin]] の [F[position]] [[>]] [VAR[B]] の [F[end]] の [F[position]], After
= [12] [VAR[A]] と [VAR[B]] が [CODE[TM_TopologicalPrimitive]] の場合、
[SRC[>>2 5.2.4.7]]
== [13] [VAR[A]] と [VAR[B]] が同じ [CODE[TM_TopologicalComplex]] に含まれない場合、
[[例外]]を[[投げ]]てここで停止します。
== [14] それ以外の場合、
次の条件を満たす値を返します。
,* 条件 ,* 値
,[VAR[A]] は [VAR[B]] より前にあって、 Initiation も Termination もない , Before
,[VAR[A]] と [VAR[B]] はどちらも [CODE[TM_Edge]] で、 [CODE[TM_Node]] [VAR[C]] があって [VAR[C]] の [F[previousEdge]] が [VAR[A]]、 [F[nextEdge]] が [VAR[B]] , Meets
,[VAR[A]] は [CODE[TM_Node]]、[VAR[B]] は [CODE[TM_Edge]] で、 [VAR[A]] の [F[nextEdge]] が [VAR[B]] , Begins
,[VAR[A]] は [CODE[TM_Edge]]、[VAR[B]] は [CODE[TM_Node]] で、 [VAR[A]] の [F[start][TM_Edge]] が [VAR[B]] , BegunBy
,[VAR[A]] と [VAR[B]] は同一 , Equals
,[VAR[A]] は [CODE[TM_Node]]、[VAR[B]] は [CODE[TM_Edge]] で、 [VAR[A]] の [F[previousEdge]] が [VAR[B]] , Ends
,[VAR[A]] は [CODE[TM_Edge]]、[VAR[B]] は [CODE[TM_Node]] で、 [VAR[A]] の [F[end][TM_Edge]] が [VAR[B]] , EndedBy
,[VAR[A]] と [VAR[B]] はどちらも [CODE[TM_Edge]] で、 [CODE[TM_Node]] [VAR[C]] があって [VAR[C]] の [F[nextEdge]] が [VAR[A]]、 [F[previousEdge]] が [VAR[B]] , MetBy
,[VAR[A]] は [VAR[B]] より後にあって、 Initiation も Termination もない , After

]FIG]

[11] ただし、いずれかの [CODE[TM_Position]] が[[不定]]の場合、
[[例外]]を[[投げ]]なければなりません。
[SRC[>>2 5.2.3.5]]

[15] 
[CODE[TM_TopologicalComplex]]
が線形であるなど適切な順序で定められていないと適当な比較結果が得られません。