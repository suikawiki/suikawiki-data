[9] [DFN[はてなスター]]は、[[株式会社はてな]]の[[Webサービス]]です。

[REFS[
- [13] [CITE[はてなスター]] <https://s.hatena.ne.jp/>
- [1] [CITE[はてなスターをブログに設置するには - はてなスター日記]] ([TIME[2008-12-15 23:19:20 +09:00]] 版) <https://d.hatena.ne.jp/hatenastar/20070707>
]REFS]

* 機能

[FIG(short list)[ [15] [[はてなスター]]
- [[スターコメント]]
- [[引用スター]]
- [[どこでもはてなスター]]
- [[カラースター]]
-- [[カラースターショップ]]
-- [[カラースター交換所]]
- [[スターレポート]]
- [[スターフレンド]]
]FIG]

* JSON API

[4] 
[CODE[https://s.hatena.ne.jp/entries.json]] は 
[CODE[HatenaStar.js]] の初期表示で使われています。
[[スター]]数が多い時に[[数字]]で省略表示されますが、
それに相当する情報が入っています。つまり全件取得には使えません。

[5] 
[[query][URL query]] に [CODE[callback]] 引数を指定すると、
指定された関数名の [[JSONP]] になります。

[6] 
[[CORS]] に対応しており、任意の[[起源]]からアクセスできます。

-*-*-

[7] 
[CODE[https://s.hatena.ne.jp/entry.json]] は省略されずにすべての[[スター]]の情報が入っています。

[8] 
[[query][URL query]] に [CODE[callback]] 引数を指定すると、
指定された関数名の [[JSONP]] になります。

* CSRF

[10] 
[[はてな]]に[[ログイン]]している状態では、任意の[[起源]]の [[JavaScript]]
[[コード]]から、 [[JSON]] [[API]] を通じてその[[はてなID]]
の権限で[[スター]]の情報を取得したり、操作したりできます。つまりこれは
[[CSRF]] 脆弱性です。

[11] 
この問題は初期から第三者により報告されていますが、修正されていません。
[[mixi]] の[[足跡]]機能のように使っている外部サイトもあります。

[12] 
一般の[[利用者]]が自衛するには、[[はてな]]から[[ログアウト]]するしかありません。

* メモ

[2] [[SuikaWikiをはてなスターに対応させてみた]]

[14] [CITE[はてなスターSiteConfig作成方法とは - はてなキーワード]]
([TIME[2010-02-20 00:43:41 +09:00]] 版)
<http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%B9%A5%BF%A1%BCSiteConfig%BA%EE%C0%AE%CA%FD%CB%A1>

[3] [CITE@ja[HIBI★Chazz-K - Wikipedia]]
([TIME[2016-12-24 16:52:30 +09:00]])
<https://ja.wikipedia.org/wiki/HIBI%E2%98%85Chazz-K>