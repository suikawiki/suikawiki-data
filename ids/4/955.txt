[1] [DFN[[RUBYB[[[状態行]]]@en[status line]]]]は、[[応答メッセージ]]の[[開始行]]です。

* 仕様書

[REFS[
- [2] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#section-3.1.2>
- [8] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#page-35>
]REFS]

* 構文

[3] [[状態行]]は、[[HTTPの版]]、[[SP]]、[[状態符号]]、
[[理由句]]、[[CRLF]] を順に連ねたものです [SRC[>>2]]。

[FIG(railroad)[
= [[HTTPの版]]
= [CODE(HTTP)[[[SP]]]]
= [[状態符号]]
= [CODE(HTTP)[[[SP]]]]
= [[理由句]]
= [[CRLF]]
]FIG]

[4] [[状態符号]]は[[応答メッセージ]]の意味を決める3桁の[[整数]]です。

[5] [[理由句]]は数値の[[状態符号]]に対応するテキストの説明を提供するものです [SRC[>>2]]。

[7] [[HTTPの版]]は、[[送信者]]が対応する[[HTTPの版]]を示すものです。

;; [11] [[HTTP/0.9]] [[メッセージ]]には[[状態行]]がありません。

* 構文解析

[9] 構文上 [[SP]] の箇所は、[[空白]]1つ以上を区切りとみなして[[構文解析]]して構いません。
また、最初と [[CRLF]] 前の[[空白]]は無視して構いません。ここで[[空白]]は、
[[SP]]、[[HTAB]]、[[VT]]、[[FF]]、[[CR]] のことをいいます。 [SRC[>>8]]

[10] [[改行]]については、[[メッセージ]]の項を参照してください。

[13] [[応答]]の最初の行が[[状態行]]として解釈できない場合、
[[HTTP/0.9]] [[応答]]とみなされることとなります。

;; [[HTTP/0.9]] も参照。

* 歴史

[FIG[
[FIGCAPTION[
[6] RFC 1945 (HTTP/1.0); RFC 2068・2616 (HTTP/1.1) 6.1 Status-Line
]FIGCAPTION]

> The first line of a [DEL[[INS[{1945}]] Full-]]Response
message is the Status-Line, consisting of the protocol version followed by a numeric status code and its
associated textual phrase, with each element separated by SP
characters.  No CR or LF is allowed except in the final CRLF sequence.

[CODE(ABNF)[Full-Response]] メッセージの最初の行は [CODE(ABNF)[Status-Line]]
で、プロトコルの版とそれに続く数値[[状態符号]]とそれに関連付けられた文語句で構成され、
それぞれの要素は [CODE(char)[[[SP]]]] 文字で分離します。
最終 [[CRLF]] 列を除いて [CODE(char)[[[CR]]]]
や [CODE(char)[[[LF]]]] は認められていません。

>
- Status-Line = HTTP-Version SP Status-Code SP Reason-Phrase CRLF

[DEL[
>[INS[{1045}]] Since a status line always begins with the protocol version and status code

状態行は常にプロトコルの版と状態符号

>
-       "HTTP/" 1*DIGIT "." 1*DIGIT SP 3DIGIT SP

> (e.g., "HTTP/1.0 200 "), the presence of that expression is
sufficient to differentiate a Full-Response from a Simple-Response.
Although the Simple-Response format may allow such an expression to
occur at the beginning of an entity body, and thus cause a
misinterpretation of the message if it was given in response to a
Full-Request, most HTTP/0.9 servers are limited to responses of type
"text/html" and therefore would never generate such a response.

(例えば [SAMP(HTTP)[HTTP/1.0 200 ]]) で始まりますから、
この表現の存在は [CODE(ABNF)[Full-Response]] と
[CODE(ABNF)[Simple-Response]] を区別するのに十分です。
[CODE(ABNF)[Simple-Response]] 書式は実体本体にこのような表現を認めていますから、
[CODE(ABNF)[Full-Request]] 経の応答でそのようなものがあるとメッセージの誤解釈を起こしてしまうことになりますが、
ほとんどの HTTP/0.9 サーバーは型 [CODE(MIME)[[[text/html]]]] 
の応答に制限されていますから、そのような応答は決して生成されないでしょう。
]DEL]

*** 6.1.1 Status Code and Reason Phrase
→[CODE(WikiPage)[[[状態符号]]]]
]FIG]

[12] [CITE@en[RFC 3507 - Internet Content Adaptation Protocol (ICAP)]]
( ([TIME[2014-06-08 07:17:07 +09:00]] 版))
<http://tools.ietf.org/html/rfc3507#section-4.3.3>