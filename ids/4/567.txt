[3] [DFN[[RUBYB[[[透過内容折衝]]]@en[transparent content negotiation]]]]は、
[[HTTP]] の[[内容折衝]]の手法の一つです。 [[Apache]] が実装していますが、
あまり利用されていません。

* 仕様書

[REFS[
- [5] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295>
-- [14] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-2.2>
-- [2] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-4.3>
-- [10] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-10>
-- [12] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#section-12>
]REFS]

* プロトコル

[6] 次の[[応答]]の種別があります。
[FIG(short list)[
- [[リスト応答]]
- [[選択応答]]
- [[暫定応答]]
]FIG]

[7] 次の[[ヘッダー]]があります。
[FIG(short list)[
- [CODE(HTTP)@en[[[Accept-Features:]]]]
- [CODE(HTTP)@en[[[Alternates:]]]]
- [CODE(HTTP)@en[[[Negotiate:]]]]
- [CODE(HTTP)@en[[[TCN:]]]]
- [CODE(HTTP)@en[[[Variant-Vary:]]]]
]FIG]

[8] 次の[[状態符号]]があります。
[FIG(short list)[
- [CODE(HTTP)@en[[[300]]]]
]FIG]

[9] その他次の概念があります。
[FIG(short list)[
- [[特徴タグ]]
- [[特徴集合]]
- [[特徴述語]]
- [[異体リスト]]
- [[遠隔変種選択アルゴリズム]]
- [[透過的折衝可能資源]]
- [[変種資源]]
- [[隣接異体資源]]
- [[構造化実体タグ]]
]FIG]

[11] [[透過内容折衝]]による[[リスト応答]]、[[選択応答]]、[[暫定応答]]の決定は、
[[内容符号化]]、[[条件付き要求]]や[[範囲要求]]の処理よりも前に行います [SRC[>>10]]。

[13] [[透過内容折衝]]は、 [CODE(HTTP)@en[[[GET]]]] と [CODE(HTTP)@en[[[HEAD]]]]
にのみ適用されます [SRC[>>12]]。

* 対応

[15] [[利用者エージェント]]が[[透過内容折衝]]に[DFN[[RUBYB[対応]@en[support]]]]するとは、
対応していることを示す [CODE(HTTP)@en[[[Negotiate:]]]] [[ヘッダー]]を送信することをいいます
[SRC[>>14]]。

* 歴史

[4] [[RFC 2295]] は従来の「[[HTTP/1.0]] [[内容折衝]]」に対するものとして[[透過内容折衝]]を説明しており、
既に用いられている実質的な標準である既存の[[内容折衝]]に対して [[IETF]]
で標準化された [[HTTP/1.1]] 世代の新仕様として旧世代の手法を置き換えることを狙っていたことがうかがえます。

[FIG(quote)[
[FIGCAPTION[
[1] [CITE@en[RFC 2295 - Transparent Content Negotiation in HTTP]] ([TIME[2014-08-31 19:36:42 +09:00]] 版) <http://tools.ietf.org/html/rfc2295#page-8>
]FIGCAPTION]

>
:supports transparent content negotiation:
From the viewpoint of an origin server or proxy, a user agent
supports transparent content negotiation if and only if it sends a
Negotiate header (section 8.4) which indicates such support.

>
:透過内容折衝に対応:[[起源サーバー]]又は[[串]]の視点から、
[[利用者エージェント]]が透過内容折衝に対応していることを示す
[CODE(HTTP)[[[Negotiate]]]] 頭を送る場合、この場合に限って、
その利用者エージェントは透過内容折衝に[DFN[対応している]]といいます。
]FIG]

[16] [[RFC 2295]] は、従来の[[内容折衝]]は[[鯖]]に沢山の情報を送信しなければならず、
転送量が多いこと、[[プライバシー]]上の問題があることから、
すべての情報を送信せずとも[[クライアント]]側で[[最善の異体]]を選択できる[[透過内容折衝]]が有用であると主張しています。
ただし、[[異体リスト]]からいずれかの[[異体資源]]を選択して[[要求]]を送信させることにより、
[[プライバシー]]に関わる情報を収集することを完全には回避できないとも指摘しています。