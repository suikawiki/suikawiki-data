* 仕様書

[REFS[
- [1] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-7>
- [3] '''[CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-9.2>'''
]REFS]

* 意味

[4] [CODE(HTTP)@en[[[PROPPATCH]]]] [[メソッド]]は、[[要求URL]]によって識別される[[資源]]の[[特性]]を設定したり、削除したりすることを求めるものです [SRC[>>3]]。

[13] [[安全なメソッド]]ではありませんが、[[冪等メソッド]]です [SRC[>>3]]。

[2] [[書き込みロック]]の適用対象となります [SRC[>>1]]。

* 構文

[8] [[要求]]の [[payload body]] は、 [CODE(XMLe)@en[[[propertyupdate]]]]
[[要素]]でなければ[['''なりません''']] [SRC[>>3]]。

* 処理

[5] [[WebDAV]] に従う[[資源]]は、 [CODE(HTTP)@en[[[PROPPATCH]]]] [[メソッド]]および[[要素]]
[CODE(XMLe)@en[[[propertyupdate]]]]、[CODE(XMLe)@en[[[set]]]]、
[CODE(XMLe)@en[[[remove]]]] に対応しなければ[['''なりません''']] [SRC[>>3]]。

[6] この[[メソッド]]の処理は、[[アクセス制御]]の制約の対象となります[ SRC[>>3]]。 

[7] [[WebDAV]] に従う[[資源]]は、任意の[[死特性]]の設定に対応する[['''べきです''']] [SRC[>>3]]。

[9] [[鯖]]は、[[要求]]に含まれる指示を[[文書順]]に処理しなければ[['''なりません''']] [SRC[>>3]]。

[10] [[要求]]に含まれる指示はすべて実行するか、どれも実行しないかのいずれかでなければ[['''なりません''']]。
処理途中でエラーが発生したら、実行済みの処理はすべて戻してエラーを返さなければ[['''なりません''']]。 [SRC[>>3]]

[11] [[要求]]の [[payload body]] に従って処理を開始した場合 (そこまででエラーとならなかった場合) には、
[CODE(HTTP)[[[207]]]] [[応答]]を返さなければ[['''なりません''']] [SRC[>>3]]。

[14] [CODE(XMLe)@en[[[propstat]]]] [[要素]]の [CODE(XMLe)@en[[[status]]]]
[[要素]]では、[[クライアント]]は任意の [CODE(HTTP)[[[2xx]]]]、
[CODE(HTTP)[[[3xx]]]]、[CODE(HTTP)[[[4xx]]]]、[CODE(HTTP)[[[5xx]]]]
[[状態符号]]に対応できるべきですが、特に [CODE(HTTP)[[[200]]]]、
[CODE(HTTP)[[[403]]]]、[CODE(HTTP)[[[409]]]]、[CODE(HTTP)[[[424]]]]、
[CODE(HTTP)[[[507]]]] を用います [SRC[>>3]]。

[15] 保護された[[特性]]を変更しようとして [CODE(HTTP)[[[403]]]] エラーとなった場合には、
[[事前条件符号]] [CODE(HTTP)[[[cannot-modify-protected-property]]]]
を指定する[['''べきです''']] [SRC[>>3]]。

[12] [CODE(HTTP)@en[[[PROPPATCH]]]] [[要求]]への[[応答]]は[[キャッシュ不可能]]です [SRC[>>3]]。