* 仕様書

[REFS[
- [5] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-6.6>
- [12] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-7.7>
- [3] [CITE[UPnP Device Architecture 2.0]] ([TIME[2014-09-05 02:24:48 +09:00]] 版) <http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v2.0.pdf#page=94>
]REFS]

* 文脈

[4] [[HTTP]] [[要求]]で使うことができます [SRC[>>3]]。

* ロックタイムアウト

[6] [[ロック]]は[RUBYB[[[タイムアウト]]]@en[timeout]]を持つことができます [SRC[>>5]]。

[13] [[クライアント]]は[[ロック]]の作成や更新の際に [CODE(HTTP)@en[[[LOCK]]]] [[要求]]の
[CODE(HTTP)@en[[[Timeout:]]]] [[ヘッダー]]で[[タイムアウト]]を指定できます [SRC[>>5, >>12]]。

;; [CODE(HTTP)@en[[[LOCK]]]] も参照。

[14] しかし最終的には[[鯖]]が実際の[[タイムアウト]]の値を決定します。
[[鯖]]は [CODE(HTTP)@en[[[Timeout:]]]] [[ヘッダー]]を無視して構いません。 [SRC[>>5, >>12]]

;; [10] [[鯖]]は、[[クライアント]]が指定した値によく注意しておくと[RUBYB[良い]@en[advised]]です。
例えば[[アプレット]]は突然停止するかもしれないので小さな値を指定するでしょうし、
文書管理システムは長い値かもしれません。 [SRC[>>5]]

[7] [[タイムアウト]]は、[[ロック]]の満期までの[[秒]]数で指定します [SRC[>>5]]。

[8] [[タイムアウト]]の計測は[[ロック]]の更新の要求が成功したらリセットしなければ[['''なりません''']]。
それ以外ではリセットする[['''べきではありません''']]。 [SRC[>>5]]

[15] [[ロック]]の更新の[[要求]]に対する[[応答]]では、新しいタイムアウトの値を通知します [SRC[>>12]]。

[9] [[タイムアウト]]に達したら、当該[[ロック]]を [CODE(HTTP)@en[[[UNLOCK]]]]
[[要求]]が実行された場合と同様にして削除する[['''べきです''']] [SRC[>>5]]。

[11] [[クライアント]]は、[[タイムアウト]]が経過したからだけの理由で[[ロック]]が直ちに削除されたと仮定しては[['''なりません''']]。
逆に[[タイムアウト]]が経過していないからといって[[ロック]]がまだ存在していると仮定しては[['''なりません''']]。
[[クライアント]]はいつでも[[ロック]]が削除され得ると仮定しなければ[['''なりません''']]。 [SRC[>>5]]

[16] [[クライアント]]は、[[ロック]]の更新の[[要求]]がエラーとなった時、
[[ロック]]が更新されたと仮定しては[['''なりません''']] [SRC[>>12]]。

* 歴史

[1] [CITE@en[draft-cohen-gena-client-00 - General Event Notification Architecture Base: Client to Arbiter]]
( ([TIME[2014-06-15 05:42:57 +09:00]] 版))
<http://tools.ietf.org/html/draft-cohen-gena-client-00#page-7>

[2] [CITE@en[draft-cohen-gena-client-00 - General Event Notification Architecture Base: Client to Arbiter]]
( ([TIME[2014-06-15 05:42:57 +09:00]] 版))
<http://tools.ietf.org/html/draft-cohen-gena-client-00#section-8.4>