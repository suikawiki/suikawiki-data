[8] 事前条件の指定がある[[要求]]のことを、[DFN[[RUBYB[条件付き要求]@en[conditional request]]]]といいます。
[[鯖]]は事前条件が満たされる場合には[[要求メソッド]]で指定された処理を[[対象資源]]に対して実行しますが、
事前条件が満たされなければ処理は実行せずにエラーを返します。

[9] [[条件付き要求]]は、[[キャッシュ]]より新しい場合のみ[[資源]]を取得したい時や、
他者の編集との衝突に注意しつつ[[鯖]]にある[[資源]]を更新したい時などに使われます。

* 仕様書

[REFS[
- [3] '''[CITE@en[RFC 7232 - Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests]] ([TIME[2014-09-11 10:02:44 +09:00]] 版) <https://tools.ietf.org/html/rfc7232>'''
-- [10] [CITE@en[RFC 7232 - Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests]] ([TIME[2014-09-11 10:02:44 +09:00]] 版) <https://tools.ietf.org/html/rfc7232#section-3>
- [1] [CITE@en[RFC 7231 - Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content]] ([TIME[2014-06-07 01:55:45 +09:00]] 版) <https://tools.ietf.org/html/rfc7231#section-5.2>
]REFS]

* 意味

[4] [DFN[[RUBYB[[[条件付き要求]]]@en[conditional request]]]]は、
[[対象資源]]に[[要求メソッド]]の[[意味]]を適用する前に確認されるべき事前条件を示す[[ヘッダー]]をいくつか含む[[要求]]です
[SRC[>>3 1.]]。

[FIG(list)[
- [5] 条件付き [CODE(HTTP)@en[[[GET]]]] [[要求]]は、
[[HTTPキャッシュ]]の更新のための最も効率的な仕組みです [SRC[>>3 1.]]。
- [6] [CODE(HTTP)@en[[[PUT]]]] や [CODE(HTTP)@en[[[DELETE]]]]
のような状態を変更する[[要求メソッド]]では、並列に動作する別の[[クライアント]]の更新を誤って上書きしてしまう
「[[lost update]]」問題を防ぐために[[条件付き要求]]を使えます [SRC[>>3 1.]]。
]FIG]

[7] 事前条件として記述される資源のメタデータのことを、[[検証子]]といいます [SRC[>>3 2.]]。

* 条件付きヘッダー

[2] 次の[[要求ヘッダー]]は[DFN[[RUBYB[[[条件付き]]]@en[conditional]]]]に分類されています [SRC[>>1]]。
[FIG(list short)[
- [CODE(HTTP)@en[[[If-Match:]]]]
- [CODE(HTTP)@en[[[If-None-Match:]]]]
- [CODE(HTTP)@en[[[If-Modified-Since:]]]]
- [CODE(HTTP)@en[[[If-Unmodified-Since:]]]]
- [CODE(HTTP)@en[[[If-Range:]]]]
]FIG]

;; [11] これらは [[RFC 7232]] では[DFN[[RUBYB[事前条件]@en[precondition]]]]
[SRC[>>10]] ヘッダーと呼ばれています。