[1] [DFN[[CODE(ABNF)@en[[[protocol]]]]]] は、[[プロトコル]]の名前と[RUBY[版][バージョン]]を表す構文です。

* 仕様書

[REFS[
- [2] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#section-6.7>
- [9] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#section-2.6>
- [11] [CITE@en[RFC 7230 - Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing]] ([TIME[2014-06-07 01:59:35 +09:00]] 版) <https://tools.ietf.org/html/rfc7230#section-5.7.1>
]REFS]

* 文脈

[3] [CODE(ABNF)@en[[[protocol]]]] やそれに類する構文は、
次の場面で利用されます。

- [[プロトコルの版]] ([[開始行]])
- [CODE(HTTP)@en[[[Upgrade:]]]] [[ヘッダー]] [SRC[>>2]]
- [CODE(HTTP)@en[[[Via:]]]] [[ヘッダー]]の[[プロトコル]] [SRC[>>2]]
- [CODE(CGI)@en[[[SERVER_PROTOCOL]]]] [[メタ変数]]

[4] [CODE(ABNF)@en[[[product]]]] ([CODE(HTTP)@en[[[User-Agent:]]]], [CODE(HTTP)@en[[[Server:]]]],
[CODE(HTTP)@en[[[Via:]]]] の[[注釈]]) も類似した構文を採用していますが、
[[プロトコル]]ではなく[[製品]]を表すものとなっています。

* 構文

[5] [CODE(ABNF)@en[[[protocol]]]] は、[[プロトコル名]]のみか、または[[プロトコル名]]と[[プロトコル版]]を[CODE(char)[[[/]]]] で区切ったものです
[SRC[>>2]]。

[6] [[プロトコル名]]と[[プロトコル版]]は、いずれも[[字句]]です [SRC[>>2]]。

[FIG(railroad)[
= [[字句]]
= ?
== [CODE(char)[[[/]]]]
== [[字句]]
]FIG]

[7] 大文字と小文字の区別の有無は明記されておらず、区別するものとみられます。
[[HTTPの版]]では区別すると明記されています [SRC[>>9]]。

;; [8] 歴史的には、区別しないという解釈もありました。[[HTTPの版]]や
[CODE(ABNF)@en[[[SERVER_PROTOCOL]]]] の項を参照してください。

[10] [CODE(HTTP)@en[[[Via:]]]] では、[[プロトコル名]]が [CODE[[[HTTP]]]]
の場合、[[プロトコル名]]と [CODE(char)[[[/]]]] を省略できることになっています。
[[プロトコル版]]は省略できません。

[FIG(railroad)[
=?
== [[字句]]
== [CODE(char)[[[/]]]]
= [[字句]]
]FIG]

[12] [[HTTPの版]]では、[[プロトコル版]]の値に更に制限があります。

* プロトコルの一覧

[FIG[
,[[プロトコル]],[CODE(HTTP)@en[[[Upgrade:]]]],[CODE(HTTP)@en[[[Via:]]]],[[HTTPの版]]
,[CODE(HTTP)@en[[[HTTP/1.0]]]],×,○,○
,[CODE(HTTP)@en[[[HTTP/1.1]]]],? ,○,○
,[CODE(HTTP)@en[[[MRCP/2.0]]]],  ,  ,○
,[CODE(HTTP)@en[[[RTSP/1.0]]]],  ,  ,○
,[CODE(HTTP)@en[[[Secure-HTTP/1.4]]]],,,○
,[CODE(HTTP)@en[[[SIP/2.0]]]] ,  ,  ,○
]FIG] 
