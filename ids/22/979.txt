* 仕様書

[REFS[
- [6] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-6>
-- [1] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-6.7>
-- [2] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-6.8>
- [3] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-7>
]REFS]

* 性質

[5] [[書き込みロック]]の適用対象となります [SRC[>>3]]。

* 処理

[10] ある[[資源]]の [[URL]] に対する [CODE(HTTP)@en[[[LOCK]]]]
[[要求]]で新しい[[ロック]]が作られるなら、その[[資源]]は直接[[ロック]]されます。
なお [CODE(HTTP)@en[[[LOCK]]]] [[要求]]の時点で [[URL]] が[[資源]]に[[写像]]されていなければ、
新しい空の[[資源]]が作られて直接[[ロック]]されます。 [SRC[>>6]]

[11] 深さ無限の[[ロック]]により[[ロック]]されている[[コレクション]]は、
その[[メンバー]]である[[資源]]すべてが間接的に[[ロック]]されます。 [SRC[>>6]]

[8] [[ロック]]されている[[コレクション]]について新しい[[資源]]を[[メンバー]]とすると、
その[[資源]]も[[コレクション]]の[[ロック]]によって間接的に[[ロック]]しなければ[['''なりません''']]。
その[[資源]]は既に[[衝突]]する[[ロック]]を有していては[['''なりません''']]。 [SRC[>>6]]

[9] [[排他的ロック]]は、同じ[[資源]]の直接または間接のいかなる種類の[[ロック]]とも[[衝突]]します。
[[鯖]]は、ある[[資源]]において[[衝突]]する[[ロック]]を作っては[['''なりません''']]。 [SRC[>>6]]

[23] [[ロック]]を作成した [[principal]] は、その[[ロック]]の[[ロック作成者]]となります。
[[鯖]]は[[ロック]]を作成できる [[principal]] を制限しても構いません [SRC[>>6]]。

[19] [[ロック]]を作成すると、[[鯖]]によって[[ロックトークン]]が割り当てられます。
[[ロックトークン]]は[[応答]]の [CODE(HTTP)@en[[[Lock-Token:]]]]
[[ヘッダー]]と[[本体]]で[[クライアント]]に通知されます。

[24] [[ロック]]を作成すると、[[鯖]]は[[ロックタイムアウト]]の値を決めて計測を開始します。

* 関連

[4] [[WebDAV]] に従う[[資源]]は、 [CODE(HTTP)@en[[[LOCK]]]] [[メソッド]]に対応する場合、
[CODE(URI)@en[[[DAV:supportedlock]]]] [[特性]] [SRC[>>1]] と
[CODE(URI)@en[[[DAV:lockdiscovery]]]] [[特性]] [SRC[>>2]] に対応しなければ[['''なりません''']]。
