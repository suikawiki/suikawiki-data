[2] [CODE(HTTP)@en[[[Prefer:]]]] [[ヘッダー]]の[[好み字句]]
[DFN[[CODE(HTTP)@en[[[return]]]]]] は、[[応答]]で返すべき[[表現]]の種類を表すものです。

* 仕様書

[REFS[
- [1] [CITE@en[RFC 7240 - Prefer Header for HTTP]] ([TIME[2014-07-26 04:24:01 +09:00]] 版) <https://tools.ietf.org/html/rfc7240#section-4.2>
]REFS]

* 意味

[5] [[鯖]]は [CODE(HTTP)@en[[[POST]]]] や [CODE(HTTP)@en[[[PUT]]]] のような変更の[[要求]]を処理して成功した後に、
操作の状態を説明した[[表現]]を返すこともできますし、
変更後の[[資源]]自体の[[表現]]を返すこともできます。
どちらにするかは[[鯖]]が決めることですが、 [CODE(HTTP)@en[[[return]]]]
を指定することで[[クライアント]]の希望を伝えることができます。[SRC[>>1]]

* 構文

[3] [CODE(HTTP)@en[[[return]]]] には値が必要です。
値は [CODE(HTTP)@en[[[representation]]]] と [CODE(HTTP)@en[[[minimal]]]]
のいずれかです。[[引数]]はありません。 [SRC[>>1]]

[FIG(short list)[
- [CODE(HTTP)@en[[[representation]]]]
- [CODE(HTTP)@en[[[minimal]]]]
]FIG]

[7] 値は[[大文字・小文字不区別]]です [SRC[>>1]]。

* 処理モデル

[6] [CODE(HTTP)@en[[[Prefer:]] [[return]]]] に対応する[[起源鯖]]は、
指定された値に従って[[応答]]をどのような内容にするか決定することになります。

[8] [CODE(HTTP)@en[[[return]]=[[minmal]]]] と [CODE(HTTP)@en[[[return]]=[[representation]]]]
は排他的で、両方が適用できる場面はないはずです。両方が指定された場合、
両方共指定されなかったものとして処理することができます。 [SRC[>>1]]

;; [9] これは [CODE(HTTP)@en[[[Prefer:]]]] [[ヘッダー]]全体の処理モデル、
すなわち同じ[[好み字句]]が複数指定された場合に最初のもの以外は無視される、
というものと矛盾するようですが・・・。

[4] どちらを採用したかは、[[応答]]の [CODE(HTTP)@en[[[Preference-Applied:]]]]
[[ヘッダー]]で明示できます。