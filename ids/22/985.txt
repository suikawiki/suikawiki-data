* 仕様書

[REFS[
- [1] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-7>
- [3] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-7.6>
- [6] '''[CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-9.8>'''
]REFS]

* 意味

[7] [CODE(HTTP)@en[[[COPY]]]] [[メソッド]]は、[[要求URL]]によって識別される[[資源]]の複製を
[CODE(HTTP)@en[[[Destination:]]]] [[ヘッダー]]で識別される [[URL]] の[[資源]]に複製するものです [SRC[>>6]]。

[13] [[安全なメソッド]]ではありませんが、[[冪等メソッド]]です [SRC[>>6]]。

[2] [[書き込みロック]]の適用対象となります [SRC[>>1]]。

* 構文

[8] [CODE(HTTP)@en[[[Destination:]]]] [[ヘッダー]]を指定しなければ[['''なりません''']] [SRC[>>6]]。

* 処理

[10] [[要求URL]]によって識別される[[資源]]が[RUBYB[始点]@en[source]]、
[CODE(HTTP)@en[[[Destination:]]]] [[ヘッダー]]の [[URL]] によって識別される[[資源]]が[RUBYB[終点]@en[destination]]です [SRC[>>6]]。

[9] 正確な動作は始点となる資源に依存します [SRC[>>6]]。

[11] [[WebDAV]] に従う[[資源]]は [CODE(HTTP)@en[[[COPY]]]] [[メソッド]]に対応しなければ[['''なりません''']]。
しかし[[資源]]を複製できる保証はありません。 [SRC[>>6]]

[EG[
[12] 例えば同じ[[鯖]]にみえても、[[資源]]によって別の[[プログラム]]により制御されているかもしれません [SRC[>>6]]。
]EG]

[15] 始点が [[WebDAV]] に従う[[資源]]であり、[[コレクション]]でない場合、
始点資源とできるだけ近い状態と動作の[[資源]]を終点に作ります。
ただし始点と終点で[[鯖]]が管理できる範囲を超えて環境に違いがあるかもしれませんから、
完全に複製することはできないかもしれません。
完了後の一方に対する変更は他方には適用されない状態になります。 [SRC[>>6]]

[18] 終点が[[資源]]に[[写像]]されていない [[URL]] だった場合は、
[CODE(HTTP)@en[[[PUT]]]] [[要求]]と同様にして新しい[[資源]]を作成します。
[CODE(URI)[[[DAV:creationdate]]]] など[[資源]]の作成に関わる[[生特性]]も、
適切に設定する[RUBYB[べき]@en[should]]です。 [SRC[>>6]]

[16] 始点資源の[[死特性]]はすべて終点資源に複製する[['''べきです''']]。
始点資源の[[生特性]]も同様に動作する終点資源の[[生特性]]として複製する[['''べき''']]ですが、
必ずしも同じ値でなくても構いません。[[生特性]]を[[死特性]]に変換する[['''べきではありません''']]。 [SRC[>>6]]

;; [17] なお、存在しないことが意味を持つ[[生特性]]は終点資源には存在しない状態になることもあります [SRC[>>6]]。

[4] [[WebDAV]] に従う始点の[[資源]]が直接[[書き込みロック]]されていても、
[[ロック]]は複製しては[['''なりません''']] [SRC[>>3]]。

;; [5] 複製先の[[コレクション]]が[[ロック]]されていれば、
複製後にそれによって間接的に[[ロック]]状態となることはあります。

[14] [[応答]]は[[キャッシュ不可能]]です [SRC[>>6]]。