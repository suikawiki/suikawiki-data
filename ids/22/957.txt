[10] [[SHA-1]] の結果は20バイト = 160ビットです。

;; [11] [[SHA-1]] の結果を[[Base16]]符号化すると40バイトです。

* ダイジェストアルゴリズム [CODE(HTTP)[SHA]] (HTTP)

[2] [[ダイジェストアルゴリズム]] [DFN[[CODE(HTTP)@en[[[SHA]]]]]] は、
[[SHA-1]] を [[RFC 4648]] [[Base64]] で[[符号化]]したものを表します [SRC[>>1]]。

** 仕様書

[REFS[
- [1] [CITE@en[RFC 5843 - Additional Hash Algorithms for HTTP Instance Digests]] ([TIME[2014-09-14 20:44:32 +09:00]] 版) <http://tools.ietf.org/html/rfc5843#page-3>
]REFS]

** 歴史

[2] [[RFC 3230]] は、[[SHA-1]] を [[RFC 2045]] [[Base64]] で[[符号化]]したものを表すとして定義し、
[[IANA登録簿]]に登録していました [SRC[>>3]]。

[REFS[
- [3] [CITE@en[RFC 3230 - Instance Digests in HTTP]] ([TIME[2014-08-31 18:57:37 +09:00]] 版) <http://tools.ietf.org/html/rfc3230#page-7>
]REFS]

[FIG(quote)[
[FIGCAPTION[
[4] [CITE@ja[Windows XPをご利用のお客様へ - ヤフー株式会社]]
([TIME[2015-07-24 21:58:42 +09:00]] 版)
<http://docs.yahoo.co.jp/info/notice/sha1xp.html>
]FIGCAPTION]

> Yahoo! JAPANではこの勧告に従って、2015年10月から2015年12月にかけてHTTPS通信を行う際のSSLサーバー証明書をSHA-1証明書からSHA-2証明書に切り替える予定です。ほとんどのお客様には影響がございませんが、Windows XP SP2以前の基本ソフト(OS)ではSHA-2証明書を利用したHTTPS通信をサポートしていないため、その場合はHTTPS通信を行うサービスをご利用いただけなくなります。

]FIG]

* メモ

[5] [[SHA-1]] の実装と称するものの中には、生の[[バイト列]]を返すもの、
[[Base16]] を返すもの、 [[Base64]] を返すものなど色々あるので注意が必要です。
また [[Base64]] にもバリエーションがあるので、注意が必要です。

[EG[
[6] 例えば [[SHA-1]] + [[Base64]] の実装と称するものの中には、末尾の [CODE[=]]
(詰め文字) を省略する [[Base64]] の変種を採用するものもあります。
一方で[[プロトコル]]によっては、そのような省略を認めていないかもしれません。
]EG]

[7] [CITE@ja[自堕落な技術者の日記 : ChromeのSHA1証明書のアラート表示ポリシの問題点 - livedoor Blog(ブログ)]]
([TIME[2015-08-13 17:13:52 +09:00]] 版)
<http://blog.livedoor.jp/k_urushima/archives/1750289.html>

[FIG(quote)[
[FIGCAPTION[
[8] [CITE@ja-JP[Hot Pepper Beauty - お知らせ - 【SSL】ハッシュアルゴリズム「SHA-1」から「SHA-2」への移行について]]
([TIME[2015-08-14 18:42:05 +09:00]] 版)
<https://beauty.help.hotpepper.jp/app/answers/detailinfo/a_id/12312>
]FIGCAPTION]

> Webサーバーのデータの改ざんを検知するハッシュアルゴリズム「SHA-1」SSLサーバ証明書について、
> 脆弱性があることが確認されています。
> そのため、当社ではお客様の情報資産の安全性確保のため、現在使用している「SHA-1」から、
> より安全性の高い「SHA-2」への移行を行います。
> 本対応に伴いまして、一部のフィーチャーフォン(ガラケー)やWindows XP Service Pack 2 ( SP2 ) を
> ご利用のお客様は、 リクルートIDのログインフォームが表示されないなど、 サービスをご利用いただけない状態となります。
> ご利用の端末機種の適応について、ご不明な点がございましたら各端末の提供会社へのお問合せをお願いいたします。
> 対象のお客様にはご不便をおかけいたしますが、ご理解いただきますようお願いいたします。
> ▼実施日時
> 2015年3月26日

]FIG]


[9] [CITE@en[AWS Developer Forums: 重要なお知らせ: Product Advertising API のSSL認証ハッシュアルゴリズムのSHA256(SHA-2)への移行に関して]]
([TIME[2015-10-01 13:22:55 +09:00]] 版)
<https://forums.aws.amazon.com/ann.jspa?annID=3242>