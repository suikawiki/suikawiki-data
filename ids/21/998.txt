[3] [[HTTP]] における[DFN[[RUBYB[[[実効要求URL]]]@en[effective request URL]]]]は、
[[HTTP]] [[要求メッセージ]]から復元した[[要求]]されている [[URL]] です。

* 仕様書

[REFS[
- [2] [CITE@en[RFC 6797 - HTTP Strict Transport Security (HSTS)]] ([TIME[2014-06-02 05:16:10 +09:00]] 版) <http://tools.ietf.org/html/rfc6797#section-9>
- [1] [CITE@en[RFC 6797 - HTTP Strict Transport Security (HSTS)]] ([TIME[2014-06-02 05:16:10 +09:00]] 版) <http://tools.ietf.org/html/rfc6797#page-12>
]REFS]

* 定義

[4] [[HSTS]] では[RUBYB[実効要求URI]@en[effective request URI]]は次のように定義されています
[SRC[>>2]]。
[FIG[
- [5] [[要求行]]に指定されているのが [CODE(ABNF)@en[[[absoluteURI]]]] なら、
これが[[実効要求URI]]
- [6] [[要求行]]に指定されているのが [CODE(ABNF)@en[[[abs_form]]]] か [CODE[[[*]]]]
なら、次のような文字列が[[実効要求URI]]
-= [7] [[TCP]] なら [CODE(URI)@en[[[http:]]//]], [[TCP]] over [[SSL]] or [[TLS]]
なら [CODE(URI)@en[[[https:]]//]]
-= [8] [CODE(HTTP)@en[[[Host:]]]] に指定された[[ホスト]]と (あれば) [[ポート]]
-= [9] [[要求行]]に指定されていたのが [CODE(HTTP)[[[*]]]] 以外なら、
それ ([CODE(ABNF)@en[[[abs_form]]]])
-- [10] ただし [CODE(HTTP)@en[[[Host:]]]] がない場合は未定義
- [11] [[要求行]]に指定されているのが [CODE(ABNF)@en[[[authority]]]] なら、未定義
]FIG]

;; [12] >>11 を使うのは [CODE(HTTP)@en[[[CONNECT]]]] の時なので、 [[HSTS]]
とはあまり関係ありません。

[13] [[HTTP/1.1]] 仕様に従わない[[要求]]については定義も言及もされていません。
例えば[[非ASCII文字]]が含まれる場合は定義されていません。

* 比較

[14] [[比較]]は、 [[RFC 2616]] の定義によるとされています [SRC[>>2]]
([[HTTPにおけるURLの比較]]を参照)。ただし [[path]] が無い [[URL]]
と [CODE[[[/]]]] は異なるものとして扱わなければ[['''なりません''']] [SRC[>>2]]。
