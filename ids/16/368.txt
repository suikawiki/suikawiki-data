[22] [DFN[[RUBYB[[[ドメイン一致]]]@en[domain-match]]]]とは、文字列と[[ドメイン]]文字列が与えられた時、
両者が一致するか、文字列が[[ドメイン]]に属することをいいます。

* 仕様書

[REFS[
- [14] [CITE@en[RFC 6265 - HTTP State Management Mechanism]] ([TIME[2014-10-12 15:11:47 +09:00]] 版) <http://tools.ietf.org/html/rfc6265#section-5.1.3>
]REFS]

* 定義

[15] ある[[文字列]]は、次の条件を最低1つ満たすなら、与えられた[[ドメイン]]文字列と[[ドメイン一致]]します
[SRC[>>14]]。
[FIG(list)[
- [16] [[ドメイン]]文字列と当該文字列が同じである。
- [17] 次の条件をすべて満たす。
-- [18] [[ドメイン]]文字列が当該文字列の[[接尾辞]]となっている。
-- [19] 当該文字列における[[ドメイン]]文字と一致する部分の直前が [CODE[[[.]]]] である。
-- [20] 当該文字列は[[ホスト名]]である ([[IPアドレス]]ではない)。
]FIG]

;; [21] 両[[入力]]は予め[[小文字]]に正準化されていることが想定されています。

* 性質

[12] [[ドメイン一致]]は[[可換]]では''ありません'' [SRC[>>8, >>9]]。

* 歴史

[1] 2つの[[ホスト名]]は、次の条件のいずれかを満たす場合、[DFN[[RUBYB[[[ドメイン一致]]]@en[domain-match]]]]しているといいます。

([[RFC 2109]] の条件)
- [2] 共に[[IPアドレス]]であり、[[ホスト名]]文字列が完全に一致する
- [3] 共に [[FQDN]] であり、[[ホスト名]]文字列が完全に一致する
- [4] [[FQDN]] 文字列 [VAR[A]] は [CODE@en[[VAR[N]][VAR[B]]]] として表すことができ、もう一方の [VAR[B]] は [CODE@en[.[VAR[B']]]] として表すことができ、 [VAR[B']] も [[FQDN]] 文字列である
-- 例えば [VAR[x.y.com]] は [VAR[.y.com]] と[[ドメイン一致]]する
-- [VAR[x.y.com]] は [VAR[y.com]] とは[[ドメイン一致]]しない

([[RFC 2965]] の条件)
- [5] [[ホスト名]]文字列が一致する
- [6] [[FQDN]] 文字列 [VAR[A]] は [CODE@en[[VAR[N]][VAR[B]]]] として表すことができ、もう一方の [VAR[B]] は [CODE@en[.[VAR[B']]]] として表すことができ、 [VAR[B']] も [[FQDN]] 文字列である
-- 例えば [VAR[x.y.com]] は [VAR[.Y.com]] と[[ドメイン一致]]する
-- [VAR[x.y.com]] は [VAR[Y.com]] とは[[ドメイン一致]]しない

[7] [[RFC 2965]] では、[[大文字と小文字を区別しない]]で比較し[['''なければならない''']]とされています。

[REFS[
- [8] [DEL[[[RFC 2109]]]] ([[廃止]]済み)
-- [CSECTION@en[2. TERMINOLOGY]]
- [9] [[RFC 2965]]
-- [CSECTION@en[1. TERMINOLOGY]]
]REFS]

[10] [[IPアドレス]]の表記は一意ではありませんが、この条件に従うと異なる表記の実質同じ[[ホスト名]]は異なると判断されるようです。

* 関連

[13] [[ドメイン一致]]は[[ドメイン名]]に関する比較演算ですが、同様に [[path]]
に対する比較演算として [[path一致]]があります。

* メモ

[11] [[ドメイン名]]も最後に [CODE(char)[[[.]]]] を付けるとか、[[DNS]] 任せで一部省略したりとかしますが、
同様に異なる表記なら異なると判断されることになります。