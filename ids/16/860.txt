* 仕様書

[REFS[
- [10] [CITE@en-US-x-hixie[HTML Standard]] ([TIME[2017-02-20 18:15:56 +09:00]]) <https://html.spec.whatwg.org/#best-practices-for-in-page-editors>
]REFS]

* 意味

[6] [[編集ホスト]]は、[[編集可能文脈]]です。

* 作成

[5] 
[FIG(short list)[
- [CODE(HTMLa)@en[contenteditable]]
- [CODE(DOMa)@en[designMode]]
]FIG]

[11] [[著者]]は、[[editing host]] やこれを使って作成された[[要素]]において、
[CODE(CSS)@en[[[white-space]]: [[pre-wrap]]]] を設定する[RUBYB[べき]@en[[[encouraged]]]]です。
[SRC[>>10]]

;; [12] これは、 [CODE(CSS)@en[[[white-space]]: [[normal][white-space: normal]]]]
の場合に、[[利用者]]が複数個連続して[[空白]]を入力すると
[CODE[U+0020]] と [CODE[U+00A0]] が自動的に併用されて、 [CODE[U+00A0]]
のために[[行折り返し]]が不自然な表示となるためです。 [SRC[>>10]]

* 挙動

[2] [KBD[Enter]] を押すと、[[段落]]が改められます。

[3] [CODE(HTMLe)@en[div]] [[要素]]内であれば、または特に[[要素]]内になければ、
新たな [CODE(HTMLe)@en[div]] [[要素]]が挿入されます。

[4] 末尾で新しい[[段落]]が挿入されると、新しい[[段落]]の中身は
[CODE(HTMLe)@en[br]] [[要素]]1つだけとなります。

** 問題

[23] [[要素]]の境界を[[利用者]]がうまく扱う方法がありません。境界で入力したときにどちらに入るかは
[[Webブラウザー]]次第で、[[利用者]]が指定する手段がありません。

[26] [[コピペ]]や [[DnD]] でも境界のどちら側になるかは[[Webブラウザー]]次第です。
例えば [CODE(HTMLe)@en[a]] [[要素]]内に [CODE(HTMLe)@en[img]] [[要素]]だけがあるとき、
両者をまとめて他の位置に移動させる良い方法がありません。

[24] [[コピペ]]で中途半端に [[CSS]] の指定が [CODE(HTMLa)@en[style]] [[属性]]に保存されることがあります。
どういう条件で何が保存されるのかは摩訶不思議です。

[25] [[画像]]のサイズ変更の [[UI]] は [[IE]] や [[Firefox]] が実装していますが、
[[Chrome]] や [[Safari]] が実装していません。

* 選択子

[13] [CODE[:read-write]] と[[一致]]することがあります。

* 歴史

** 前史

[8] [[Web]] の流行が始まった90年代中頃、 [[Netscape Navigator Gold]] や
[[Microsoft FrontPage]]、[[ホームページビルダー]]といった [[WYSIWYG]]
型の [[HTMLエディター]]が登場しました。

しかしこの世代の製品は [[Webブラウザー]]とは別の独立した[[ソフトウェア]]として
[[HTML]] の編集機能を提供していました。 [[Netscape Navigator Gold]]
のように [[Webブラウザー]]と統合された製品も、 (内部的にどうなっていたのかは知りませんが、)
表示と編集は別々の機能で、表示中の文書を直接編集したり、編集機能を表示中の文書内に埋め込んだりすることはまだできませんでした。

[9] [[Microsoft Office]] は、独自の処理モデルを持った [[Web]] とは異なるソフトウェア群でしたが、
この時期に [[Web]] から色々な機能を取り入れました。 [[HTML]] の読み書きに加えて、
[[Web]] 風の [[URL]] を指定した[[ハイパーリンク]]のような機能も追加されていました。
[[ActiveX Document]] によって [[Internet Explorer]] の[[窓]]内に
[[Microsoft Office]] の文書を表示することもできました。こうした一連の機能群で
[[Microsoft]] が提示した世界観は、ある意味で後の時代の [CODE[contenteditable]]
のある [[Web]] を先取りしたものでした。 (現在の [[Google Docs]]
はそれが完全に [[Web]] 上に移ったものと理解できましょう。)

** 

[7] [CODE[contenteditable]] と [CODE[designMode]] も参照。

[1] [CITE@en[Web Applications 1.0 r5728 clarify the focusablity of editing hosts]]
( ([TIME[2010-12-31 12:50:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=5727&to=5728>