[18] [DFN[universalchardet]] は、[[文字]]の出現頻度の統計データを元に[[バイト列]]の[[文字コード]]を判定する手法とその実装です。

* 原典

[REFS[
- [1]
[DFN[[CITE[A composite approach to language/encoding detection]]]] ([[Shanjian Li]] 著, [TIME[2007-09-08 17:38:48 +09:00]] 版) <http://www.mozilla.org/projects/intl/UniversalCharsetDetection.html>
-- [29] 
移転確認 [TIME[2019-11-11T09:04:10.300Z]]
-- [30] 
[CITE[A composite approach to language/encoding detection]], [[Shanjian Li]], [TIME[2019-11-11 18:03:59 +09:00]] <https://www-archive.mozilla.org/projects/intl/universalcharsetdetection>
--- [31] 
[CITE[A composite approach to language/encoding detection]], [[Shanjian Li]], [TIME[2025-05-17T08:51:04.000Z]] <https://www-archive.mozilla.org/projects/intl/universalcharsetdetection>
- [41] 
[CITE[How to build standalone universal charset detector from Mozilla source]], [[Frank Yung-Fong Tang]], [TIME[2025-05-17T09:02:46.000Z]] <https://www-archive.mozilla.org/projects/intl/detectorsrc>


]REFS]


[32] 
当時は正常に表示されていたはずなのに現在 >>31 は[[文字化け]]しています。なんという皮肉でしょうか。
現在 [CODE[Content-Type:]] が [CODE[text/html; charset=UTF-8]]
とされていますが、実際には [CODE[windows-1252]] で[[符号化]]されているようです。
[TIME[2025-05-17T08:52:58.800Z]]


* 実装

[17] 本家 [[Mozilla]] の [[C++]] の実装の他、各言語への移植版が存在しています。

[REFS[

- [36] chardet 本家
-- [42] 
[CITE@en[gecko-dev/intl/chardet at 24978cfe7cef443392a56e0958a9d63a6cb93219 · mozilla/gecko-dev · GitHub]], [TIME[2025-05-17T09:11:30.000Z]] <https://github.com/mozilla/gecko-dev/tree/24978cfe7cef443392a56e0958a9d63a6cb93219/intl/chardet>
- [34] [CITE[Java port of Mozilla's Automatic Charset Detection algorithm.]], [TIME[2010-11-24T20:42:37.000Z]], [TIME[2025-05-17T08:55:03.700Z]] <https://jchardet.sourceforge.net/>
-- [35] >>36 の移植
- [33] universalchardet 本家
-- [43] 
[CITE@en[gecko-dev/extensions/universalchardet at 67d9eda26a48c9024492de5931478fe14daa2cd1 · mozilla/gecko-dev · GitHub]], [TIME[2025-05-17T09:24:08.000Z]] <https://github.com/mozilla/gecko-dev/tree/67d9eda26a48c9024492de5931478fe14daa2cd1/extensions/universalchardet>
-- [45] 
[TIME[平成23(2011)年][2011]]に
[CODE[UTF-32BE]],
[CODE[UTF-32LE]],
[CODE[X-ISO-10646-UCS-4-3412]],
[CODE[X-ISO-10646-UCS-4-2143]]
が削除されるなど、
[CITE[HTML Standard]] / [CITE[Encoding Standard]]
方面の動きと連動した機能削減が行われている。
-- [21] [CITE@en-US[mozilla-central: files]] ([TIME[2012-05-26 11:36:03 +09:00]] 版) <http://hg.mozilla.org/mozilla-central/file/tip/extensions/universalchardet/>
--- [44] 現在では新実装 (>>24) への置き換えのため中身がなくなっている
[TIME[2025-05-17T09:24:56.800Z]]
-- [2] [DEL[[CITE[seamonkey/extensions/universalchardet/src/base/]] ([TIME[2007-04-24 00:11:24 +09:00]] 版)<http://lxr.mozilla.org/seamonkey/source/extensions/universalchardet/src/base/>]]
-- [37] >>36 の置き換え
-[3]
[CITE@en[Universal Encoding Detector: character encoding auto-detection in Python]] ([TIME[2007-11-18 20:19:09 +09:00]] 版) <http://chardet.feedparser.org/>
-[4]
[CITE@ja[Universalchardet - やる気向上作戦]] ([TIME[2009-02-11 14:40:44 +09:00]] 版) <http://www.void.in/wiki/Universalchardet>
-[5]
[CITE@ja[RubyForge: Universal Encoding Detector: Project Info]] ([[Bruce Williams (http://codefluency.com), for Ruby Central (http://rubycentral.org)]] 著, [TIME[2009-03-15 11:44:11 +09:00]] 版) <http://rubyforge.org/projects/chardet>
-[7]
[CITE[自娱自乐的Emacser: 查看 universalchardet 高频字表的 perl 程序]] ([TIME[2009-02-25 12:16:07 +09:00]] 版) <http://wenbinhome.blogspot.com/2006/12/universalchardet-perl.html>
-[11] [CITE[juniversalchardet - Java port of universalchardet - Google Project Hosting]]
( ([TIME[2012-05-26 11:25:24 +09:00]] 版))
<http://code.google.com/p/juniversalchardet/>
-- [38] [CITE@en[Google Code Archive - Long-term storage for Google Code Project Hosting.]], [TIME[2025-05-17T08:59:51.000Z]] <https://code.google.com/archive/p/juniversalchardet/>
-- [39] >>33 の移植
-[13] [CITE[uchardet - universalchardet - Google Project Hosting]]
( ([TIME[2012-05-26 11:26:23 +09:00]] 版))
<http://code.google.com/p/uchardet/>
-[14] [CITE[nuniversalchardet - C# Port of UniversalCharDet - Google Project Hosting]]
( ([TIME[2012-05-26 11:26:34 +09:00]] 版))
<http://code.google.com/p/nuniversalchardet/>
- [22] [CITE[perl-web-encodings/lib/Web/Encoding/UnivCharDet.pod at master · manakai/perl-web-encodings · GitHub]] ([TIME[2013-05-03 09:26:53 +09:00]] 版) <https://github.com/manakai/perl-web-encodings/blob/master/lib/Web/Encoding/UnivCharDet.pod>
-- [40] >>33 の移植
- [12] 
[CITE@en[GitHub - dcramer/chardet: Forked version of chardet]], [TIME[2025-05-17T04:07:06.000Z]] <https://github.com/dcramer/chardet>
- [23] <https://github.com/sigmavirus24/charade>
-- [15] 
[CITE@en[GitHub - sv24-archive/charade: NO LONGER MAINTAINED. USE chardet/chardet. Fork of chardet to support Python 2 and 3 in one code base.]], [TIME[2025-05-17T04:07:18.000Z]] <https://github.com/sv24-archive/charade>
- [16] 
[CITE@en[GitHub - chardet/chardet: Python character encoding detector]], [TIME[2025-05-17T04:07:28.000Z]] <https://github.com/chardet/chardet>
-- [26] 
[CITE@en[Detection of windows-1250 · Issue #87 · chardet/chardet]], [TIME[2025-05-17T04:15:34.000Z]] <https://github.com/chardet/chardet/issues/87>
-- [27] 
[CITE@en['''['''WIP''']''' Retrain SBCS Models and some refactoring by dan-blanchard · Pull Request #99 · chardet/chardet · GitHub]], [TIME[2025-05-17T04:16:05.000Z]] <https://github.com/chardet/chardet/pull/99>
- [8] 
[CITE@en[GitHub - aadsm/jschardet: Character encoding auto-detection in JavaScript (port of python's chardet)]], [TIME[2025-05-16T10:08:45.000Z]] <https://github.com/aadsm/jschardet>
- [24] 
[CITE@en[GitHub - hsivonen/chardetng: A character encoding detector for legacy Web content.]], [TIME[2025-05-17T04:08:29.000Z]] <https://github.com/hsivonen/chardetng>


]REFS]

[20] 次に示すのは独立した実装ではなく、他の実装のラッパーとして機能するものです。

[REFS[
-[6]
[CITE@en[Whatpm — Perl Modules for Web Hypertext Application Technologies (beta)]] ([TIME[2009-01-12 11:36:16 +09:00]] 版) <http://suika.fam.cx/www/markup/html/whatpm/readme#whatpm-charset-universalchardet>
- [19] [CITE[xyzzy.lisp.universalchardet/site-lisp/uchardet at master · southly/xyzzy.lisp.universalchardet · GitHub]] ([TIME[2012-05-26 11:32:30 +09:00]] 版) <https://github.com/southly/xyzzy.lisp.universalchardet/tree/master/site-lisp/uchardet>
]REFS]

* 標準化

[10] UNIVCHARDET 自体は1実装に過ぎず、何らかの標準でも、標準によって義務付けられた実装でもありませんが、
[[Web Applications 1.0]] は[[文字符号化]]の決定算法の中で出現頻度分析に基づく推定の利用を認めており、
その具体例として >>1 を挙げています。

* HTML5 Charset 判定算法で失敗する例

[9] 
[[HTML documents misinterpreted by charset sniffer]] を参照してください。

* メモ


[25] 
>>24 は諸々改善されていることがドキュメントにあるが、近年の [[Webブラウザー]]の、
旧来[[文字コード]]を切り捨てていく方向に則ってるのが不安要素だなあ。


[28] 
>>27 は1バイト符号化の判定に大きな変更を加えている (従来未対応の文字コードへの対応を含む。)
が、マージされずに長年放置されている。

