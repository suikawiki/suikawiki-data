[2] [DFN[[CODE(URI)@en[[[ni:]]]]]] は、対象となる情報の[[ハッシュ値]]を使って[[識別]]する
[[URL scheme]] です。

;; [4] 「[CODE(URI)@en[[[ni]]]]」は Named Information を表します [SRC[>>3]]。

* 仕様書

[REFS[
- [3] [CITE@en[RFC 6920 - Naming Things with Hashes]] ([TIME[2014-06-02 05:17:24 +09:00]] 版) <http://tools.ietf.org/html/rfc6920>
]REFS]

* 構文

[6] [CODE(URI)@en[[[ni:]]]] [[URL]] は、 [[URL scheme]] の後に、
[CODE[[[//]]]]、 [[authority]]、 [CODE[[[/]]]]、
[[ダイジェストアルゴリズム]]、
[CODE[[[;]]]]、
[[ダイジェスト値]]、
[CODE[[[?]]]]、
[[query]]
が続きます。ただし [[authority]] と [CODE[[[?]]]] 以下は省略可能です。 [SRC[>>3]]

[FIG(railroad)[
= [CODE(URI)@en[[[ni:]][[//]]]]
= ?
== [[authority]]
= [CODE[[[/]]]]
= [[ダイジェストアルゴリズム]]
= [CODE[[[;]]]]
= [[ダイジェスト値]]
= ?
== [CODE[[[?]]]]
== 名前=値
== *
=== [CODE[[[&]]]]
=== 名前=値
]FIG]

[10] [[ダイジェストアルゴリズム]]と[[ダイジェスト値]]は、
この [[URL]] によって表される[[オブジェクト]]についてのものです。
[[ダイジェストアルゴリズム]]は、 [[IANA]] に登録された名前を使って表します [SRC[>>3]]。

[14] [[ダイジェストアルゴリズム]]と[[ダイジェスト値]]は、
どちらもそれぞれ1文字以上の [[RFC 3986]] [CODE(ABNF)@en[[[unreserved]]]]
でなければなりません [SRC[>>3]]。構文上[[パーセント符号化]]が認められていません。

[11] [[ダイジェスト値]]は、 [[RFC 4648]] [[base64url]] で[[符号化]]したもの
([[詰め文字]] [CODE[[[=]]]] なし) でなければ[['''なりません''']] [SRC[>>3]]。

* authority

[7] [[authority]] は、[[URL]] によって表される[[オブジェクト]]にアクセスするのを補助するものです
[SRC[>>3]]。

;; [18] [CODE(URI)@en[[[http:]]]] などの多くの [[URL scheme]] とは違って、
[[authority]] は [CODE(URI)@en[[[ni:]]]] [[URL]]
においては重要なものとはされていません。 [[authority]] の値に関わらず、
[[ダイジェスト]]の部分で [[URL]] によって識別されるものは決まります
([[ハッシュ値URLの比較]]を参照)。

[8] [[authority]] は省略可能です [SRC[>>3]]。その場合 [CODE(URI)@en[[[ni:]][[///]]]]
から始まる [[URL]] となります。 ([CODE[[[//]]]] は省略できません。)

[9] [[authority]] は [[RFC 3986]] の構文が参照されています [SRC[>>3]] が、
それ以上の制約や意味や処理モデルは定義されていません。

* query

[12] [[query]] は [[RFC 2616]] の [CODE(URI)@en[[[http:]]]] [[URL]]
のものと同様とされています [SRC[>>3]]。[CODE[名前=値&名前=値]]のような構文を指している [SRC[>>3]]
とありますが、 [[RFC 2616]] にはそのような規定がなく
(実際にはそのような構文は [[HTTP]] ではなく、 [[HTML]] で用いられている
[CODE(MIME)@en[[[application/x-www-form-urlencoded]]]] のものです。)、
何が認められているのか曖昧となっています。

[15] [[query]] では[[パーセント符号化]]が認められています。特に[[非ASCII文字]]は、
[[UTF-8]] で[[パーセント符号化]]しなければ[['''なりません''']] [SRC[>>3]]。

* 相対 URL

[16] [[相対URL]]として用いられることも想定されているようです。 [[RFC]] には次のような例があります。

[FIG(quote)[
[PRE(HTML code)[
        <base href="ni://example.com">
...
        <p>Please check <a href="sha-256;f4OxZX...">this document</a>.
]PRE]
]FIG]

;; [17] ところでこの [CODE(HTMLe)@en[[[base]]]] [CODE(HTMLa)@en[[[href]]]]
は >>6 の構文に適合していません。

* 比較

[5] [[ハッシュ値URLの比較]]を参照してください。

* 処理モデル

[13] 実装は、 [[URL]] の送信、受信、処理に当たって [[URL]] と[[資源]]の対応関係の[RUBYB[整合性]@en[integrity]]を検査して構わない [SRC[>>3]]
とされています。ここでいう[[整合性]]が具体的に何を指しているのかはよくわかりません。

* 歴史

[1] [CITE@en[Subresource Integrity]]
( ([TIME[2014-03-15 05:47:19 +09:00]] 版))
<http://www.w3.org/TR/2014/WD-SRI-20140318/>