[29] [DFN[[[旧暦]]]]は、明治5年まで[[日本]]で用いられていた[[太陰太陽暦]]と、
それを過去あるいは明治6年以降に延長した[[暦]]です。

[36] 改暦から100年以上経過した現在、日常生活では使われなくなりましたが、
一部の行事や[[カレンダー]]の記述、[[六曜]]の根拠などとして根強く使われ続けています。

* 呼称

[132] 全体的には「[[旧暦]]」と呼ぶのが最も一般的です。
[[当用漢字字体表]]以前は「[DFN[[[舊暦]]]]」とも表記されました。

[133] 明治5年までのものを「[[天保暦]]」と呼ぶなど、実施時期ごとの「版」
にそれぞれの名前が付けられています。 (明治6年以降の[[旧暦]]を[[天保暦]]と呼ぶのは不正確かもしれません。)

[134] 曖昧でない時には種別である「[[太陰暦]]」、より正確には「[[太陰太陽暦]]」
で呼ぶこともあります。「[[陰暦]]」と略されることもありました。
実際にはこれらには中国の旧暦なども含まれます。

;; [148] 後述の通り明治初期の公式な[[暦]]には[[旧暦]]が併記されていました。
その欄名は「[[舊暦]]」でした。[[官報]]上では[[陰暦]]と呼ばれることもありました。
[[沖縄返還]]前の[[琉球政府]]の法令では「[[旧暦]]」と呼ばれていました。

[135] [[英語]]では「Kyuureki」、「Japanese Calendar」、「Japanese Classic Calendar」
などと呼ばれることがありますが、広く通用するのかは不明です。

;; [136] 本来「日本の暦」(や「和暦」) という名前で参照されるべきものは、
明治5年までは[[旧暦]]、明治6年以降は[[グレゴリオ暦]]となるものでしょう。

* 定義

[19] [[平山清次]]が「天保暦の準據せる暦法原則を今の術語によりて記載」[SRC[>>18]]
したものが現在の[[旧暦]]の説明の原典と考えられています [SRC[>>22, >>20]]。

[FIG(quote)[
>(一) 太陽と太陰の黄經の相等しき時刻を''朔''とす。 (定朔)
>(二) 各宮の原點に太陽の在る時刻を''中氣''とす。 (定氣)。
>(三) ''暦日''は京都に於ける地方眞太陽時午前零時に始まる。
>(四) ''暦月''は朔を含む暦日に始まる。
>(五) 暦月中冬至を含むものを十一月、春分を含むものを二月、夏至を含むを五月、秋分を含むを八月とす。
>(六) ''閏''は中氣を含まざる暦月に置く。中氣を含まざる暦月必ずしもみな閏月とならず。
>
明治五年改暦以後同四十二年迄、太陽暦に附して頒布したる太陰暦も亦、此原則に據りたるものなり。但し第三項の日の始は明治二十年迄は東京に於ける地方平均太陽時午前零時を採り、以後は中央標準時午前零時に改めたり。

[FIGCAPTION[
[CITE[暦法及時法]] 二 太陰暦 [SRC[>>18]] 46ページ
]FIGCAPTION]
]FIG]

[23] >>22 は更に
[FIG(quote)[
> (七) 月番号に跳びがあってはならない
]FIG]
... との「当然の条件」を補っています [SRC[>>22]]。 
(この条件は[[旧暦2033年問題]]に関わります。)

;; [150] 計算で用いる[[時刻]]については、[[日本標準時]]も参照。

[REFS[
- [18] [CITE[暦法及時法 - 平山清次 - Google ブックス]] ([TIME[2014-09-06 14:08:26 +09:00]] 版) <http://books.google.co.jp/books?id=88p29z44kzoC&hl=ja&pg=PP5#v=onepage&q&f=false>
- [20] [CITE@ja[suchowan's UniWiki Calendar/When/Exe/暦説明/本編/日本/補足/天保暦置閏法の謎]] ([TIME[2014-09-06 14:21:11 +09:00]] 版) <http://hosi.org/u/wiki.cgi?Calendar%2FWhen%2FExe%2F%E6%9A%A6%E8%AA%AC%E6%98%8E%2F%E6%9C%AC%E7%B7%A8%2F%E6%97%A5%E6%9C%AC%2F%E8%A3%9C%E8%B6%B3%2F%E5%A4%A9%E4%BF%9D%E6%9A%A6%E7%BD%AE%E9%96%8F%E6%B3%95%E3%81%AE%E8%AC%8E>
]REFS]

;; [21] >>18 は昭和8年/1933年12月5日発行 [SRC[>>18]] ですが、第2章末には
「[[日本百科大辭典]]より轉載」と注記があり、同著者の原稿の再出版と思われます。
また >>22 は“平山清次 (1912) の『日本百科大辭典』「太陰暦」の項”
(第6巻、三省堂出版) から同文を引いています。
[[暦文協]]見解 [SRC[>>121]] も「旧暦ルールの条文化」を1912年の平山による日本百科大辭典第6巻としています。

* 公的な旧暦

[16] 明治42年/1909年の[[暦]]までは[[陰暦]] ([[旧暦]]) が併記されていました [SRC[>>17]]。

[38] 最近まで[[海上保安庁]]が旧暦を発表していたと言及されることがありますが、
1997年から2010年までの情報が[[Webサイト]]に掲載されている [SRC[>>37]]
のみであり、[[旧暦]]を管理していたというよりは参考情報として掲載していただけのようです。

[66] 現在日本国内では「公式」な[[太陰太陽暦]]の計算は行われていません [SRC[>>65]]。
明治43年/1910年以降のカレンダー等で公式とされているものは、
[[旧暦]]の計算法に従い独自に計算されたものです。

[REFS[
- [17] [CITE@ja[暦Wiki/歴史/旧暦併記をめぐる議論 - 国立天文台暦計算室]]
( ([TIME[2014-06-25 06:18:53 +09:00]] 版))
<http://eco.mtk.nao.ac.jp/koyomi/wiki/CEF2BBCB2FB5ECCEF1CABBB5ADA4F2A4E1A4B0A4EBB5C4CFC0.html>
- [143] [CITE@ja[国立国会図書館デジタルコレクション - 官報. 1908年09月30日]] ([TIME[2015-11-20 10:14:19 +09:00]] 版) <http://dl.ndl.go.jp/info:ndljp/pid/2950927/5>
- [37] [CITE[1997-2000年の新暦・旧暦対応表]] ([TIME[2007-05-21 02:14:11 +09:00]] 版) <http://www1.kaiho.mlit.go.jp/KOHO/reki/kyuu9700.htm>
- [65] [CITE@ja[質問3-4)「旧暦」ってなに? | 国立天文台(NAOJ)]] ([TIME[2014-08-11 08:13:58 +09:00]] 版) <http://www.nao.ac.jp/faq/a0304.html>
]REFS]

[FIG(quote)[
[FIGCAPTION[
[144] [SRC[>>143]]
]FIGCAPTION]

> 文部省告示第二百三十五號
> 明治四十二年暦ヨリ陰暦ノ月日ヲ記載セス
> 明治四十一年九月三十日 文部大臣 小松原英太郞
]FIG]

;; [145] 実際には明治42年暦にも記載されていました [SRC[>>17]]。

* 過去

[67] [[太陽暦]]採用以前に日本で用いられた[[太陰太陽暦]]にはいくつかの種類があります。
過去に用いられていたものは、それぞれの年の時点で採用されていた暦の計算法に基づき政府
([[朝廷]]や[[幕府]]の担当機関) が計算したものです。

[33] 現在「旧暦」という場合、[[天保暦]]実施以前の日付は当時の日付なのか、
[[天保暦]]を過去に延長したものなのか不明瞭です。
本来は当時実施されていた暦に基づくべきですが、
現在公開されている変換ソフトウェアやサービスの類の中には、
現在から前後数十年程度しか扱えないものや、扱えても現在の計算方法を過去に延長しただけのものも多々あります。

[68] 変換ツールには計算だけで対応関係を記述しようとしているものもありますが、
数度の改暦や、多数の例外処理 (意図的あるいは誤りによるその年限りの処理)
に対応しなければならず、正確に実装するのは難しいようです。

;; 差異については後述。

[48] 768年/神護景雲2年3月が[[大の月]]か[[小の月]]かは議論があり、
[[日本暦日原典]]の版により掲載されている値が異なっています [SRC[>>49, >>50]]。

[52] 旧暦1884年4月と旧暦1908年9月は計算上の値と当時の実際の旧暦とが異なっています 
[SRC[>>13]]。

[REFS[
- [49] [CITE@ja[日本暦日原典 - Wikipedia]] ([TIME[2014-08-08 07:31:31 +09:00]] 版) <http://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E6%9A%A6%E6%97%A5%E5%8E%9F%E5%85%B8#cite_note-1>
- [50] ([TIME[2014-09-08 09:56:43 +09:00]] 版) <http://koara.lib.keio.ac.jp/xoonips/modules/xoonips/download.php/AN00100104-20050900-0057.pdf?file_id=57950>
]REFS]

** 地方の暦

[34] [[中世]]には[[地方]]で[[京暦]]とは異なる[[暦]]が発行されていて、
日付がずれていることがありました。

[76] [RUBY[[[鹿島暦]]][かしまごよみ]]は、
[[京暦]]では平安時代末期から室町時代中期まで行われていた[[閏8月退閏]]が1604年/慶長9年まで引き続き行われていて、
[[京暦]]とは[[閏月]]の配置が異なっていました [SRC[>>22]]。
1564年/永禄9年、1585年/天正13年、1604年/慶長9年が該当します [SRC[>>91]]。

[77] 1374年/応安7年旧暦3月は[[京暦]]と[[三島暦]]で異なっています [SRC[>>25, >>22, >>81]]。
[[京暦]]3月4日は[[三島暦]]3月3日でした [SRC[>>22, >>81]]。

[78] [[京暦]]系の[[大宮暦]]は1583年/天正11年閏1月を置き、
[[三島暦]]系の「美濃の暦」では1582年/天正10年閏12月を置いたため混乱が起こり、
[[織田信長]]が[[京暦]]を廃止しようと試みたようで ([[本能寺の変]]により実現せず)、
[[大宮暦]]は発行停止となる騒動がありました。 [SRC[>>81, >>22, >>84, >>89, >>90]]

[82] 旧暦1617年/元和3年6月にも日付が1日ずれていました [SRC[>>22, >>81]]。

[85] >>78 や >>82 は地域によって、また[[朝廷]]と[[武家]]や[[幕府]]との間で用いている[[暦]]が違って特に混乱が生じていたようです。

[87] 1468年/応仁2年には[[南都暦]]が1日ずれていたようです [SRC[>>86]]。

[88] 1563年/永禄6年には[[大坂暦]]と[[丹生暦]]の相違により[[大坂暦]]が禁止となっています
[SRC[>>86]]。

;; [108] なお、[[源平の戦い]]の時代や[[南北朝時代]]、[[幕末]]期には[[政権]]が分立し、
地域や支持勢力により異なる[[元号]]が同時期に使われていましたが、
[[暦]]が異なっていたという話は聞きません。

[REFS[
- [91] [CITE@ja[改暦 - Wikipedia]] ([TIME[2014-08-20 19:39:26 +09:00]] 版) <http://ja.wikipedia.org/wiki/%E6%94%B9%E6%9A%A6#.E9.96.8F8.E6.9C.88.E3.82.92.E5.B7.A1.E3.82.8B.E3.80.8C.E6.94.B9.E6.9A.A6.E3.80.8D>
- [81] [CITE[年表]] ([TIME[2014-09-10 14:36:27 +09:00]] 版) <http://www.geocities.jp/mishimagoyomi/nenpyo/nenpyo.htm>
- [89] [CITE@ja[戦国時代 : 暦問題の再燃]] ([TIME[2014-09-10 15:02:28 +09:00]] 版) <http://sengoku-walker.blog.jp/archives/51381717.html>
- [90] [CITE@ja[天正十年改暦問題 - Consume Mind]] ([TIME[2014-09-10 15:04:54 +09:00]] 版) <http://seesaawiki.jp/consume_mind/d/%C5%B7%C0%B5%BD%BD%C7%AF%B2%FE%CE%F1%CC%E4%C2%EA>
- [83] [CITE@ja[宣明暦 - Wikipedia]] ([TIME[2014-08-10 07:03:08 +09:00]] 版) <http://ja.wikipedia.org/wiki/%E5%AE%A3%E6%98%8E%E6%9A%A6#.E6.97.A5.E6.9C.AC_2>
- [84] ([TIME[2013-08-28 06:46:20 +09:00]] 版) <http://yamanoue.ne.jp/locker/no_008/hen/hen.htm>
- [86] [CITE@ja[国立国会図書館 「日本の暦」―年表]] ([TIME[2013-02-07 01:01:42 +09:00]] 版) <http://www.ndl.go.jp/koyomi/etc/04_history.html>
]REFS]

** 琉球

[79] [[琉球王国]]は1372年の[[中国]]への[[朝貢]]以来、
[[中国]]の[[暦]]を使っていました。
1465年に福建で造暦法を学び、以後琉球国内で[[暦]]が作られるようになりました。 [SRC[>>22]]

[14] 1682年から1879年/明治12年まで発行されていた[[暦]]は[RUBY[[[琉球暦]]][りゅうきゅうれき]]と呼ばれています。
1718年以降は[CITE[選日通書]]という題名で発行されています。
正式には[[清]]の[[時憲暦]]を用いることとなっていましたが、
その到着までの便宜用という名目で[[琉球暦]]を発行して用いていたようです。
内容は[[時憲暦]]と同じで、[[北京]]の時刻により計算されていました。 [SRC[>>22]]

;; [125] [[太陰太陽暦]]は他の条件が同じでも、計算に用いる[[時刻]]により 
([[暦]]を求める[[経度]]により) 異なるものが得られます。

[80] [[琉球藩]]を廃して[[沖縄県]]が設置されたことで公式には[[選日通書]]は発行されなくなりましたが、
その後も[[石垣島]]では[CITE[選日通書]]という[[時憲暦]]による[[略暦]]が発行されていたようです。
[SRC[>>22]]

[5] [[米国]]統治下の[[琉球政府]]によって定められた[[祝祭日]]として、
[[お盆の日]]が[[旧暦]]の[[7月15日]]とされていました。

;; [6] [[琉球政府]]は正式な[[旧暦]]を決定していたのでしょうか?

;; [124] >>6 確かな情報は得られていませんが、当時の法令や議事録を検索する限り、
[[旧暦]]は自明なものとされていたようにみえます。

[REFS[
- [146] [CITE@ja[琉球王朝の頃、どのような暦を使っていたか知る手掛かりとなる資料があるか。また、その暦は薩摩藩と関係が... | レファレンス協同データベース]] ([[国立国会図書館]] 著, [TIME[2015-11-21 19:01:06 +09:00]] 版) <http://crd.ndl.go.jp/reference/modules/d3ndlcrdentry/index.php?page=ref_view&id=1000085357>
]REFS]

;; [15] [[琉球の祝祭日]]も参照。

* 旧暦2033年問題

[92] >>19 の規則では2033年の[[月]]をうまく決められない問題があります。
これは旧暦2033年問題などと呼ばれ、[[旧暦]]の欠陥としてしばしば話題に取り上げられています。
国の機関が既に[[旧暦]]を決定しておらず、2033年問題に関与しないことを
[[Webサイト]]上で表明していたため、 (単に定まらないということでなく、
決める権威が存在しないため) 混乱が危惧されていました。

;; [147] [[旧暦]]を表記しない[[カレンダー]]でも[[六曜]]の記載があることは少なくありません。
[[六曜]]は[[旧暦]]の月番号から決まりますので、深刻な問題です。

[26] >>121 は2033年を「7月→8月→9月→10月→11月→閏11月→12月→2034年正月」としています。
2033年の[[旧暦]]を示した変換表等の中ではこれを採用するものが多いように思われます
([DFN[閏11月案]])。[[暦文協]]が調査した出版済み[[万年暦]]でも、
閏11月案を採用するものが多いようです [SRC[>>127]]。

[128] 他に閏7月案、閏8月案、2034年閏正月案などが提示されていました [SRC[>>127]]。

[30] [[qreki]] (>>9) は対処を諦めており、
[[2033年]]は「7月→閏7月→8月→9月→10月→閏11月→12月→2034年正月」となります。

[129] 2015年8月28日に[[一般社団法人日本カレンダー暦文化振興協会]] ([[暦文協]])
は、閏11月案を採用するべきとの見解を発表しました [SRC[>>127]]。
[[暦文協]]は民間団体ですが、多くのカレンダー業者等が参加し、
[[国立天文台]]その他学術機関の主要研究者が役員となっており、
[[旧暦]]の根拠たる権威は十分にありそうです。

[130] なお、2033年については閏11月案を採用することとしていますが、
[[置閏法]]の選択は相当先まで問題にならないとして、決定を先送り [SRC[>>127]]
しています。

[REFS[
- [1] [CITE@ja[旧暦2033年問題について]]
( ([TIME[2013-09-19 06:29:34 +09:00]] 版))
<http://eco.mtk.nao.ac.jp/koyomi/topics/html/topics2014.html>
- [3] [CITE@ja[旧暦2033年問題 - Wikipedia]]
( ([TIME[2013-11-21 17:02:54 +09:00]] 版))
<http://ja.wikipedia.org/wiki/%E6%97%A7%E6%9A%A62033%E5%B9%B4%E5%95%8F%E9%A1%8C>
- [56] ([TIME[2011-04-30 02:22:14 +09:00]] 版) <http://www.asahi-net.or.jp/~jc1y-ishr/Kyuureki/2033_Chuuki.html>
- [127] [CITE@ja[2033年旧暦閏月問題の見解 - 平成27年(2015)8月28日(金)発表 | 一般社団法人日本カレンダー暦文化振興協会]] ([TIME[2015-10-14 11:47:25 +09:00]] 版) <http://www.rekibunkyo.or.jp/year2033problem.html>
]REFS]

* 誤差

[72] 1947年の[[グレゴリオ暦]]3月23日から始まる[[月]]と[[グレゴリオ暦]]4月21日から始まる[[月]]は、
それぞれ[[旧暦]]閏2月、3月とも計算できますが、[[神宮暦]]では[[旧暦]]3月と[[閏]]3月としています
[SRC[>>70]]。

[73] [[グレゴリオ暦]]1969年8月13日から始まる[[月]]は[[神宮暦]]では[[旧暦]]閏7月とされていますが、
7月の誤りと考えられています [SRC[>>70]]。

[24] 自転速度や誤差により[[旧暦]]に影響する可能性がある日として、
2033年問題以外に次の日が指摘されています。

[FIG(list)[
- 2017年旧暦2月朔日
-- 2月26日ではなく2月27日となる「可能性が (極めて少ないが) ある」[SRC[>>121]]
- 2051年旧暦10月朔日
-- 11月3日ではなく11月4日となる「可能性がある」 [SRC[>>121]]
- 2074年旧暦7月朔日
-- 8月22日ではなく8月23日となる「可能性がある」 [SRC[>>121]]
- 2097年の旧暦2096年12月朔日
-- 1月14日ではなく1月13日となる「可能性がある」 [SRC[>>121]]
]FIG]

[FIG(quote)[
[FIGCAPTION[
[151] [CITE[旧暦を取得する Web API]]
([TIME[2012-03-21 23:30:31 +09:00]] 版)
<http://api.sekido.info/qreki?output=usage>
]FIGCAPTION]

[FIG(quote)[
> 本スクリプトの計算精度については、暦計算研究会編の「新こよみ便利帳」に記載の新旧対照表で、2000年から2020年までを確認したところ、2017年2月26日~同3月27日までが、旧暦・六曜表示に誤差のあることが確認されています。

[FIGCAPTION[
旧暦計算ライブラリ(Perlによる旧暦計算プログラム)
<http://www3.biwako.ne.jp/~nobuaki/qreki/index.html>
]FIGCAPTION]
]FIG]

]FIG]

[131] [[旧暦]]は天体観測の結果により定まるため、遠い将来の暦を正確に推測するのは、
困難です。

* 対照表と変換ツール

[95] >>94 に445年から2100年までのすべての日の[[旧暦]]と[[先発グレゴリオ暦]]の対応の一覧表があります。
以降で紹介する対照表や変換ツールで日付が異なる箇所はすべて[CITE[[[日本暦日原典]]]]に従っています。

[REFS[
- [94] データファイル: <https://raw.githubusercontent.com/manakai/data-locale/master/data/calendar/kyuureki-map.txt>
- [137] 説明: [CITE@en[data-locale/calendar-kyuureki.txt at master · manakai/data-locale]] ([TIME[2015-11-15 00:31:22 +09:00]] 版) <https://github.com/manakai/data-locale/blob/master/doc/calendar-kyuureki.txt>
]REFS]

** 文献

[106] [CITE[[[三正綜覧]]]] [SRC[>>107]] は西暦紀元前214年以来の和暦、
中国暦、ユリウス暦、グレゴリオ暦の対応表です。
[CITE[[[日本暦日原典]]]]出版以前は規範性の高い対照表として用いられていました。
[[近代デジタルライブラリー]]で閲覧できます。

[31] [CITE[[[日本暦日原典]]]] [SRC[>>25, >>41]] には445年から1872年までのデータが掲載されており、
「新旧暦対照表の中でも最も信頼性が高いもの」[SRC[>>27]]
とされており、多くの書籍や研究、対照表で参照されています [SRC[>>41]]。
大半はデータですが、後半の「暦法編」に日本の暦について詳しい説明があります。

[75] [CITE[[[日本暦日原典]]]]は第4版まで出版されていて、
改版の度に新たな研究成果による修正が加えられています。

[74] [CITE[[[暦の百科事典]]]] [SRC[>>69]] には[[暦]]に関連する記事多数の他、
593年-2100年の[[旧暦]]のデータが掲載されています。
1872年までは[CITE[[[日本暦日原典]]]] (>>31) 第3版に基づいています [SRC[>>69]]。

[32] [CITE[[[暦の大事典]]]] [SRC[>>22]] (2014年初版第1刷) 
には日本を含む各地の暦についてかなり詳細な解説があります。
巻末に593年-2000年のデータが掲載されています。

[64] [CITE[[[日本暦日便覧]]]]には692年-1872年のデータが掲載されています [SRC[>>63]]。

[71] [CITE[20世紀暦―曜日・干支・九星・旧暦・六曜]] [SRC[>>70]] と
[CITE[21世紀暦―曜日・干支・九星・旧暦・六曜]] [SRC[>>121]] は、
それぞれ20世紀と21世紀の[[旧暦]]のデータを掲載している書籍です。
[CITE[20世紀]]は官暦 (「太陽暦」「明治暦」「大正暦」「昭和暦」)
および「神宮暦」を出典としていますが、原典にないデータは編集部によって補っています
[SRC[>>70]]。

[109] [[海上保安庁]]は1997年から2010年までの情報を[[Webサイト]]に掲載しています 
[SRC[>>37]]。

[51] [[Webサイト]] [CITE[和暦(わごよみ)]] [SRC[>>47]] の対照表は、
[[日本暦日原典]]の計算式を元に、
その注記等に基づき修正を加えたものです [SRC[>>40]]。
637年から889年は[[日本暦日原典]]の「進朔可能性大」の注記に基づき[[日本暦日原典]]とは異なる値を採用しているようです。

[46] その他多くの対照表が出版、公開されています [SRC[>>13, >>93]]。

[REFS[
- [107] [CITE@ja[三正綜覧 - Wikipedia]] ([TIME[2014-08-12 09:01:16 +09:00]] 版) <http://ja.wikipedia.org/wiki/%E4%B8%89%E6%AD%A3%E7%B6%9C%E8%A6%A7>
- [25] [CITE[Amazon.co.jp: 日本暦日原典: 内田 正男: 本]] ([TIME[2014-09-06 15:12:56 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/463900091X/wakaba1-22/>
- [41] [CITE@ja[日本暦日原典 - Wikipedia]]
( ([TIME[2014-08-07 05:04:09 +09:00]] 版))
<http://ja.wikipedia.org/wiki/%E6%97%A5%E6%9C%AC%E6%9A%A6%E6%97%A5%E5%8E%9F%E5%85%B8>
- [22] [CITE[Amazon.co.jp: 暦の大事典: 岡田 芳朗, 神田 泰, 佐藤 次高, 高橋 正男, 古川 麒一郎, 松井 吉昭: 本]] ([TIME[2014-09-10 13:46:09 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/4254102372/wakaba1-22/>
- [69] [CITE[Amazon.co.jp: 暦の百科事典: 暦の会: 本]] ([TIME[2014-09-06 15:30:05 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/4404013396/wakaba1-22/>
- [63] [CITE[増補日本暦日便覧 全3巻 - 株式会社汲古書院      古典・学術図書出版]] ([TIME[2014-09-09 12:47:56 +09:00]] 版) <http://www.kyuko.asia/book/b9258.html>
- [70] [CITE[Amazon.co.jp: 20世紀暦―曜日・干支・九星・旧暦・六曜: 日外アソシエーツ編集部: 本]] ([TIME[2014-09-10 13:56:03 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/4816915141/wakaba1-22/>
- [121] [CITE[Amazon.co.jp: 21世紀暦―曜日・干支・九星・旧暦・六曜: 日外アソシエーツ編集部: 本]] ([TIME[2014-09-06 15:12:56 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/481691630X/wakaba1-22/>
- [13] [CITE[こよみのページ]] ([[M.Suzuki]] 著, [TIME[2014-09-07 14:39:02 +09:00]] 版) <http://koyomi8.com/directjp.cgi?http://koyomi8.com/kyuureki.htm>
- [47] [CITE[和暦(わごよみ)]] ([TIME[2009-07-11 13:08:47 +09:00]] 版) <http://www.wagoyomi.info/>
-- [40] [CITE[和暦(わごよみ) 注記]]
( ([TIME[2011-04-02 13:32:50 +09:00]] 版))
<http://www.wagoyomi.info/note.html>
- [93] [CITE[旧暦/グレゴリオ暦対照表]] ([TIME[2014-01-03 09:31:04 +09:00]] 版) <http://www.asahi-net.or.jp/~jc1y-ishr/Kyuureki/>
]REFS]

** ソフトウェア

[9] [[qreki]] [SRC[>>8]] というスクリプトが色々な言語に移植されて広く使われています。
このスクリプトは[[先発グレゴリオ暦]] (0年あり) を入力とし、
[[旧暦]] ([[中央標準時]]に基づく先発天保暦?) と[[六曜]]を出力としています。

;; [[qreki]] の項に派生ソフトウェアの一覧があります。

[61] [[qreki]] は[[旧暦]]の定義に基づき計算しているようです。 ドキュメントによると、
[CITE[[[暦の百科事典]]]] [SRC[>>69]] により出力を検査しています [SRC[>>27]]。

[35] [[WHEN.EXE]] [SRC[>>39]] は[[旧暦]]を含む様々な暦の表示・変換に対応しています。
[CITE[[[暦の百科事典]]]] [SRC[>>69]] (1986) と[CITE[[[日本暦日原典]]]] [SRC[>>25]]
第4版 (1992) に基づいています [SRC[>>39]]。ドキュメントは[CITE[[[暦 (日本史小百科)]]]]
[SRC[>>28, >>62]]や[CITE[[[日本暦日便覧]]]] [SRC[>>63]] も参照しています [SRC[>>39]]。

[55] [CODE(perl)@en[[[DateTime::Calendar::Japanese]]]] [SRC[>>53]] は 
[[Perlモジュール]]の実装ですが、依存モジュールの非互換変更により動作しなくなっているようです。
>>54 はそれが修正されているようで、動作します。 [TIME[2014-09-08T14:21:58.200Z]]

[118] [CODE(perl)[Kyuureki]] [SRC[>>117]] は >>95 の変換表を使った[[先発グレゴリオ暦]]と[[旧暦]]の変換用の[[Perlモジュール]]です。

[120] [CODE[kyuureki.js]] [SRC[>>119]] は >>95 の変換表を使った[[先発グレゴリオ暦]]と[[旧暦]]の変換用の
[[JavaScript]] ライブラリーです。

[139] [CITE[ruby 和暦ライブラリ]] [SRC[>>138]] は、 >>95 の変換表を使った[[旧暦]]対応を含む
[[Ruby]] ライブラリーです。

[110] その他各言語のソフトウェアやライブラリー、Web アプリケーションなどが存在します
[SRC[>>58]]。

[REFS[
- [39] [CITE[when2]]
( ([TIME[2005-07-03 10:00:00 +09:00]] 版))
<http://hosi.org/a/when/when2.html#2>
-- [42] [CITE@ja[suchowan's UniWiki Calendar/When/Exe/暦説明/本編/日本]]
( ([TIME[2014-09-07 06:05:56 +09:00]] 版))
<http://hosi.org/u/wiki.cgi?Calendar%2FWhen%2FExe%2F%E6%9A%A6%E8%AA%AC%E6%98%8E%2F%E6%9C%AC%E7%B7%A8%2F%E6%97%A5%E6%9C%AC>
- [8] [CITE[QRSAMPの詳細情報 : Vector ソフトを探す!]] ([TIME[2014-09-05 03:38:32 +09:00]] 版) <http://www.vector.co.jp/soft/dos/personal/se016093.html>
-- [27] [CITE[旧暦計算サンプルスクリプト Rev 1.1 説明書]] ([TIME[2008-02-08 08:59:26 +09:00]] 版) <http://api.sekido.info/qreki-doc>
- [54] [CITE@en[lestrrat/DateTime-Calendar-Japanese]] ([TIME[2014-09-08 14:20:36 +09:00]] 版) <https://github.com/lestrrat/DateTime-Calendar-Japanese>
-- [53] [CITE[DateTime::Calendar::Japanese - search.cpan.org]] ([TIME[2014-09-08 11:26:31 +09:00]] 版) <http://search.cpan.org/~dmaki/DateTime-Calendar-Japanese-0.06001/lib/DateTime/Calendar/Japanese.pm>
- [58] [CITE[AJD4JP 日本専用カレンダー処理 Javaクラスライブラリ]] ([TIME[2014-05-30 02:48:52 +09:00]] 版) <http://ajd4jp.sourceforge.jp/>
-- [59] [CITE[AJD4JP 新暦と旧暦、干支、六曜、九星 日本専用カレンダー処理 Javaクラスライブラリ]] ([TIME[2014-05-30 02:48:10 +09:00]] 版) <http://ajd4jp.sourceforge.jp/lscd.html>
-- [60] [CITE[LunisolarYear (AJD4JP 1.3.1.2014 API)]] ([TIME[2014-05-30 01:00:50 +09:00]] 版) <http://ajd4jp.sourceforge.jp/api/ajd4jp/LunisolarYear.html>
- [117] [CITE@en[wakaba/perl-kyuureki]] ([TIME[2014-09-12 12:54:16 +09:00]] 版) <https://github.com/wakaba/perl-kyuureki>
- [119] [CITE@en[wakaba/js-kyuureki]] ([TIME[2014-09-13 06:44:32 +09:00]] 版) <https://github.com/wakaba/js-kyuureki>
- [138] [CITE@en[sugi/wareki]] ([TIME[2015-11-15 00:34:58 +09:00]] 版) <https://github.com/sugi/wareki>
]REFS]

** 比較

[98] 各対照表・変換ツールの出力は多くの日付に差異があります。
>>96、>>97 はそのうちのいくつかと[[先発グレゴリオ暦]]との対応関係が異なる部分を表にしたものです。
>>96 から特に差異が大きいものを除外したのが >>97 です。

[REFS[
- [96] [CITE[Comparison of Japanese Calendar tables]] ([TIME[2014-09-11 06:40:25 +09:00]] 版) <http://rawgit.com/manakai/data-locale/staging/data/calendar/kyuureki-diff-all.html>
- [97] [CITE[Comparison of Japanese Calendar tables]] ([TIME[2014-09-11 06:39:34 +09:00]] 版) <http://rawgit.com/manakai/data-locale/staging/data/calendar/kyuureki-diff-tables.html>
]REFS]

[111] 各対照表等のカバーする範囲は様々です。開始時期としては神武天皇1年、
推古天皇1年、大化元年、江戸時代初期などがあります。終了時期としては明治5年末、
出版日前後、2100年などがあります。ソフトウェアによっては過去または未来に無限に計算できるものもあります。
逆に20世紀や21世紀の前後十数年程度しか対応しないものもあります。
表にしてもソフトウェアにしても、実際に旧暦が用いられていた時期から離れるほど、
対応関係は怪しいものとなりますし、実用性も低いと思われます。

[113] 変換ソフトウェアの多くは、過去や未来の広範囲をカバーしていても、
そのうち正しい値を出力できるのはごく一部の時期に限られているようです。
特に[[天保暦]]の計算規則に日付を当てはめているだけのような実装は、
過去に実施された暦と多くの年でずれが生じています。
計算式のみで旧暦とグレゴリオ暦の変換を行うのは不可能です。

[114] 古代の日付は研究者間でも議論があり、[CITE[[[日本暦日原典]]]]だけでも版によって異なる箇所があります。
それを引用または孫引きした対照表や変換ソフトウェア、あるいはそれ以外の研究成果から訂正を加えたものなど様々なバリエーションが存在しています。現状では古代の日付の変換は信頼できるものと考えない方が良いでしょう。

[116] 近世の暦は当時のものが現存することもあり、どの対照表も同じ値になっているようです。
江戸時代最初期までは地方の暦が異なることがあったようですが、
いずれも[[京暦]]を採用することで一致しているようです。

[115] 明治6年の改暦後しばらくして旧暦の併記も廃止されているものの、
その後の日付はほとんどの対照表で値が一致しているようです。
2033年問題も、閏11月を置き他は順に配置することでほぼ一致しています。

[112] 表によっては西暦をグレゴリオ暦で表記しているものとユリウス暦で表記しているものがあり、
注意が必要です。

* 中国暦との差異

[140] 日本の旧暦は中国の暦を輸入したものでしたが、日本本土 (琉球を除く。)
の暦は中国での計算方法の改訂に時折追随しつつ、
日本での観測結果に基づき独自に計算したものですから、
中国の暦とは一致しないこともありました。

[142] 明治22年/1889年 (日本は改暦後) の官報は、
[[清]]国の暦と日本の[[陰暦]]が異なる旨の注意を促しています [SRC[>>141]]。

;; [[東京天文台]]と清国[[順天府観象台]]の経度が23度17分異なっていました [SRC[>>141]]。

[45] >>44 によると、近年でも中国の[[旧暦]]と日本の[[旧暦]]が異なることに気付かずに中国の[[旧暦]]を日本で出版することがあるようで、注意が必要です。

[REFS[
- [141] [CITE@ja[国立国会図書館デジタルコレクション - 官報. 1889年12月26日]] ([TIME[2015-11-20 09:36:04 +09:00]] 版) <http://dl.ndl.go.jp/info:ndljp/pid/2945199/3>
- [44] [CITE[旧暦の日付が違う?(2001年の騒動)(No.0150)]] ([[M.Suzuki]] 著, [TIME[2014-08-20 21:56:08 +09:00]] 版) <http://koyomi8.com/reki_doc/doc_0150.htm>
]REFS]

* メモ

[REFS[
- [28] [CITE[Amazon.co.jp: 暦 (日本史小百科): 広瀬秀雄: 本]] ([TIME[2014-09-09 12:44:17 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/4772500545/wakaba1-22/>
- [62] [CITE[Amazon.co.jp: 暦 (日本史小百科): 広瀬 秀雄: 本]] ([TIME[2014-09-09 12:44:33 +09:00]] 版) <http://www.amazon.co.jp/exec/obidos/ASIN/4490202172/wakaba1-22/>
- [2] [CITE@ja[旧暦 - Wikipedia]]
( ([TIME[2013-10-26 03:57:10 +09:00]] 版))
<http://ja.wikipedia.org/wiki/%E6%97%A7%E6%9A%A6>
]REFS]

[4] [CITE@ja[国立天文台 | 質問3-5)「旧暦」は現在の暦より季節に合っているの?]]
( ([TIME[2013-04-18 02:18:46 +09:00]] 版))
<http://www.nao.ac.jp/faq/a0305.html>

[7] [CITE@ja[Wikipedia:表記ガイド - Wikipedia]]
( ([TIME[2014-08-30 10:54:34 +09:00]] 版))
<http://ja.wikipedia.org/wiki/Wikipedia:%E8%A1%A8%E8%A8%98%E3%82%AC%E3%82%A4%E3%83%89#.E5.B9.B4.E6.9C.88.E6.97.A5.E3.83.BB.E6.99.82.E9.96.93>

[10] [CITE@ja[和暦(宣明暦)について 【OKWave】]]
( ([TIME[2014-09-05 04:01:25 +09:00]] 版))
<http://okwave.jp/qa/q3758502.html>

[11] [CITE[幕末期の暦と時刻の違いによる混乱 - かつて日本は美しかった]]
( ([TIME[2013-07-30 14:34:15 +09:00]] 版))
<http://d.hatena.ne.jp/jjtaro_maru/20130104/1357288107>

[12] [CITE@ja[暦Wiki/歴史 - 国立天文台暦計算室]]
( ([TIME[2014-06-25 06:18:53 +09:00]] 版))
<http://eco.mtk.nao.ac.jp/koyomi/wiki/CEF2BBCB.html>

[43] [CITE[正倉院文書調査 syoho15-saiho]]
( ([TIME[2014-09-07 06:13:32 +09:00]] 版))
<http://www.hi.u-tokyo.ac.jp/publication/syoho/15/saiho_shousouin%20monjo.html>

[57] [CITE[鎌倉時代の暦日変更]]
( ([TIME[2010-12-18 01:44:57 +09:00]] 版))
<http://www.asahi-net.or.jp/~jc1y-ishr/Kyuureki/Kamakura_Rekijitsuhenkou2.html>

[99] [CITE[新暦と旧暦を対照できる資料を調べる | 調べ方案内 | 国立国会図書館]]
( ([TIME[2014-09-11 09:01:57 +09:00]] 版))
<https://rnavi.ndl.go.jp/research_guide/entry/theme-honbun-400108.php>

[100] [CITE@ja[公卿類別譜(公家の歴史)-和暦・西暦対照表〔インデックス〕]]
( ([TIME[2014-09-11 09:05:27 +09:00]] 版))
<http://park.geocities.jp/okugesan_com2/>

[101] [CITE@ja[月の大小 - CyberLibrarian]]
( ([TIME[2013-09-19 08:51:13 +09:00]] 版))
<http://www.asahi-net.or.jp/~ax2s-kmtn/ref/month_ls.html>

[102] [CITE@ja[西暦・和暦対照表 - CyberLibrarian]]
( ([TIME[2014-05-12 05:52:44 +09:00]] 版))
<http://www.asahi-net.or.jp/~ax2s-kmtn/ref/year_jw.html>

[103] [CITE[「和暦-西暦変換」エクセルの詳細情報 : Vector ソフトを探す!]]
( ([TIME[2014-09-11 09:13:07 +09:00]] 版))
<http://www.vector.co.jp/soft/winnt/edu/se497750.html>

[104] ( ([TIME[2014-08-08 09:56:52 +09:00]] 版))
<http://www.media.saigaku.ac.jp/bulletin/pdf/vol1/human/08_yuasa.pdf>

[105] ( ([TIME[2006-12-12 06:51:44 +09:00]] 版))
<http://ir.lib.hiroshima-u.ac.jp/metadb/up/kiyo/AN10113157/nk_19_37.pdf>

[FIG(amazon)[
旧暦
]FIG]

[FIG(quote)[
[FIGCAPTION[
[122] [CITE@ja[公卿類別譜(公家の歴史)-和暦・西暦対照表〔インデックス〕]]
([TIME[2015-06-25 09:17:49 +09:00]] 版)
<http://park.geocities.jp/okugesan_com2/>
]FIGCAPTION]

> 本表とウィキペディアの相違箇所。
> 延暦9年2月・3月
> 延暦10年4月・5月
> 大同2年9月・10月
> 弘仁元年10月・11月
> 弘仁9年4月・5月
> 弘仁14年9月・10月

]FIG]


[FIG(quote)[
[FIGCAPTION[
[123] [CITE@ja[一般社団法人日本カレンダー暦文化振興協会]]
([TIME[2015-06-24 16:39:58 +09:00]] 版)
<http://www.rekibunkyo.or.jp/activity.html>
]FIGCAPTION]

> 平成26年4月4日(金)第1回暦文協2033年問題を考える公開討論会「2033年旧暦閏月問題解決に向けてのシンポジウム」は、盛況のうちに終了いたしました。
> 

]FIG]


[FIG(quote)[
[FIGCAPTION[
[126] [CITE@ja[2033年旧暦閏月問題の見解 - 平成27年(2015)8月28日(金)発表 | 一般社団法人日本カレンダー暦文化振興協会]]
([TIME[2015-10-14 11:47:25 +09:00]] 版)
<http://www.rekibunkyo.or.jp/year2033problem.html>
]FIGCAPTION]

> 2033年旧暦閏月問題の見解 平成27年(2015)8月28日(金)発表
> 平成27年(2015)8月に開催された第5回総会で発表の「2033年旧暦閏月問題」における、当協会の見解は以下の通りです。

]FIG]

[FIG(quote)[
[FIGCAPTION[
[149] [CITE[qreki.plについて]]
([TIME[2001-04-05 13:49:24 +09:00]] 版)
<http://homepage2.nifty.com/sophia0/qrekidisp.html>
]FIGCAPTION]

> 西暦2224年度がおかしくなるそうです。高野さんは中気の判断に問題があると自らおっしゃってますが、私は「天保暦の限界かな」とも思います。

]FIG]

