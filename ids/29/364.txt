[3] [DFN[DOM 4.1]] は、 [[W3C]] の [[WPWG]] が [[WHATWG]] [[DOM Standard]]
を[[コピペ]]して独自に編集した[[仕様書]]です。

[7] [[W3C]] 関係者以外には特に意味がなく、無視するべきものです。

* 内容

[17] [CITE[DOM Standard]] と似た内容ですが、細部に違いがあります。
何が違うのか、意図は何なのかはよくわかりません。

[18] [CITE[DOM Standard]] 参照。

* 開発体制や WHATWG との関係

[16] [[HTML 5.0]] と似たようなものです。 [[HTML 5.1]] や [CITE[DOM Standard]] を参照。

* 歴史

[6] [[W3C]] が [[WHATWG]] の[[仕様書]]の[[コピペ]]をするに至った経緯は、
[CITE[DOM Standard]] や [[HTML 5.0]] を参照。

[FIG(quote)[
[FIGCAPTION[
[134] [CITE@en[Welcome new WebPlat editors]]
([[Léonie Watson]]著, [TIME[2016-10-23 22:30:26 +09:00]])
<https://lists.w3.org/Archives/Public/public-webapps/2016OctDec/0013.html>
]FIGCAPTION]

> Tobie Langel (IE) as editor for WebIDL, Sangwhan Moon (IE) as editor for 
Web Workers and HTML, Yongsheng Zhu (Alibaba) as editor for DOM, and 
Brandon Jones (Google) as editor for Gamepad API.

]FIG]

[135] [CITE@en[Fwd: Updating the DOM specification]]
([[chaals@yandex-team.ru]]著, [TIME[2017-01-01 14:11:27 +09:00]])
<https://lists.w3.org/Archives/Public/public-webapps/2017JanMar/0000.html>

[FIG(quote)[
[FIGCAPTION[
[1] [CITE@en[w3c/dom: DOM Standard]]
([TIME[2017-01-02 11:35:11 +09:00]])
<https://github.com/w3c/dom>
]FIGCAPTION]

> Plan for DOM 4.1
> TBD...

]FIG]


[2] [CITE@en[whatwg's commit list outside of DOM 4.1 Working Draft · Issue #15 · w3c/dom]]
([TIME[2017-01-02 11:35:38 +09:00]])
<https://github.com/w3c/dom/issues/15>

[FIG(quote)[
[FIGCAPTION[
[5] [CITE@en[Add ShadowDOM support from WHATWG-DOM · Issue #13 · w3c/dom]]
([TIME[2017-01-02 11:41:15 +09:00]])
<https://github.com/w3c/dom/issues/13>
]FIGCAPTION]

> If W3C DOM is updated to match implementations (and kept up-to-date) on things like this, then we could reference DOM4 instead of WHATWG-DOM. 

]FIG]


[4] [CITE@en[Publish First Public WD for "4.1" · Issue #91 · w3c/dom]]
([TIME[2017-01-18 12:53:39 +09:00]])
<https://github.com/w3c/dom/issues/91>

[8] [CITE@en[added a new draft for DOM4.1]]
([[siusin]]著, [TIME[2017-01-17 01:06:40 +09:00]])
<https://github.com/w3c/dom/commit/1a1b6378d92455cd3eb071f3159eefe4e8a2ceee>

[9] [CITE@en[remove historical documents]]
([[siusin]]著, [TIME[2016-12-06 02:32:05 +09:00]])
<https://github.com/w3c/dom/commit/6f4b5abf128295934489c6e00661aaffb7ebe5f5>

[10] [CITE@en[Commits · w3c/dom]]
([TIME[2017-01-18 12:56:51 +09:00]])
<https://github.com/w3c/dom/commits/dom4.1>

[11] [CITE@en[split the DOM4 document]]
([[siusin]]著, [TIME[2017-01-12 03:09:27 +09:00]])
<https://github.com/w3c/dom/commit/e1c8d230a5f5dc10f08ec1a5c88b5a85ef3a6335>

[12] [CITE[HTML Standard]] とは違って [CITE[DOM Standard]] は長くないし
[[WHATWG]] 版と [[W3C]] 版でそんなに内容が違わない ([[W3C]] 版が古いことを除けば。)
し [[Bikeshed]] で書かれているのに、わざわざ [CITE[HTML Standard]] の劣化[[コピペ]]の
[[HTML 5.2]] と同じように[[章]]ごとに分割するんですね。元のままにしておけば [[git]]
で [[merge]] も [[cherry-pick]] もできたはずなのに、どうしても[[人間]]の温もりが感じられる手動マージにこだわりたいのですかね・・・。

[13] [CITE@en[CfC: DOM 4.1 to FPWD]]
([[chaals@yandex-team.ru]]著, [TIME[2017-01-17 16:22:36 +09:00]])
<https://lists.w3.org/Archives/Public/www-dom/2017JanMar/0009.html>

[14] [CITE@en[converted to .bs document]]
([[siusin]]著, [TIME[2017-01-23 11:09:30 +09:00]])
<https://github.com/w3c/dom/commit/e3d54cd79b22328572736eaeac213362dd4babff>

[15] [CITE@en[Re: CfC: DOM 4.1 to FPWD]]
([[chaals@yandex-team.ru]]著, [TIME[2017-01-27 22:34:35 +09:00]])
<https://lists.w3.org/Archives/Public/www-dom/2017JanMar/0014.html>

[19] [CITE@en[Update acknowledgements]]
([[chaals]]著, [TIME[2017-02-14 03:58:42 +09:00]])
<https://github.com/w3c/dom/commit/9b3d5875b0e17da5af19b98c75e846d4958ab6d2>

[20] [[HTML 5.1]] の[[謝辞リセット事件]]で懲りてなかったのか・・・

[21] [CITE@en[Call for Consensus - DOM 4.1 to FPWD]]
([[chaals@yandex-team.ru]]著, [TIME[2017-03-07 21:47:59 +09:00]])
<https://lists.w3.org/Archives/Public/public-webapps/2017JanMar/0018.html>

[22] [CITE@en[Update README]]
([[chaals]]著, [TIME[2017-02-27 20:14:36 +09:00]])
<https://github.com/w3c/dom/commit/935312a04cdf93d78d4a7df5ff7a8f07f314e705>

[23] [CITE@en[update to relevant history]]
([[chaals]]著, [TIME[2017-02-28 03:07:54 +09:00]])
<https://github.com/w3c/dom/commit/1c70199be8e55e2d85038644fb793e17fc9cef6f>

[FIG(quote)[ >>23
> 
[PRE[
 +  Around 2009 some employees of Opera software began to write a new version of a DOM specification,
 +  which was then worked on by the "Web Hypertext Application Technology Working Group".
 +  In November 2013 W3C produced a W3C First Public Working draft based on this work,
 +  and after subsequent development that became the W3C Recommendation DOM 4, in November 2015.
]PRE]
]FIG]

[24] 素直に [[WHATWG]] に触れているなんて珍しい! なんで通称の [[WHATWG]]
じゃなくてわざわざ展開形にして書くのか謎だし、ここだけ引用符で括るのも謎だし、
正確には 2008年から開発が始まっているけど Around だからまあ良いでしょう。

[25] [[DOM4]] になるものが最初に [[W3C]] から出版されたのが[TIME[2010年10月][2010-10]]、
[[DOM4]] という名前になったのが [TIME[2011年9月][2011-09]]なのに、
なぜか [[FPWD]] が[TIME[2013年11月][2013-11]]ということになっています。

この前年、 [[W3C]] [[WebApps WG]] の [[DOM]] 開発陣が [[WHATWG]] に移動したため、
[[DOM]] 仕様はほとんど放置状態でした。 [[DOM]] が [[W3C勧告]]にならなければ困る
[[W3C]] [[HTML WG]] は、 [[WebApps WG]] から [[DOM]] を引き取って自力で
[[W3C勧告]]化することにしました [WEAK[(自力で、といっても例によって[[コピペ]]して独自編集する、という意味ですが...)]]。
そして [[HTML WG]] から [[FPWG]] として出版されたのが[TIME[2013年11月][2013-11]]というわけです。

つまり、 [[DOM 4.1]] の編集者達は、意図的になのかどうかは知りませんが、
自分達の関わっていない時代のことへの言及を省いた、ということです。

;; [[FPWD]] というのは [[W3C Process]] 上の文書の段階の名前なので、
文字通り「first」の出版物とは限りません。[TIME[2013年11月][2013-11]]に [[FPWD]]
が出版されたのは事実であり、嘘はついていません。

;; [26] ちなみに [[W3C]] [[WebApps WG]] は現在の [CITE[DOM Standard]] とは別路線の、
従来の [[DOM3]] の延長にある [[DOM4 Core]] の開発を2009年に始めていますが (その後断念)、
それにも触れられていません。まあ些細なことだから良いのでしょう。


[27] [CITE@en[Update goals…]]
([[chaals]]著, [TIME[2017-02-28 03:23:24 +09:00]])
<https://github.com/w3c/dom/commit/afdc6b1bbd863fac43581c321a999ab771fa7d23>

[28] [CITE@en[Re: Call for Consensus - DOM 4.1 to FPWD]]
([[chaals@yandex-team.ru]]著, [TIME[2017-03-16 09:49:44 +09:00]])
<https://lists.w3.org/Archives/Public/public-webapps/2017JanMar/0046.html>

[29] [CITE@en[W3C DOM 4.1]]
([TIME[2017-03-21 23:01:09 +09:00]])
<https://www.w3.org/TR/2017/WD-dom41-20170321/>

[30] >>29 [[W3C]] の[[トップページ]]で告知されてないな:
[CITE@en-US[March | 2017 | W3C News]] ([TIME[2017-04-08 16:44:18 +09:00]]) <https://www.w3.org/blog/news/archives/date/2017/03>


[31] [CITE@en[W3C DOM 4.1]]
([TIME[2017-04-21 02:57:22 +09:00]])
<https://www.w3.org/TR/2017/WD-dom41-20170420/>

[32] >>31 [[Normative References]] に [[WHATWG]] の [CITE[DOM Standard]]
が入っていて、いくつかの用語が [CITE[DOM Standard]] を参照している。独創的だ。

[33] [CITE@en[W3C DOM 4.1]]
([TIME[2017-06-09 20:24:50 +09:00]])
<https://www.w3.org/TR/2017/WD-dom41-20170609/>

[FIG(quote)[
[FIGCAPTION[
[34] [CITE@en[W3C DOM 4.1]]
([TIME[2017-03-07 04:27:46 +09:00]])
<https://w3c.github.io/dom/>
]FIGCAPTION]

> W3C DOM 4.1
> Editor's Draft, 7 March 2017

]FIG]


[FIG(quote)[
[FIGCAPTION[
[35] [CITE@en[Invalid iterable declarations · Issue #149 · w3c/dom]]
([TIME[2017-07-05 14:32:08 +09:00]])
<https://github.com/w3c/dom/issues/149>
]FIGCAPTION]

> the link is outdated. please see https://www.w3.org/TR/2017/WD-dom41-20170609/ .

]FIG]

[36] 
>>33 の [[Editor's Draft]] の[[リンク]]を辿った先の >>34
は [CODE[/TR/]] よりも古い版だとかいう罠。
他の現在のほとんどの [[W3C]] の[[仕様書]]は最新版が [[ED]]
で[[スナップショット]]が [CODE[/TR/]] に置かれているのに
([[DOM4]] もそうだったのに)、敢えて違ったことをして惑わす意図は何だろう。

[37] [CITE@en[Merge Shadow DOM into DOM 4.1? · Issue #150 · w3c/dom]]
([TIME[2017-09-07 12:06:48 +09:00]])
<https://github.com/w3c/dom/issues/150>

[38] [CITE@en[W3C DOM 4.1]]
([TIME[2017-10-21 16:10:22 +09:00]])
<https://www.w3.org/TR/2017/WD-dom41-20171021/>