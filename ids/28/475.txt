[1] [DFN[[RUBY[Mackerel][まかれる]]]] は、[[株式会社はてな]]のサーバー管理サービスです。

[2] [[Web API]] があるけど誰も使ってないのかな? ドキュメントに雑な説明しかないし書いてある通りにやっても説明なしの変なエラーが出て何がおかしいのかすらわからないし。

[3] そもそも画面的にはありそうな機能が [[API]] のドキュメントには無かったりするんだよなあ。
謹製 agent しか使うなということなのか。

[4] [CITE@ja[Mackerel API ドキュメント(v0) - Mackerel API ドキュメント (v0)]] ([TIME[2017-11-02 10:44:53 +09:00]]) <https://mackerel.io/ja/api-docs/>

[5] ドキュメントのどこにも [[URL]] が載っていませんが、書いてある [[path][URL path]]
の先頭に [CODE[https://mackerel.io]] をつければいいみたい。 [TIME[2017-11-02T01:45:49.00Z]]

[6] [[APIキー]]はオーガニゼーションごとの設定ページ
https://mackerel.io/orgs/{org}?tab=apikeys
から作成できます。ユーザーごとではなくオーガニゼーションごとに発行されます。

[7] 「サービスメトリック」のデータを取得する [[API]] は、
「*」のサービスメトリックとして投稿されたグラフのデータを取得することができますが、
自動作成される「HTTP Response Time」のデータを取得する方法はみつかりません。
[TIME[2017-11-02T01:49:28.300Z]]

[8] >>7
[[Webブラウザー]]で表示すると、 tsdb.json という URL にアクセスしているので、
グラフの範囲を全期間にして同じアクセスをしたらデータを得られます。
ただし間引かれているので、 points=... という引数を大きな値にするといい。
ただし上限が設定されているっぽいので、全範囲の全データを一度に取得することはできなそう。

[9] >>8
これだと JSON 内のキーはデータ系列の内部名しか取れない。表示名を知りたいときは同じく
service-graph-defs.json を保存する。