[11] [DFN[[[Time Zone Database]]]] は、[[現代]]の[[世界]]各地で利用されている[[時間帯]]に関する情報を集めた[[データベース]]です。

[42] [[機械可読]]な[[時間帯]]データベースとしては世界最大のもので、
多分野で非常によく用いられています。

* 呼称

[27] [DFN[tz database]]、[DFN[tzdata]]、[DFN[zoneinfo]]、[DFN[Olson database]]
など色々な名称で呼ばれています。

* 収録内容

[12] 世界中が対象です。

[31] 政府が承認した正式なものでなくても、実態があれば収録されているようです。
しかし私企業が独自に実施している[[リゾートタイム]]などは収録されていないようです。

** 過去情報

[13] [[1970年]]以前 [SRC[>>9]] は積極的な収録の対象にはなっていないようです。
現行の[[時間帯]]の過去の情報として(あれば)記載はされていますが、
現在同じ[[時間帯]]で[[1970年]]より前に[[時差]]があったとしても、
分けていません。

[EG[
[14] [[日本]]の[[西部標準時]]は1937年に[[廃止]]されたので、収録されていません。
(かつて含まれていましたが、誤りとして削除されています。)
]EG]

[REFS[
[FIG(quote)[
[FIGCAPTION[
[9] ([TIME[2014-10-23 00:54:37 +09:00]] 版)
<https://www.ietf.org/timezones/data/CONTRIBUTING>
]FIGCAPTION]

> the data entries do not cover all of civil time before 1970

]FIG]
]REFS]

[34] 実際色々と実態と合っていない情報や怪しい情報が含まれているのですが
(各地の[[標準時]]の項を参照。)、範囲外ということでほとんど検証もされていないようです。
[[tzdata]] 自体には注意書きがありますが、 [[tzdata]] を情報源として使っている[[プラットフォーム]]や
[[Webサイト]]はそのような注意書きもないので、要注意です。

[33] [[標準時]]制定前は代表点の[[経度]]が選ばれてその[[地方時][太陽時]]に当たる[[時差]]が記述されています。
これは [[tzdata]] の側で適当に決定したもので、必ずしも公式なものとは一致していません。

;; 具体例は[[日本標準時]]を参照。

** 標準時名

[37] 各[[時間帯]]に含まれる各時代の[[時差]]には、名前が付されていることがあります。

[EG[
[38] 例えば [CODE[Asia/Tokyo]] には、時代によって [[JST]] や [[JCST]]
のような名前が与えられています。
]EG]

[39] この名前は、政府等が正式に用いているものの場合もあれば、
[[tzdata]] 側で勝手に付けたものもあるようです。現地人には馴染みの薄いものの場合もあります。

[41] 同じ[[時差]]でも名前だけ切り替わっているものもいくつかありますが、
その時期も、何が根拠なのかよくわからないことが多いです。

[40] [TIME[2016年][year:2016]]頃から、
勝手につけた根拠の薄い名前は削除していく方針になったようで、
徐々に削られていっています。

[48] また、各時代の時間帯名が必ず反映されているわけでもない [SRC[>>47]] ようです。

[REFS[
- [47] [CITE@en[Document preferences for historical abbreviations]] ([[eggert]]著, [TIME[2017-01-17 08:53:45 +09:00]]) <https://github.com/eggert/tz/commit/7c9253c7b3026f2519f01f117bca35c8e9205342>
]REFS]

** 情報源

[17] [[Shanks & Pottenger]] の他、多くの人々からの情報提供により構築されています。

[32] [[メーリングリスト]]での情報提供による改訂があった場合、
[[コメント]]としてデータファイルに説明や出典が記載されています。

* 閏秒

[49] [[tzdata]] には[[閏秒]]の一覧表も含まれています。

-*-*-

[44] あまり知られていませんが、 [[tzdata]] には「right」
な時刻用を生成するオプションがあります。

[45] かつては [CODE[right/[[Australia/Adelaide]]]] のように [DFN[[CODE[right/]]]]
を頭に付けることで、 (本来[[閏秒のないUTC]]を採用しているはずの)
[[POSIX]] システムで[[閏秒]]を考慮した別の[[時間帯]]を選択できるようになっていました。
しかしこの方式は [CODE[localtime]] と [CODE[gmtime]] の[[差]]で[[時差]]を求める[[アプリケーション]]と互換性が無いことがわかり、
用いられなくなっています。 [SRC[>>43]]

[46] 本来[[閏秒]]の実施と[[時間帯]]・[[時差]]は[[直交]]する概念のはずですから、
そもそもこの仕組みには無理がありそうです。

[REFS[
- [43] [CITE@en[tz/Makefile at master · eggert/tz]] ([TIME[2017-02-13 00:16:35 +09:00]]) <https://github.com/eggert/tz/blob/master/Makefile#L496>
]REFS]

* 管理

[15] 元々は [[Arthur David Olson]] がメンテナンスしていましたが、2009年に
[[ICANN]] に移管されています。

[35] [[eggert]] がメンテナンスを担当しています。
正式には [[IANA]] の [[Webサイト]]で配布されていますが、
[[eggert]] の [[GitHub]] [[リポジトリー]]で随時開発が進められています。

* ライセンス

[16] [[データベース]]自体は [[Public Domain]] とされています [SRC[>>8]]。

[REFS[
[FIG(quote)[
[FIGCAPTION[
[8] ([TIME[2014-08-31 02:55:21 +09:00]] 版)
<https://www.ietf.org/timezones/data/README>
]FIGCAPTION]

> Unless otherwise specified, all files in the tz code and data are in
the public domain, so clarified as of 2009-05-17 by Arthur David Olson.
The few exceptions are code derived from BSD, which uses the BSD license.

]FIG]
]REFS]

* 文脈

[FIG(short list)[ [19] [[tzdata]] の[[時間帯]]の名前が使われている[[プロトコル要素]]
- [CODE[TZID]]
- [CODE(HTTP)@en[Time-Zone:]]
- [CODE[u-tz]]
]FIG]

[FIG(short list)[ [36] [[tzdata]] を使っている[[プラットフォーム]]や[[プログラミング言語]]
- [[MySQL]]
-- [[SQLの日時形式]]参照。
- [[PostgreSQL]]
-- [[SQLの日時形式]]参照。
- [[Oracle]]
-- [[SQLの日時形式]]参照。
- [CODE(perl)@en[DateTime.pm]]
- [[go]] [SRC[>>50]]
]FIG]

* メモ

[1] [CITE@en[RFC 6557 - Procedures for Maintaining the Time Zone Database]]
( ([TIME[2012-03-16 16:37:01 +09:00]] 版))
<http://tools.ietf.org/html/rfc6557>

[2] [CITE[IRC logs: freenode / #whatwg / 20111118]]
( ([TIME[2011-11-20 12:06:23 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20111118>


[3] [CITE@en[Distrotech/tzdata]]
( ([TIME[2015-01-08 15:42:06 +09:00]] 版))
<https://github.com/Distrotech/tzdata>

[4] [CITE@en[eggert/tz]]
( ([TIME[2015-01-08 15:44:16 +09:00]] 版))
<https://github.com/eggert/tz>

[5] [CITE[IANA — Time Zone Database]]
([TIME[2011-11-04 01:30:45 +09:00]] 版)
<https://www.iana.org/time-zones>

[6] [CITE[Index of /timezones]]
([TIME[2015-11-20 12:50:45 +09:00]] 版)
<https://www.ietf.org/timezones/>

[FIG(quote)[
[FIGCAPTION[
[7] [CITE@en[RFC 6557 - Procedures for Maintaining the Time Zone Database]]
([TIME[2015-10-23 14:19:11 +09:00]] 版)
<https://tools.ietf.org/html/rfc6557>
]FIGCAPTION]

> No ownership claims will be made by ICANN or the IETF Trust
on the database or the code.  Any person making a contribution to the
database or code waives all rights to future claims in that
contribution or in the TZ Database.

]FIG]


[10] ([TIME[2015-08-11 11:02:03 +09:00]] 版)
<https://www.ietf.org/timezones/data/Theory>

[18] [CITE[The tz Archives]]
( ([TIME[2016-05-01 17:57:31 +09:00]]))
<https://mm.icann.org/pipermail/tz/>

[FIG(quote)[
[FIGCAPTION[
[20] [CITE[tzurl.org]]
( ([TIME[2009-03-31 21:05:50 +09:00]]))
<http://tzurl.org/>
]FIGCAPTION]

> This site provides the latest Olson DB timezone definitions in iCalendar format.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[21] [CITE@en[Google Code Archive - Long-term storage for Google Code Project Hosting.]]
( ([TIME[2016-06-15 13:05:29 +09:00]]))
<https://code.google.com/archive/p/tzurl/>
]FIGCAPTION]

> A tool to convert Olson DB timezone information to iCalendar representations

]FIG]


[22] [CITE@en[benfortuna/tzurl: Automatically exported from code.google.com/p/tzurl]]
( ([TIME[2016-06-15 13:05:45 +09:00]]))
<https://github.com/benfortuna/tzurl>

[23] [CITE@ja[tz database - Wikipedia]]
([TIME[2011-08-31 16:07:19 +09:00]] 版)
<http://ja.wikipedia.org/wiki/Tz_database>

[24] [CITE@en[draft-lear-iana-timezone-database-04 - IANA Procedures for Maintaining the Timezone Database]]
( ([TIME[2011-08-21 01:16:01 +09:00]] 版))
<http://tools.ietf.org/html/draft-lear-iana-timezone-database-04>


[FIG(quote)[
[FIGCAPTION[
[25] [CITE@en[Updating the time zone database]]
( ([TIME[2016-06-15 02:08:38 +09:00]]))
<http://nodatime.org/1.1.x/userguide/tzdb.html>
]FIGCAPTION]

> Noda Time comes with a version of the tzdb (aka zoneinfo) database, which is now hosted by IANA. This database changes over time, as countries decide to change their time zone rules. As new versions of Noda Time are released, the version of tzdb will be updated. However, you may wish to use a new version of tzdb without changing which version of Noda Time you're using. This documentation tells you how to do so.

]FIG]


[FIG(quote)[
[FIGCAPTION[
[26] [CITE@en[Joda-Time – Java date and time API - Time Zones]]
( ([[Brian S O'Neill]]著, [TIME[2016-05-27 18:54:21 +09:00]]))
<http://www.joda.org/joda-time/timezones.html>
]FIGCAPTION]

> Time zone data is provided by the public IANA time zone database. The following table shows all the time zones supported by Joda-Time, using version 2013d of the database. It is also possible to update to a later version of the database. This table can be rebuilt by running org.joda.example.time.TimeZoneTable.

]FIG]


[28] [CITE@en[draft-lear-iana-timezone-database-04 - IANA Procedures for Maintaining the Timezone Database]]
([TIME[2011-08-21 01:16:01 +09:00]])
<https://tools.ietf.org/html/draft-lear-iana-timezone-database-04>

[FIG(quote)[
[FIGCAPTION[
[29] [CITE@en[Strava Activities V3 API]]
( ([TIME[2016-07-26 09:24:09 +09:00]]))
<https://strava.github.io/api/v3/activities/>
]FIGCAPTION]

>  "timezone": "(GMT-08:00) America/Los_Angeles",

]FIG]


[30] [CITE@en[Phase out alphanumeric abbrs from etcetera]]
( ([[eggert]]著, [TIME[2016-08-24 08:35:24 +09:00]]))
<https://github.com/eggert/tz/commit/5659c5322976ea171e6a5afe14e9bc8172a51e24>

[50] [CITE[time - The Go Programming Language]] ([TIME[2017-03-10 18:06:12 +09:00]]) <https://golang.org/pkg/time/#Location>

[FIG(quote)[
[FIGCAPTION[
[51] [CITE@en[/query · API.AI]]
( ([TIME[2017-03-18 12:54:12 +09:00]]))
<https://docs.api.ai/docs/query>
]FIGCAPTION]

> timezone	String	Time zone from IANA Time Zone Database
> Examples: America/New_York, Europe/Paris	Optional.

]FIG]
