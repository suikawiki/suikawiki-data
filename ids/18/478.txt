[5] [DFN[[RUBYB[[[変異観測器]]]@en[mutation observer]]]] ([DFN[[[変異オブザーバー]]]]) は、 [[DOM]]
の変化の通知を[[スクリプト]]が受け取るための仕組みです。
予め所定の方法で観測器となる[[コールバック関数]]を指定することで、 
[[DOM木]]における[[子供]]や[[属性]]の変化を観測し、そのタイミングで処理を行うことができます。

* 処理モデル

[33] [[変異観測器]]は、[[変異]]が発生した[[タスク]]の処理後、[[マイクロタスク]]として呼び出されます。

* 歴史

** 変異イベントから変異観測器へ

[4] [[変異観測器]]は、[[変異イベント]]の代替として考案され、 [[DOM4]]
仕様に取り込まれました。

[REFS[
- [31] [CITE@en[DOM Mutation Events Replacement: The Story So Far / Existing Points  of Consensus]] ([[Rafael Weinstein]] 著, [TIME[2011-08-11 09:41:29 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0779.html>
- [32] [CITE@en[DOM Mutation Events Replacement: When to deliver mutations]] ([[Rafael Weinstein]] 著, [TIME[2011-08-11 09:44:32 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0780.html>
- [30] [CITE@en[Mutation Observers: a replacement for DOM Mutation Events]] ([[Adam Klein]] 著, [TIME[2011-09-24 06:16:40 +09:00]] 版) <http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html>
- [1] [CITE[IRC logs: freenode / #whatwg / 20120228]]
( ([TIME[2012-03-08 00:01:17 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20120228>
]REFS]

[34] [[変異観測器]]の呼び出しは[[イベントループ]]と密接に関わっているため、 [[HTML Standard]]
で規定されました。

** 構文解析器と変異観測器

[35] [[変異イベント]]は[[構文解析]]によって生じる [[DOM木]]の変化については発生しないことになっていましたが、
[[変異観測器]]はそれも観測できることと規定されました。

[REFS[
- [20] [CITE@en[Web Applications 1.0 r7484     The parser should have mutation observers.]] ([TIME[2012-10-24 07:24:00 +09:00]] 版) <http://html5.org/tools/web-apps-tracker?from=7483&to=7484>
]REFS]


[36] [CITE[Integrate with the new microtask world order. https://www.w3.org/Bugs/Pu... · d8b0057 · whatwg/dom]]
( ([TIME[2014-04-12 08:37:53 +09:00]] 版))
<https://github.com/whatwg/dom/commit/d8b0057ca0dabb961d9d8435fba5e0b5544946d8>

[37] [CITE@en[Exceptions thrown from mutation observer callbacks should be reported pe... · 2e567d3 · whatwg/dom]]
( ([TIME[2014-11-30 15:00:21 +09:00]] 版))
<https://github.com/whatwg/dom/commit/2e567d3308724b29c9787bd069332775a3dbd8cc>

[2] [CITE@en[Replacing a child within parent had the wrong previousSibling in its … · whatwg/dom@d9fbd12]]
([TIME[2015-07-24 22:54:57 +09:00]] 版)
<https://github.com/whatwg/dom/commit/d9fbd12e2115fed6e37236a90cff4dfbb959b9d0>