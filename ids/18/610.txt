[21] [DFN[Travis CI]] は、 [[CI]] の [[Webサービス]]です。
この分野では草分け的存在です。

[REFS[
- [2] [CITE@en[Travis CI - Distributed build platform for the open source community]]
( ([TIME[2012-04-08 11:34:45 +09:00]] 版))
<http://travis-ci.org/>
]REFS]

* 実行完了後の処理を指定する

[6] after_success は、複数の job が実行されるとき、そのそれぞれで実行される。
すべての job が成功した時だけ実行する方法は公式には用意されておらず、要望はあるが長期間放置されている [SRC[>>5]]。

;; [12] もう何年も経っているので、なおす気がなさそう。。。

[8] Travis の API を使って他の job の実行状況を監視し、すべて成功していたら最後に一度だけ実行するスクリプト [SRC[>>7]] が利用者により公開されている。

;; [11] しかし 1つのjob の実行時間上限を超えるほど他の job の実行完了まで時間がかかると、
エラーになってしまいます・・・。

[REFS[
- [5] [CITE@en[Single after_success callback after *all* builds · Issue #929 · travis-ci/travis-ci]] ([TIME[2015-10-08 19:52:34 +09:00]] 版) <https://github.com/travis-ci/travis-ci/issues/929>
- [7] [CITE@en[dmakhno/travis_after_all]] ([TIME[2015-10-08 19:54:53 +09:00]] 版) <https://github.com/dmakhno/travis_after_all>
]REFS]

[10] [CODE[[[after_success]]]] が失敗しても、失敗したことが無視されて全体として成功扱いになります。
[TIME[2015-12-20T15:07:41.800Z]]

[26] [CITE@en[Build Stages - Travis CI]] ([TIME[2017-12-29 01:51:08 +09:00]]) <https://docs.travis-ci.com/user/build-stages>

* IRC over TLS で結果報告する

[9] [CITE@en[IRC notifications over SSL and unstandard ports are undocumented · Issue #428 · travis-ci/docs-travis-ci-com]]
([TIME[2015-12-14 18:49:30 +09:00]] 版)
<https://github.com/travis-ci/docs-travis-ci-com/issues/428>

* submodule を自動で update しない

[13] 今まで clone 時に submodule が自動的には init & update されていませんでしたが、
2016年4月に突然仕様変更があったようで、無限に再帰的に取得されるようになりました。

[15] [CODE[.travis.yml]] で
[PRE(code)[
git:
  submodules: false
]PRE]
... と指定するとこの動作を無効化できます。

[REFS[
- [14] [CITE@en[Common Build Problems - Travis CI]] ([TIME[2016-04-30 10:42:25 +09:00]] 版) <https://docs.travis-ci.com/user/common-build-problems/#Git-Submodules-are-not-updated-correctly>
]REFS]

* Mac OS X

[16] [[Mac OS X]] でのテスト実行はなぜか非常に待たされることがあります。
(実行環境が足りてないのでしょうか。)

* メモ

[1] [CITE@en[Travis CI: Welcome to Travis CI]]
( ([TIME[2012-04-07 13:05:23 +09:00]] 版))
<http://about.travis-ci.org/>

[3] [CITE[Validate your .travis.yml file]]
( ([TIME[2014-05-12 09:59:10 +09:00]] 版))
<http://lint.travis-ci.org/>

[4] [CITE[Travis CI 使ってみた - 若葉もすなる☆日記というもの]]
( ([TIME[2013-08-09 03:44:52 +09:00]] 版))
<http://d.hatena.ne.jp/wakabatan/20120408/1333878824>

[23] 価格 <https://travis-ci.com/plans>

$129/月

デプロイ失敗後の処理をうまくやってくれない。失敗しても成功扱いになってしまう。
[TIME[2014-10-02]]

[17] ビルド中止ボタンがついていますが、まともに動かないことが多いです。
何度も押してやっと止まるか、止まらないか。

[20] ひどいときは中止完了で中止ボタンが出ないのに、なぜか実行中の表示のまま経過時間だけ無情に進み続けることもあります。

[18] [CITE@en[Build not starting on OS X · Issue #6841 · travis-ci/travis-ci]]
( ([TIME[2017-02-08 11:31:12 +09:00]]))
<https://github.com/travis-ci/travis-ci/issues/6841>

[19] [CITE@en[Customizing the Build - Travis CI]]
( ([TIME[2017-02-06 16:54:22 +09:00]]))
<https://docs.travis-ci.com/user/customizing-the-build#Build-Timeouts>

[22] [CITE@en[Using Docker in Builds - Travis CI]]
([TIME[2017-08-20 02:14:13 +09:00]])
<https://docs.travis-ci.com/user/docker/>

[24] [CITE@en[Build Environment Overview - Travis CI]]
([TIME[2017-10-06 01:06:34 +09:00]])
<https://docs.travis-ci.com/user/reference/overview/>

[25] [CITE@en[Common Build Problems - Travis CI]]
([TIME[2017-10-06 01:06:34 +09:00]])
<https://docs.travis-ci.com/user/common-build-problems/>

[27] [CITE@en[Build Stages and allow_failures do not work well together · Issue #7789 · travis-ci/travis-ci]]
([TIME[2017-12-29 13:33:40 +09:00]])
<https://github.com/travis-ci/travis-ci/issues/7789>