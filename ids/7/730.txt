* 仕様書

[REFS[
- [2] [CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-13>
- [5] '''[CITE@en[RFC 4918 - HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)]] ([TIME[2014-09-21 17:04:59 +09:00]] 版) <http://tools.ietf.org/html/rfc4918#section-13>'''
]REFS]

* 意味

[6] [CODE(HTTP)[[[207]]]] [[応答]]は、複数の[[資源]]があって複数の[[状態符号]]が適切であろう場合にその情報を伝えるものです [SRC[>>5]]。

[9] [CODE(HTTP)[[[207]]]] は [CODE(HTTP)[[[2xx]]]]、すなわち成功に分類されてはいますが、
含まれる個々の結果は成功とは限らず、部分的な成功だったり、失敗だったりします [SRC[>>5]]。

* 構文

[7] 既定の [[payload body]] は [CODE(MIME)@en[[[text/xml]]]] または
[CODE(MIME)@en[[[application/xml]]]] で、 [CODE(XMLe)@en[[[multistatus]]]]
[[要素]]が[[根要素]]であるものです [SRC[>>5]]。

;; [[XML MIME型]]も参照。

[FIG(railroad)[
= [CODE(XMLe)@en[[[multistatus]]]]
]FIG]

[10] [CODE(XMLe)@en[[[multistatus]]]] [[要素]]は、0個以上の [CODE(XMLe)@en[[[response]]]]
[[要素]]を含むことができます。 [SRC[>>5]]

[FIG(railroad)[
= *
== [CODE(XMLe)@en[[[response]]]]
]FIG]

[11] [CODE(XMLe)@en[[[response]]]] [[要素]]は各[[資源]]についての情報を含めたものであり、
それぞれの[[資源]]を識別する [CODE(XMLe)@en[[[href]]]] [[要素]]を含まなければ[['''なりません''']]。
[CODE(XMLe)@en[[[response]]]] [[要素]]の順序は任意です。 [SRC[>>5]]

[FIG(railroad)[
= [CODE(XMLe)@en[[[href]]]]
]FIG]

[1] [[応答]]中で用いる [[URL]] については構文上の制約があります。

;; [[単純参照]]を参照。

[8] [CODE(XMLe)@en[[[response]]]] [[要素]]内では [CODE(HTTP)[[[2xx]]]],
[CODE(HTTP)[[[3xx]]]], [CODE(HTTP)[[[4xx]]]], [CODE(HTTP)[[[5xx]]]]
の[[状態符号]]を使います。 [CODE(HTTP)[[[1xx]]]] は使う[['''べきではありません''']]。
[SRC[>>5]]

* 歴史

[FIG(quote)[
[FIGCAPTION[
[3] RFC 2518 (WebDAV) 10.2 207 Multi-Status
]FIGCAPTION]

> The 207 (Multi-Status) status code provides status for multiple
independent operations (see section 11 for more information).

[CODE(HTTP)[207]] (複数状態) 状態符号は、複数の独立の操作に対する状態を提供します。
]FIG]

[FIG(quote)[
[FIGCAPTION[
[4] RFC 2518 11 Multi-Status Response
]FIGCAPTION]

> The default 207 (Multi-Status) response body is a text/xml or
application/xml HTTP entity that contains a single XML element called
multistatus, which contains a set of XML elements called response
which contain 200, 300, 400, and 500 series status codes generated
during the method invocation.  100 series status codes SHOULD NOT be
recorded in a response XML element.

既定の [CODE(HTTP)[207]] (複数状態) 応答本体は
[CODE(MIME)[[[text/xml]]]] 又は [CODE(MIME)[[[application/xml]]]]
の HTTP 実体本体で、 [CODE(XML)[[[multistatus]]]] という単一の XML
要素を含んでおり、その要素は [CODE(XML)[[[response]]]]
という XML 要素の集合で、この要素は method
の呼び出しの過程で生成された [CODE(HTTP)[[[200]]]],
[CODE(HTTP)[[[300]]]], [CODE(HTTP)[[[400]]]], [CODE(HTTP)[[[500]]]]
の系列の状態符号を含みます。 [CODE(HTTP)[[[100]]]]
系列の状態符号は [CODE(XML)[record]] XML 要素中に記録する'''べきではありません'''。
]FIG]