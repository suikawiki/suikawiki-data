* 仕様書

[REFS[
- [32] '''[CITE@en[Service Workers Nightly]] ([TIME[2017-02-16 20:10:49 +09:00]]) <https://w3c.github.io/ServiceWorker/>'''
-- [33] [CITE@en[Service Workers Nightly]] ([TIME[2017-02-16 20:10:49 +09:00]]) <https://w3c.github.io/ServiceWorker/#service-worker-concept>
- [31] [CITE@en-US-x-hixie[HTML Standard]] ([TIME[2017-02-17 21:49:07 +09:00]]) <https://html.spec.whatwg.org/#link-type-serviceworker>
]REFS]

* 意味

[34] [RUBYB[サービスワーカー]@en[service worker]]は、
[[ワーカー]]の一種です。[[サービスワーカー]]は、登録した[[サービスワーカークライアント]]の[F[起源]]において実行されます。
[SRC[>>33]]

* 状態

[35] [[サービスワーカー]]は次の状態を持ちます。

[FIG(list members)[
: [DFN[[RUBYB[状態]@en[state]]]] :
[DFN[[RUBYB[構文解析済み]@en[parsed]]]],
[DFN[[RUBYB[インストール中]@en[installing]]]],
[DFN[[RUBYB[インストール済み]@en[installed]]]],
[DFN[[RUBYB[活性化中]@en[activating]]]],
[DFN[[RUBYB[活性化済み]@en[activated]]]],
[DFN[[RUBYB[冗長]@en[redundant]]]]のいずれか。初期状態は構文解析済み。 [SRC[>>33]]
: [DFN[[RUBYB[スクリプトURL]@en[script url]]]] :
[[URL]]。 [SRC[>>33]]
: [[型][スクリプト型]] : [CODE[classic][古典スクリプト]] または
[CODE[module][モジュールスクリプト]]。初期値は [CODE[classic][古典スクリプト]]。
]FIG]

* 提供される場面

[23] [[Service Workers]] は、[[保安文脈]]でしか提供されません。つまり、
[[HTTPS]] でない [[HTTP]] の[[文書]]では原則として使えません。

[27] [[アプリ内ブラウザー]]では提供されないことがあります。
(提供されない可能性が高いかもしれません。)

* 晒されている API

[22] [[Sercice Workers]] の[[スクリプト]] ([[サービスワーカー環境]])
に[[晒され]]ている [[API]] は、[[文書環境]]とは若干異なります。
[FIG(list)[
- [[文書木]]関係の [[API]] は提供されません。
-- [CODE(DOMi)@en[[[Node]]]] を[[継承]]する [CODE(DOMi)@en[[[Document]]]],
[CODE(DOMi)@en[[[Element]]]] などはありません。
- [[XHR]] は提供されません。
]FIG]

* 歴史

;; [21] [[AppCache]] も参照。

[1] [CITE[slightlyoff/NavigationController · GitHub]]
( ([TIME[2013-03-30 12:46:40 +09:00]] 版))
<https://github.com/slightlyoff/NavigationController/>

[2] [CITE[IRC logs: freenode / #whatwg / 20130422]]
( ([TIME[2013-05-03 23:39:29 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20130422>

[3] [CITE@en[ServiceWorker Design]] <https://github.com/slightlyoff/ServiceWorker/>

[4] [CITE[IRC logs: freenode / #whatwg / 20131029]]
( ([TIME[2013-10-30 20:25:08 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20131029#l-632>

[5] [CITE[Service Workers]]
( ([TIME[2013-11-06 07:17:11 +09:00]] 版))
<https://gist.github.com/slightlyoff/7fae65a908ac318f69a3>

[6] [CITE@en[Service Workers]]
( ([TIME[2014-05-08 01:04:51 +09:00]] 版))
<http://www.w3.org/TR/2014/WD-service-workers-20140508/>

[7] [CITE[Add serviceworker context · f4ffe55 · whatwg/fetch]]
( ([TIME[2014-05-20 09:04:08 +09:00]] 版))
<https://github.com/whatwg/fetch/commit/f4ffe55d27c6ce48838adaa7833f7de247e79921>

[8] [CITE@en[Service Workers]]
( ([TIME[2014-11-18 20:30:05 +09:00]] 版))
<http://www.w3.org/TR/2014/WD-service-workers-20141118/>

[9] [CITE@en[Service Workers]]
( ([TIME[2015-02-04 01:03:52 +09:00]] 版))
<http://www.w3.org/TR/2015/WD-service-workers-20150205/>

[10] [CITE@en-US[Service worker API reference - Mozilla | MDN]]
( ([TIME[2014-04-15 13:16:31 +09:00]] 版))
<https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Social_API/Service_worker_API_reference>

[11] [CITE@en[navigator.connect API]]
([TIME[2014-12-19 07:57:17 +09:00]] 版)
<http://mkruisselbrink.github.io/navigator-connect/>

[12] [CITE[Service Worker Testing - The Chromium Projects]]
([TIME[2015-02-26 09:19:38 +09:00]] 版)
<http://www.chromium.org/blink/serviceworker/testing>

[13] [CITE@en[Service Workers in Firefox Nightly - wanderview]]
([[Ben Kelly]] 著, [TIME[2015-03-25 00:12:01 +09:00]] 版)
<https://blog.wanderview.com/blog/2015/03/24/service-workers-in-firefox-nightly/>

[14] [CITE@en[Service Workers]]
( ([TIME[2015-06-23 20:12:31 +09:00]] 版))
<http://www.w3.org/TR/2015/WD-service-workers-20150625/>

[15] [CITE@en[MIX: Further explain the SW implications. · w3c/webappsec@4ead56c]]
([TIME[2015-07-21 11:23:38 +09:00]] 版)
<https://github.com/w3c/webappsec/commit/4ead56ce75e24e29bff67e905ce2335026c6a00d>

[16] [CITE@en[RfC: Service Workers]]
([[Arthur Barstow]] 著, [TIME[2015-09-21 20:27:49 +09:00]] 版)
<https://lists.w3.org/Archives/Public/public-webapps/2015JulSep/0374.html>

[17] [CITE@ja[R. NiwaさんはTwitterを使っています: "@slightlylate @hober @kennethrohde @anssik @firt @oriharel and now that the spec is near CR, we're reviewing the spec"]]
([TIME[2015-09-29 10:44:58 +09:00]] 版)
<https://twitter.com/ryosukeniwa/status/648201610800185344>

[FIG(quote)[
[FIGCAPTION[
[18] [CITE@ja[スマートフォン向けサイトに「Service Worker」を日本初導入 「Add to Homescreen」「Offline Cache」の2機能で、よりリッチなオフライン体験が可能に|プレスリリース|リクルート住まいカンパニー]]
([TIME[2015-10-07 15:35:02 +09:00]] 版)
<http://www.recruit-sumai.co.jp/press/2015/10/service-workeradd-to-homescreenoffline-cache2.html>
]FIGCAPTION]

> 不動産・住宅サイト『SUUMO(スーモ)』のスマートフォン用サイトのリニューアル版を本日10/7(水)公開し、 Webブラウザの最新技術 「Service Worker」 を日本で初導入、「Add to Homescreen」「Offline Cache」の2機能が使用可能となりました。

]FIG]


[19] [CITE@en-US[Using Service Workers - Web APIs | MDN]]
([TIME[2015-11-11 22:20:54 +09:00]] 版)
<https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers>

[20] [CITE[Service Worker の update()]]
([TIME[2015-09-25 09:50:11 +09:00]] 版)
<http://blog.nhiroki.jp/2015/06/22/service-worker-update/>

[25] [CITE@en[Service Workers - MozillaWiki]]
([TIME[2016-04-15 17:30:21 +09:00]] 版)
<https://wiki.mozilla.org/Service_Workers>

[26] [CITE[Service worker meeting notes - JakeArchibald.com]]
([TIME[2016-08-12 17:46:03 +09:00]])
<https://jakearchibald.com/2016/service-worker-meeting-notes/>

- [24] [CITE@en[Service Workers Nightly]] ([TIME[2016-03-02 17:37:28 +09:00]] 版) <https://slightlyoff.github.io/ServiceWorker/spec/service_worker/>

[28] [CITE@en[Service Workers Nightly]]
([TIME[2016-10-25 17:02:58 +09:00]])
<https://w3c.github.io/ServiceWorker/>

[29] [CITE@en[Replace skip-service-worker flag with service-workers mode]]
([[jakearchibald]]著, [TIME[2017-02-14 22:07:54 +09:00]])
<https://github.com/whatwg/fetch/commit/d41c2380dc828e7a23c6196a344b42b2d0e9beec>

[30] [CITE@en[Add <link rel=serviceworker>+associated attributes]]
([[sideshowbarker]]著, [TIME[2017-02-16 04:52:40 +09:00]])
<https://github.com/whatwg/html/commit/c5d4f5cbee270e81fd7ed49fd62ca2cd26741240>