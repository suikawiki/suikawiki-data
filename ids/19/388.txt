[8] 
[DFN[[CODE[-*- coding -*-]]]]
は、
[[テキストファイル]]の[[文字コード]]を指定するものです。

* 値

[13] 
[CODE[coding]]
の値には
[[coding system]]
を指定できます。


[14] 
[CITE[Emacs]] の [[coding system]] は、[[文字コード]]と[[改行コード]]を組合せた概念です。
[[文字コード]]の名称または[[文字コード]]と[[改行コード]]を組合せた名称を記述できます。
[SEE[ [[coding system]] ]]

* 文脈

** [CODE[-*-]] 行

[9] 
[CITE[Emacs]] では [CODE[-*-]] [[行]]に[[局所変数]]を記述できます。
[CODE[-*-]] [[行]]は[[ファイル]]の先頭 ([[shebang]] があればその次) の[[行]]に記載します。
[SEE[ [CODE[-*-]] ]]

[10] 
記述できる特別な[[局所変数]]の1つが [CODE[coding]] です。

[18] 
[[UTF-16]] や [[UTF-32]] などでも機能するのかは定かではありません。

** 局所変数群並び

[11] 
[CITE[Emacs]] では[[局所変数群並び]]に[[局所変数]]を記述できます。
[[局所変数群]]は[[ファイル]]の末尾に記載します。
[SEE[ [[局所変数群並び]] ]]

[12] 
記述できる特別な[[局所変数]]の1つが [CODE[coding]] です。

[17] 
[[局所変数群]]と [[UTF-16]] のような組合せが機能するのかは定かではありません。

** 複数個の指定

[15] 
[[局所変数]]は複数個記述できます。
[SEE[ [[局所変数]] ]]

[16] 
[CODE[coding]] が複数個指定されたとき適当に動作するかどうかは定かではありません。
特に、矛盾する値が指定されたときの挙動は不明瞭です。

* 関連

[SEE[ [[Emacsにおける文字コード]] ]]

* メモ

[1] [CITE@ja-JP[多言語化]]
( ([TIME[2013-03-11 18:29:54 +09:00]] 版))
<http://doc.ruby-lang.org/ja/1.9.3/doc/spec=2fm17n.html#magic_comment>

[FIG(quote)[
[FIGCAPTION[
[2] [CITE@ja-JP[多言語化 (Ruby 1.9.3)]]
([TIME[2015-12-14 00:26:12 +09:00]])
<http://docs.ruby-lang.org/ja/1.9.3/doc/spec=2fm17n.html#magic_comment>
]FIGCAPTION]

> マジックコメントを使うことにより Ruby 実行系にスクリプトエンコーディングを 伝えることができます。マジックコメントとはスクリプトファイルの1行目に書かれた
> # coding: euc-jp
> という形式のコメントのことです。1 行目が shebang である場合、マジックコメントは 2 行目に 書くことができます(それ以降の行ではいけません。無視されます)。上の形式以外にも
> # encoding: euc-jp
> # -*- coding: euc-jp -*-
> # vim:set fileencoding=euc-jp:
> などの形式を解釈します。
> #!/bin/sh
> exec ruby19 -x "$0" "$@"
> #!ruby
> # coding: utf-8
> このように -x オプションを使っている場合には「#! で始まり、ruby がある行」 の次の行に書きます。

]FIG]

[5] [CODE[vim:]] も参照。

- [6] [CITE@en[PEP 263 -- Defining Python Source Code Encodings | Python.org]]
([TIME[2017-02-22 15:06:02 +09:00]])
<https://www.python.org/dev/peps/pep-0263/>
-- [7] 移転確認 [TIME[2025-11-03T15:35:52.800Z]]
--
[3] 
[CITE@en[PEP 263 – Defining Python Source Code Encodings | peps.python.org]], [TIME[2025-05-17T08:38:59.000Z]], [TIME[2025-05-19T08:42:59.557Z]] <https://peps.python.org/pep-0263/>


[4] [[pod]] にも [CODE[# ENCODING:]] を書く流儀 (非標準) があるようです。




[19] 
[CITE@en[PEP 263 -- Defining Python Source Code Encodings | Python.org]]
([TIME[2017-02-22 15:05:56 +09:00]])
<https://www.python.org/dev/peps/pep-0263/>
