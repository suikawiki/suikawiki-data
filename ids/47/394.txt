[1] 
1つの[[テキストファイル]]の[[文字コード]]体系は通常は1つだけですが、
稀に複数の[[文字コード]]体系が混在していることがあります。





* 実利用例


[42] [CITE[i-DNS.net Main Page]], [TIME[2025-06-24T12:21:16.000Z]], [TIME[2001-02-01T06:24:52.373Z]] <https://web.archive.org/web/20010201060300/http://i-dns.net/>

[43] >>42 は [[Big5]], [[GB 2312]], [[Shift_JIS]], [[EUC-KR]], [[Windows-1256]]
が混在した文書です(!)。 

;; [44] [CODE[document.charset]] も参照。

[45] 現在の [[Windows]] の [[Firefox]] と [[Chrome]] では [[Windows-1252]]
と誤認されてしまいます。 [[文字コード選択メニュー]]もないので[[文字化け]]の解消方法がありません。
[[Firefox]] の修復機能も有効になりません。



[2] 
[TIME[2025-11-08T13:15:45.000Z]]
<https://web.archive.org/web/19961219091131im_/http://websmile.pef.zcu.cz/>

[6] 
[TIME[2025-11-08T13:16:53.000Z]]
<https://web.archive.org/web/20000829132216im_/http://www.cdac.org.in/html/gist/multitxt.htm>

[7] 
[TIME[2025-11-08T13:17:05.300Z]]
<https://web.archive.org/web/20000302172616im_/http://www.cdac.org.in:80/html/gist/multidld.htm>

[8] 
[TIME[2025-11-08T13:17:13.500Z]]
<https://web.archive.org/web/20000819083216im_/http://www.aczone.com/itrans/s1html.html>

[9] 
[TIME[2025-11-08T13:17:36.300Z]]
<https://web.archive.org/web/20000304161654im_/http://www.geocities.com/Athens/Delphi/2627/ttfonts.html>

8bit + Latin1 entities

[10] 
[TIME[2025-11-08T13:17:57.100Z]]
<https://members.tripod.com/tomcat_f14/link.html>

[[Big5]] + [[Shift_JIS]]

[11] 
[TIME[2025-11-08T13:19:56.600Z]]
<https://web.archive.org/web/20190806093220im_/http://www.angelfire.com/empire/thamizh/padanGaL/index.html>

[[UTF-16]]ed [[TSCII]], broken by insertion of [[ASCII]] trailer by the hosting server


[12] 
[TIME[2025-11-08T13:20:59.00Z]]
<https://web.archive.org/web/20070627000015im_/http://parc.cdac.in/Contents.asp>

[[PASCII]] + 7bit "UTOPIC"


[13] 
[TIME[2025-11-08T13:21:20.800Z]]
<https://lists.fu-berlin.de/pipermail/ipoa-forum/2012-September.txt>

[[ISO-8859-1]], [[ISO-8859-15]], [[UTF-8]]


[14] 
[TIME[2025-11-08T13:22:22.800Z]]
<https://thieunuvh.tripod.com/vanhoa/ConGaiviq.html>

[[VISCII]] + [[VIQR]]

[15] 
[TIME[2025-11-08T13:22:36.00Z]]
<https://thieunuvh.tripod.com/vanhoa/BaMeviq.html>

[[VISCII]] + [[VIQR]]


[16] 
[TIME[2025-11-08T13:22:54.600Z]]
<https://thieunuvh.tripod.com/vanhoa/MeToiviq.html>

[[VISCII]] + [[VIQR]]


[17] 
[TIME[2025-11-08T13:24:04.900Z]]
<https://web.archive.org/web/20230409125357im_/https://burmese.voanews.com/a/7042708.html>

[[UTF-8]] [[Unicode]] + [[Zawgyi]]


[18] 
[TIME[2025-11-08T13:25:13.700Z]]
<https://www.tamillexicon.com/uc/help>

[[UTF-8]] [[TSCII]] + [[TAB]]



- [21] [CITE[Linux Counter Summary Report]], [TIME[2025-11-17T09:39:13.000Z]], [TIME[2004-12-06T22:57:30.800Z]] <https://web.archive.org/web/20041206225537/http://counter.li.org/reports/short.html>
- [23] [CITE[Linux Counter Summary Report]], [TIME[2025-11-17T09:43:05.000Z]], [TIME[2002-02-04T15:10:29.392Z]] <https://web.archive.org/web/20020204150951/http://counter.li.org/reports/short.html>
- [24] [CITE@en[88944 - meta bug on Korean converters]], [TIME[2025-11-17T09:43:16.000Z]] <https://bugzilla.mozilla.org/show_bug.cgi?id=88944>



[22] >>21 
「Føroyar」は [[ISO-8859-1]]。
「台灣」は [[Big5]]。
[CITE[Firefox]] は
[[Windows-1252]] として読み、すぐに [[Big5]] として再読み込み。
ソース表示では [[Windows-1252]]。
[CITE[Chrome]] は [[Windows-1250]] と誤判定。

[25] >>23
「Føroyar」は [[ISO-8859-1]]。
この時点では [[Big5]] は無し。

[26] >>24 には [CITE[Mozilla]] でそれまで >>23 が正しく表示できていたものが、
[[Johab]] 対応が入った結果[[文字化け]]するようになったとの報告。
ただし本当に[[因果関係]]があったのかは不明。



[FIG(quote)[
[FIGCAPTION[
[100] 
[TIME[2025-10-26T15:24:00.500Z]]
<ftp://ontologia.hu/Hunglish/data/readme.html>
]FIGCAPTION]

>
The encoding of the sentence pair and the alignment files is mixed:
ISO Latin-2 on the Hungarian side, and ISO Latin-1 on the English side.
The overwhelming majority of the texts use compatible subsets of these
two encodings, so for viewing, the files can be considered ISO Latin-2
encoded.

]FIG]


-*-*-

[46] [[ISO-2022-JP]] と[[シフトJIS]]の混在については [[ISO-2022-JP]] 参照。

[47] [[ASCII]] と [[7ビット符号]]の混在については[[フォント依存符号化]]参照。

[28] 
明らかに誤ったもの、完全なる修復が困難なものは[[文字コードの修復]]を参照。

* 人工的な利用例


[3] 
[TIME[2025-11-08T13:15:53.800Z]]
<https://zsigri.tripod.com/fontboard/cjk/gbhzgbk.html>

[[EUC-CN]] + [[HZ]]

[4] 
[TIME[2025-11-08T13:16:06.400Z]]
<https://zsigri.tripod.com/fontboard/cjk/jis.html>

[[SJIS]] + [[日本語EUC]] + [[JISコード]]

[5] 
[TIME[2025-11-08T13:16:25.800Z]]
<https://zsigri.tripod.com/fontboard/cjk/ksc.html>

[[ISO-2022-KR]] + [[EUC-KR]]

[27] [CITE[null]], [TIME[2022-12-09T09:05:45.000Z]], [TIME[2025-11-20T15:43:39.007Z]] <https://www.regata.yar.ru/error/contact.html.var>

いろいろが混合。

[32] 
[CITE[Russification of Macintosh: Testing]], [TIME[2025-11-26T05:28:26.000Z]] <https://web.archive.org/web/20001120020200fw_/http://www.friends-partners.org/partners/rusmac/test.html>

いろいろが混合。

-*-*-

[19] [CITE[Slovni standardi]], [TIME[2025-11-13T07:43:34.000Z]], [TIME[1997-10-21T15:13:26.819Z]] <https://web.archive.org/web/19971021150753/http://www.hina.hr/hina/standardi.html>

[20] >>19 これは厳密には「混在」ではありませんが、
当時の [CODE[netscape.ini]] からの引用を含みます。
[CITE[Firefox]] は [[Windows-1252]] と認識し、
[CITE[Chrome]] は [[Shift_JIS]] と認識します。
当時の著者は [[Windows-1250]] の環境だったと推測されます。

[[Windows-1252]] として読むと

>
[PRE[
    [INTL]
    Font0=iso-8859-1,HRHelvetica,10,Courier New,10
    Font1=x-sjis,‚l‚r –¾’©,10,‚l‚r –¾’©,10
]PRE]

[[Shift_JIS]] として読むと

>
[PRE[
[INTL]
Font0=iso-8859-1,HRHelvetica,10,Courier New,10
Font1=x-sjis,[ASIS[MS][全角]] 明朝,10,[ASIS[MS][全角]] 明朝,10
]PRE]

と[[文字コード]]ごとの[[フォント]]指定で、[[日本語]]環境以外で読めないとしてもそのまま[[フォント名]]が書かれた部分だったわけです。

おそらく著者は読めないままコピペしたはずです。

この引用部分以外は [[ASCII文字]]。


* 実装

[29] [CITE@en[[[compact_enc_det]]/compact_enc_det/compact_enc_det.cc at master · google/compact_enc_det · GitHub]], [TIME[2025-11-24T07:32:16.000Z]] <https://github.com/google/compact_enc_det/blob/master/compact_enc_det/compact_enc_det.cc#L232>

>
[PRE[
// We try here to avoid having title text dominate the encoding detection,
// for the not-infrequent error case of title in encoding1, body in encoding2:
// we want to bias toward encoding2 winning.
]PRE]

[30] >>29 は[[文字コードの判定]]の実装である [CITE[ced]] の注釈ですが、
[CODE[title]] と本文とで符号化が異なるような場合がままあり、
本文を優先させるとしています。

[31] 
確かに、本文データベースからのデータを配信システム生成 HTML に差し込む際の処理が適切でないと思われる、
[[UI]] 部分と本文部分とで[[文字コード]]が異なり[[文字化け]]している事例はしばしば見かけます。



* 関連

[SEE[ [[Webブラウザーによる文字コード判定の失敗事例集]] ]]

[SEE[ [[Webにおける文字コード]], [[HTMLにおける文字コード]] ]]


* メモ