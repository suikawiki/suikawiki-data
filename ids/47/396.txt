* ロケール依存の既定の文字コード


[1] 
[[Webページ]]への [[navigate]] における[[文字コードの判定]]には色々な手法が組合せられますが、
いずれとも決めかねるとき最終的に[[利用者]]の[[ロケール]]によって決まる[[既定値]]たる[[文字コード]]が選ばれます。

** 仕様書

[REFS[

- [177] 
[CITE@en-US-x-hixie[HTML Standard]], [TIME[2025-11-04T10:59:41.000Z]], [TIME[2025-11-09T05:55:50.836Z]] <https://html.spec.whatwg.org/#determining-the-character-encoding>

]REFS]

** 概要

[2] 
[[利用者]]の[[ロケール]]が[[利用者]]がよく見る[[Webページ]]の[[自然言語]]や[[符号化]]と相関があると考えられるため、
[[ロケール]]が使われると説明されています。 [SRC[>>177]]

[4] 
歴史的にみれば [[Web]] はそれぞれの[[利用者]]の[[国]]や[[言語]]に合わせて[[地域化]]される形で普及したものであり、
各地で標準的に使われていた[[文字コード]]がその地域の[[デファクト標準]]として使われ始めました。
[[Webブラウザー]]は動作[[プラットフォーム]]の既定値、すなわち[[利用者]]の[[ロケール]]の[[文字コード]]をそのまま標準的に使っていました。
[SEE[ [[Webにおける文字コード]] ]]

[5] 
[[ロケール]]設定に依存するということは、[[ロケール]]設定が違えば[[文字化け]]するということです。
もちろんこれは望ましくないことで、[[著者]]は [[HTTP]] [CODE[charset]] や 
[CODE[<meta charset>]] で明示的に[[文字コードの指定]]を行うべきで、
[[Webブラウザー]]は[[頻度解析等の手法]]により可能な限り高精度な[[文字コードの判定]]を行うべきです。
[[ロケール]]依存の既定値は、それらでどうしても決定できない場合にだけ使われます。
[SEE[ [[encoding sniffing algorithm]] ]]

[6] 
現在となっては[[ロケール]]依存の既定値が使わざるを得ない状況はそう多くはないとはいえ、
古い時代に作られた[[Webサイト]]を中心に、未だに必要とされています。
今後急激に増える可能性は皆無ですが、
既存の [[Webサイト]] ([[Internet Archive]] 所蔵のものを含む。)
を[[後世にそのままの形で伝えていく][Web互換性]]ために [[Webブラウザー]]は恒久的に[[ロケール]]依存の既定値に対応し続けなければなりません。

-*-*-

[3] 
[CITE[HTML Standard]] には、策定当時の主要 [[Webブラウザー]]の実装状況に基づき決められた[[ロケール]]と既定の[[文字符号化]]の対応表が示されています。
[SRC[>>177]]

[7] 
この既定値は[[実装依存]]かつ[[利用者]]の指定が可能と規定されており、
[CITE[HTML Standard]] に提示された表が1つの基準となるものの、
それが強制されているわけではありません。

[8] 
実装は、実際の [[Webサイト]]の実情や他の実装の状況を勘案しつつ、
[[Web互換性]]を高めるため改善を続けることが期待されます。


-*-*-

[17] 
[CITE[HTML Standard]] の表は直接的には既定値しか定めていませんが、
[[頻度解析等の手法]]で重視するべき[[文字コード]]群の絞り込みにも[[ロケール]]情報は有用と考えられます。

[EG[

[18] 例えば[[ロケール]]が [CODE[ja]] ([[日本語]]) のとき、
[[Shift_JIS]],
[[EUC-JP]],
[[ISO-2022-JP]]
を他の[[文字コード]]より重視する動作モードで[[頻度解析等の手法]]を実行すると良さそうです。

]EG]


** [CITE[HTML Standard]] の規定の歴史的変遷


[10] 
[CITE[HTML5]] (現 [CITE[HTML Standard]]) の主要な版の変更点と、
それに関連して当時参照された実装の状況は次の通りです。

[FIG(table)[




:l: [[ロケール]]
:0: [CITE[HTML5]] 初期 [SRC[>>206]]
:a: [CITE[HTML5]] r4126 [SRC[>>206]]
:vi:[CITE[Windows Vista]] [SRC[>>183]]
:fx:[CITE[Firefox]] [SRC[>>183]]
:ch:[CITE[Chrome]] [SRC[>>183]]
:b: [CITE[HTML5]] r7958 [SRC[>>183]]
:c: [CITE[HTML5]] r8258 [SRC[>>184]], r8259 [SRC[>>185]]
:x: 現 [CITE[HTML Standard]] [SRC[>>9]]
:aug: 調整

:l:[CODE[af]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[am]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]

:l:[CODE[ar]]
:a:[[UTF-8]]
:b:[[windows-1256]]
:vi:[[windows-1256]]
:ch:[[windows-1256]]
:x:[[windows-1256]]

:l:[CODE[arn-CL]]
:fx:[[windows-1252]]
:vi:[[windows-1252]]

:l:[CODE[az]]
:ch:-
:fx:-
:vi:[[windows-1254]]
:x:[[windows-1254]]

:l:[CODE[az-Cyrl-AZ]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[ba]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[ba-RU]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[be]]
:a:[[ISO-8859-5]]
:ch:<none>
:vi:[[windows-1251]]
:fx:[[ISO-8859-5]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[be-BY]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[bg]]
:a:[[windows-1251]]
:b:[[windows-1251]]
:ch:[[windows-1251]]
:fx:[[windows-1251]]
:vi:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[bn]]
:fx:[[windows-1252]]
:ch:[[windows-1252]]

:l:[CODE[br-FR]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[bs-Cyrl-BA]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[bs-Latn-BA]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[ca]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[co-FR]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[cs]] [CODE[cs-CZ]]
:a:[[ISO-8859-2]]

:l:[CODE[cs]]
:b:[[windows-1250]]
:vi:[[windows-1250]]
:ch:[[windows-1250]]
:fx:[[ISO-8859-2]]
:x:[[windows-1250]]

:l:[CODE[cy]]
:a:[[UTF-8]]

:l:[CODE[cy-GB]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[da]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[de]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[el]]
:vi:[[windows-1253]]
:ch:[[ISO-8859-7]]
:fx:[[windows-1252]] (実際は [[ISO-8859-7]] [SRC[>>1202]])
:c:[[ISO-8859-7]]
:x:[[ISO-8859-7]]

:l:[CODE[el-GR]]
:ch:-
:fx:-
:vi:[[windows-1253]]

:l:[CODE[en]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[es]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[et]]
:b:[[windows-1257]]
:vi:[[windows-1257]]
:ch:[[windows-1257]]
:x:[[windows-1257]]

:l:[CODE[eu]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]


:l:[CODE[fa]] ([CODE[fa-IR]])
:a:[[UTF-8]]

:l:[CODE[fa]]
:b:[[windows-1256]]
:vi:[[windows-1256]]
:ch:[[windows-1256]]
:x:[[windows-1256]]

:l:[CODE[fi]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[fil]]
:fx:[[windows-1252]]
:ch:[[windows-1252]]

:l:[CODE[fo]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[fr]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[fy-NL]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ga-IE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[gl]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[gsw-FR]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[gu]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ha-Latn-NG]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[he]] ([CODE[he-IL]])
:a:[[windows-1255]]

:l:[CODE[he]]
:b:[[windows-1255]]
:vi:[[windows-1255]]
:ch:[[windows-1255]]
:fx:[[windows-1255]]
:x:[[windows-1255]]

:l:[CODE[hi]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[hr]]
:a:[[UTF-8]]
:b:[[windows-1250]]
:vi:[[windows-1250]]
:ch:[[windows-1250]]
:x:[[windows-1250]]

:l:[CODE[hu]] ([CODE[hu-HU]])
:a:[[ISO-8859-2]]

:l:[CODE[hu]]
:b:[[ISO-8859-2]]
:ch:[[ISO-8859-2]]
:fx:[[ISO-8859-2]]
:vi:[[windows-1250]]
:x:[[ISO-8859-2]]

:l:[CODE[hu-HU]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[id]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ig-NG]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[is]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[it]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[iu-Latn-CA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ja]] ([CODE[ja]], [CODE[ja-JP-mac]])
:a:[[windows-31J]] ([[Shift_JIS]])

:l:[CODE[ja]]
:b:[[Shift_JIS]]
:vi:[[Shift_JIS]]
:ch:[[Shift_JIS]]
:fx:[[Shift_JIS]]
:x:[[Shift_JIS]]

:l:[CODE[ka]]
:aug:[CODE[georgian-ps]] [SRC[>>15]]



:l:[CODE[kk]]
:a:[[UTF-8]]
:ch:-
:fx:-
:vi:[[windows-1251]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[kl-GL]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[kn]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ko]] ([CODE[ko-KR]])
:a:[[windows-949]] ([[EUC-KR]])

:l:[CODE[ko]]
:b:[[windows-949]]
:vi:[[windows-949]]
:ch:[[windows-949]]
:fx:[[windows-949]]
:x:[[EUC-KR]]

:l:[CODE[ku]]
:a:[[windows-1254]] ([[ISO-8859-9]])
:b:[[windows-1254]] (Best guess)
:x:[[windows-1254]]

:l:[CODE[ky]]
:ch:-
:fx:-
:vi:[[windows-1251]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[lb-LU]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[lt]]
:a:[[windows-1257]]
:b:[[windows-1257]]
:vi:[[windows-1257]]
:fx:[[windows-1257]]
:ch:[[windows-1257]]
:x:[[windows-1257]]

:l:[CODE[lv]] ([CODE[lv-LV]])
:a:[[ISO-8859-13]]

:l:[CODE[lv]]
:b:[[windows-1257]]
:vi:[[windows-1257]]
:ch:[[windows-1257]]
:fx:[[ISO-8859-13]]
:x:[[windows-1257]]

:l:[CODE[mk]] ([CODE[mk-MK]])
:a:[[UTF-8]]

:l:[CODE[mk]]
:ch:-
:fx:-
:vi:[[windows-1251]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[ml]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[mn]]
:ch:-
:fx:-
:vi:[[windows-1251]]
:aug:[[MNS 4330]] [SRC[>>13]]




:l:[CODE[moh-CA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[mr]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ms]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[nb]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[nl]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[nn-NO]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[no]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[nso-ZA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[oc-FR]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[or]]
:a:[[UTF-8]]

:l:[CODE[pl]] ([CODE[pl-PL]])
:a:[[ISO-8859-2]]

:l:[CODE[pl]]
:b:[[ISO-8859-2]]
:ch:[[ISO-8859-2]]
:fx:[[ISO-8859-2]]
:vi:[[windows-1250]]
:x:[[ISO-8859-2]]

:l:[CODE[pl-PL]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[prs-AF]]
:ch:-
:fx:-
:vi:[[windows-1256]]

:l:[CODE[pt]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[qut-GT]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[quz-BO]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[quz-EC]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[quz-PE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[rm-CH]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ro]]
:a:[[UTF-8]]
:vi:[[windows-1250]]
:ch:[[ISO-8859-2]]
:fx:<none>
:aug:[[ISO-8859-2]] [SRC[>>14]]




:l:[CODE[ro-RO]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[ru]]
:a:[[windows-1251]]
:b:[[windows-1251]]
:vi:[[windows-1251]]
:ch:[[windows-1251]]
:fx:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[rw-RW]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sah]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[sah-RU]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[se-FI]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[se-NO]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[se-SE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sk]]
:a:[[windows-1250]]
:vi:[[windows-1250]]
:ch:[[windows-1250]]
:fx:[[windows-1250]]
:x:[[windows-1250]]

:l:[CODE[sl]]
:a:[[ISO-8859-2]]
:b:[[ISO-8859-2]]
:ch:[[ISO-8859-2]]
:fx:[[ISO-8859-2]]
:vi:[[windows-1250]]
:x:[[ISO-8859-2]]

:l:[CODE[sl-SI]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[sma-NO]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sma-SE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[smj-NO]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[smj-SE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[smn-FI]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sms-FI]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sq]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[sr]]
:a:[[UTF-8]]
:b:[[windows-1251]]
:vi:[[windows-1251]]
:ch:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[sr-Latn-BA]]
:vi:[[windows-1250]]
:ch:-
:fx:-

:l:[CODE[sr-Latn-SP]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[sv]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[sw]]
:vi:[[windows-1252]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ta]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[te]]
:ch:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[tg]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[tg-Cyrl-TJ]]
:vi:[[windows-1251]]
:ch:-
:fx:-

:l:[CODE[th]]
:a:[[windows-874]] ([[TIS-620]])
:b:[[windows-874]]
:fx:[[windows-874]]
:ch:[[windows-874]]
:vi:[[windows-874]]
:x:[[windows-874]]

:l:[CODE[tk-TM]]
:ch:-
:fx:-
:vi:[[windows-1250]]

:l:[CODE[tn-ZA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]


:l:[CODE[tr]] ([CODE[tr-TR]])
:a:[[windows-1254]] ([[ISO-8859-9]])

:l:[CODE[tr]]
:b:[[windows-1254]]
:vi:[[windows-1254]]
:ch:[[windows-1254]]
:fx:[[windows-1254]]
:x:[[windows-1254]]

:l:[CODE[tt]]
:ch:-
:fx:-
:vi:[[windows-1251]]
:c:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[tzm-Latn-DZ]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[ug-CN]]
:vi:[[windows-1256]]
:ch:-
:fx:-

:l:[CODE[uk]]
:a:[[windows-1251]]
:b:[[windows-1251]]
:vi:[[windows-1251]]
:ch:[[windows-1251]]
:fx:[[windows-1251]]
:x:[[windows-1251]]

:l:[CODE[ur]]
:ch:-
:fx:-
:vi:[[windows-1256]]

:l:[CODE[uz]]
:ch:-
:fx:-
:vi:[[windows-1254]]

:l:[CODE[uz-Cyrl-UZ]]
:ch:-
:fx:-
:vi:[[windows-1251]]

:l:[CODE[vi]]
:a:[[UTF-8]]
:b:[[windows-1258]]
:ch:[[windows-1258]]
:vi:[[windows-1258]]
:x:[[windows-1258]]
:aug:
[[Windows-1252]] [SRC[>>193]]

:l:[CODE[wee-DE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[wen-DE]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[wo-SN]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[xh-ZA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[yo-NG]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:[CODE[zh-CN]]
:a:[[GB18030]]
:b:[[GB18030]]
:vi:[[GB18030]]
:ch:[[GB18030]]
:fx:[[GB18030]]
:x:[[GBK]]

:l:[CODE[zh-HK]]
:ch:-
:fx:-
:vi:[[Big5]]
:x:[[Big5]]

:l:[CODE[zh-Hans]]
:ch:-
:fx:-
:vi:[[GB18030]]
:x:[[GBK]]

:l:[CODE[zh-Hant]]
:ch:-
:fx:-
:vi:[[Big5]]
:x:[[Big5]]

:l:[CODE[zh-MO]]
:ch:-
:fx:-
:vi:[[Big5]]
:x:[[Big5]]

:l:[CODE[zh-SG]]
:ch:-
:fx:-
:vi:[[GB18030]]
:x:[[GBK]]

:l:[CODE[zh-TW]]
:a:[[Big5]]
:b:[[Big5]]
:vi:[[Big5]]
:ch:[[Big5]]
:fx:[[Big5]]
:x:[[Big5]]


:l:[CODE[zu-ZA]]
:vi:[[windows-1252]]
:fx:[[windows-1252]]

:l:西洋
:0:[[windows-1252]]

:l:その他
:a:[[windows-1252]]
:b:[[windows-1252]]
:x:[[windows-1252]]




]FIG]

-*-*-

[205] 
[[ロケール]]依存の既定値について、 [CITE[HTML5]] の当初の規定は「主に[[西洋]] (Western)
では [[Windows-1252]]」というだけしかありませんでした。
[SRC[>>204]]

[206] 
その後 [[Mozilla][Mozilla Suite]] 1.9.1 に基づく表に改められました。
[SRC[>>204]]

[FIG(list middle)[

[PRE[
      <tr>
       <td>ar
       <td>UTF-8

      <tr>
       <td>be
       <td>ISO-8859-5

      <tr>
       <td>bg
       <td>windows-1251

      <tr>
       <td>cs<!-- -CZ -->
       <td>ISO-8859-2

      <tr>
       <td>cy
       <td>UTF-8

      <tr>
       <td>fa<!-- -IR -->
       <td>UTF-8

      <tr>
       <td>he<!-- -IL -->
       <td>windows-1255

      <tr>
       <td>hr
       <td>UTF-8

      <tr>
       <td>hu<!-- -HU -->
       <td>ISO-8859-2

      <tr>
       <td>ja <!-- and ja-JP-mac -->
       <td>windows-31J <!-- Shift_JIS -->

      <tr>
       <td>kk
       <td>UTF-8

      <tr>
       <td>ko<!-- -KR -->
       <td>windows-949 <!-- EUC-KR -->

      <tr>
       <td>ku
       <td>windows-1254 <!-- ISO-8859-9 -->

      <tr>
       <td>lt
       <td>windows-1257

      <tr>
       <td>lv<!-- -LV -->
       <td>ISO-8859-13

      <tr>
       <td>mk<!-- -MK -->
       <td>UTF-8

      <tr>
       <td>or
       <td>UTF-8

      <tr>
       <td>pl<!-- -PL -->
       <td>ISO-8859-2

      <tr>
       <td>ro
       <td>UTF-8

      <tr>
       <td>ru
       <td>windows-1251

      <tr>
       <td>sk
       <td>windows-1250

      <tr>
       <td>sl
       <td>ISO-8859-2

      <tr>
       <td>sr
       <td>UTF-8

      <tr>
       <td>th
       <td>windows-874 <!-- TIS-620 -->

      <tr>
       <td>tr<!-- -TR -->
       <td>windows-1254 <!-- ISO-8859-9 -->

      <tr>
       <td>uk
       <td>windows-1251

      <tr>
       <td>vi
       <td>UTF-8

      <tr>
       <td>zh-CN
       <td>GB18030

      <tr>
       <td>zh-TW
       <td>Big5

      <tr>
       <td>All other locales
       <td>windows-1252
]PRE]

]FIG]


[192] 
更に当時の [[Webブラウザー]]の挙動の調査が進められました。 [SRC[>>191]]

>
[PRE[
Locale     Description     Vista           Chrome          Spec/Firefox
ro         Romanian        windows-1250    ISO-8859-2      windows-1252
cs         Czech           windows-1250    windows-1250    ISO-8859-2
hu         Hungarian       windows-1250    ISO-8859-2      ISO-8859-2
lv         Latvian         windows-1257    windows-1257    ISO-8859-13
sl         Slovenian       windows-1250    ISO-8859-2      ISO-8859-2
pl         Polish          windows-1250    ISO-8859-2      ISO-8859-2
be         Belarusian      windows-1251    <none>          ISO-8859-5
el         Greek           windows-1253    ISO-8859-7      windows-1252
]PRE]

[19] 
その結果を踏まえた変更の経緯が [CITE[HTML5]] に注釈として記録されています。 [SRC[>>195]]

>
[PRE[
      <!-- af, Afrikaans, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- am, Amharic, uses windows-1252: Firefox and Chrome agreed -->

      <tr>
       <td>ar
       <td>Arabic
       <td>windows-1256 <!-- Windows Vista and Chrome agreed -->

      <!-- arn-CL, Mapudungun (Chile), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- az, Azeri, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1254 -->

      <!-- az-Cyrl-AZ, Azeri (Cyrillic, Azerbaijan), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- ba-RU, Bashkir (Russia), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- be, Belarusian, is not listed here because Windows Vista wanted windows-1251, Chrome wanted <none>, and Firefox wanted ISO-8859-5 -->

      <!-- be-BY, Belarusian (Belarus), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <tr>
       <td>bg
       <td>Bulgarian
       <td>windows-1251 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- bn, Bengali, uses windows-1252: Firefox and Chrome agreed -->

      <!-- br-FR, Breton (France), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- bs-Cyrl-BA, Bosnian (Cyrillic, Bosnia and Herzegovina), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- bs-Latn-BA, Bosnian (Latin, Bosnia and Herzegovina), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- ca, Catalan, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- co-FR, Corsican (France), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>cs
       <td>Czech
       <td>windows-1250 <!-- Windows Vista and Chrome agreed (but disagreed with Firefox, which thought the encoding should be ISO-8859-2) -->

      <!-- cy-GB, Welsh (United Kingdom), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- da, Danish, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- de, German, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- el, Greek, is not listed here because Windows Vista wanted windows-1253, Chrome wanted ISO-8859-7, and Firefox wanted windows-1252 -->

      <!-- el-GR, Greek (Greece), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1253 -->

      <!-- en, English, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- es, Spanish, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <tr>
       <td>et
       <td>Estonian
       <td>windows-1257 <!-- Windows Vista and Chrome agreed -->

      <!-- eu, Basque, uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>fa
       <td>Persian
       <td>windows-1256 <!-- Windows Vista and Chrome agreed -->

      <!-- fi, Finnish, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- fil, Filipino, uses windows-1252: Firefox and Chrome agreed -->

      <!-- fo, Faroese, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- fr, French, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- fy-NL, Frisian (Netherlands), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- ga-IE, Irish (Ireland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- gl, Galician, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- gsw-FR, Alsatian (France), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- gu, Gujarati, uses windows-1252: Firefox and Chrome agreed -->

      <!-- ha-Latn-NG, Hausa (Latin, Nigeria), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>he
       <td>Hebrew
       <td>windows-1255 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- hi, Hindi, uses windows-1252: Firefox and Chrome agreed -->

      <tr>
       <td>hr
       <td>Croatian
       <td>windows-1250 <!-- Windows Vista and Chrome agreed -->

      <tr>
       <td>hu
       <td>Hungarian
       <td>ISO-8859-2 <!-- Chrome and Firefox agreed (but disagreed with Windows Vista, which thought the encoding should be windows-1250) -->

      <!-- hu-HU, Hungarian (Hungary), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- id, Indonesian, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- ig-NG, Igbo (Nigeria), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- is, Icelandic, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- it, Italian, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- iu-Latn-CA, Inuktitut (Latin, Canada), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>ja
       <td>Japanese
       <td>Shift_JIS <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- kk, Kazakh, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- kl-GL, Greenlandic (Greenland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- kn, Kannada, uses windows-1252: Firefox and Chrome agreed -->

      <tr>
       <td>ko
       <td>Korean
       <td>windows-949 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <tr>
       <td>ku
       <td>Kurdish
       <td>windows-1254 <!-- Best guess -->

      <!-- ky, Kyrgyz, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- lb-LU, Luxembourgish (Luxembourg), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>lt
       <td>Lithuanian
       <td>windows-1257 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <tr>
       <td>lv
       <td>Latvian
       <td>windows-1257 <!-- Windows Vista and Chrome agreed (but disagreed with Firefox, which thought the encoding should be ISO-8859-13) -->

      <!-- mk, Macedonian, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- ml, Malayalam, uses windows-1252: Firefox and Chrome agreed -->

      <!-- mn, Mongolian, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- moh-CA, Mohawk (Mohawk), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- mr, Marathi, uses windows-1252: Firefox and Chrome agreed -->

      <!-- ms, Malay, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- nb, Norwegian Bokm&aring;l, uses windows-1252: Firefox and Chrome agreed -->

      <!-- nl, Dutch, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- nn-NO, Norwegian, Nynorsk (Norway), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- no, Norwegian, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- nso-ZA, Sesotho sa Leboa (South Africa), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- oc-FR, Occitan (France), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>pl
       <td>Polish
       <td>ISO-8859-2 <!-- Chrome and Firefox agreed (but disagreed with Windows Vista, which thought the encoding should be windows-1250) -->

      <!-- pl-PL, Polish (Poland), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- prs-AF, Dari (Afghanistan), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1256 -->

      <!-- pt, Portuguese, uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- qut-GT, K'iche (Guatemala), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- quz-BO, Quechua (Bolivia), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- quz-EC, Quechua (Ecuador), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- quz-PE, Quechua (Peru), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- rm-CH, Romansh (Switzerland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- ro, Romanian, is not listed here because Windows Vista wanted windows-1250, Chrome wanted ISO-8859-2, and Firefox wanted <none> -->

      <!-- ro-RO, Romanian (Romania), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <tr>
       <td>ru
       <td>Russian
       <td>windows-1251 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- rw-RW, Kinyarwanda (Rwanda), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- sah-RU, Yakut (Russia), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- se-FI, Sami, Northern (Finland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- se-NO, Sami, Northern (Norway), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- se-SE, Sami, Northern (Sweden), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>sk
       <td>Slovak
       <td>windows-1250 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <tr>
       <td>sl
       <td>Slovenian
       <td>ISO-8859-2 <!-- Chrome and Firefox agreed (but disagreed with Windows Vista, which thought the encoding should be windows-1250) -->

      <!-- sl-SI, Slovenian (Slovenia), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- sma-NO, Sami, Southern (Norway), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- sma-SE, Sami, Southern (Sweden), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- smj-NO, Sami, Lule (Norway), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- smj-SE, Sami, Lule (Sweden), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- smn-FI, Sami, Inari (Finland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- sms-FI, Sami, Skolt (Finland), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- sq, Albanian, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <tr>
       <td>sr
       <td>Serbian
       <td>windows-1251 <!-- Windows Vista and Chrome agreed -->

      <!-- sr-Latn-BA, Serbian (Latin, Bosnia and Herzegovina), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- sr-Latn-SP, Serbian (Latin, Serbia), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- sv, Swedish, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- sw, Kiswahili, uses windows-1252: Windows Vista, Chrome, and Firefox agreed -->

      <!-- ta, Tamil, uses windows-1252: Firefox and Chrome agreed -->

      <!-- te, Telugu, uses windows-1252: Firefox and Chrome agreed -->

      <!-- tg-Cyrl-TJ, Tajik (Cyrillic, Tajikistan), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <tr>
       <td>th
       <td>Thai
       <td>windows-874 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- tk-TM, Turkmen (Turkmenistan), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1250 -->

      <!-- tn-ZA, Setswana (South Africa), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>tr
       <td>Turkish
       <td>windows-1254 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- tt, Tatar, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <!-- tzm-Latn-DZ, Tamazight (Latin, Algeria), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- ug-CN, Uighur (PRC), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1256 -->

      <tr>
       <td>uk
       <td>Ukrainian
       <td>windows-1251 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- ur, Urdu, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1256 -->

      <!-- uz, Uzbek, is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1254 -->

      <!-- uz-Cyrl-UZ, Uzbek (Cyrillic, Uzbekistan), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->

      <tr>
       <td>vi
       <td>Vietnamese
       <td>windows-1258 <!-- Windows Vista and Chrome agreed -->

      <!-- wee-DE, Lower Sorbian (Germany), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- wen-DE, Upper Sorbian (Germany), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- wo-SN, Wolof (Senegal), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- xh-ZA, isiXhosa (South Africa), uses windows-1252: Windows Vista and Firefox agreed -->

      <!-- yo-NG, Yoruba (Nigeria), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td>zh-CN
       <td>Chinese (People's Republic of China)
       <td>GB18030 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- zh-HK, Chinese (Hong Kong S.A.R.), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted Big5 -->

      <!-- zh-Hans, Chinese (Simplified), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted GB18030 -->

      <!-- zh-Hant, Chinese (Traditional), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted Big5 -->

      <!-- zh-MO, Chinese (Macao S.A.R.), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted Big5 -->

      <!-- zh-SG, Chinese (Singapore), is not listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted GB18030 -->

      <tr>
       <td>zh-TW
       <td>Chinese (Taiwan)
       <td>Big5 <!-- Windows Vista, Chrome, and Firefox agreed -->

      <!-- zu-ZA, isiZulu (South Africa), uses windows-1252: Windows Vista and Firefox agreed -->

      <tr>
       <td colspan=2>All other locales
       <td>windows-1252
]PRE]

[24] >>198 の変更分

>
[PRE[
      <!-- ba wasn't listed at all because none of the sources knew about it. However, further feedback has changed this: -->
      <tr>
       <td>ba
       <td>Bashkir
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- be, Belarusian, was not initially listed here because Windows Vista wanted windows-1251, Chrome wanted <none>, and Firefox wanted ISO-8859-5 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>be
       <td>Belarusian
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- kk, Kazakh, was not initially listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>kk
       <td>Kazakh
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- ky, Kyrgyz, was not initially listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>ky
       <td>Kyrgyz
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- mk, Macedonian, was not initially listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>mk
       <td>Macedonian
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- sah wasn't listed at all because none of the sources knew about it. However, further feedback has changed this: -->
      <tr>
       <td>sah
       <td>Yakut
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- tg wasn't listed at all because none of the sources knew about it. However, further feedback has changed this: -->
      <tr>
       <td>tg
       <td>Tajik
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

>
[PRE[
      <!-- tt, Tatar, was not initially listed here because neither Chrome nor Firefox knew about it. For what it's worth, Windows Vista wanted windows-1251 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>tt
       <td>Tatar
       <td>windows-1251 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089 -->
]PRE]

[203] >>1201 >>1202

>
[PRE[
      <!-- el, Greek, was not initially listed here because Windows Vista wanted windows-1253, Chrome wanted ISO-8859-7, and Firefox wanted ISO-8859-7 but looked liked it wanted windows-1252 -->
      <!-- further feedback has changed this: -->
      <tr>
       <td>el
       <td>Greek
       <td>ISO-8859-7 <!-- per https://www.w3.org/Bugs/Public/show_bug.cgi?id=23090 -->
]PRE]

[194] 
既定値が存在するにも関わらず一定していないのは、当該市場でいずれかの
[[Webブラウザー]]がそれほど影響力を持っていなかったのか、
[[文字化け]]に遭遇するたびに[[文字コード指定メニュー]]で手動で切り替えていたのか、
既定値まで判断がもつれ込むことが多くなかったのか、
など考えられ、検討が必要です。
挙げられた国の多くが[[中欧]]、[[東欧]]の[[文字コード]]の混乱があった地域で、
[[自動判定]]が失敗しがちな似たような[[文字コード]]であることには注意したいです。


[REFS[

- [204] 
[CITE@en['''['''giow''']''' (2) List the default encodings by locale. · whatwg/html@96374b6 · GitHub]], [TIME[2025-11-09T06:47:28.000Z]] <https://github.com/whatwg/html/commit/96374b61a1c8898de97c7083c891b5d456ebcd2e#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947d>
-[183] [CITE@en[Web Applications 1.0 r7958     New encoding defaults based on more data.]]
( ([TIME[2013-06-12 13:49:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=7957&to=7958>
-- [191] [CITE@en[21087 – Spec repeats potential Gecko bugs about encoding defaults as the truth]], [TIME[2019-04-02T04:48:11.000Z]], [TIME[2025-11-09T06:15:37.237Z]] <https://www.w3.org/Bugs/Public/show_bug.cgi?id=21087>
-- [195] 
[CITE@en['''['''giow''']''' (3) New encoding defaults based on more data. · whatwg/html@c0a1047 · GitHub]], [TIME[2025-11-09T06:26:56.000Z]] <https://github.com/whatwg/html/commit/c0a1047485d3e456335894fce4b2675e2e7026a5#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947d>
-[184] [CITE@en[Web Applications 1.0 r8258     Add some more locales to the default encoding logic.]]
( ([TIME[2013-11-07 06:38:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8257&to=8258>
-- [197] 
[CITE@en[23089 – Incomplete coverage of Cyrillic languages that should imply a windows-1251 fallback]], [TIME[2019-04-02T04:48:11.000Z]], [TIME[2025-11-09T06:38:25.869Z]] <https://www.w3.org/Bugs/Public/show_bug.cgi?id=23089>
-- [198] 
[CITE@en['''['''giow''']''' (2) Add some more locales to the default encoding logic. · whatwg/html@f6e22a9 · GitHub]], [TIME[2025-11-09T06:39:19.000Z]] <https://github.com/whatwg/html/commit/f6e22a9c1abb9dad899f8d99262e36a14f0e9d90#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947d>
- [200] 
[CITE@en[23090 – Fallback encoding implied by the Greek locale missing]], [TIME[2019-04-02T04:48:11.000Z]], [TIME[2025-11-09T06:44:35.792Z]] <https://www.w3.org/Bugs/Public/show_bug.cgi?id=23090>
--
[185] [CITE@en[Web Applications 1.0 r8259     Add greek to the default encoding logic.]]
( ([TIME[2013-11-07 06:42:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8258&to=8259>
--- [1201] 
[CITE@en['''['''giow''']''' (2) Add greek to the default encoding logic. · whatwg/html@dc2a12a · GitHub]], [TIME[2025-11-09T06:44:58.000Z]] <https://github.com/whatwg/html/commit/dc2a12ac2687c8c784514da415160c79c85a7db2#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947d>
--
[190] [CITE@en[Web Applications 1.0 r8512 Adjust some internal comments regarding encodings]]
( ([TIME[2014-02-26 03:33:00 +09:00]] 版))
<http://html5.org/tools/web-apps-tracker?from=8511&to=8512>
--- [1202] 
[CITE@en['''['''e''']''' (0) update internal comment on encoding to be more accurate, per … · whatwg/html@bd00a63 · GitHub]], [TIME[2025-11-09T06:45:11.000Z]] <https://github.com/whatwg/html/commit/bd00a63c53f669b0a76a8364b41785d0e2dbb0ac#diff-41cf6794ba4200b839c53531555f0f3998df4cbb01a4d5cb0b94e3ca5e23947d>

]REFS]

-*-*-

[9] 
現在の [CITE[HTML Standard]] の規定 [SRC[>>177]]:  

[FIG(list middle)[ 

[PRE[
Locale language	Suggested default encoding
ar	Arabic	windows-1256
az	Azeri	windows-1254
ba	Bashkir	windows-1251
be	Belarusian	windows-1251
bg	Bulgarian	windows-1251
cs	Czech	windows-1250
el	Greek	ISO-8859-7
et	Estonian	windows-1257
fa	Persian	windows-1256
he	Hebrew	windows-1255
hr	Croatian	windows-1250
hu	Hungarian	ISO-8859-2
ja	Japanese	Shift_JIS
kk	Kazakh	windows-1251
ko	Korean	EUC-KR
ku	Kurdish	windows-1254
ky	Kyrgyz	windows-1251
lt	Lithuanian	windows-1257
lv	Latvian	windows-1257
mk	Macedonian	windows-1251
pl	Polish	ISO-8859-2
ru	Russian	windows-1251
sah	Yakut	windows-1251
sk	Slovak	windows-1250
sl	Slovenian	ISO-8859-2
sr	Serbian	windows-1251
tg	Tajik	windows-1251
th	Thai	windows-874
tr	Turkish	windows-1254
tt	Tatar	windows-1251
uk	Ukrainian	windows-1251
vi	Vietnamese	windows-1258
zh-Hans, zh-CN, zh-SG	Chinese, Simplified	GBK
zh-Hant, zh-HK, zh-MO, zh-TW	Chinese, Traditional	Big5
All other locales	windows-1252
]PRE]

]FIG]

-*-*-

[11] 
改正の過程と実装との差異は複雑に見えますが、
基本的には実態に合わせるための改良であり、
[[部分タグ]]の扱いの関係と [[Windows-1252]] を既定値の既定値とする表の構造上の複雑さによるところが多いです。

[12] 
現在の [CITE[HTML Standard]] で規定が欠落しているものの大部分は
[CITE[Windows Vista]] にあって [CITE[Chrome]] や [CITE[Firefox]]
にない[[ロケール]]です。

[16] 
いくつか調整が必要と思われるものもあります。

[15] 
[[ジョージア語]] ([CODE[ka]]) は規定が欠落していますが、
現地の利用状況によれば [[georgian-ps]] が妥当と思われます。

[13] 
[[蒙古語]] ([CODE[mn]]) は規定が欠落していますが、
現地の利用状況によれば [[MNS 4330]] が妥当と思われます。

[14] 
[[ルーマニア語]] ([CODE[ro]]) は規定が欠落していますが、
当時の複雑な[[文字コード]]事情に起因するものでしょうか。
[[ISO-8859-2]] や [[Windows-1250]] が使われたもの、
どちらも[[ルーマニア語]]の文字との同定に問題を抱えていたことと、
[[ルーマニア語]]の文字の[[ビット組合せ]]が両者で異なることが状況を複雑にしています。
ただ、 [[Windows-1252]] よりはそのどちらかを選ぶのが妥当と考えられます。
当時の [CITE[Chrome]] に合わせて [[ISO-8859-2]] とするべきでしょうか。
(現在の [CITE[Chrome]] の実装は不明。)


[193] 
[[越南語]] ([CODE[vi]]) で [[Windows-1258]] が選ばれたのは特に理由がなさそうで、
単に [[Windows]] の [[ANSIコードページ]]だからというだけと思われます。
[[Windows-1258]] は [[Web]] ではほとんど使われていない[[文字コード]]です。
[SEE[ [[Windows-1258]] ]]
[[Web]] で使われた[[越南語の文字コード]]の主要な3つのいずれかが好ましいでしょうが、
いずれか1つとも選びかねるところであり、いっそ[[フォント依存符号化]]と互換性がある
[[Windows-1252]] にした方がましという考え方もあります。
[SEE[ [[越南語の文字コード]] ]]

* TLDによる文字コード判定の補助

[25] [[TLD]] を[[文字コードの判定]]に補助的に使うことがあります。
[SEE[ [[文字コードの判定]] ]]

-*-*-

[196] 
[CITE[ced]] は [[URL]] の情報があればヒントとして使うことがあります。
[SRC[>>43]]

[20] 
[CODE[.hu]] の場合、[[ハンガリー語]]では [[Latin1]] と [[Latin2]] 
の区別が難しいとされ、それを考慮したモードに切り替わります。 [SRC[>>43]]

[21] 
[CODE[.com]] はヒントとして重視されません。 [SRC[>>43]]

[REFS[

- [43] 
[CITE@en[compact_enc_det/compact_enc_det/compact_enc_det.cc at master · google/compact_enc_det · GitHub]], [TIME[2025-05-19T15:36:17.000Z]] <https://github.com/google/compact_enc_det/blob/master/compact_enc_det/compact_enc_det.cc#L2059>

]REFS]

-*-*-

[22]  
[CITE[Firefox]] は [[TLD]] を判定に重視しています。

[39] 現行実装である [CITE[chardetng]] では
[[TLD]] に基づき動作モードが切り替わります。 [SRC[>>38, >>202, >>201]]

[23] 
かつては [CITE[HTML Standard]] の既定値に関する規定にも [[TLD]]
に基づくものを取り込ませようと試みていたようですが、
うまくいっていません。


[211] 
[CITE[chardetng]] は次の各行の最初に示すような動作モードを持っており、
それぞれその続きに示すような [[TLD]] と対応付けられています。
[SRC[>>202]]

[PRE[
Arabic ae af bh dz eg iq ir jo kw lb ly ma mr om pk ps qa sa sd sy tn xn--lgbbat1ad8j xn--mgb2ddes xn--mgb9awbf xn--mgba3a4f16a xn--mgbaam7a8h xn--mgbah1a3hjkrd xn--mgbai9azgqp6j xn--mgbayh7gpa xn--mgbc0a9azcg xn--mgbcpq6gpa1a xn--mgberp4a5d4ar xn--mgbpl2fh xn--mgbtx2b xn--ogbpf8fl xn--pgbs0dh xn--q7ce6a xn--wgbh1c xn--wgbl6a xn--ygbi2ammx ye
Baltic lt lv
CentralCyrillic ba
CentralIso hu pl si
CentralWindows cz hr ro sk
Cyrillic bg by kg kz md mk mn rs ru su tj tm ua uz xn--80ao21a xn--90a3ac xn--90ae xn--90ais xn--d1alf xn--j1amh xn--l1acc xn--p1ai
Eu eu xn--e1a4c xn--qxa6a
Generic ac ai bz cb cc cd cx dj fm in la me ms nu st tk to tv vc vu (その他)
Greek cy gr xn--qxam
Hebrew il
IcelandicFaroese fo is
Japanese jp
Korean kp kr xn--3e0b707e
Simplified cn xn--fiqs8S xn--fiqz9S
SimplifiedTraditional sg xn--clchc0ea0b2g2a9gcd xn--yfro4i67o
Thai th xn--o3cw4h
Traditional tw xn--kprw13d xn--kpry57d
TraditionalSimplified hk mo xn--j6w193g xn--mix891f
TurkishAzeri az tr
Vietnamese vn
Western edu gov mil xn--54b7fta0cc xn--fzc2c9e2c xn--xkc2al3hye2a (その他の2文字)
WesternArabic my xn--mgbx4cd0ab
WesternCyrillic am ge xn--node xn--y9a3aq
]PRE]

[212] 
比較的新しい時代に作られた [[TLD]] である [[IDN]] の物も含まれていますが、
既存の [[Webサーバー]]に割り当てられている場合に対応するためだと説明されています。
[SRC[>>199, >>202]]

[213] 
最近の新しい [[gTLD]] は Generic になります。

[214] 
新しい [[ccTLD]] は Generic にならず、なぜか Western に収容されます。
[[欧米]]等の [[ccTLD]] も既定値 Western として定義から省略されています。

[215] 
現行および過去の [[ccTLD]] との関係を整理すると次のようになります。

- [216] 明示的に分類されているもの:
ac ae af ai am az ba bg bh by bz cc cd cn cx cy cz dj dz eg eu fm fo ge gr hk hr hu il in iq ir is jo jp kg kp kr kw kz la lb lt lv ly ma md me mk mn mo mr ms my nu om pk pl ps qa ro rs ru sa sd sg si sk st su sy th tj tk tm tn to tr tv tw ua uz vc vn vu ye 
- [217] 明示されず Western に分類されるもの
-- [218] 
[[西欧]]・[[北米]]およびそれらのその他の[[海外領土]]:
ad at be ca ch de es fr gb gg gi ie it je li lu mc nl pm pt sh sm tf uk us va 
-- [219] [[北欧]]およびそれらのその他の[[海外領土]]: ax bv dk ee fi gl no se sj 
-- [220] [[南欧]]: al ht mt 
-- [221] [[オセアニア]]: as au ck fj gu hm ki mh mp nc nf nr nz pf pg pn pw sb wf ws 
-- [222] [[中南米]]:
ag an ar aw bb bj bm bo bq br bs cl co cr cu cv cw dm do ec fk gf gp gs gt gy hn jm kn ky lc mx ni pa pe pr py sr tc tt uy ve vg vi 
-- [223] [[アフリカ]]:
ao bf bi bw cf cg ci cm eh er et ga gd gh gm gn gq gw ke km lr ls mg ml mq mu mv mw mz na ne ng re rw sc sl sn so ss sv sx sz td tg tz ug yt za zm zw
-- [224] [[東南アジア]]・[[南アジア]]: bd bn bt id im io kh lk mm np ph tl tp 
-- [225] その他: aq
-- [226] 現在および過去に [[ccTLD]] として使われていないものすべて

[227] 現地の[[公用語]]や[[宗主国]]との関係、
[[フォント依存符号化]]の分布などを考慮すると、
これらを Western に分類するのはおおむね妥当な選択と思われます。

[228] 
[[ccTLD]] が近年新設された事例をみると Western に分類して問題なさそうですが、
基本的には独立前の[[国]]と同じ値を引き継ぐのが妥当でしょう。
この実装戦略を模倣するなら、未知のものは Generic に分類するのが妥当と思われます。

[26] [CITE[Firefox]] は [CITE[Chrome]] と違って [CODE[.hu]] を特別扱いしていません。
[CODE[.hu]] に関して両者の性能差は明確ではありませんが、一般論として、
[[ISO-8859-2]]、 [[Windows-1250]]、 [[Windows-1252]]
の区別は困難で、 [CITE[Firefox]] も [CITE[Chrome]] もその他の実装も正答率はやや低めです。
[[西欧]]と区別しない [CITE[Firefox]] の戦略でも十分とするか、
まだ改善の余地があると見るか、判断は難しいところです。

;; [27] 最悪[[文字コード指定メニュー]]で救済できる [[Webブラウザー]]ならともかく、
それを廃止した [CITE[Chrome]] と [CITE[Firefox]] は、
もっと頑張って正答してもらいたいところではありますが...
[[TLD]] がそれに寄与するかはまた別の問題でもあり...

[REFS[

-
[199] [CITE@en[Attachment #8336745 for bug #910211]]
( ([TIME[2013-11-23 17:34:23 +09:00]] 版))
<https://bugzilla.mozilla.org/attachment.cgi?id=8336745&action=diff#a/dom/encoding/domainsfallbacks.properties_sec2>
-
[187] [CITE[IRC logs: freenode / #whatwg / 20131127]]
( ([TIME[2013-11-28 18:40:54 +09:00]] 版))
<http://krijnhoetmer.nl/irc-logs/whatwg/20131127#l-273>
-
[188] [CITE[''''''[''''''whatwg'''''']'''''' Guessing the fallback encoding from the top-level domain name before trying to guess from the browser localization]]
( ([TIME[2013-12-19 14:28:30 +09:00]] 版))
<http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2013-December/041819.html>
-
[189] [CITE[Bug 126375 – Consider using top-level domain name for encoding sniffing]]
( ([TIME[2014-01-03 14:06:33 +09:00]] 版))
<https://bugs.webkit.org/show_bug.cgi?id=126375>
- [202] 
[CITE@en[chardetng/src/tld.rs at main · hsivonen/chardetng · GitHub]], [TIME[2025-11-09T09:48:06.000Z]] <https://github.com/hsivonen/chardetng/blob/main/src/tld.rs>
-- [38] 
[CITE@en[tld.rs - source]], [TIME[2025-05-19T13:31:23.000Z]] <https://docs.rs/chardetng/latest/src/chardetng/tld.rs.html>
- [201] 
[CITE@en[chardetng: A More Compact Character Encoding Detector for the Legacy Web]], [[Henri Sivonen]], [TIME[2020-06-08T16:23:51.000Z]], [TIME[2025-11-09T09:47:40.255Z]] <https://hsivonen.fi/chardetng/>


]REFS]





* メモ