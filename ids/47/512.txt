[1] 多くの[[ファイル]]を扱うシステムに[DFN[ファイルの時刻]]の[[属性]]がいくつかあります。


* 種別

[2] ほとんどが

- [3] [[birthtime]] : 作成日時
- [4] [[mtime]] : 変更日時
- [5] [[ctime]] : 属性を含む変更日時
- [6] [[atime]] : 最終読取日時

... のいずれかに分類できます。

[7] 
ただし各[[日時]]の厳密な意味は[[プラットフォーム]]と[[ファイルシステム]]/[[データ形式]]/[[プロトコル]]によって異なります。

[9] 
[[NTFS]] では [CODE[$STANDARD_INFORMATION]] (ファイルの内容のデータ側)
と 
[CODE[$FILE_NAME]] ([[ファイル名]]側)
にそれぞれ4種類あります。
大まかに言って、内容が変更されれば両者が変更され、
ファイル操作が行われると後者が変更されます。
ファイル1個の情報の読み書きでは基本的に前者が使われ、
ファイル一覧の表示では後者が使われます。
[[ハードリンク]]が作られると、後者が複数個になります。

* 時間帯

[10] 
[[FATの日時形式]]は[[地方時]]を保存します。[[時差]]の情報が含まれず、
どこの[[時刻]]かわかりませんし、[[標準時]]か[[夏時刻]]かもわかりません。

[11] 
それより新しいほとんどのシステムは[[時差]]の概念のない絶対的な時刻の値を保存します。
[[利用者]]に表示するときは[[システムの時間帯]]に合わせて表示されます。

[12] 
[[ZIP]] のように、古くからある標準の[[ファイルの時刻]]は >>10
で、後から拡張として追加された (つまりすべての [[ZIPファイル]]に含まれるわけではない)
[[ファイルの時刻]]は >>11 で両方が共存しているという[[書庫形式]]もあります。

[15] 
[[ZIP]] は

- [16] last mod file date / last mod file time
-- [23] 元々ある [[FATの日時形式]]そのままのもの
- [17] 拡張 [N[0x000D]] : [[UNIX]] 用 Atime, Mtime
-- [18] ほとんど使われていない
- [19] 拡張 [N[0x000A]] : [[NTFS]] 用 Mtime, Atime, Ctime
-- [22] 主に [[Windows]] で使われる
- [20] 拡張 [N[0x5455]] : [[Info-ZIP]]
-- [21] 主に [[Unix]] で使われる

... を持っています。

[REFS[

- [13] [CITE@en[zip展開後のタイムスタンプがおかしい · Issue #31 · koron/netupvim]], [TIME[2025-12-30T14:50:21.000Z]] <https://github.com/koron/netupvim/issues/31>
- [14] [CITE@en[archive/zip: handle mtime in NTFS/UNIX/ExtendedTS extra fields (18274) · Gerrit Code Review]], [TIME[2025-12-30T14:50:33.000Z]] <https://go-review.googlesource.com/c/go/+/18274>

]REFS]


* プロトコル

[FIG(short list)[ [8] [[ファイルの時刻]]に関係する[[プロトコル要素]]と機能

- [[FATの日時形式]]
- [[NTFSの日時形式]]
- [[i-node]]
- [CODE[Content-Disposition]]
- [[ZIP]]
- [CODE[stat]]
- [CODE[touch]]

]FIG]

* メモ