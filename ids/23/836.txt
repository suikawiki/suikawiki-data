[8] [[XML]] では、いくつかの[[公開識別子]]を指定した[[外部実体]] ([[DTD]])
を[[参照]]することで、 [[HTML]] の[[名前付き文字参照]]が使えるようになります。

* 仕様書

[REFS[
- [1] [CITE@en-GB-x-hixie[HTML Standard]] ([TIME[2015-03-05 09:33:40 +09:00]] 版) <https://html.spec.whatwg.org/#xml-parser>
]REFS]

* 公開識別子

[2] 次の[[公開識別子]]が[[名前付き文字参照]]についての[[実体宣言]]を含む [[DTD]]
として規定 [SRC[>>1]] されています。

[FIG(list)[
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.0 Transitional//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.1//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.0 Strict//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.0 Frameset//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML Basic 1.0//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN]]]]
- [CODE(HTML)@en[[[-//W3C//DTD MathML 2.0//EN]]]]
- [CODE(HTML)@en[[[-//WAPFORUM//DTD XHTML Mobile 1.0//EN]]]]
]FIG]

;; [7] これらは、歴史的な [[HTML]] や [[MathML]] の仕様で [[DTD]] の[[公開識別子]]として採用されていたものです。
かつてこれらの [[DTD]] を参照して記述された [[XML]] [[文書]]との互換性のため、
次に述べるような規定が必要となっています。

* 処理

[3] [[利用者エージェント]]は、[[外部実体]]を取得 ([[retrieve]]) する時、 >>2 の[[公開識別子]]が指定されていれば、
[[HTML Standard]] に示された [[DTD]] に対応するものとして処理する[['''べき''']]です [SRC[>>1]]。

;; [5] [[利用者エージェント]]は、この場合には[[外部実体]]の[[内容]]を取得しようと試みる[['''べき''']]であり、
それ以外の[[外部実体]]の[[内容]]は取得しようと試みる[['''べきではありません''']] [SRC[>>1]]。

[4] その [[DTD]] は、 [[HTML]] の[[名前付き文字参照]]すべての [[XML]] [[実体宣言]] (のみ)
を含んだものです。

* 実装

[85] [[Firefox]] では、[[システム識別子]]が[[絶対URL]]でないと ([[URL scheme]] が含まれていないと)
[[公開識別子]]が[[文字参照]]の [[DTD]] のものだとしても、無視されるようです。
[[Chrome]] ではそのようなことはありません。 [TIME[2014-03-02T05:25:20.500Z]]

* メモ

[6] [[HTML Standard]] は、これは厳密には [[XML]] 仕様に対する[[意図的違反]]ではないものの、
その精神には反している [SRC[>>1]] と述べています。 [[XML]] 仕様上は指定された[[システム識別子]]の
[[URL]] を無視して[[型録]]等に従っても違反ではありませんから、 >>3
のような動作は仕様違反ではありません。ただ >>2 のような[[公開識別子]]が元々意図していた [[DTD]]
と >>4 のような [[DTD]] は明らかに異なるもので、異なる[[公開識別子]]と [[DTD]]
を結びつけるのは確かに仕様の精神には反しているのかもしれません。
