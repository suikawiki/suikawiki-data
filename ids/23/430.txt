[7] [DFN[[RUBYB[[[認可承諾]]]@en[authorization grant]]]]フローは、 [[OAuth 2.0]]
において[[クライアント]]が[[資源所有者]]にかわって[[資源]]にアクセスするための[[アクセストークン]]を[[認可鯖]]から得るための手続きです。
その方法として [[OAuth 2.0]] では4種類の[DFN[[RUBYB[[[承諾型]]]@en[grant type]]]]と[[更新トークン]]からの取得の計5通りのフローが用意されています。
[DFN[[CODE(URI)@en[[[grant_type]]]]]] [[引数]]は、[[クライアント]]が用いたい[[承諾型]]を指定するものです。

* 仕様書

[REFS[
- [1] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-1.3>
- [4] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-4>
-- [12] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-4.1.3>
-- [13] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-4.3.2>
-- [14] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-4.4.2>
-- [5] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-4.5>
- [9] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-8.3>
- [16] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-6>
- [15] [CITE@en[RFC 6749 - The OAuth 2.0 Authorization Framework]] ([TIME[2014-12-15 14:15:35 +09:00]] 版) <http://tools.ietf.org/html/rfc6749#section-8.3>
]REFS]

* 認可承諾

[2] [DFN[[RUBYB[認可承諾]@en[authorization grant]]]]は、
[[資源所有者]]の ([[被保護資源]]へのアクセスの) [[認可]]を表す[[credentials]]で、
[[クライアント]]が[[アクセストークン]]を得るために使うフローです [SRC[>>1]]。

[3] [[OAuth 2.0]] は4種類の[DFN[[RUBYB[[[承諾型]]]@en[grant type]]]]を定義すると共に、
拡張も認めています [SRC[>>1]]。

[FIG(short list)[
- [[認可符号]]
- [[暗示的承諾]]
- [[資源所有者合言葉credentials]]
- [[クライアントcredentials]]
]FIG]

[8] [[承諾型]]の一種ではありませんが (とはいえ [CODE(URI)@en[[[grant_type]]]]
の値が割り当てられてはいますが)、既にいずれかの[[承諾型]]フローにより取得した[[更新トークン]]を使って新たに[[アクセストークン]]を取得するフロー
([CODE(URI)@en[[[grant_type]]=[[refresh_token]]]]) もあります。

* [CODE(URI)@en[grant_type]] 引数

[6] [[承諾型]]は、[[トークンエンドポイント]]の [DFN[[CODE(URI)@en[[[grant_type]]]]]]
[[引数]]で指定することになります。 

;; [11] [[トークンエンドポイント]]を使わない[[暗示的承諾型]]を除きます。

[10] 値としては、次のものがあります。
[FIG(short list)[
- [CODE(URI)@en[[[authorization_code]]]]
- [CODE(URI)@en[[[password]]]]
- [CODE(URI)@en[[[client_credentials]]]]
- [CODE(URI)@en[[[refresh_token]]]]
]FIG]

[17] その他、[[クライアント]]は[[認可鯖]]が定義する[[絶対URL]]によって拡張の[[承諾型]]を指定することができます [SRC[>>5, >>15]]。
[CODE(URI)@en[[[grant_type]]]] [[引数]]で独自の値を指定する他、
追加の[[引数]]も必要に応じて指定します。 [SRC[>>5]]

;; [22] [[OAuth 2.0]] の他の部分と違って、なぜか[[承諾型]]の拡張は[[絶対URL]]
に限定されていて、 [[URL]] でない短い値の登録は認められていないようです。
[[IANA登録簿]]も用意されていません。

* 文脈

[18] [[認可鯖]]の[[トークンエンドポイント]]に対する[[認可符号]]から[[アクセストークン]]を取得する[[要求]]では、
[CODE(URI)@en[[[grant_type]]]] [[引数]]の値は [CODE(URI)@en[[[authorization_code]]]]
としなければ[['''なりません''']] [SRC[>>12]]。

[19] [[認可鯖]]の[[トークンエンドポイント]]に対する[[資源所有者合言葉credentials]]から[[アクセストークン]]を取得する[[要求]]では、
[CODE(URI)@en[[[grant_type]]]] [[引数]]の値は [CODE(URI)@en[[[password]]]]
としなければ[['''なりません''']] [SRC[>>13]]。

[20] [[認可鯖]]の[[トークンエンドポイント]]に対する[[クライアントcredentials]]から[[アクセストークン]]を取得する[[要求]]では、
[CODE(URI)@en[[[grant_type]]]] [[引数]]の値は [CODE(URI)@en[[[client_credentials]]]]
としなければ[['''なりません''']] [SRC[>>14]]。

[21] [[認可鯖]]の[[トークンエンドポイント]]に対する[[更新トークン]]から[[アクセストークン]]を取得する[[要求]]では、
[CODE(URI)@en[[[grant_type]]]] [[引数]]の値は [CODE(URI)@en[[[refresh_token]]]]
としなければ[['''なりません''']] [SRC[>>16]]。

* 関連

[23] [CODE(URI)@en[[[response_type]]]] [[引数]]も[[承諾型]]を指定するものとされていますが、
そちらは[[認可エンドポイント]]で[[認可符号]]または[[暗示的承諾型]]のいずれかを選択するものとなっています。